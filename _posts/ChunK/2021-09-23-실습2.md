---
title:  "[ChunK] ì‹¤ìŠµ2"

categories:
  - ChunK
tags:
  - [ChunK, Music,ì‹¤ìŠµ2]

toc: false
toc_sticky: true

---
> ì´ í¬ìŠ¤íŠ¸ëŠ” í•œì–‘ëŒ€í•™êµ ìŒì•…í”„ë¡œê·¸ë˜ë°(CSE2020) ë„ê²½êµ¬ êµìˆ˜ë‹˜ ìˆ˜ì—…ì„ ì°¸ì¡°í•˜ì˜€ìŠµë‹ˆë‹¤. ê°œì¸ì ìœ¼ë¡œ ê³µë¶€í•˜ë©´ì„œ ì°¸ì¡°í•˜ë ¤ê³  ë§Œë“  í¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.

## ì‹¤ìŠµ2

***

### 1. ë‹¤ìŒ í”„ë¡œê·¸ë¨ì€ MIDIìŒ 72ì—ì„œ ì‹œì‘í•˜ì—¬ ë°˜ìŒ ë˜ëŠ” ì˜¨ìŒì„ ì˜¬ë¦¬ê±°ë‚˜ ë‚´ë¦¬ê±°ë‚˜ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ê¸°ë¥¼ ë¬´ì‘ìœ„ë¡œ ì„ íƒí•˜ì—¬ ë¬´í•œ ë°˜ë³µí•˜ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤. ì†Œë¦¬ë¥¼ ë“¤ì–´ë³´ì

```java
SinOsc s => dac;

72 => int note;
0.5 => float volume;
while(true) {
    <<< "MIDI = " , note >>>;
    Std.mtof(note) => s.freq;
    volume => s.gain;
    0.3::second => now;
    Math.random2(-2,2) +=> note;   
}
```

### 2. ìœ„ í”„ë¡œê·¸ë¨ì€ ì–´ëŠ ì •ë„ ì‹œê°„ì´ ì§€ë‚˜ë©´ MIDI ë²ˆí˜¸ê°€ ê°€ì²­ ì£¼íŒŒìˆ˜ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ê²Œ ë˜ì–´ ì†Œë¦¬ê°€ ë“¤ë¦¬ì§€ ì•Šê²Œ ë˜ëŠ” ê²½ìš°ê°€ ìƒê¸´ë‹¤. ë”°ë¼ì„œ MIDI ë²ˆí˜¸ì˜ upper bound ì™€ lower bound ë¥¼ ë‘ì–´ ê·¸ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ì§€ ì•Šê²Œ ë‹¤ìœ¼ë¯€ê³¼ ê°™ì´ í”„ë¡œê·¸ë¨ì„ ìˆ˜ì •í•˜ì˜€ë‹¤. 

```java
SinOsc s => dac;

72 => int note;
0.5 => float volume;
while(true) {
    <<< "MIDI = " , note >>>;
    Std.mtof(note) => s.freq;
    volume => s.gain;
    0.3::second => now;
    Math.random2(-2,2) +=> note;   
    if( note < 60) 60 => note; // lower bound
    if( note > 84) 84 => note; // upper bound
}
```

ì¡°ê±´ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ìƒí•œê°’ì¼ë•Œ ê°’ì´ ë”ì´ìƒ ì¦ê°€í•˜ì§€ ì•Šë„ë¡ í•´ì£¼ë©´ëœë‹¤.

***
### 3. ìœ„ í”„ë¡œê·¸ë¨ì€ 1/5ì˜ í™•ë¥ ë¡œ MIDI ìŒì´ ë³€í•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìˆë‹¤. ê°™ì€ ìŒì— ë¨¸ë¬¼ì§€ ì•Šê³  í•­ìƒ ìŒì´ ë³€í•˜ë„ë¡ í”„ë¡œê·¸ë¨ì„ ìˆ˜ì •í•˜ì. ë¬´ì‘ìœ„ ìˆ˜ê°€ 0ì´ ë‚˜ì˜¤ì§€ ì•Šë„ë¡ í•´ì•¼í•œë‹¤.

#### ë‚˜ì˜ í’€ì´
ë°°ì—´ì„ ì‚¬ìš©í•˜ì—¬ì„œ 0,3ì„ -2,-1,1,2ë¡œ mapping ì‹œì¼°ë‹¤.
```java
SinOsc s => dac;

72 => int note;
0.5 => float volume;

//global scale array
[-2,-1,1,2] @=> int offset[];

while(true) {
    <<< "MIDI = " , note >>>;
    Std.mtof(note) => s.freq;
    volume => s.gain;
    0.3::second => now;
    Math.random2(0,3) +=> int index;
    <<< index >>> ;
    offset[index] +=> note;
    if( note < 60) 60 => note; // lower bound
    if( note > 84) 84 => note; // upper bound
}
```

#### êµìˆ˜ë‹˜ì˜ í’€ì´
picked ë¼ëŠ” ìƒˆë¡œìš´ ë³€ìˆ˜ë¥¼ ë„ì…í•˜ì—¬, ìŒìˆ˜ì¼ë•Œì™€ ì–‘ìˆ˜ì¼ë•Œë¥¼ ì¡°ê±´ë¬¸ìœ¼ë¡œ ì²˜ë¦¬í•´ì£¼ì…¨ë‹¤.
```java
SinOsc s => dac;

72 => int note;
0.5 => float volume;

//global scale array
[-2,-1,1,2] @=> int offset[];
int picked;
while(true) {
    <<< "MIDI = " , note >>>;
    Std.mtof(note) => s.freq;
    volume => s.gain;
    0.3::second => now;
    Math.random2(1,4) => picked;
    if(picked == 1 || picked ==2 )
        3 -=> picked;
    else
        2 -=> picked;
    
    picked +=> note;
   
    if( note < 60) 58 => note; // lower bound
    if( note > 84) 82 => note; // upper bound
}
```

***

### 4. ë¬´ì‘ìœ„ ìˆ˜ë¡œ 0ì´ ë‚˜ì˜¤ì§€ ì•Šê²Œ í•˜ë”ë¼ë„, ìƒí•œ ë˜ëŠ” í•˜í•œì— ë‹¤ë‹¤ëì„ ë•Œ ê°™ì€ ìŒì´ ë°˜ë³µëœë‹¤. ì´ ê²½ìš°ì—ë„ ê°™ì€ ìŒì— ë¨¸ë¬¼ì§€ ì•Šë„ë¡ í”„ë¡œê·¸ë¨ì„ ìˆ˜ì •í•˜ì.

#### ë‚˜ì˜ í’€ì´
ê°„ë‹¨í•˜ê²Œ 60 ì•„ë˜ë¡œ ë„˜ì–´ê°€ë©´ 62ë¡œ 84ìœ„ë¡œ ë„˜ì–´ê°€ë©´ 82ë¡œ í•˜ë“œì½”ë”©ì„ í•´ì£¼ì—ˆë‹¤.
```java
SinOsc s => dac;

72 => int note;
0.5 => float volume;

//global scale array
[-2,-1,1,2] @=> int offset[];

while(true) {
    <<< "MIDI = " , note >>>;
    Std.mtof(note) => s.freq;
    volume => s.gain;
    0.05::second => now;
    Math.random2(0,3) +=> int index;
    <<< index >>> ;
    offset[index] +=> note;
    if( note < 60) 62 => note; // lower bound
    if( note > 84) 82 => note; // upper bound
}
```

#### êµìˆ˜ë‹˜ì˜ í’€ì´

ì¦ê°€ì‹œì¼°ë”ë‹ˆ ê²½ê³„ì„ ì´ ë„˜ì–´ê°€ë©´ ë¶€í˜¸ë¥¼ ë°˜ëŒ€ë¡œ ë°”ê¿”ì„œ ëŒ€ì…í•´ì£¼ë©´ëœë‹¤.
84ë¥¼ ë„˜ì–´ê°”ë‹¤ëŠ”ê²ƒì€ +1,+2 í–ˆë‹¤ëŠ” ê²ƒì´ë¯€ë¡œ ì•ˆìª½ìœ¼ë¡œ ëŒ€ì…ì‹œì¼œì£¼ëŠ” ë°©í–¥ì€ pickedê°’ì— 2ë°°ë¥¼ í•˜ê³  ë¶€í˜¸ë¥¼ ë°”ê¿”ì£¼ë©´ëœë‹¤.
picked ë¥¼ 2ë°°í•´ì„œ noteì—ì„œ ë¹¼ì¤€ë‹¤. ê·¸ë ‡ë‹¤ë©´ ë‚˜ê°„ë§Œí¼ ì•ˆìœ¼ë¡œ ë˜ëŒì•„ì˜¨ë‹¤.

```java
SinOsc s => dac;

72 => int note;
0.5 => float volume;

//global scale array
[-2,-1,1,2] @=> int offset[];
int picked;
while(true) {
    <<< "MIDI = " , note >>>;
    Std.mtof(note) => s.freq;
    volume => s.gain;
    0.3::second => now;
    Math.random2(-1,2) => picked;
    if(picked <= 0 )
        1 -=> picked;
    picked +=> note;
    
    if( note > 84 || note < 60) picked * 2 -=> note; 
}
```
### 5. 3ë²ˆì—ì„œ ì™„ì„±í•œ í”„ë¡œê·¸ë¨ì€ ìƒí•œê³¼ í•˜í•œì´ ê³ ì •ë˜ì–´ ìˆë‹¤. ìƒí•œê³¼ í•˜í•œì„ ìì‹ ì´ ì œì¼ ë§ˆìŒì— ë“œëŠ” ë²”ìœ„ë¡œ ìˆ˜ì •í•˜ì.
ë²”ìœ„ì— ë”°ë¼ì„œ ìŒì•…ì˜ ëŠë‚Œì´ ë‹¬ë¼ì§€ëŠ”ê²ƒì„ ë°°ì›Œë³´ì. ì¢ì€ ë²”ìœ„ì—ì„œ ì™”ë‹¤ê°”ë‹¤ í•´ë³´ê³  ë„“ì€ ë²”ìœ„ì—ì„œ ì™”ë‹¤ê°”ë‹¤ í•´ë³´ì.

```java
SinOsc s => dac;

61 => int note;
0.5 => float volume;

//global scale array
[-2,-1,1,2] @=> int offset[];
int picked;
while(true) {
    <<< "MIDI = " , note >>>;
    Std.mtof(note) => s.freq;
    volume => s.gain;
    0.3::second => now;
    Math.random2(-1,2) => picked;
    if(picked <= 0 )
        1 -=> picked;
    picked +=> note;
    
    if( note > 64 || note < 58) picked * 2 -=> note; 
}
```


### 6. ì§€ê¸ˆê¹Œì§€ ì‘ì„±í•œ í”„ë¡œê·¸ë¨ì—ì„œ ë‹¤ìŒ ìŒì„ ë¬´ì‘ìœ„ë¡œ ì •í•˜ëŠ” ì‘ì—…ì„ í•˜ëŠ” ì½”ë“œë¥¼ ë”°ë¡œ í•¨ìˆ˜ë¡œ ë¶„ë¦¬í•˜ì—¬ ì‘ì„±í•´ë³´ì. ë³€í•˜ëŠ” ë¶€ë¶„ì€ MIDIìŒ(note ë³€ìˆ˜),ìƒí•œ,í•˜í•œìœ¼ë¡œ í•˜ì—¬ í•¨ìˆ˜ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•œë‹¤. 
ë‚˜ì¤‘ì— ë‹¤ì–‘í•œ ì†Œë¦¬ë¥¼ ë‚¼ë•Œ ëœë¤í•˜ê²Œ ìŒì„ ê³ ë¥´ëŠ” ì‘ì—…ì„ ì—¬ëŸ¬ë²ˆí•œë‹¤. ê·¸ëŸ° íŒ¨í„´ì„ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ë‘ë©´ì¢‹ì„ê²ƒ ê°™ë‹¤.
í•¨ìˆ˜ì˜ return ê°’ìœ¼ë¡œ return note ë¥¼ í•´ì£¼ì§€ ì•Šì•„ì„œ, note ê°’ì´ ê³„ì† ì•ˆë³€í•˜ëŠ” ì–´ë ¤ì›€ì„ ê²ªì—ˆë‹¤.
noteë¥¼ ë³€ê²½ì‹œì¼œì£¼ëŠ”ê²ƒì„ ìŠì§€ ë§ì.
#### ë‚˜ì˜ í’€ì´
```java
SinOsc s => dac;

72 => int note;
0.5 => float volume;


int picked;
while(true) {
    <<< "MIDI = " , note >>>;
    Std.mtof(note) => s.freq;
    volume => s.gain;
    0.1::second => now;
    moveNoteRandomly(note,68,76) => note;
}

fun int moveNoteRandomly(int note,int min, int max){
    Math.random2(-1,2) => picked;
    if(picked <= 0 )
        1 -=> picked;
    picked +=> note;
    if( note > max || note < min) picked * 2 -=> note; 
        
    return note;
}
```
#### êµìˆ˜ë‹˜ì˜ í’€ì´
picked ë³€ìˆ˜ëŠ” moveNoteRandomly ì—ì„œë§Œ ì“°ì´ê¸°ë•Œë¬¸ì— local variable ë¡œ ì´ë™ì‹œì¼œì¤¬ë‹¤.
ê·¸ ì´ì™¸ì—ëŠ” ë‚´ í’€ì´ì™€ ê°™ì•˜ë‹¤.
moveNoteRandomly ì—ì„œ ìƒí•œ í•˜í•œì„ ë²—ì–´ë‚˜ì§€ ì•Šê³  ë‹¤ìŒ note ë¥¼ ê²°ì •í•´ì£¼ëŠ” ì‘ì—…ì„ ëª¨ë‘ í•œë‹¤.
```java
SinOsc s => dac;

72 => int note;
0.5 => float volume;

while(true) {
    <<< "MIDI = " , note >>>;
    Std.mtof(note) => s.freq;
    volume => s.gain;
    0.1::second => now;
    moveNoteRandomly(note,67,77) => note;
}

fun int moveNoteRandomly(int note,int min, int max){
    int picked;
    Math.random2(-1,2) => picked;
    if(picked <= 0 )
        1 -=> picked;
    picked +=> note;
    if( note > max || note < min) picked * 2 -=> note; 
        
    return note;
}
```


### 7. ì§€ê¸ˆê¹Œì§€ëŠ” ìŒì´ ë³€í™”í•˜ëŠ” í­ì´ ê¸°ê»í•´ì•¼ ì˜¨ìŒ(MIDI ìˆ˜ë¡œ 2ì— í•´ë‹¹)ì´ì—ˆë‹¤. ìŒ ë³€í™”ì˜ í­ì„ ì¡°ì •í•˜ë©´ 3 ì´ìƒìœ¼ë¡œ ì¡°ì •í•˜ì—¬ ì†Œë¦¬ê°€ ì–´ë–»ê²Œ ë‹¬ë¼ì§€ëŠ”ì§€ ê´€ì°°í•´ë³´ì. ê·¸ë¦¬ê³  ë³€í™” í­ì˜ ë„ˆë¹„ë„ moveNoteRandomly íŒŒë¼ë¯¸í„°ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì¶”ê°€í•˜ì—¬ í”„ë¡œê·¸ë¨ì„ ì¬ì‘ì„±í•˜ì.
#### ë‚˜ì˜ í’€ì´
```java
SinOsc s => dac;

72 => int note;
0.2 => float volume;

while(true) {
    <<< "MIDI = " , note >>>;
    Std.mtof(note) => s.freq;
    volume => s.gain;
    0.3::second => now;
    moveNoteRandomly(note,67,77,5) => note;
}

fun int moveNoteRandomly(int note,int min, int max, int stride){
    int picked;
    Math.random2(-(stride-1),stride) => picked;
    if(picked <= 0 )
        1 -=> picked;
    picked +=> note;
    if( note > max || note < min) picked * 2 -=> note; 
        
    return note;
}
```
#### êµìˆ˜ë‹˜ í’€ì´
ë‹¨ìˆœíˆ ì¸ìë¥¼ 4ê°œ ë°›ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“  ê²ƒì´ ì•„ë‹Œ, ê¸°ì¡´ í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¡œë”©í•˜ì˜€ë‹¤.

```java
SinOsc s => dac;

72 => int note;
0.2 => float volume;
int picked;
while(true) {
    <<< "MIDI = " , note >>>;
    Std.mtof(note) => s.freq;
    volume => s.gain;
    0.3::second => now;
    moveNoteRandomly(note,67,76,10) => note;
}

fun int moveNoteRandomly(int note,int min, int max){
    Math.random2(-1,2) => picked;
    if(picked <= 0 )
        1 -=> picked;
    picked +=> note;
    if( note > max || note < min) picked * 2 -=> note; 
        
    return note;
}

fun int moveNoteRandomly(int note,int min, int max, int stride){
    Math.random2(-(stride-1),stride) => picked;
    if(picked <= 0 )
        1 -=> picked;
    picked +=> note;
    if( note > max || note < min) picked * 2 -=> note; 
        
    return note;
}
```


### 8. ì™„ì„±í•œ í”„ë¡œê·¸ë¨ì€ ê° ìŒì˜ ê¸¸ì´ê°€ ì¼ì •í•˜ë‹¤. ê¸°ì¤€ì„ ì •í•œë‹¤ìŒì— ë°˜ì—ì„œ ë‘ë°° ì‚¬ì´ë¡œ ê¸¸ì´ë¥¼ ë¬´ì‘ìœ„ë¡œ ì„ íƒí•˜ì—¬ ìŒì˜ ê¸¸ì´ê°€ í•­ìƒ ë‹¤ë¥´ê²Œ ë“¤ë¦¬ë„ë¡ í”„ë¡œê·¸ë¨ì„ ìˆ˜ì •í•˜ì.
ìŒ ë³„ë¡œ ì†Œë¦¬ë‚´ëŠ” ì‹œê°„ì„ ì¡°ì ˆí•´ë³´ì.
ê¸°ì¤€ ìŒì˜ length ë¥¼ 0.3 ìœ¼ë¡œ ì„¤ì •í•œ ë’¤, loop ë¥¼ ëŒë•Œë§ˆë‹¤ 0.5ì—ì„œ 2ì‚¬ì´ì˜ ì‹¤ìˆ˜ë¥¼ random ìœ¼ë¡œ ìƒì„±í•´ì„œ ê¸°ì¤€ì— ê³±í•´ì¤€ë‹¤.
```java
SinOsc s => dac;

72 => int note;
0.2 => float volume;
int picked;
while(true) {
    <<< "MIDI = " , note >>>;
    0.3 => float length;
    Std.mtof(note) => s.freq;
    Math.random2f(0.5,2) *=> length;
    volume => s.gain;
    length::second => now;
    moveNoteRandomly(note,67,76,4) => note;
}

fun int moveNoteRandomly(int note,int min, int max){
    Math.random2(-1,2) => picked;
    if(picked <= 0 )
        1 -=> picked;
    picked +=> note;
    if( note > max || note < min) picked * 2 -=> note; 
        
    return note;
}

fun int moveNoteRandomly(int note,int min, int max, int stride){
    Math.random2(-(stride-1),stride) => picked;
    if(picked <= 0 )
        1 -=> picked;
    picked +=> note;
    if( note > max || note < min) picked * 2 -=> note; 
        
    return note;
}
```



## Summary
- ì ì  ëœë¤í•˜ê³  ë™ì ì¸ ìŒì•…ì„ ë§Œë“œëŠ”ê²ƒ ê°™ì€ ëŠë‚Œì´ ë“¤ì—ˆë‹¤.
- ì•„ì§ì€ ë§ì´ ì—­ë™ì ì´ì§€ ì•Šì€ ê¸°ê³„ìŒì´ì§€ë§Œ, ì ì  ë§Œë“¤ê³  ì‹¶ì€ ìŒì•…ì´ ìƒê²¼ë‹¤.
- ë‹¨ê³„ë³„ë¡œ ê¸°ì´ˆì—ì„œ í™•ì¥í•´ê°€ëŠ” ì‹ìœ¼ë¡œ ê°•ì˜ê°€ ì§„í–‰ë˜ì—ˆê¸° ë•Œë¬¸ì— ì–´ë µì§€ ì•Šê³  ì˜ ë”°ë¼ê°ˆ ìˆ˜ ìˆì—ˆë‹¤.

***


ğŸŒœ ì£¼ê´€ì ì¸ ê²¬í•´ê°€ ë‹´ê¸´ ê¸€ì…ë‹ˆë‹¤. ë‹¤ì–‘í•œ ì˜ê²¬ì´ ìˆìœ¼ì‹¤ ê²½ìš°
ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

