---
layout: single
title: "Node.js"
categories: BackEnd
tag: [total, node]
---

**노드란** 비동기(Asynchronous) 이벤트-기반(event-driven) **JavaScript 런타임 환경이다.**

---

### 01. 비동기 (Asynchronous)

**프로그램에 함수들이 서로 방해하지 않고 동시에 일어날 수 있음을 뜻함.**

예를들어 동기적으로 빨래, 설거지, 화장실 청소를 한다면, 빨래를 돌리고 다 돌아갈동안 기다렸다가 끝난 후 설거지를 하고 화장실 청소를 한다.

그치만 빨래를 돌릴 동안 설거지를 진행 한다면 시간을 절약할 수 있다.

그런 동작을 **비동기라고 생각하면 된다.**

자바스크립트로 비동기 코드를 사용하는 방법은 아래 링크로 이동

https://devshon.github.io/javascript/%EB%B9%84%EB%8F%99%EA%B8%B0/

---

### 02. 비동기 이벤트-기반 (Event-Driven)

노드 환경에서 **이벤트는 하나의 요청** 이라고 볼 수 있다. 이벤트는 클라이언트에서받는 요청이다.

백엔드 서버를 구현할 개발자에게 이벤트는 **HTTP Request** 와 같다고 봐도된다.

즉, 비동기 이벤트는 앞선 클라이언트의 요청이 끝나기 전에 다음 클라리언트의 요청을 받는것을 의미한다.

따라서, 한 시점에 여러 요청을 수행할 수 있게된다. 여기서 싱글 스레드(Single-Thread)가 등장한다.

![screencapture-7246250](/images/screencapture-7246250.png)

예를들어 인스타그램 백엔드 API라고 가정 했을 때 클라이언트(유저)가 앱에 접속하면 게시물을 조회하는 API를 통해 노드 서버에 요청한다. 여기서 **인스타그램 앱을 켜는 유저들은 모두 같은 API를 요청한다면?**

앞서 게시물 API를 요청할 여러 게시물을 조회하게 되고 게시물 뿐만 아니라 게시물의 댓글, 게시글에 담긴 사진, 유저의 정보를 가져오기 때문에 자원이 많이 들고 시간이 오래 걸리는데 그것을 **Heavy Load(직역: 무거운 짐)** 라고 부르고 **이것은 싱글 스레드에서 처리하지 않는다.**

그럼 Heavy Load는 어디서 처리를 하는가,

바로, 위에 그림 오른쪽 상단(초록색)에 있는 **C++로 짜여진 쓰레드 풀이 맡는다.**

싱글 스레드는 단지 이벤트(요청)을 처리(응답) 해주는 역할이다. Heavy Load는 내부 C++ 쓰레드 풀이 감당하고 **싱글 스레드는 방해받지 않고 계속 돌면서 요청이 끝난 데이터만 처리하기 때문에 여러 요청을 한 시점에 처리할 수 있게 되는 것이다.**

이런 환경을 가능하게끔 하는 것이 **Chrome V8 엔진이다.**

---

### 03. Javascript 런타임 환경 (feat. Chrome V8 엔진)

앞서 설명했던 비동기 이벤트-기반의 처리를 이 Chrome V8 엔진이 담당한다.

메모리 관리, 스케쥴 관리 등의 일들을 감당하게 된다.

**즉, 싱글 스레드 동작의 원리를 이해하고 Javascript로 코드를 작성하면 Heavy Load를 Chrome V8 엔진이 알아서 처리 해줌으로 javascript 코드가 빠르고 안정성 있는 앱을 설계하는데 사용될 수 있다.**
