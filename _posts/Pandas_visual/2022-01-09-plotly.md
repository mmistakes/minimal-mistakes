---
title : "ğŸ“Š Pandas ì‹œê°í™” 2 - plotly"

categories:
    - Pandas_visual
tags:
    - [Pandas, Plotly, Visualization]

toc : true
toc_sticky : true

date: 2022-01-09
last_modified_at: 2022-01-09
---

* * *
## 2. plotly

ğŸ“Š ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” iplotë³´ë‹¤ ì„¸ì‹¬í•˜ê²Œ ì‹œê°í™”ê°€ ê°€ëŠ¥í•œ plotlyì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì.

### 2.1. plotly ì‚¬ìš©í•˜ê¸°
* * *

ğŸ“Š ë¨¼ì € plotlyë¥¼ ì„¤ì¹˜í•´ì£¼ì.

```py
!pip install plotly
```

ğŸ“Š ì´ì œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„í¬íŠ¸í•˜ì.

```py
import plotly.graph_objects as go
import plotly.offline as pyo
pyo.init_notebook_mode()
```

ğŸ“Š iplotê³¼ ë§ˆì°¬ê°€ì§€ë¡œ plotly ì—­ì‹œ ì—¬ëŸ¬ê°€ì§€ ê·¸ë˜í”„ í…Œë§ˆê°€ ìˆëŠ”ë°, plotly ì—ì„œëŠ” ì´ê²ƒì„ templateì´ë¼ê³  í•œë‹¤. template ëª©ë¡ì„ í•œë²ˆ ì•Œì•„ë³´ë„ë¡ í•˜ì.

```py
import plotly. io as pio
pio.templates
```
```
>>
Templates configuration
-----------------------
    Default template: 'plotly'
    Available templates:
        ['ggplot2', 'seaborn', 'simple_white', 'plotly',
         'plotly_white', 'plotly_dark', 'presentation', 'xgridoff',
         'ygridoff', 'gridon', 'none']
```

### 2.2. ê¸°ë³¸í˜•íƒœ
* * *

ğŸ“Š ê¸°ë³¸ì ì¸ í˜•íƒœëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.
- fig = go.Figure()
- fig.add_trace( go.ê·¸ë˜í”„ì¢…ë¥˜( x = data1, y = data2 ) )
- fig.update_layout()
- fig.add_annotation()
- fig.show()
- ğŸ™ƒ iplotì€ ë°ì´í„°í”„ë ˆì„ì—ì„œ ë°”ë¡œ ê·¸ë˜í”„ë¥¼ ê·¸ë¦´ ìˆ˜ ìˆì§€ë§Œ ( Dataframe.iplot( ~ ) ) plotlyëŠ” xì¶•ê³¼ yì¶•ì˜ ê°’ì„ ì§€ì •í•´ì¤˜ì•¼ í•¨

#### 2.2.1. fig.add_trace( )
* * *

ğŸ“Š ê·¸ë˜í”„ì˜ ì¢…ë¥˜ì™€ ë°ì´í„°, ê·¸ë˜í”„ì˜ ì˜µì…˜ì„ ì§€ì •  

ğŸ“Šì¸ìˆ˜
- <b>go.ê·¸ë˜í”„ ì¢…ë¥˜( )</b> - ê·¸ë˜í”„ ì¢…ë¥˜ ì§€ì • ë° ì˜µì…˜ ì§€ì • ex) go.Scatter, go.Bar, go.Heatmap
- x = data1, y = data2 - ë°ì´í„° ì§€ì •
- mode = ~ - ê·¸ë˜í”„ì˜ ì„¸ë¶€ í˜•íƒœ ì§€ì • ex) mode = 'lines+markers+text'
- marker_color = ~ - markerì˜ ìƒ‰ìƒ ì§€ì •
- text = ~ - modeì˜ textì— ë“¤ì–´ê°ˆ ë‚´ìš©ì„ ì‘ì„±
- textposition = ~ - textì˜ ìœ„ì¹˜ ì§€ì • ex) textposition = 'top center' / textposition = 'auto'
- textfont_size = ~ - textì˜ í¬ê¸° ì„¤ì • 
- texttemplate = ~ - ì •ê·œí‘œí˜„ì‹ìœ¼ë¡œ ê·¸ë˜í”„ì˜ text í˜•íƒœë¥¼ ì„ ì–¸í•´ì¤Œ
- name = ~ - ì£¼ë¡œ í•˜ë‚˜ì˜ figure ê°ì²´ì— ë‘ê°œ ì´ìƒì˜ ê·¸ë˜í”„ë¥¼ ê·¸ë¦´ë•Œ legend(ì£¼ì„) ì˜µì…˜ ì§€ì •  

ğŸ“Š í•˜ë‚˜ì˜ figure ê°ì²´ì— ì—¬ëŸ¬ê°œì˜ ê·¸ë˜í”„ë¥¼ ê·¸ë¦¬ë ¤ë©´ add_trace( )ë¥¼ ì—¬ëŸ¬ê°œ ì„ ì–¸í•´ì£¼ë©´ ëœë‹¤.

#### 2.2.2. fig.update_layout( )
* * *

ğŸ“Š ê·¸ë˜í”„ê°€ ë“¤ì–´ê°ˆ ë°°ê²½ì— ëŒ€í•œ ì •ë³´  

ğŸ“Š ë”•ì…”ë„ˆë¦¬ í˜•íƒœë¡œ ì„ ì–¸  

ğŸ“Šiplot ì˜ layoutê³¼ ìœ ì‚¬í•¨  

ğŸ“Š ì¸ìˆ˜
- title - text, font, size, color, x/y
- showlegend : True / False- ì£¼ì„ í‘œì‹œ ì—¬ë¶€
- xaxis / yaxis : title, showticklabels, dtick, tick0, tickfont
- autosize : True / False - figure ê°ì²´ì˜ í¬ê¸° ì§€ì •
    - False ì¸ ê²½ìš° - 'height' : ~, 'width' : ~
- 'template' : 'template_name' - figureê°ì²´ì˜ template ì§€ì •
  
#### 2.2.3. fig.add_annotation( )
* * *

ğŸ“Š ê·¸ë˜í”„ì—ì„œ ê°•ì¡°í•  ë¶€ë¶„ì— annotationì„ ìƒì„±í•¨  

ğŸ“Š ë”•ì…”ë„ˆë¦¬ í˜•íƒœë¡œ ì„ ì–¸  

ğŸ“Š ì¸ìˆ˜
- x / y : ~ - annotation ì´ ê¸€ì–´ê°ˆ ì§ê´€ì ì¸ ìœ„ì¹˜ ì§€ì • ex) x = '2020-03-05', y = 9456
- text : ~ - annotation ë‚´ìš©
- font - size, color
- align : ~ - text ì •ë ¬ ìœ„ì¹˜ ì„¤ì • ex) 'align' : 'center'

- showarrow : True / False - í™”ì‚´í‘œ í‘œì‹œ ì—¬ë¶€ ì„¤ì •
- arrowhead : ~ - í™”ì‚´í‘œ ë¨¸ë¦¬ ì¢…ë¥˜ ì§€ì • ex) 'arrowhead' : 2
- arrowsize : ~ - í™”ì‚´í‘œ ë¨¸ë¦¬ í¬ê¸° ì§€ì • ex) 'arrowsize' : 1
- arrowwidth : ~ - í™”ì‚´í‘œ ë„ˆë¹„ ì§€ì • ex) 'arrowwidth' : 2
- arrowcolor : ~ - í™”ì‚´í‘œ ìƒ‰ ì§€ì • 

- bordercolr : ~ - annotationì˜ ë°”ê¹¥ ì„  ìƒ‰ ì§€ì •
- borderwidth : ~ - ë°”ê¹¥ ì„  ë„ˆë¹„ ì§€ì • ex) 'borderwidth' : 2
- borderpad : ~ - text ê°€ ë“¤ì–´ê°ˆ ê³µê°„ ì§€ì • ex) 'borderpad' : 7
- bgcolor : ~ - annotation ë°°ê²½ìƒ‰ ì§€ì •

- ax / ay : ~ - ì§ê´€ì ì¸ ìœ„ì¹˜ ê¸°ì¤€ annotationì˜ ì„¸ë¶€ ìœ„ì¹˜ ì„¤ì • ex) 'ax' : 20, 'ay' : -50
    - ax - 0 (ê°€ìš´ë°) ê¸°ì¤€ìœ¼ë¡œ ì–‘ìˆ˜ë©´ ì˜¤ë¥¸ìª½, ìŒìˆ˜ë©´ ì™¼ìª½
    - ay - 0 (ê°€ìš´ë°) ê¸°ì¤€ìœ¼ë¡œ ì–‘ìˆ˜ë©´ ì•„ë˜ìª½, ìŒìˆ˜ë©´ ìœ„ìª½
- opacity : ~ - annotation íˆ¬ëª…ë„ ì„¤ì •. ì‘ì„ìˆ˜ë¡ íˆ¬ëª…í•´ì§ ex) 'opacity' : 0.9

#### 2.2.4. fig.show( )
* * *

ğŸ“Š figure ê°ì²´ë¥¼ ë³´ì—¬ì¤Œ

* * *
ğŸ“Š ì—¬ê¸°ê¹Œì§€ í•´ì„œ plotly ì˜ ê¸°ë³¸ êµ¬ë¬¸ì„ ëª¨ë‘ ì•Œì•„ë³´ì•˜ë‹¤. ì´ì œ ì‹¤ì œë¡œëŠ” ì–´ë–»ê²Œ ì‚¬ìš©ë˜ëŠ”ì§€ ì•Œì•„ë³´ë„ë¡ í•˜ì.

### 2.3. ì½”ë“œ
* * *

```py
import plotly.graph_objects as go
import plotly.offline as pyo
pyo.init_notebook_mode()
import plotly.io as pio
```

```py
fig = go.Figure()
fig.add_trace(
    go.Bar(
        x = Dataframe.index, y = Dataframe['column'], text = Dataframe['column'], marker_colors = colors
    ))

fig.update_layout(
    {
        'title' : {'text':, 'font':{'size':, 'color':}},
        'xaxis' : {'title':, 'font':, 'showticklabels':, 'tick0':, 'dtick':, },
        'yaxis' : {'title':, 'font':, 'showticklabels':, 'tick0':, 'dtick':, },
        
        'showlegend': ,
        
        'autosize' : False,
        'height' : ,
        'width' : ,
        
        'template' :
    })

fig.add_annotation(
    {
        'x': , 'y': ,
        
        'text' : ,
        'font' : {'size' : , 'color' : },
        'align' : 'center',
        
        'showarrow' : True,
        'arrowhead' : 2,
        'arrowsize' : 1,
        'arrowwidth' : 2,
        'arrowcolor' : ,
        
        'bordercolor' : ,
        'borderwidth' : 2,
        'borderpad' : 3,
        'bgcolor' : ,
        
        'ax' : 20, 'ay' : -50,
        'opacity' : 0.9
    })

fig.show()
```

<p align="center"><img src="https://user-images.githubusercontent.com/65170165/148677450-19763960-87dd-42ab-8e54-3bd888758e36.png" width="900" /></p> 

ğŸ“Š fig.add_trace( ) ì˜ <b>marker_colors</b> ì¸ìˆ˜ë¥¼ ì˜ ì„¤ì •í•´ ì£¼ë©´ ìœ„ì˜ ì˜ˆì‹œì²˜ëŸ¼ í•˜ë‚˜ì˜ ë°ì´í„°ë§Œ ê°•ì¡°í•˜ëŠ” ê²ƒë„ í•  ìˆ˜ ìˆë‹¤. ì´ ë°©ë²•ì€ ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œ ê°€ë³ê²Œ ì•Œì•„ë³´ë„ë¡ í•˜ì.

* * *
ğŸ“Š <b>figure = go.Figure( )</b> ë¡œ figure ê°ì²´ë¥¼ ìƒì„±í•˜ê³  <b>fig.add_trace( )</b> ë¡œ ê·¸ ìœ„ì— ê·¸ë˜í”„ë¥¼ ê·¸ë ¤ì¤€ë‹¤. ê·¸ í›„ì— <b>fig.update_layout( )</b> ê³¼ <b>fig.add_annotation( )</b> ì„ ê°€ì§€ê³  ì„¸ë¶€ì ì¸ ì¡°ì •ì„ í•´ì£¼ë©´ ì´ë ‡ê²Œ ê¹”ë”í•˜ê³  ì§ê´€ì ì¸ ê·¸ë˜í”„ë¥¼ ê·¸ë¦´ ìˆ˜ ìˆë‹¤ğŸ™ƒ.  

ğŸ“Š ì•„ì§ ì‹œê°í™” ê²½í—˜ì´ ë¶€ì¡±í•´ì„œ ê° ê·¸ë˜í”„ í˜•íƒœì— ìµìˆ™í•˜ì§€ëŠ” ì•Šì§€ë§Œ, ì–´ë–¤ ë°ì´í„°ì— ì–´ë–¤ ê·¸ë˜í”„ê°€ ì í•©í•œì§€ë„ ë¯¸ë¦¬ ì•Œì•„ë‘¬ì•¼ê² ë‹¤!!
