---
title:  "Chapter 4. ì‹¬í”Œ íŒ©í† ë¦¬ íŒ¨í„´(Simple Factory Pattern)" 

categories:
  -  Design Pattern
tags:
  - [Game Engine, Unity, Design Pattern]

toc: true
toc_sticky: true

date: 2020-07-10
last_modified_at: 2020-07-10
---

ì¸í”„ëŸ°ì— ìˆëŠ” ì´ì¬í™˜ë‹˜ì˜ ê°•ì˜ **ê²Œì„ ë””ìì¸ íŒ¨í„´ with Unity** ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
{: .notice--warning}

# Chapter 4. Simple Factory Pattern

## ğŸ”” Factory Pattern

- `Factory` : ê°ì²´ ìƒì„±ì„ ì²˜ë¦¬í•˜ëŠ” <u>í´ë˜ìŠ¤</u>
- `Factory Pattern` : ê°ì²´ë¥¼ ìƒì„±í•˜ê³ ì í•  ë•Œ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´
  - ì¢…ë¥˜
    1. **Simple Factory Pattern**
      - íŒ©í† ë¦¬ íŒ¨í„´ì˜ ê°€ì¥ ê¸°ë³¸ì´ ëœë‹¤.
      - OOP ì—ì„œ ëŠ˜ìƒ ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì— íŒ¨í„´ì´ë¼ê³  í•˜ê¸°ë„ ë­í•˜ì§€ë§Œ íŒ©í† ë¦¬ ë©”ì„œë“œì™€ ì¶”ìƒ íŒ©í† ë¦¬ íŒ¨í„´ì˜ ê°€ì¥ ê¸°ë³¸ì´ ë˜ê¸° ë•Œë¬¸ì— í™•ì‹¤íˆ ì§šê³  ë„˜ì–´ê°€ì•¼ í•œë‹¤.
      - > ì£¼ì–´ì§„ ì…ë ¥ì„ ê¸°ë°˜ìœ¼ë¡œ <u>ë‹¤ë¥¸ ìœ í˜•ì˜ ê°ì²´ë¥¼ ë¦¬í„´í•˜ëŠ” ë©”ì†Œë“œê°€ ìˆëŠ” íŒ©í† ë¦¬ í´ë˜ìŠ¤</u>
    2. **Factory Method Pattern**
    3. **Abstract Factory Pattern**

> â­<u>í•˜ë‚˜ì˜ í´ë˜ìŠ¤ë¡œ ì—¬ëŸ¬ê°€ì§€ íƒ€ì…ì˜ ê°ì²´(ìì‹)ë¥¼ ì°ì–´ë‚´ì–´ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ë¥¼ ê°€ì§„ í•˜ë‚˜ì˜ ê³µì¥(ë¶€ëª¨í´ë˜ìŠ¤)</u>ë¥¼ ë§Œë“ ë‹¤. `ë‹¤í˜•ì„±`

> ì—¬ëŸ¬ê°œì˜ ìì‹ ì˜¤ë¸Œì íŠ¸ë“¤ì„ <u>í•˜ë‚˜ì˜ í•¨ìˆ˜ë¡œ ì‰½ê²Œ í•œë°©ì— ìƒì„±í•˜ê¸° ìœ„í•´</u> ì‚¬ìš©í•˜ëŠ” íŒ¨í„´

- ê°ì²´ ìƒì„±ì„ í•œêµ°ë°ì—ì„œë§Œ ê´€ë¦¬í•  ìˆ˜ ìˆë”°ëŠ” ì¥ì ì´ ìˆë‹¤.
  - ì—¬ëŸ¬ ìì‹ íƒ€ì…ë“¤ì—ê²Œì„œ ì¤‘ë³µë˜ëŠ” ë‚´ìš©ì„ ì œê±°í•  ìˆ˜ ìˆìŒ.

<br>

## ğŸ”” ì˜ˆì œ 1

### êµ¬ì¡°

- **ğŸ“œUnit** ì¶”ìƒ í´ë˜ìŠ¤
  - **ğŸ“œMarine** *ìƒì†*
    - move() ì˜¤ë²„ë¼ì´ë”©
  - **ğŸ“œFirebat** *ìƒì†*
    - move() ì˜¤ë²„ë¼ì´ë”©
  - **ğŸ“œMedic** *ìƒì†*
    - move() ì˜¤ë²„ë¼ì´ë”©
- **ğŸ“œFactory**
  - ğŸ“œUnitì˜ <u>ì„¸ ìì‹ íƒ€ì…ë“¤ì„ í•œë²ˆì— ì°ì–´ë‚´ì–´ ë¦¬í„´í•´ì£¼ëŠ” í•¨ìˆ˜</u> `createUnit`ë¥¼ ê°€ì§€ê³  ìˆë‹¤.
  - <u>íŒ©í† ë¦¬ í´ë˜ìŠ¤</u>ê°€ ë¨
- ğŸ“œFactoryUse.cs
  - ìœ ë‹ˆí‹° Start() í•¨ìˆ˜ì—ì„œ ì‹¤ì œë¡œ ğŸ“œFactoryë¥¼ ì‚¬ìš©í•˜ì—¬ `createUnit`í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ 3ê°œì˜ Unitì„ ì°ì–´ë‚¸ë‹¤. 
  - ê° ìœ ë‹›ì˜ move()ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.

### ğŸ“œUnit.cs

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public abstract class Unit
{
	public abstract void move ();
}

public class Marine : Unit {

    public Marine()
    {
        Debug.Log("Marine ìƒì„± !!!");
    }

    public override void move ()
	{
		Debug.Log ("Marine ì´ë™ !!!");
	}
}

public class Firebat : Unit {

    public Firebat()
    {
        Debug.Log("Firebat ìƒì„± !!!");
    }

    public override void move ()
	{
		Debug.Log ("Firebat ì´ë™ !!!");
	}
}

public class Medic : Unit {

    public Medic()
    {
        Debug.Log("Medic ìƒì„± !!!");
    }

    public override void move()
    {
        Debug.Log("Medic ì´ë™ !!!");
    }
}
```

### ğŸ“œFactory.cs

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public enum UnitType
{
	Marine,
	Firebat,
	Medic
}

public class UnitFactory
{
	public static Unit createUnit(UnitType type)
	{
		Unit unit = null;

		switch (type) {
            case UnitType.Marine:
                unit = new Marine();
                break;
            case UnitType.Firebat:
                unit = new Firebat();
                break;
            case UnitType.Medic:
                unit = new Medic();
                break;
        }
        return unit;
	}
}
```

ë¶€ëª¨ì¸ Unit íƒ€ì…ì˜ `unit`ì— 3 ê°œì˜ ìì‹ íƒ€ì…ë“¤ì„ ì°¸ì¡°í•˜ì—¬ `unit`ì„ ë¦¬í„´í•˜ëŠ” static í•¨ìˆ˜ë‹¤. ì¦‰, <u>ì¸ìˆ˜ë¡œ ë“¤ì–´ì˜¨ ìœ ë‹›ì„ ìƒì„±í•˜ê³  ë¦¬í„´í•´ì£¼ëŠ” ê³µì¥ê³¼ë„ ê°™ì€ ì—­í• ì„ í•œë‹¤.</u>

### ğŸ“œFactoryUse.cs

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class FactoryUse : MonoBehaviour {

	void Start () {

		Unit unit1 = UnitFactory.createUnit(UnitType.Marine);
        Unit unit2 = UnitFactory.createUnit(UnitType.Firebat);
        Unit unit3 = UnitFactory.createUnit(UnitType.Medic);

        unit1.move();
        unit2.move();
        unit3.move();
    }
}
```

- static í•¨ìˆ˜ì´ë¯€ë¡œ í´ë˜ìŠ¤ ì´ë¦„ìœ¼ë¡œ ë°”ë¡œ ì ‘ê·¼ 
  - **UnitFactory.createUnit(UnitType.Marine)**
- ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ìì‹ì„ ì°¸ì¡°
  - **Unit unit2 = UnitFactory.createUnit(UnitType.Firebat)**
- `createUnit`ìœ¼ë¡œë¶€í„° ë¦¬í„´ë°›ì€ ìì‹ ê°ì²´ë¡œ move()ë¥¼ í˜¸ì¶œí•œë‹¤.
  - move() í•¨ìˆ˜ëŠ” ì¶”ìƒ í•¨ìˆ˜ì´ë¯€ë¡œ ìì‹ë“¤ì´ ë°˜ë“œì‹œ ì˜¤ë²„ë¼ì´ë”© í•´ì•¼ í•˜ë©° ë¶€ëª¨ì¸ `Unit` íƒ€ì…ìœ¼ë¡œ ìì‹ ê°ì²´ë¥¼ ì°¸ì¡°í•´ë„ ìì‹ì´ ì˜¤ë²„ë¼ì´ë”©í•œ move()ê°€ í˜¸ì¶œëœë‹¤.
  - ê°ê° ë©”ë”•, íŒŒì´ì–´ë±ƒ, ë§ˆë¦°ì˜ move()ê°€ í˜¸ì¶œë¨
    ```c#
    unit1.move();
    unit2.move();
    unit3.move();
    ```

<br>

## ğŸ”” ì˜ˆì œ 2

> `Unit`ì„ ìƒì† ë°›ëŠ” `Firebat`ê³¼ `Marine` í”„ë¦¬íŒ¹ì„ íŒ©í† ë¦¬ íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ê²Œì„ ë„ì¤‘ì— ì‹¤ì‹œê°„ìœ¼ë¡œ ìƒì„±í•´ë³´ì.

### êµ¬ì¡°

- **ğŸ“œUnit** ì¶”ìƒ í´ë˜ìŠ¤
  - **ğŸ“œMarine** *ìƒì†*
    - move() ì˜¤ë²„ë¼ì´ë”©
  - **ğŸ“œFirebat** *ìƒì†*
    - move() ì˜¤ë²„ë¼ì´ë”©
- **ğŸ“œFactory**
  - ğŸ“œUnitì˜ <u>ì„¸ ìì‹ íƒ€ì…ë“¤ì„ í•œë²ˆì— ì°ì–´ë‚´ì–´ ë¦¬í„´í•´ì£¼ëŠ” static í•¨ìˆ˜</u> `createUnit`ë¥¼ ê°€ì§€ê³  ìˆë‹¤.
  - <u>íŒ©í† ë¦¬ í´ë˜ìŠ¤</u>ê°€ ë¨
- ğŸ“œFactoryUse.cs
  - ìœ ë‹ˆí‹° Start() í•¨ìˆ˜ì—ì„œ ì‹¤ì œë¡œ ğŸ“œFactoryë¥¼ ì‚¬ìš©í•˜ì—¬ `createUnit`í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ 3ê°œì˜ Unitì„ ì°ì–´ë‚¸ë‹¤. 
  - ê° ìœ ë‹›ì˜ move()ë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.

### ğŸ“œUnit.cs

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public abstract class Unit : MonoBehaviour
{
	public abstract void Move ();
}
```

### ğŸ“œMarine.cs

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Marine : Unit {

    void Start()
    {
        Debug.Log("Marine ìƒì„± !!!");
    }

    public override void Move()
    {
        Debug.Log("Marine ì´ë™ !!!");
    }
}

```

### ğŸ“œFirebat.cs

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Firebat : Unit {

    void Start()
    {
        Debug.Log("Firebat ìƒì„± !!!");
    }

    public override void Move()
    {
        Debug.Log("Firebat ì´ë™ !!!");
    }
}

```

### ğŸ“œFactory.cs

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public enum UnitType
{
	Marine,
	Firebat
}

public class Factory : MonoBehaviour
{
    public GameObject marine = null;
    public GameObject firebat = null;

    public GameObject createUnit(UnitType type)
	{
        //Unit unit = null;
        GameObject unit = null;

        float x = (float)Random.Range(0, 6);
        float z = (float)Random.Range(0, 6);

        switch (type) {
            case UnitType.Marine:
                //unit = new Marine();
                unit = Instantiate(marine, new Vector3(x, 1.0f, z), Quaternion.identity);
                break;
            case UnitType.Firebat:
                //unit = new Firebat();
                unit = Instantiate(firebat, new Vector3(x, 0.5f, z), Quaternion.identity);
                break;
        }

        return unit;
	}
}

```

- marine, firebatì— ê°ê° í”„ë¦¬íŒ¹ì„ ì—°ê²°í•´ì¤€ë‹¤.
- ë¶€ëª¨ì¸ Unit íƒ€ì…ì˜ `unit`ì— ìì‹ë“¤ íƒ€ì…ë“¤ì„ ì°¸ì¡°í•˜ì—¬ `unit`ì„ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ë‹¤. ì¦‰, <u>ì¸ìˆ˜ë¡œ ë“¤ì–´ì˜¨ ìœ ë‹›ì„ ìƒì„±í•˜ê³  ë¦¬í„´í•´ì£¼ëŠ” ê³µì¥ê³¼ë„ ê°™ì€ ì—­í• ì„ í•œë‹¤.</u>
  - ê° ìì‹ë“¤ì˜ í”„ë¦¬íŒ¹ì„ x,z ëœë¤í•œ ìœ„ì¹˜ì— Instantiate í•˜ê³ 
  - ì´ë¥¼ ë¦¬í„´í•œë‹¤.

### ğŸ“œFactoryUse.cs

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class FactoryUse : MonoBehaviour {

    Factory factory = null;
    GameObject unit1 = null;
    GameObject unit2 = null;
    GameObject unit3 = null;

    void Start () {
        factory = GetComponent<Factory>();

        unit1 = factory.createUnit(UnitType.Marine);
        unit2 = factory.createUnit(UnitType.Firebat);
        unit3 = factory.createUnit(UnitType.Firebat);

        StartCoroutine("UnitAction");
    }

    IEnumerator UnitAction()
    {
        yield return new WaitForSeconds(0.2f);

        // ì¶”ìƒí´ë˜ìŠ¤ Unitì„ ì´ìš©í•˜ì—¬ Marine, Firebatì˜ êµ¬ë¶„ì—†ì´
        // ì ‘ê·¼í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
        unit1.GetComponent<Unit>().Move();
        unit2.GetComponent<Unit>().Move();
    }
}
```

- ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ìì‹ì„ ì°¸ì¡°
  - **Unit unit2 = UnitFactory.createUnit(UnitType.Firebat)**
- `createUnit`ìœ¼ë¡œë¶€í„° ë¦¬í„´ë°›ì€ ìì‹ ê°ì²´ë¡œ move()ë¥¼ í˜¸ì¶œí•œë‹¤.
  - move() í•¨ìˆ˜ëŠ” ì¶”ìƒ í•¨ìˆ˜ì´ë¯€ë¡œ ìì‹ë“¤ì´ ë°˜ë“œì‹œ ì˜¤ë²„ë¼ì´ë”© í•´ì•¼ í•˜ë©° ë¶€ëª¨ì¸ `Unit` íƒ€ì…ìœ¼ë¡œ ìì‹ ê°ì²´ë¥¼ ì°¸ì¡°í•´ë„ ìì‹ì´ ì˜¤ë²„ë¼ì´ë”©í•œ move()ê°€ í˜¸ì¶œëœë‹¤.
  - ê°ê° íŒŒì´ì–´ë±ƒ, ë§ˆë¦°ì˜ move()ê°€ í˜¸ì¶œë¨


***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}