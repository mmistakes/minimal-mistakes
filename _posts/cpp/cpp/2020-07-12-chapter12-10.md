---
title:  "C++ Chapter 12.10 : λ™μ  ν•λ³€ν™ dynamic_cast" 

categories:
  - Cpp
tags:
  - [Programming, Cpp]

toc: true
toc_sticky: true

date: 2020-07-12
last_modified_at: 2020-07-12
---

μΈν”„λ°μ— μλ” ν™μ •λ¨ κµμλ‹μ **ν™μ •λ¨μ λ”°λΌ ν•λ©° λ°°μ°λ” C++** κ°•μλ¥Ό λ“£κ³  μ •λ¦¬ν• ν•„κΈ°μ…λ‹λ‹¤. π€    
[π [ν™μ •λ¨μ λ”°λΌ ν•λ©° λ°°μ°λ” C++]κ°•μ λ“¤μΌλ¬ κ°€κΈ°!](https://www.inflearn.com/course/following-c-plus)
{: .notice--warning}

<br>

# chapter 12. κ°€μƒ ν•¨μλ“¤ : λ™μ  ν•λ³€ν™

## π”” dynamic_cast

> `dynamic_cast` : λ™μ μΌλ΅ ν•λ³€ν™μ‹ν‚¨λ‹¤. ν•λ³€ν™μ— μ‹¤ν¨ν•  κ²½μ° nullptrλ¥Ό λ¦¬ν„΄ν•λ‹¤.

```cpp
#include <iostream>
#include <string>

using namespace std;

class Base
{
public:
	int m_i = 0;

	virtual void print()
	{
		cout << "I'm Base" << endl;
	}
};

class Derived1 : public Base
{
public:
	int m_j = 1024;

	virtual void print() override
	{
		cout << "I'm derived_1" << endl;
	}
};

class Derived2 : public Base
{
public:
	string m_name = "Dr. Two";

	virtual void print() override
	{
		cout << "I'm derived_2" << endl;
	}
};

int main()
{
	Derived1 d1;
	Base *base = &d1;

	auto *base_to_d1 = dynamic_cast<Derived1*>(base);
	cout << base_to_d1->m_j << endl;

	return 0;
}
```


```cpp
auto *base_to_d1 = dynamic_cast<Derived1*>(base);
```

> Derived1 κ°μ²΄λ¥Ό κ°€λ¦¬ν‚¤λ Base * ν¬μΈν„°λ” Derived1 * ν¬μΈν„°λ΅ ν•λ³€ν™μ΄ κ°€λ¥ν•λ‹¤. <u>Derived1 κ°μ²΄μ™€ νƒ€μ…μ΄ μΌμΉν•κΈ° λ•λ¬Έμ—.</u>

- Base νƒ€μ…μ΄μ§€λ§ Derived κ°μ²΄μΈ `d1`μ μ£Όμ†λ¥Ό λ‹΄κ³  μ‡λ” `base`ν¬μΈν„°κ°€ <u>Derived1 * ν¬μΈν„° νƒ€μ…μΌλ΅ ν•λ³€ν™.</u>λλ©° `d1`μ μ£Όμ†λ¥Ό λ¦¬ν„΄ν•λ‹¤.
  - μ•„λ μ²λΌ λλ” κ²ƒμ΄λ‚ λ§μ°¬κ°€μ§€.
    ```cpp
    Derived1 * base_to_d1 = d1;  
    ```
  - `base_to_d1->m_j ` λ” Derived1μ m_jλ¥Ό λ¦¬ν„΄ν•λ‹¤. 1024 μ¶λ ¥


```cpp
int main()
{
	Derived1 d1;
	Base * base = &d1;

    auto *base_to_d1 = dynamic_cast<Derived2*>(base);

    if (base_to_d1 != nullptr)
        cout << base_to_d1->m_name << endl;
    else
        cout << "Failed" << endl;

	return 0;
}
```
```
π’μ¶λ ¥π’

Failed
```

> Derived1 κ°μ²΄λ¥Ό κ°€λ¦¬ν‚¤λ Base * ν¬μΈν„°λ” Derived2 * ν¬μΈν„°λ΅ ν•λ³€ν™μ΄ λ¶κ°€λ¥ν•λ‹¤. ν•μ κΈ΄ ν•μ§€λ§ λ¶€λ¨ μμ‹ κ΄€κ³„λ„ μ•„λ‹κ³  νƒ€μ…μ΄ μ „ν€ λ‹¤λ¥΄λ‹ λ‹Ήμ—°ν• μ–κΈ°..

- `dynamic_cast`λ” nullptrμ„ λ¦¬ν„΄ν•  κ²ƒμ΄κ³  μ΄μ— λ”°λΌ elseλ¬Έμ— ν•΄λ‹Ή λμ–΄ "Failed"λ¥Ό μ¶λ ¥ν•λ‹¤.
  - `dynamic_cast`λ” ν•λ³€ν™μ— μ‹¤ν¨μ‹ nullptrλ¥Ό λ¦¬ν„΄ν•λ‹¤. 

<br>

## π”” static_cast 

```cpp
auto *base_to_d1 = static_cast<Derived2*>(base);
```
- μ›λλ” ν•λ³€ν™μ— μ‹¤ν¨ν•λ”κ² λ§λ”λ° `static_cast`λ” λλ”λ°λ΅ λ°€μ–΄ λ¶™μΈλ‹¤.
  - λ°νƒ€μ„ μ—λ¬λ¥Ό μ²΄ν¬ν•μ§€ μ•μΌλ©°
  - μµλ€ν• μ–΄λ–»κ²μ„λ“  κ°λ°μκ°€ μ›ν•λ” ν•μΌλ΅ λ³€ν™μ‹μΌμ£Όλ ¤λ” μ„±μ§μ„ κ°€μ§€κΈ° λ•λ¬Έμ— μ•λλ”κ²ƒλ„ λκ² ν•λ” κ²½μ°κ°€ μλ‹¤.

> μ΄ κ°™μ€ λ¬Έμ λ΅ `static_cast`λ³΄λ‹¤λ” `dynamic_cast`λ¥Ό μΆ€ λ” μ¶”μ²ν•μ§€λ§ λ‹¤ν•μ„±μ— μμ–΄ ν•λ³€ν™μ„ μ‚¬μ‹¤ μ•μ“°λ” κ²ƒμ„ μ¶”μ²ν•λ‹¤. κ³„μ† μ™”λ‹¤ κ°”λ‹¤ ν•λ©΄ λ°μ΄ν„° μ†μ‹¤λ΅ μ„ν—ν•΄μ§ μ μμΌλ―€λ΅.
 
***
<br>

    π κ°μΈ κ³µλ¶€ κΈ°λ΅μ© λΈ”λ΅κ·Έμ…λ‹λ‹¤. μ¤λ¥λ‚ ν‹€λ¦° λ¶€λ¶„μ΄ μμ„ κ²½μ° 
    μ–Έμ λ“ μ§€ λ“κΈ€ νΉμ€ λ©”μΌλ΅ μ§€μ ν•΄μ£Όμ‹λ©΄ κ°μ‚¬ν•κ² μµλ‹λ‹¤! π„

[λ§¨ μ„λ΅ μ΄λ™ν•κΈ°](#){: .btn .btn--primary }{: .align-right}
<br>