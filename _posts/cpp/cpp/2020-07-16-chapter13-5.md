---
title:  "C++ Chapter 13.5 : í´ë˜ìŠ¤ í…œí”Œë¦¿ íŠ¹ìˆ˜í™”" 

categories:
  - Cpp
tags:
  - [Programming, Cpp]

toc: true
toc_sticky: true

date: 2020-07-16
last_modified_at: 2020-07-16
---

ì¸í”„ëŸ°ì— ìˆëŠ” í™ì •ëª¨ êµìˆ˜ë‹˜ì˜ **í™ì •ëª¨ì˜ ë”°ë¼ í•˜ë©° ë°°ìš°ëŠ” C++** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€    
[ğŸŒœ [í™ì •ëª¨ì˜ ë”°ë¼ í•˜ë©° ë°°ìš°ëŠ” C++]ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸°!](https://www.inflearn.com/course/following-c-plus)
{: .notice--warning}

<br> 

# chapter 13. í…œí”Œë¦¿ : í´ë˜ìŠ¤ í…œí”Œë¦¿ íŠ¹ìˆ˜í™”

> `íŠ¹ìˆ˜í™”` : í…œí”Œë¦¿ì—ì„œ íŠ¹ì • íƒ€ì…ì— ëŒ€í•´ì„œ ë‹¤ë¥¸ ì‹¤í–‰ ì²˜ë¦¬ë¥¼ í•˜ê³  ì‹¶ì„ ë•Œ ê·¸ íƒ€ì…ì— ëŒ€í•´ì„œë§Œ íŠ¹ìˆ˜í™”.

## ğŸ”” í´ë˜ìŠ¤ í…œí”Œë¦¿ íŠ¹ìˆ˜í™”

```cpp
template<>
class A<char>
{
};
```

> `T`ë¥¼ êµ¬ì²´í™” í•˜ë‹ˆê¹Œ `T`ë¥¼ ì œì™¸í•œ `typename<>`ë§Œ ì¨ì¤€ í›„ í´ë˜ìŠ¤ ì´ë¦„ ì˜†ì— `<íŠ¹ìˆ˜í™” í•  íƒ€ì…>` ë¥¼ ëª…ì‹œí•´ì¤€ë‹¤.

- í•´ë‹¹ í´ë˜ìŠ¤ë¡œ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ <u>char íƒ€ì…ìœ¼ë¡œ êµ¬ì²´í™”í•  ë•Œë§Œ ìœ„ í´ë˜ìŠ¤ë¡œ êµ¬ì²´í™”ëœë‹¤.</u>

```cpp
#include <iostream>

using namespace std;

template<typename T>
class A 
{
public:
    A(const T& input)
    {}

    void doSomething()
    {
        cout << typeid(T).name() << endl;
    }
    
    void test()
    {}
};


template<>
class A<char>
{
public:
    A(const char& input)
    {}

    void doSomething()
    {
        cout << "Char type specialization" << endl;
    }
};

int main()
{
    A<int> a_int(1);
    A<double> a_double(3.14);
    A<char> a_char('a');
    
    a_int.doSomething();
    a_double.doSomething();
    a_char.doSomething();
    
    a_char.test(); // âŒì—ëŸ¬âŒ

    return 0;
}
```

- â­`char`íƒ€ì…ìœ¼ë¡œ êµ¬ì²´í™” ë  ë• ë‹¤ë¥¸ íƒ€ì…ë“¤ë¡œ êµ¬ì²´í™”ë  ë•Œì™€ ë‹¤ë¥´ê²Œ  `test()` ë©¤ë²„ í•¨ìˆ˜ê°€ ì—†ëŠ” ê²ƒì´ë‚˜ ë§ˆì°¬ê°€ì§€ë‹¤.
  - `char`íƒ€ì…ìœ¼ë¡œ êµ¬ì²´í™” ë  ë• ì²«ë²ˆì§¸ í´ë˜ìŠ¤ í…œí”Œë¦¿ìœ¼ë¡œ êµ¬ì²´í™”ë˜ëŠ”ê²Œ ì•„ë‹ˆë¼ <u>ì•„ë˜ ë‘ë²ˆì§¸ í´ë˜ìŠ¤ í…œí”Œë¦¿ìœ¼ë¡œ êµ¬ì²´í™”ë˜ê¸° ë•Œë¬¸ì´ë‹¤.</u>
    ```cpp
    template<>
    class A<char>
    {
    public:
        A(const char& input)
        {}

        void doSomething()
        {
            cout << "Char type specialization" << endl;
        }
    };
    ```
    ```cpp
    A<char> a_char('a');
    a_char.test(); // âŒì—ëŸ¬âŒ
    ```
- `char`íƒ€ì…ìœ¼ë¡œ êµ¬ì²´í™” ë  ë•Œë§Œ ìœ„ í´ë˜ìŠ¤ë¡œ ê°ì²´ë¥¼ ì°ì–´ë‚´ê¸° ë•Œë¬¸ì— <u>ìƒì„±ìë„ ë”°ë¡œ ì •ì˜í•´ì£¼ì–´ì•¼ í•œë‹¤.</u>
  - ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ê·¸ëƒ¥ ë¹ˆ ë‚´ìš©ì˜ ë””í´íŠ¸ ìƒì„±ìë¥¼ ì»´íŒŒì¼ëŸ¬ê°€ ë§Œë“¤ì–´ í˜¸ì¶œí•¨!
  - ì›ë˜ ìƒì„±ì ì •ì˜ê°€ ì—†ì—ˆë‹¤ë©´ ìƒê´€ ì—†ì§€ë§Œ ì›ë˜ í´ë˜ìŠ¤ í…œí”Œë¦¿ì— ìƒì„±ìê°€ ìˆì—ˆë‹¤ë©´ ì •ì˜í•´ì£¼ì.
- C++ 17 ë¶€í„°ëŠ” ìƒì„±ì ë§¤ê°œë³€ìˆ˜ë¡œ ë“¤ì–´ê°€ëŠ” ì¸ìˆ˜ë¡œ `T` íƒ€ì…ì„ ì•Œ ìˆ˜ ìˆëŠ” ê²½ìš° `<êµ¬ì²´í™”íƒ€ì…>`ì„ ìƒëµí•  ìˆ˜ ìˆë‹¤.
  ```cpp
    A a_int(1);   // ğŸ‘‰ int ë¡œ êµ¬ì²´í™”
    A a_double(3.14);  // ğŸ‘‰ double ë¡œ êµ¬ì²´í™”
    A a_char('a');   // ğŸ‘‰ char ë¡œ êµ¬ì²´í™”
  ```

<br>

## ğŸ”” ì‘ìš©

> í¬ê¸° 8 ì˜ ë°°ì—´ì„ ë©¤ë²„ë¡œ ê°€ì§€ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“ ë‹¤ê³  í•  ë•Œ, ì–´ì°¨í”¼ boolì€ 1bitë¡œ í‘œí˜„í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ <u>íŠ¹ë³„íˆ bool íƒ€ì…ì¼ë•Œë§Œ</u>  1 byte = 8 bit í¬ê¸°ì¸ char íƒ€ì…ì˜ ë°ì´í„° 1 ê°œë¥¼ ë§ˆì¹˜ 8 ê°œì˜ bit ë°°ì—´ì¸ ê²ƒì²˜ëŸ¼ êµ¬í˜„í•˜ì. 

```cpp
#include <iostream>

using namespace std;

template<typename T>
class Storage8
{
private:
    T m_array[8];
public:
    void set(int index, const T &value)
    {
        m_array[index] = value;
    }
    
    const T& get(int index)
    {
        return m_array[index];
    }
};


template<>
class Storage8<bool>
{
private:
    unsigned char m_data;
public:
    Storage8() 
        : m_data(0)
    {}

    void set(int index, bool value)
    {
        unsigned char mask = 1 << index;
        
        if (value)
            m_data |= mask;
        else
            m_data &= ~mask;
    }
    
    bool get(int index)
    {
        unsigned char mask = 1 << index;
        return (m_data & mask) != 0;
    }
};


int main()
{
    Storage8<int> intStorage;
    
    for (int count = 0; count < 8; ++count)
        intStorage.set(count, count);
    
    for (int count = 0; count < 8; ++count)
        cout << intStorage.get(count) << " ";
    
    cout << " Sizeof Storage8<int> " << sizeof(Storage8<int>) << endl;
    
    
    Storage8<bool> boolStorage;
    
    for (int count = 0; count < 8; ++count)
        boolStorage.set(count, count & 3);
    
    for (int count = 0; count < 8; ++count)
        cout << boolStorage.get(count) << " ";
    
    cout << " Sizeof Storage8<bool> " << sizeof(Storage8<bool>) << endl;
    
    return 0;
}
```

- `bool` íƒ€ì…ì¼ ë•Œ í´ë˜ìŠ¤ í…œí”Œë¦¿ íŠ¹ìˆ˜í™”
  ```cpp
  template<>
    class Storage8<bool>
    {
    private:
        unsigned char m_data;
    public:
        Storage8() 
            : m_data(0)
        {}

        void set(int index, bool value)
        {
            unsigned char mask = 1 << index;
        
            if (value)
                m_data |= mask;
            else
                m_data &= ~mask;
        }
    
        bool get(int index)
        {
            unsigned char mask = 1 << index;
            return (m_data & mask) != 0;
        }
    };
  ```
  - `bool` íƒ€ì…ìœ¼ë¡œ êµ¬ì²´í™”í•  ë•Œë§Œ 
    - ë°°ì—´ì„ ì“°ì§€ ì•Šê³  `unsigned char` íƒ€ì…ì˜ ë°ì´í„° m_data í•˜ë‚˜ë¥¼ ì‹¸ìš©í•œë‹¤.
      - ì´ 1byte = 8bitë¡œ 8ê°€ì§€ì˜ ture or falseë¥¼ í‘œí˜„í•  ê²ƒ.
    - íŠ¹ë³„íˆ ìƒì„±ì ìˆë‹¤!
      - m_data ë¥¼ 0 ìœ¼ë¡œ ì´ˆê¸°í™”í•¨.
    - > **set(int index, bool value)** index ë²ˆì§¸ ìë¦¬ì— value ê°’ì„ setí•œë‹¤.
      - ì˜ˆë¥¼ë“¤ì–´ indexê°€ 5 ë¼ë©´
        - `unsigend char m_data`ì˜ 5 ë²ˆì§¸ ìë¦¬ì— `bool value`ì˜ ê²°ê³¼ì¸ 0 or 1 ì„ ì €ì¥í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— 00000001 ì„ 5 ë§Œí¼ ì™¼ìª½ shift ì—°ì‚° í•´ì£¼ê³  ì´ë¥¼ `mask`ì— ëŒ€ì….
          - mask = `1 << 5` ğŸ‘‰ `00100000`
      - `bool value`ê°€ True ë¼ë©´
        - `unsigend char m_data`ì˜ 5ë²ˆì§¸ ìë¦¬ë¥¼ 1ë¡œ ë§Œë“¤ì–´ì£¼ì–´ì•¼ í•œë‹¤.
          - `m_data |= mask` ğŸ‘‰ `m_data |= 00100000`
      - `bool value`ê°€ False ë¼ë©´
        - `unsigend char m_data`ì˜ 5ë²ˆì§¸ ìë¦¬ë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ì–´ì•¼ í•œë‹¤.
          - `m_data &= ~mask` ğŸ‘‰ `m_data |= 00100000`
    - > **get(int index)** index ë²ˆì§¸ ìë¦¬ì˜ value ê°’ì„ get ë¦¬í„´í•œë‹¤.
      - ì˜ˆë¥¼ë“¤ì–´ indexê°€ 4 ë¼ë©´
        - `unsigend char m_data`ì˜ 4 ë²ˆì§¸ ìë¦¬ì˜ bit ê°’ì´ 1 ì´ë©´ True ë¦¬í„´, 0 ì´ë©´ False ë¦¬í„´ ì‹ìœ¼ë¡œ êµ¬í˜„í•´ì•¼ í•œë‹¤.
        -  00000001 ì„ 4 ë§Œí¼ ì™¼ìª½ shift ì—°ì‚° í•´ì¤€ë‹¤.
          - mask = `1 << 4` ğŸ‘‰ `00010000`
          - `mask`ëŠ” 4ë²ˆì§¸ ìë¦¬ë§Œ 1ì¸ ë¹„íŠ¸ê°€ ëœë‹¤.
        - `m_data & mask` ê²°ê³¼ê°€ `mask = 00010000` ì´ë©´, ì¦‰ 0ì´ ì•„ë‹ˆë©´ True ë¦¬í„´
        - `m_data & mask` ê²°ê³¼ê°€ `00000000` ì´ë©´, ì¦‰ 0ì´ë©´ False ë¦¬í„´ 
- ì¶œë ¥
  ```
  0 1 2 3 4 5 6 7 Sizeof Storage8<int> 32
  0 1 1 1 0 1 1 1 Sizeof Storage8<bool> 1
  ```
  - int ë¡œ êµ¬ì²´í™” ë˜ì—ˆì„ ë• 8 í¬ê¸°ì˜ int ë°°ì—´ ë©¤ë²„ë¡œ 8 * 4byte = 32 byte ë¡œ í¬í‚¤ê°€ 32ë¡œ ë‚˜ì˜¨ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
  - boolë¡œ êµ¬ì²´í™” ë˜ì—ˆì„ ë• char ë©¤ë²„ í•˜ë‚˜ë¡œ 1 byte í¬ê¸°ë¡œ í¬ê¸°ê°€ 1 ì´ ë‚˜ì˜¨ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.
    - bool íƒ€ì…ì´ êµ¬ì²´í™”ê°€ ë˜ì§€ ì•Šê³  ê·¸ëƒ¥ boolë„ 8 í¬ê¸°ì˜ bool ë°°ì—´ ë©¤ë²„ë¥¼ ì‚¬ìš©í–ˆë‹¤ë©´ 8 ì´ ë‚˜ì™”ì„ ê²ƒì´ë‹¤. 
      - bool ì›ë˜ëŠ” 1 byteë‹ˆê¹Œ. 1bitë¡œ í‘œí˜„í•  ìˆ˜ ìˆê¸´ í•˜ì§€ë§Œ! 

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}
<br>

