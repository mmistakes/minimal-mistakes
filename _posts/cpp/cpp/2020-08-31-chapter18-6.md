---
title:  "C++ Chapter 18.6 : ê¸°ë³¸ì ì¸ íŒŒì¼ ì…ì¶œë ¥" 

categories:
  - Cpp
tags:
  - [Programming, Cpp]

toc: true
toc_sticky: true

date: 2020-08-31
last_modified_at: 2020-08-31
---

ì¸í”„ëŸ°ì— ìˆëŠ” í™ì •ëª¨ êµìˆ˜ë‹˜ì˜ **í™ì •ëª¨ì˜ ë”°ë¼ í•˜ë©° ë°°ìš°ëŠ” C++** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€    
[ğŸŒœ [í™ì •ëª¨ì˜ ë”°ë¼ í•˜ë©° ë°°ìš°ëŠ” C++]ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸°!](https://www.inflearn.com/course/following-c-plus)
{: .notice--warning}

<br> 

# chapter 18. ì…ë ¥ê³¼ ì¶œë ¥

# ê¸°ë³¸ì ì¸ íŒŒì¼ ì…ì¶œë ¥

## ğŸ”” íŒŒì¼ ì¶œë ¥ (Writing)

### ì•„ìŠ¤í‚¤ í¬ë§·ìœ¼ë¡œ íŒŒì¼ ì¶œë ¥ (ë””í´íŠ¸)

```cpp
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>
#include <cstdlib>		// for exit();
using namespace std;

int main()
{
	const string filename = "file.txt";

	// Writing
	if (true)
	{
		ofstream ofs(filename);
		if (!ofs) { std::cerr << "Making file error\n"; exit(EXIT_FAILURE);  }

		for (char i = 'a'; i <= 'z'; ++i)
			ofs << i ;
		ofs << '\n';
	}
}
```

- `it (true)`
    - ë¬´ì¡°ê±´ ê±°ì¹˜ê²Œ ë˜ì–´ ìˆëŠ” ifë¬¸ì´ë‹¤.
    - ë¸”ë¡ì„ ë²—ì–´ë‚˜ë©´ ìë™ìœ¼ë¡œ `ofs.close()` íŒŒì¼ì´ ë‹«í ìˆ˜ ìˆë„ë¡.
    - if(false)ë¡œ ë°”ê¾¸ë©´ ì´ ë¸”ë¡ì€ ì‹¤í–‰í•˜ì§€ ì•Šê²Œ í• ìˆ˜ë„ ìˆìœ¼ë‹ˆ ì´ë ‡ê²Œ ifë¬¸ì— ë„£ì–´ì£¼ë©´ í¸ë¦¬í•˜ë‹¤.
- `ofstream ofs("file.txt)`
    - file.txt íŒŒì¼ì„ ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì‚¼ëŠ”ë‹¤. ì´ íŒŒì¼ì— í˜ë ¤ ë³´ë‚´ write í•  ê²ƒì„ì„ ë‚˜íƒ€ë‚¸ë‹¤.
- `if (!ofs)`  íŒŒì¼ì„ ì—´ ìˆ˜ ì—†ë‹¤ë©´ 
  - `ofs`ëŠ” nullptrì¼ ê²ƒ
  - `exit(1)` ì¢…ë£Œ ì‹œì¼œì£¼ê¸°
- `for (char i = 'a'; i <= 'z'; ++i)`
  - `ofs << i ;`
  - a~z ê¹Œì§€ì˜ ë¬¸ìë¥¼ `ofs` ìŠ¤íŠ¸ë¦¼ì— ë³´ë‚¸ë‹¤. file.txtì— a~z ë¬¸ìê°€ ì“°ì—¬ ì €ì¥ë¨.
- ì´ì œ í”„ë¡œì íŠ¸ ìœ„ì¹˜ì™€ ê°™ì€ í´ë”ì— ê°€ë³´ë©´ file.txt íŒŒì¼ì´ ìƒê²¨ìˆì„ ê²ƒì´ë‹¤!



<br>

### ë°”ì´ë„ˆë¦¬ë¡œ íŒŒì¼ ì¶œë ¥

- ì•„ìŠ¤í‚¤ í¬ë§·ìœ¼ë¡œ íŒŒì¼ì„ ì¶œë ¥í•˜ëŠ”ê±´ ì—„ì²­ ëŠë¦¬ë‹¤.
- ê·¸ë˜ì„œ ì‹¤ë¬´ì—ì„  ë°”ì´ë„ˆë¦¬ë¡œ ì €ì¥í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.

#### ë°©ë²• 1ï¸âƒ£ ofstreamì˜ write ì‚¬ìš©

```cpp
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>
#include <cstdlib>		// for exit();
using namespace std;

int main()
{
	const string filename = "file.txt";

	// Writing
	if (true)
	{
		ofstream ofs(filename);
		if (!ofs) { std::cerr << "Making file error\n"; exit(EXIT_FAILURE);  }

		const unsigned num_data = 10;
		ofs.write((char*)&num_data, sizeof(num_data));

		for (int i = 0; i < num_data; ++i)
				ofs.write((char*)&i, sizeof(i)); 
	}
}
```

- ë°”ì´ë„ˆë¦¬ë¡œ ì €ì¥í•  ë• ë°ì´í„°ê°€ ì–´ë””ê¹Œì§€ ì €ì¥ë˜ëŠ”ì§€ ì•Œ ìˆ˜ê°€ ì—†ê¸° ë•Œë¬¸ì— ë°ì´í„°ê°€ ëª‡ ê°œë¥¼ ì €ì¥í• ì§€, ì–¼ë§ˆì˜ í¬ê¸°ë¡œ ì €ì¥í• ì§€ ë¯¸ë¦¬ ì•½ì†í•´ì•¼ í•œë‹¤.
  - 10ê°œì˜ ë¬¸ìë¥¼ ì €ì¥í•˜ê³  ì‹¶ë‹¤ë©´
    - `unsinged num_data = 10;`
- `ofs.write(const char* str, streamsize n)`
  - write í•¨ìˆ˜ 
    - ë°”ì´ë„ˆë¦¬ ê°’ ê·¸ëŒ€ë¡œ `ofs`ì— ì¶œë ¥ëœë‹¤.
    - ì²«ë²ˆì§¸ ì¸ìˆ˜ 
      - charí˜• í¬ì¸í„°ë‚˜ ì£¼ì†Œê°’
      - `(char*)&num_data`
        - num_data ì˜ ì£¼ì†Œë¥¼ `char*`ë¡œ ìºìŠ¤íŒ…í•˜ì—¬ ë„˜ê¹€
    - ë‘ë²ˆì§¸ ì¸ìˆ˜
      - ì¶œë ¥í•  byte ìˆ˜
        - `sizeof(num_data)`
          - num_data ê°’ë§Œí¼ì˜ í¬ê¸°ë¥¼ ì €ì¥í• ê±°ë¼ê³  ì•½ì†í•˜ê³  ë„˜ê¹€
  - ofs ìŠ¤íŠ¸ë¦¼ì¸ file.txt ì— "10"ì´ ë°”ì´ë„ˆë¦¬ë¡œ ì“°ì—¬ì§€ê³  ì €ì¥ëœë‹¤.
    - `for (int i = 0; i < num_data; ++i) ofs.write((char*)&i, sizeof(i));`
      - forë¬¸ 10ë²ˆ ëŒë©´ì„œ
        - 0 1 2 3 4 5 6 7 8 9 ê°€ ë°”ì´ë„ˆë¦¬ë¡œ file.txt.ì— ì €ì¥ë  ê²ƒ.
    - ìµœì¢…ì ìœ¼ë¡œ file.txt ì—  10 0 1 2 3 4 5 6 7 8 9 ë¡œ ì“°ì—¬ìˆìŒ

#### ë°©ë²• 2ï¸âƒ£ íŒŒì¼ ìŠ¤íŠ¸ë¦¼ ëª¨ë“œë¥¼ ios::binaryë¡œ.
-  ofstream ofs ("file.txt", `ios:binary` )

<br>

## ğŸ”” íŒŒì¼ ì…ë ¥ (Reading)

### ì•„ìŠ¤í‚¤ í¬ë§·ìœ¼ë¡œ íŒŒì¼ ì…ë ¥ ( ë””í´íŠ¸ )

- `ifstream ifs("file.txt")`
    - í”„ë¡œì íŠ¸ ìœ„ì¹˜ì™€ ê°™ì€ í´ë”ì—ì„œ file.txt íŒŒì¼ì„ íŒŒì¼ ì…ë ¥ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¨ë‹¤.
- `if (!ifs)`
    - íŒŒì¼ì„ ì—´ì§€ ëª» í•œë‹¤ë©´. ì˜¤ë¥˜. ifsì— nullptr ë“¤ì–´ê°€ìˆì„ ê²ƒ. exitë¡œ ì¢…ë£Œí•´ì£¼ì.
- `getline(ifs, str);`
    - ifs ë¡œë¶€í„° í•œì¤„ ì”© ì½ì–´ ë“¤ì—¬ string strì— ì €ì¥
    - íŒŒì¼ ë EOFì— ë„ë‹¬í•˜ë©´ ifsê°€ EOFê°€ ë˜ì–´ whileë¬¸ ë¹ ì ¸ ë‚˜ì˜´.

```cpp
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>
#include <cstdlib>		// for exit();
using namespace std;

int main()
{
	const string filename = "file.txt";

	// Reading
	if (true)
	{
		ifstream ifs(filename);

		if (!ifs) { std::cerr << "Opening file error\n"; exit(EXIT_FAILURE);  }

		while (ifs)
		{
			std::string str;
			getline(ifs, str);

			std::cout << str << endl;
		}
	}
}
```

<br>

### ë°”ì´ë„ˆë¦¬ íŒŒì¼ ì…ë ¥

- ì•„ìŠ¤í‚¤ í¬ë§·ìœ¼ë¡œ ë¶ˆëŸ¬ë“¤ì´ëŠ”ê±´ ë„ˆë¬´ ëŠë¦¬ë‹¤

#### ë°©ë²• 1ï¸âƒ£ ifstreamì˜ read()ì´ìš©

```cpp
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>
#include <cstdlib>		// for exit();
using namespace std;

int main()
{
	const string filename = "file.txt";

	// Reading
	if (true)
	{
		ifstream ifs(filename);

		if (!ifs) { std::cerr << "Opening file error\n"; exit(EXIT_FAILURE);  }

		const unsigned num_data = 0;
		ifs.read((char*)&num_data, sizeof(num_data));

		for (int i = 0; i < num_data; ++i)
		{
				int num;
				ifs.read((char*)&num, sizeof(num));
				std::cout << num << endl;
		}		
	}
}
```

- `const unsigned num_data = 0`
  - ì–¼ë§ˆ ì •ë„ì˜ í¬ê¸°ë¡œ ì½ì–´ ì˜¬ì§€ ì•„ì§ ëª°ë¼ì„œ 0ìœ¼ë¡œ ì´ˆê¸°í™”.
  - ë¯¸ë¦¬ file.txtì— ìˆ«ì ëª‡ê°œ ì½ì–´ë“¤ì¼ì§€ë¥¼ í¬ê¸°ë¥¼ `num_data`ì— ì €ì¥í•´ë†“ëŠ”ë‹¤.
        - 10 0 1 2 3 4 5 6 7 8 9  ë¡œ ì“°ì—¬ìˆë‹¤ê³  ê°€ì •.
            - 10 ì€ `num_data`ì—
            - 0123456789 ëŠ” `num` ì— ë¶ˆëŸ¬ì™€ì§ˆ ê²ƒ.
            - ëª‡ê°œ ì½ì–´ ë“¤ì¼ì§€ 10ìœ¼ë¡œ ì´ë ‡ê²Œ ì•ì— ì¨ë†“ê³  ì €ì¥í•´ë†“ê¸° 
            ( ì•”ë¬µì ì¸ ì•½ì† )
- `ifs.read(const char* str, streamsize n)`
  - `ifs.read((char*)&num_data, sizeof(num_data));`
  - read í•¨ìˆ˜
    - ë°”ì´ë„ˆë¦¬ ê°’ ê·¸ëŒ€ë¡œ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œë¶€í„° ì…ë ¥í•´ì˜¨ë‹¤.
    - ì²«ë²ˆì§¸ ì¸ìˆ˜ 
      - charí˜• í¬ì¸í„°ë‚˜ ì£¼ì†Œê°’
      - `(char*)&num_data`
        - num_data ì˜ ì£¼ì†Œë¥¼ char*ë¡œ ìºìŠ¤íŒ…í•˜ì—¬ ë„˜ê¹€
    - ë‘ë²ˆì§¸ ì¸ìˆ˜ 
      - ì…ë ¥í•  byte ìˆ˜. ifsì¸ file.txtë¡œë¶€í„° num_dataì— ì½ì–´ë“¤ì¼ í¬ê¸°ê°€ ì €ì¥ ëœë‹¤.
      - `sizeof(num_data)`
        - ì¶”ì¶œí•  ë¬¸ìì˜ í¬ê¸°.
    - forë¬¸
        - num ë³€ìˆ˜ì— íŒŒì¼ë¡œ ë¶€í„° ì½ì–´ë“¤ì—¬ì„œ
        - 0 1 2 3 4 5 6 7 8 9 ê°€ ì°¨ë¡€ë¡œ ì €ì¥ë˜ê³  ê°ê° ì¶œë ¥.



<br>

## ğŸ”” íŒŒì¼ ëª¨ë“œ

![image](https://user-images.githubusercontent.com/42318591/91711354-bcae2900-ebc0-11ea-9df4-b9dc01fed4d4.png){: width="70%" height="70%"}{: .align-center}

- `ios::app`
  - append í•˜ê¸°. íŒŒì¼ì´ ì´ë¯¸ ì¡´ì¬í•  ê²½ìš°ì—ëŠ” ì´ì–´ì„œ write.
- `ios::binary`
  - ë°”ì´ë„ˆë¦¬ ëª¨ë“œ.
  
***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}
<br>