---
title:  "C++ Chapter 15.5 : ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°1ï¸âƒ£ std::unique_ptr" 

categories:
  - Cpp
tags:
  - [Programming, Cpp]

toc: true
toc_sticky: true

date: 2020-08-09
last_modified_at: 2020-08-09
---

ì¸í”„ëŸ°ì— ìˆëŠ” í™ì •ëª¨ êµìˆ˜ë‹˜ì˜ **í™ì •ëª¨ì˜ ë”°ë¼ í•˜ë©° ë°°ìš°ëŠ” C++** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€    
[ğŸŒœ [í™ì •ëª¨ì˜ ë”°ë¼ í•˜ë©° ë°°ìš°ëŠ” C++]ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸°!](https://www.inflearn.com/course/following-c-plus)
{: .notice--warning}

<br> 

# chapter 15. ì˜ë¯¸ë¡ ì  ì´ë™ê³¼ ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°

# 15.5 ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°1ï¸âƒ£ std::unique_ptr

## ğŸ”” ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°ë€?

> #include \<memory.h> í•´ì£¼ì–´ì•¼ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.

- **ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°** 
  - ğŸ‘‰ í¬ì¸í„°ê°€ ì°¸ì¡°í•˜ê³  ìˆëŠ” ë™ì  ë©”ëª¨ë¦¬ë¥¼ <u>ìë™ìœ¼ë¡œ delete ì‹œì¼œì¤€ë‹¤.</u> scopeë¥¼ ë²—ì–´ë‚˜ë©´ ì•Œì•„ì„œ ì†Œë©¸ìë¥¼ í˜¸ì¶œí•´ì£¼ê¸° ë•Œë¬¸!
    - ëª¨ë“  ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°ëŠ” ê³µí†µì ìœ¼ë¡œ ì´ íŠ¹ì§•ì„ ê°€ì§.
    - í”„ë¡œê·¸ë˜ë¨¸ê°€ ì§ì ‘ `delete`ë¥¼ ëª…ì‹œí•´ì¤„ í•„ìš”ê°€ ì—†ë‹¤.
      - ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë°©ì§€í•´ì¤€ë‹¤.
        - if-elseë¬¸ì— ë§Œë‚˜ê±°ë‚˜ ì˜ˆì™¸ë¥¼ ë§Œë‚˜ throw ë˜ëŠ” ë“±ë“± ì¼ì° return ë˜ì–´ `delete`ë¬¸ì„ ë§Œë‚˜ì§€ ëª»í•˜ëŠ” ê²½ìš°ë¥¼ ë°©ì§€í•¨
  - `->`, `*` ì—°ì‚°ë„ ì˜¤ë²„ë¡œë”© ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì¼ë°˜ í¬ì¸í„°ì²˜ëŸ¼ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.
- ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°ì˜ ì¢…ë¥˜
  1. **unique_ptr**
  2. shared_ptr
  3. weak_ptr
- ì„ ì–¸í•  ë•Œ ì¼ë°˜ í¬ì¸í„°ì²˜ëŸ¼ `*`ì„ ë¶™ì´ì§€ ì•ŠëŠ”ë‹¤.
  ```cpp
  Resource * res = new Resource(1000000);  // ì¼ë°˜ í¬ì¸í„° ì„ ì–¸ê³¼ ì •ì˜
  std::unique_ptr<Resource> res(new Resource(1000000)); // ìŠ¤ë§ˆíŠ¸ í¬ì¸í„° ì„ ì–¸ê³¼ ì •ì˜
  ```

<br>

## ğŸ”” unique_ptr

- íŠ¹ì • ê°ì²´ì— <u>ìœ ì¼í•œ ì†Œìœ ê¶Œ</u>(*unique*)ì„ ë¶€ì—¬í•˜ëŠ” í¬ì¸í„° ê°ì²´
  - í¬ì¸í„°ê°€ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ë°ì´í„°ì˜ ì†Œìœ ê¶Œì´ í•œ ê³³ì—ë§Œ ì†í•  ê²½ìš° ì‚¬ìš©í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°.
  - ì´ ê°ì²´ë¥¼ ì˜ ë³´ê´€í•˜ê³  ë§‰ì•„ì£¼ê² ë‹¤ëŠ” ì„±ê²©ì´ ê°•í•¨

```cpp
#include <iostream>
#include <memory>  // â­â­
using namespace std;

class Resource
{
public:
	int * m_data = nullptr;
	unsigned m_length = 0;

public:
	Resource()
	{
		cout << "Resource constructed" << endl;
	}

	Resource(unsigned length) 
	{
		cout << "Resource length constructed" << endl;
		this->m_data = new int[length];
		this->m_length = length;
	}
	
	Resource(const Resource &res) // ë³µì‚¬ ìƒì„±ì 
	{
		cout << "Resource copy constructed" << endl;

		Resource(res.m_length);

		for (unsigned i = 0; i < m_length; ++i)  // ê¹Šì€ ë³µì‚¬
			m_data[i] = res.m_data[i];
	}
	
	~Resource()  // ì†Œë©¸ì
	{
		cout << "Resource destroyed" << endl;
	}
	
	Resource & operator = (Resource & res)  // ëŒ€ì… ì—°ì‚°ì ì˜¤ë²„ë¡œë”©
	{
		cout << "Resource copy assignment" << endl;

		if (&res == this) return *this; 

		if (this->m_data != nullptr) delete[] m_data; 

		m_length = res.m_length; 

		m_data = new int[m_length]; 
		for (unsigned i = 0; i < m_length; ++i) 
			m_data[i] = res.m_data[i]; //  ê¹Šì€ ë³µì‚¬

		return *this;
	}
	
	void print()  // Resourceì˜ ë™ì  ë°°ì—´ m_dataì˜ ëª¨ë“  ì›ì†Œê°’ì„ ì¶œë ¥í•œë‹¤.
	{
		for (unsigned i = 0; i < m_length; ++i)
				std::cout << m_data[i] << " ";
		std::cout << std::endl;
	}

	void setAll(const int& v) // Resourceì˜ ë™ì  ë°°ì—´ m_data ì˜ ëª¨ë“  ì›ì†Œê°’ì„ v ê°’ìœ¼ë¡œ ì„¤ì •í•œë‹¤.
	{
		for (unsigned i = 0; i < m_length; ++i)
				m_data[i] = v;
	}
};

int main()
{
	{
		std::unique_ptr<int> upi(new int);  // â­int ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ” ìŠ¤ë§ˆíŠ¸ í¬ì¸í„° upi
	
		auto *ptr = new Resource(5);
		std::unique_ptr<Resource> res1(ptr); // â­Resource íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ” ìŠ¤ë§ˆíŠ¸ í¬ì¸í„° res1

		res1->setAll(5); // ëª¨ë“  ì›ì†Œë¥¼ 5 ë¡œ ì„¤ì •
		res1->print();  // ëª¨ë“  ì›ì†Œ ì¶œë ¥
	}
}
```
```
ğŸ’ì¶œë ¥ğŸ’

Resource length constructed
5 5 5 5 5
Resource destroyed
```

<br>

### unique_ptrì˜ í•¨ìˆ˜ë“¤

#### make_unique í•¨ìˆ˜

> `std::make_unique` í•¨ìˆ˜ ğŸ‘‰ <u>unique_ptr ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì•ˆì „í•˜ê²Œ ìƒì„±í•  ìˆ˜ ìˆë‹¤.</u>

1. ì „ë‹¬ ë°›ì€ ì¸ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì§€ì •ëœ íƒ€ì…ì˜ ê°ì²´ë¥¼ ìƒì„±
2. ìƒì„±ëœ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” `unique_ptr` ì„ <u>ë¦¬í„´</u>ë°›ì„ ìˆ˜ ìˆë‹¤.
  - *std::unique_ptr\<Resource> res1 = new Resource(5)* ëŠ” ë¦¬í„´ ì—†ì´ ë‹¨ìˆœíˆ `unique_ptr`ë¥¼ ì„ ì–¸í•˜ëŠ” ê²ƒì´ ë˜ëŠ” ë°˜ë©´ì— `std::make_unique` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ `unique_ptr`ë¥¼ ë¦¬í„´ ë°›ì„ ìˆ˜ ìˆë‹¤.

```cpp
int main()
{
	{
		std::unique_ptr<int> upi(new int);
	
		auto res1 = std::make_unique<Resource>(5);
        // std::unique_ptr<Resource> res1 = new Resource(5);  

		res1->setAll(5);
		res1->printf();

	}
}
```

- `auto res1 = std::make_unique<Resource>(5)`
  1. new Resource(5) í•˜ì—¬ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ê³  ê°ì²´ë¥¼ ìƒì„±í•œ í›„
  2. ì´ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” unique_ptrë¥¼ ë¦¬í„´í•˜ì—¬ `res1`ì— ë³µì‚¬ëœë‹¤. ğŸ‘‰ **ì–•ì€ ë³µì‚¬**

#### get í•¨ìˆ˜ 

> `get()` unique_ptr ìì²´ì—ì„œ ê°€ì§€ê³  ìˆëŠ” í•¨ìˆ˜ë¡œ <u>ì¼ë°˜ í¬ì¸í„°ë¥¼ ë¦¬í„´ì‹œí‚¨ë‹¤.</u>

```cpp
void doSomething2(Resource * res)  // ì¼ë°˜í¬ì¸í„°
{
	res->setAll(100);
	res->print();
}

int main()
{
    auto res1 = std::make_unique<Resource>(5);
    doSomething2(res1.get());
}
```

- `res1.get()` 
  - unique_ptrì¸ `res1`ì„ ì¼ë°˜ í¬ì¸í„°ë¡œì„œ ë¦¬í„´í•˜ì—¬ doSomething2 í•¨ìˆ˜ì—ê²Œ ì¸ìˆ˜ë¡œ ë„˜ê¸°ê³  ìˆë‹¤. 

<br>

### std::unique_ptrì˜ íŠ¹ì§•

```cpp
// res1, res2ëŠ” unique_ptr íƒ€ì…ì˜ ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°

auto res1 = std::make_unique<Resource>(5);
std::unique_ptr<Resource> res2;

res2 = res1; // âŒì˜¤ë¥˜! unique_ptrì€ ë³µì‚¬ë¥¼ ëª»í•œë‹¤.
res2 = std::move(res1); // â­•
```

- <u>ë³µì‚¬ë¥¼ ëª» í•œë‹¤.</u> Copy SemanticsëŠ” ì•ˆë¨. ì»´íŒŒì¼ ì˜¤ë¥˜ ë‚¨!
  - `unique_ptr`ì€ âœ¨**í•œ ê°ì²´ì˜ ì†Œìœ ê¶Œì€ ì˜¤ë¡œì§€ í•œ ê³³ì—ì„œë§Œ ê°€ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì—** `res2 = res1` ì´ë ‡ê²Œ í¬ì¸í„°ë¼ë¦¬ ë‹¨ìˆœíˆ ë³µì‚¬ë¥¼ í•˜ë©´ `res2`ì™€ `res1` ë‘ ê³³ì—ì„œ ë™ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•´ ì†Œìœ ê¶Œì„ ê°€ì§€ê²Œ ë˜ê¸° ë•Œë¬¸ì—!
- <u>ì´ë™ë§Œ í•  ìˆ˜ ìˆë‹¤.</u> Move Semanticsë§Œ ì‚¬ìš© ê°€ëŠ¥.
  - `res2 = std::move(res1)`
    - `res1`ì´ R-valueë¡œ ë°”ë€ë‹¤.
    - `res1`ì€ ì†Œìœ ê¶Œì´ ë°•íƒˆ ë˜ì–´ ì´ì œ ì•„ë¬´ ê°ì²´ë„ ê°€ë¦¬í‚¤ì§€ ì•ŠëŠ” nullptrì´ ë˜ê³ 
    - `res2`ì€ `res1`ì´ ì†Œìœ í•˜ê³  ìˆë˜ ê°ì²´ì˜ ì†Œìœ ê¶Œì„ ë¬¼ë ¤ ë°›ê²Œ ëœë‹¤.
  - `res1`ì€ ì†Œìœ ê¶Œì´ ë°•íƒˆë˜ê³  ê·¸ ì†Œìœ ê¶Œì´ `res2`ë¡œ ì´ì „ë˜ë¯€ë¡œ **í•œ ê°ì²´ì˜ ì†Œìœ ê¶Œì´ ì˜¤ë¡œì§€ í•œ ê³³ì—ì„œë§Œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” unique_ptrì˜ ì„±ì§ˆì´ ë³´ì¥ëœë‹¤.**

> ì´ì²˜ëŸ¼ `unique_ptr`ì€ ì„œë¡œì˜ ë‹¨ìˆœ ë³µì‚¬ë¥¼ ë§‰ì•„ ì–´ë–¤ ê°ì²´ì— ëŒ€í•œ ì†Œìœ ê¶Œì„ ì˜¤ë¡œì§€ í•˜ë‚˜ì˜ `unique_ptr`ì—ì„œë§Œ ê°€ë¦¬í‚¬ ìˆ˜ ìˆë„ë¡ ë³´ì¥í•´ì¤€ë‹¤. 

```cpp
auto doSomething()
{
	return std::unique_ptr<Resource>(new Resource(5));
    // return std::make_unique<Resource>(5);
}

int main()
{
	{
		
        auto res1 = std::make_unique<Resource>(5);
		// auto res1 = doSomething(); 

		res1->setAll(5);
		res1->print();
	
		std::unique_ptr<Resource> res2; // unique_ptrì¸ res2ëŠ” ì„ ì–¸ë§Œ ëê³  ì•„ì§ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ê°ì²´ëŠ” ì—†ìœ¼ë¯€ë¡œ nullptrì¸ ìƒíƒœ

        // std::boolalpha : 0, 1 ëŒ€ì‹  true, false ì¶œë ¥. nullì´ë©´ falseì¶œë ¥.
		std::cout << std::boolalpha;  
		std::cout << static_cast<bool>(res1) << std::endl; // true ì¶œë ¥
		std::cout << static_cast<bool>(res2) << std::endl; // false ì¶œë ¥

		res2 = std::move(res1);

		std::cout << std::boolalpha;
		std::cout << static_cast<bool>(res1) << std::endl; // false ì¶œë ¥. res1ì€ ì†Œìœ ê¶Œì„ ìƒì–´ nullptrì´ ë¨
		std::cout << static_cast<bool>(res2) << std::endl; // true ì¶œë ¥. res2ì—ê²Œë¡œ ì†Œìœ ê¶Œì´ ì´ì „ë¨

		if (res1 != nullptr) res1->print();
		if (res2 != nullptr) res2->print();
	}
}
```
```
ğŸ’ì¶œë ¥ğŸ’

Resource length constructed
5 5 5 5 5
true
false
false
true
5 5 5 5 5
```

- í•¨ìˆ˜ ë¦¬í„´ ê°’ì€ R-valueì´ë‹ˆê¹Œ `unique_ptr`ë¥¼ ë¦¬í„´í•˜ëŠ” `doSomething()`ì€ `unique_ptr`ë¥¼ R-valueë¡œì„œ ë¦¬í„´í•˜ëŠ” ê²ƒì´ë‚˜ ë§ˆì°¬ê°€ì§€.
  - *auto res1 = doSomething();*
    - ì„ì‹œ ê°ì²´ ë¦¬í„´ì˜ ì†Œìœ ê¶Œì´ `res1`ë¡œ ì´ì „
- *auto res1 = std::make_unique\<Resource>(5);*
  - `res1`ì€ í˜„ì¬ Resource ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ì¤‘
- *std::unique_ptr\<Resource> res2;*
  - unique_ptrì¸ `res2`ëŠ” <u>ì„ ì–¸ë§Œ ëê³  ì•„ì§ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ê°ì²´ëŠ” ì—†ìœ¼ë¯€ë¡œ</u> nullptrì¸ ìƒíƒœ
    - ì •ì˜ê¹Œì§€ í•˜ë ¤ë©´ *std::unique_ptr\<Resource> res2 = new Resource(5);* ê°€ ëì—ˆì–´ì•¼ í•¨
- *res2 = std::move(res1);*
  - `res1`ì´ ê°€ë¦¬í‚¤ë˜ ê°ì²´ì˜ ì†Œìœ ê¶Œì´ `res2`ì—ê²Œë¡œ ì´ì „ ë˜ì—ˆê¸° ë•Œë¬¸ì— `res1`ì€ ì†Œìœ ê¶Œì´ ë°•íƒˆ ë˜ì–´ nullptrì´ ëœë‹¤.

```cpp
Resource * res = new Resource;
std::unique_ptr<Resource> res1(res);
std::unique_ptr<Resource> res2(res);   // âŒì—ëŸ¬

delete res;  // âŒë¶ˆìƒì‚¬ ë°œìƒ ê°€ëŠ¥ì„± 
```

- ì¼ë°˜ í¬ì¸í„° `res`ê°€ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ê°ì²´ë¥¼ unique_ptrì¸ `res1`ê³¼ `res2`ê°€ ë™ì‹œì— ì†Œìœ í•˜ë ¤ê³  í•˜ë‹ˆ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.
  - unique_ptrì€ í•œ ê°ì²´ì— ëŒ€í•œ ì†Œìœ ê¶Œì´ í•œ í¬ì¸í„°ì—ë§Œ ìˆì–´ì•¼í•˜ë‹ˆê¹Œ ì´ì™€ ê°™ì€ ìƒí™©ë„ ë°©ì§€í•´ì£¼ëŠ” ê²ƒ!
- ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°ì¸ unique_ptrì€ scopeë¥¼ ë²—ì–´ë‚˜ë©´ ì•Œì•„ì„œ ìë™ìœ¼ë¡œ `delete`ë˜ê¸° ë•Œë¬¸ì— ì´ë ‡ê²Œ í”„ë¡œê·¸ë˜ë¨¸ê°€ `delete`ì„ ëª…ì‹œí•´ì£¼ëŠ”ê²Œ ì»´íŒŒì¼ ì˜¤ë¥˜ê°€ ë˜ëŠ”ê±´ ì•„ë‹ˆì§€ë§Œ í° ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤. ì´ë¯¸ `delete`ë˜ì—ˆëŠ”ë° ë˜ `delete`í•˜ë ¤ëŠ” ì‹œë„ê°€ ë  ìˆ˜ ìˆì–´ì„œ!

<br>

### unique_ptrì„ í•¨ìˆ˜ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ì£¼ëŠ” ê²½ìš°

> void doSomething2(std::unique_ptr\<Resource> `&` res) ğŸ‘‰ unique_ptrì„ í•¨ìˆ˜ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ ë°›ì„ ë•Œ <u>ë ˆí¼ëŸ°ìŠ¤ë¡œ ë°›ì„ ê²ƒì„ ê¶Œì¥í•œë‹¤.</u>

```cpp
void doSomething2(std::unique_ptr<Resource> & res)  // âœ¨ unique_ptr ë¥¼ ì¸ìˆ˜ë¡œ ë°›ì„ ë• ë ˆí¼ëŸ°ìŠ¤ë¡œ ë°›ê¸°ë¥¼ ê¶Œì¥í•¨
{                                                  
	res->setAll(10); 
}

int main
{
	{
		auto res1 = std::make_unique<Resource>(5);
		res1->setAll(1);
		res1->print();

		doSomething2(res1); // âœ¨ unique_ptrì¸ res1ì„ ë§¤ê°œë³€ìˆ˜ resê°€ ì°¸ì¡°í•˜ê²Œ ëœë‹¤.

		res1->print();
	}
}
```

> `unique_ptr reference` ê°€ ì•„ë‹Œ ê·¸ëƒ¥ `unique_ptr`ë¡œ ë°›ìœ¼ë©´ ì»´íŒŒì¼ ì˜¤ë¥˜ê°€ ë‚œë‹¤.

- unique_ptr ì€ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ì— ëŒ€í•´ ì†Œìœ ê¶Œì´ ìœ ì¼ í•´ì•¼ í•´ì„œ <u>'ë³µì‚¬'ë¥¼ ê¸ˆì§€í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</u>
  - ë‘ unique_ptrì´ í•œ ê°ì²´ì— ëŒ€í•œ ì†Œìœ ê¶Œì„ ë™ì‹œì— ê°€ì§€ ìš°ë ¤ê°€ ìˆê¸° ë•Œë¬¸

```cpp
void doSomething2(std::unique_ptr<Resource> res)  // ë ˆí¼ëŸ°ìŠ¤ê°€ ì•„ë‹Œ ê·¸ëƒ¥ unique_ptrìœ¼ë¡œ ë°›ìœ¼ë ¤ê³  í•˜ê³  ìˆë‹¤.
{                                                   
	res->setAll(100);  
}

int main
{
	{
		auto res1 = std::make_unique<Resource>(5);
		res1->setAll(1);
		res1->print();

		doSomething2(res1);  // âŒì»´íŒŒì¼ ì˜¤ë¥˜ ë°œìƒ. res = res1 ë³µì‚¬ë¥¼ ê¸ˆì§€í•˜ê¸° ë•Œë¬¸ì—.

		res1->print();
	}
}
```

> unique_ptr ì„ ì¸ìˆ˜ë¡œ ë°›ì„ ë•Œ ë ˆí¼ëŸ°ìŠ¤ë¡œ ë°›ì§€ ì•Šê³  ì¼ë°˜ unique_ptrë¡œ ë°›ì„ê±°ë¼ë©´ ì¸ìˆ˜ë¥¼ `std::move`ë¡œ ë„˜ê²¨ ì†Œìœ ê¶Œì„ ì´ì „+ë°•íƒˆ í•˜ì—¬ ë°›ì•„ë³´ì.

```cpp
void doSomething2(std::unique_ptr<Resource> res)  // ë ˆí¼ëŸ°ìŠ¤ê°€ ì•„ë‹Œ ê·¸ëƒ¥ unique_ptrìœ¼ë¡œ ë°›ìœ¼ë ¤ê³  í•˜ê³  ìˆë‹¤.
{                                                   
	res->setAll(100);  
	res->print();
}

int main
{
	{
		auto res1 = std::make_unique<Resource>(5);
		res1->setAll(1);
		res1->print();

		std::cout << std::boolalpha;
		std::cout << static_cast<bool>(res1) << std::endl; // true ì¶œë ¥

		doSomething2(std::move(res1));  // std::move ë¡œ res1ì˜ ì†Œìœ ê¶Œì„ resë¡œ ì´ì „í•œë‹¤. ê·¸ëŸ¬ë‚˜ res1ì˜ ì†Œìœ ê¶Œì€ ë°•íƒˆë˜ì–´ nullptrì´ ë˜ë²„ë¦°ë‹¤ëŠ” ë¬¸ì œê°€ ìƒê¹€
		
		std::cout << std::boolalpha;
		std::cout << static_cast<bool>(res1) << std::endl; // false ì¶œë ¥. res1ê°€ nullptrì´ ë˜ì–´ ë²„ë¦¼
	}
}
```

- `res = std::move(res1)`ì´ ë˜ëŠ” ê²ƒì´ë‚˜ ë§ˆì°¬ê°€ì§€.
  - ê°ì²´ì˜ ì†Œìœ ê¶Œì´ `res1`ì—ì„œ `res`ë¡œ ì˜®ê²¨ê°€ëŠ” ê²ƒì´ë‹ˆ ìœ ì¼í•œ ì†Œìœ ê¶Œì´ ë³´ì¥ë˜ì–´ ë¬¸ì œ ì—†ë‹¤.
  - ê·¸ëŸ¬ë‚˜ ì´ë ‡ê²Œ ë˜ë©´ `res1`ì˜ ì†Œìœ ê¶Œì´ ë°•íƒˆë˜ì–´ nullptrì´ ëœë‹¤ëŠ” ë¬¸ì œê°€ ìƒê¸´ë‹¤.
    - ë˜í•œ `res`ê°€ í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ì´ê¸° ë•Œë¬¸ì— í•¨ìˆ˜ê°€ ëë‚˜ë©´ í•´ë‹¹ ê°ì²´ê°€ `delete`ë˜ì–´ë²„ë¦°ë‹¤. 

> `res1`ì´ ì›ë˜ ì†Œìœ í–ˆë˜ ê°ì²´ë¥¼ ìƒê³  ì‹¶ì§€ ì•Šë‹¤ë©´ ê·¸ ê°ì²´ì˜ ì†Œìœ ê¶Œì„ ì´ì „ ë°›ì€ `res2`ê°€ í•¨ìˆ˜ê°€ ì¢…ë£Œë˜ì–´ `delete`ë˜ê¸° ì „ì— `res1`ì—ê²Œ ë‹¤ì‹œ ê·¸ ê°ì²´ë¥¼ ë¦¬í„´í•´ì£¼ë©´ ëœë‹¤!

```cpp
auto doSomething2(std::unique_ptr<Resource> res) // ë ˆí¼ëŸ°ìŠ¤ê°€ ì•„ë‹Œ ê·¸ëƒ¥ unique_ptrìœ¼ë¡œ ë°›ìœ¼ë ¤ê³  í•˜ê³  ìˆë‹¤.
{                                                   
	res->setAll(100);  
	res->print();

	return res;  // âœ¨ê°ì²´ë¥¼ ë‹¤ì‹œ ë¦¬í„´í•œë‹¤.
}


int main
{
	{
		auto res1 = std::make_unique<Resource>(5);
		res1->setAll(1);
		res1->print();

		std::cout << std::boolalpha;
		std::cout << static_cast<bool>(res1) << std::endl; // true ì¶œë ¥

		res1 = doSomething2(std::move(res1));  // res1ì˜ ì†Œìœ ê¶Œì´ ë°•íƒˆë˜ë‚˜ ì†Œìœ ê¶Œì´ ë°•íƒˆëœ ê·¸ ê°ì²´ë¥¼ ë‹¤ì‹œ ë¦¬í„´ë°›ìœ¼ë¯€ë¡œì¨ ë¬¸ì œ ì—†ê²Œ ëœë‹¤!
		
		std::cout << std::boolalpha;
		std::cout << static_cast<bool>(res1) << std::endl; // true ì¶œë ¥
	}
}

```

- `res1`ê°€ `res`ì—ê²Œ ì†Œìœ ê¶Œì„ ë„˜ê²¨ì£¼ì–´ ì†Œìœ ê¶Œì´ ë°•íƒˆë˜ì—ˆì§€ë§Œ `res1`ê°€ í•¨ìˆ˜ê°€ ëë‚  ë¬´ë µì— ë‹¤ì‹œ ê·¸ ê°ì²´ë¥¼ `res1`ì—ê²Œ ë¦¬í„´í•´ì£¼ì–´ ë¬¸ì œê°€ í•´ê²°ëœë‹¤! 

> `get()`í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¼ë°˜ í¬ì¸í„°ë¡œ ì ì‹œ ë³€í™˜í•˜ì—¬ ë„˜ê¸¸ ìˆ˜ë„ ìˆë‹¤.

```cpp
void doSomething2(Resource * res)  // ì¼ë°˜í¬ì¸í„°
{
	res->setAll(100);
	res->print();
}

int main()
{
    auto res1 = std::make_unique<Resource>(5);
    doSomething2(res1.get());
}
```

- `res1.get()` 
  - unique_ptrì¸ `res1`ì„ unique_ptrì´ ì•„ë‹Œ ì¼ë°˜ í¬ì¸í„°ë¡œì„œ ë„˜ê¸°ê³  ìˆê¸° ë•Œë¬¸ì— `res`ì™€ `res1`ì€ ê°™ì€ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ê²Œ ë˜ë”ë¼ë„ ë¬¸ì œê°€ ì—†ë‹¤. 

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}
<br>