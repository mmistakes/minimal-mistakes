---
title:  "[C++] 2.4 ê³µì¥ íŒ¨í„´ Factory Pattern" 

categories:
  - C++ games
tags:
  - [Programming, Cpp, OpenGL, Graphics, Design Pattern]

toc: true
toc_sticky: true

date: 2020-06-08
last_modified_at: 2020-06-08
---

ì¸í”„ëŸ°ì— ìˆëŠ” í™ì •ëª¨ êµìˆ˜ë‹˜ì˜ **í™ì •ëª¨ì˜ ê²Œì„ ë§Œë“¤ê¸° ì—°ìŠµ ë¬¸ì œ íŒ¨í‚¤ì§€** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤.ğŸ˜€   
[ğŸŒœ ê³µë¶€ì— ì‚¬ìš©ëœ í™ì •ëª¨ êµìˆ˜ë‹˜ì˜ ì½”ë“œë“¤ ë³´ëŸ¬ê°€ê¸°](https://github.com/jmhong-simulation/GameDevPracticePackage)   
[ğŸŒœ [í™ì •ëª¨ì˜ ê²Œì„ ë§Œë“¤ê¸° ì—°ìŠµ ë¬¸ì œ íŒ¨í‚¤ì§€] ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸°!](https://www.inflearn.com/course/c-2)
{: .notice--warning}

<br>

# Chapter 2. ê°ì²´ ì§€í–¥ìœ¼ë¡œ ê°€ëŠ” ê¸¸ : ê³µì¥ íŒ¨í„´
ë‹¤í˜•ì„±ê³¼ ê´€ë ¨ì´ ê¹Šë‹¤.

## ğŸ”” ê³µì¥ íŒ¨í„´ì˜ ì•„ì´ë””ì–´

```cpp
#include "Triangle.h"
#include "Circle.h"
#include "Box.h"

std::vector<GeometricObject *> my_objs;

my_objs.push_back(new Triangle(Colors::gold, vec2{ -0.5f, 0.2f }, 0.1f)); 
my_objs.push_back(new Circle(Colors::olive, vec2{ 0.1f, 0.1f }, 0.1f)); 
my_objs.push_back(new Box(Colors::black, vec2{ 0.5f, 0.5f }, 0.2f, 0.1f)); 
```
- ì €ë ‡ê²Œ ***<u>ë¬´ë”ê¸°ë¡œ #include í•  í•„ìš”ê°€ ì—†ê¸° ìœ„í•´</u>*** <u>ìì‹ íƒ€ì…ë³„ë¡œ ë¦¬í„´ ë°›ëŠ” í•¨ìˆ˜</u>ë¥¼  GeometricObject.h ì— ë§Œë“¤ì–´ì„œ <u>#includeëŠ” GeometricObject.h í•˜ë‚˜ë§Œ í•  ìˆ˜ ìˆë„ë¡</u> í•˜ë©´ ì–´ë–¨ê¹Œ

<br>

## ğŸ”” ê³µì¥ íŒ¨í„´ì´ë€? 
- ê³µì¥ì—ì„œ ë‹¤ì–‘í•œ ê°ì²´ë¥¼ ì°ì–´ë‚´ë“¯ì´, 'íŒ©í† ë¦¬'ê°€ ë˜ëŠ” <u>í´ë˜ìŠ¤ í•œê°œê°€ ëª¨ë“  íƒ€ì…ì„ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ê³„</u>í•˜ëŠ” íŒ¨í„´
  - Triangle , Circle ,  Box , Star   ì´ ê°ì²´ë“¤ì˜ ë¶€ëª¨ í´ë˜ìŠ¤ì¸ <u>GeometricObject í´ë˜ìŠ¤ê°€ ì´ ëª¨ë“  4ê°œì˜ ìì‹ íƒ€ì…ì„ ì²˜ë¦¬ í•  ìˆ˜ ìˆë„ë¡</u> ì„¤ê³„í•˜ê¸°
    - include ì—¬ëŸ¬ê°œ í•  í•„ìš”ì—†ì´ ë”± GeometricObject í—¤ë”íŒŒì¼ í•˜ë‚˜ë§Œ includeí•˜ë©´ ëœë‹¤.

### ğŸ“œGeometricObject.h

```cpp
#pragma once

#include "Game2D.h"

namespace jm
{
	class GeometricObject
	{
	public:
		vec2 pos;
		RGB  color;

		//virtual ~GeometricObject()
		//{}    ìŠ¤ë§ˆíŠ¸ í¬ì¸í„° shared_ptrì„ ì“´ë‹¤ë©´ í•„ìš” x

		void init(const RGB & _color, const vec2 & _pos)
		{
			color = _color;
			pos = _pos;
		}

		virtual void drawGeometry() const = 0;

		void draw()
		{
			beginTransformation();
			{
				translate(pos);
				drawGeometry();
			}
			endTransformation();
		}
		
		// ì„ ì–¸ë§Œ.  êµ¬í˜„ì€ GeometircObject.cpp ì—ì„œ 
		static GeometricObject * makeTriangle(const RGB & _color, const vec2 & _pos, const float & _size);
		static GeometricObject * makeCircle(const RGB & _color, const vec2 & _pos, const float & _size);
		static GeometricObject * makeBox(const RGB & _color, const vec2 & _pos, const float & _width, const float &_height);
		static GeometricObject * makeStar(const RGB & _color, const vec2 & _pos, const float & _os, const float & _is);
	};
}
```
### ğŸ“œGeometricObject.cpp
ì •ì‘ ì—¬ê¸°ì„  ëª¨ë“  ìì‹ íƒ€ì…ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ #includeë¥¼ ë¬´ë”ê¸°ë¡œ í•´ì£¼ê³  ìˆë‹¤.

```cpp
#include "GeometricObject.h"

#include "Triangle.h"   
#include "Circle.h"    
#include "Box.h"      
#include "Star.h"  

namespace jm
{
	/* ê° ìì‹ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì´ˆê¸°í™”í•˜ê³  í¬ì¸í„°ë¥¼ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜*/

	GeometricObject * GeometricObject::makeTriangle(const RGB & _color, const vec2 & _pos, const float & _size)
	{
		return new Triangle(_color, _pos, _size);
	}
	
	GeometricObject * GeometricObject::makeCircle(const RGB & _color, const vec2 & _pos, const float & _size)
	{
		return new Circle(_color, _pos, _size);
	}
	
	GeometricObject * GeometricObject::makeBox(const RGB & _color, const vec2 & _pos, const float & _width, const float & _height)
	{
		return new Box(_color, _pos, _width, _height);
	}

	GeometricObject * GeometricObject::makeStar(const RGB & _color, const vec2 & _pos, const float & _os, const float & _is)
	{
		return new Star(_color, _pos, _os, _is);
	}
}
```

### ğŸ“œmain
- ì´ì œ *#include "GeometricObject.h"* í•˜ë‚˜ë§Œ í•˜ë©´ ëœë‹¤. 
  - ì´ê±° í•˜ë‚˜ë§Œ í•´ë„ ëª¨ë“  ìì‹ë“¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
  - ğŸ“œGeometricObject.h ì—ì„œ ìì‹ ì¢…ë¥˜ë³„ë¡œ ì²˜ë¦¬ í•˜ëŠ” í•¨ìˆ˜ë“¤ì„ ê°ê° ë‹¤ ë§Œë“¤ì–´ë†¨ê¸° ë•Œë¬¸ì—.

```cpp
#include "GeometricObject.h"

/* GeometriObjectì˜ ê° ìì‹ íƒ€ì…ë“¤ì„ ìƒì„±í•˜ê³  ì´ˆê¸°í™” í•´ì£¼ëŠ” í•¨ìˆ˜ í˜¸ì¶œ */
my_objs.push_back(GeometricObject::makeTriangle(Colors::gold, vec2{ -0.5f, 0.2f }, 0.1f));
my_objs.push_back(GeometricObject::makeCircle(Colors::olive, vec2{ 0.1f, 0.1f }, 0.1f));
my_objs.push_back(GeometricObject::makeBox(Colors::black, vec2{ 0.5f, 0.5f }, 0.2f, 0.1f));
my_objs.push_back(GeometricObject::makeStar(Colors::gold, vec2{ 0.0f, -0.5f }, 0.25f, 0.15f));
```

<br>

## ğŸ””ê²Œì„ êµ¬í˜„ì‹œì—ëŠ”

- ê²Œì„ì—ì„œëŠ” ê°ì²´ ìƒì„±ì— ëŒ€í•´ 
ì´ëŸ°ì‹ì˜ í•˜ë“œ ì½”ë”©ì€ í•˜ì§€ ì•ŠëŠ” í¸ì´ë‹¤.
- ê²Œì„ ì œì‘ ì—ì„œëŠ”
  1. ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ë¡œ ê°ì²´ë“¤ì˜ ì •ë³´ë¥¼ ì…ë ¥ë°›ê±°ë‚˜
    - ex ) íƒ±í¬ëŠ” ì–´ë””ì— ìœ„ì¹˜í•˜ê³  ë“±ë“±
  2. ë§ˆìš°ìŠ¤ë¡œ í´ë¦­í•´ì„œ ê°ì²´ ë°°ì¹˜ ë“±ë“±
  3. ê²Œì„ì„ ë„ë©´ íŒŒì¼ë¡œ ì •ë³´ ì €ì¥

<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}