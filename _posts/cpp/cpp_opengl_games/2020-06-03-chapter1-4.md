---
title:  "[C++] 1.4 ë§ˆìš°ìŠ¤ ì…ë ¥ ë‹¤ë£¨ê¸°" 

categories:
  - C++ games
tags:
  - [Programming, Cpp, OpenGL, Graphics]

toc: true
toc_sticky: true

date: 2020-06-03
last_modified_at: 2020-06-03
---

ì¸í”„ëŸ°ì— ìˆëŠ” í™ì •ëª¨ êµìˆ˜ë‹˜ì˜ **í™ì •ëª¨ì˜ ê²Œì„ ë§Œë“¤ê¸° ì—°ìŠµ ë¬¸ì œ íŒ¨í‚¤ì§€** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤.ğŸ˜€   
[ğŸŒœ ê³µë¶€ì— ì‚¬ìš©ëœ í™ì •ëª¨ êµìˆ˜ë‹˜ì˜ ì½”ë“œë“¤ ë³´ëŸ¬ê°€ê¸°](https://github.com/jmhong-simulation/GameDevPracticePackage)   
[ğŸŒœ [í™ì •ëª¨ì˜ ê²Œì„ ë§Œë“¤ê¸° ì—°ìŠµ ë¬¸ì œ íŒ¨í‚¤ì§€] ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸°!](https://www.inflearn.com/course/c-2)
{: .notice--warning}

<br>

# Chapter 1. ê¸°ë³¸ ê¸°ëŠ¥ êµ¬í˜„ 
# 1.4 ë§ˆìš°ìŠ¤ ì…ë ¥ ë‹¤ë£¨ê¸°

## ë§ˆìš°ìŠ¤ì˜ í˜„ì¬ ìœ„ì¹˜ ë¦¬í„´í•˜ê¸° : getCursorPos

- `getCursorPos(bool)` í•¨ìˆ˜
  - Game2D í´ë˜ìŠ¤ì— ìˆëŠ” í•¨ìˆ˜ë¡œ <u>ë§ˆìš°ìŠ¤ì˜ í˜„ì¬ ìœ„ì¹˜</u>ë¥¼ ë¦¬í„´í•œë‹¤.
    - ìœ„ì¹˜ë¥¼ ë¦¬í„´í•˜ëŠ” ê²ƒì´ë‹ˆ Vector2 ê°ì²´ ë¦¬í„´.
    - `boolíƒ€ì…` ë§¤ê°œë³€ìˆ˜ì˜ ê°’ì— ë”°ë¼ ë¦¬í„´ ë°›ëŠ” ë§ˆìš°ìŠ¤ì˜ ìœ„ì¹˜ë¥¼ <u>ìœˆë„ìš° ì¢Œí‘œê³„</u>ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í• ì§€ <u>í™”ë©´ ì¢Œí‘œê³„</u>ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í• ì§€ ê²°ì •í•  ìˆ˜ ìˆë‹¤. 
      - `getCursorPos(false)` : ìœˆë„ìš° ì¢Œí‘œê³„ ì‚¬ìš©
      - `getCursorPos(true)` : í™”ë©´ ì¢Œí‘œê³„ ì‚¬ìš©. ìš°ë¦¬ì—ê²Œ ë” ìµìˆ™
    - ë””í´íŠ¸ ê°’ì€ trueë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ ê·¸ëƒ¥ `getCursorPos()`ë¡œ í˜¸ì¶œí•˜ë©´ í™”ë©´ ì¢Œí‘œê³„ ê¸°ì¤€ ìœ„ì¹˜ë¥¼ ë¦¬í„´í•´ì¤€ë‹¤.
- `Vector2` í´ë˜ìŠ¤ì— ì¶œë ¥ ì—°ì‚°ì `<<`ì´ ì•„ë˜ì™€ ê°™ì´ ì˜¤ë²„ë¡œë”© ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ê·¸ëƒ¥ coutê³¼ í•¨ê»˜ `<<` ì¨ì„œ ë§ˆìš°ìŠ¤ í˜„ì¬ ìœ„ì¹˜ë¥¼ ì¶œë ¥í•˜ë©´ ëœë‹¤.

  ```cpp
  friend std::ostream & operator << (std::ostream & out, const Vector2<T> & vec)
  {
		out << vec.x << " " << vec.y;
		return out;
  }
  ```

### ìœˆë„ìš° ì¢Œí‘œê³„ : getCursorPos(false)

![image](https://user-images.githubusercontent.com/42318591/84585398-68f63400-ae4a-11ea-9446-5b91a09d6f07.png){: width="50%" height="50%"}{: .align-center}

- ì™¼ìª½ : x ê°ì†Œ / ì˜¤ë¥¸ìª½ : x ì¦ê°€ / ìœ„ìª½ : y ê°ì†Œ / ì•„ë˜ìª½ : y ì¦ê°€
- ë§ˆìš°ìŠ¤ ì¢Œí‘œëŠ” ì°½ì˜ ë§¨ ì™¼ìª½ ìƒë‹¨ì„ (0,0) ë¼ í•˜ê³  ì˜¤ë¥¸ìª½ í•˜ë‹¨ì„ (999,999)ë¼ê³  í•œë‹¤.
*(í•´ìƒë„ 1000 x 1000 ê¸°ì¤€)*

### í™”ë©´ ì¢Œí‘œê³„ : getCursorPos(true)

![image](https://user-images.githubusercontent.com/42318591/84585406-81664e80-ae4a-11ea-8845-cc62c0c547e3.png){: width="50%" height="50%"}{: .align-center}


- ê°€ìš´ë°ê°€ (0,0) ì´ë‹¤.
- ê²©ì ìƒ í•œì¹¸ë‹¹ 0.5f
- ë§ˆìš°ìŠ¤ì˜ í˜„ì¬ ìœ„ì¹˜ë¥¼ float ì‹¤ìˆ˜ë¡œ ë‚˜íƒ€ë‚¸ë‹¤.
- ì™¼ìª½ : x ê°ì†Œ, ì˜¤ë¥¸ìª½ : x ì¦ê°€, ìœ„ìª½ : y ì¦ê°€, ì•„ë˜ìª½ : y ê°ì†Œ

### getCursorPos(bool)ì˜ í™”ë©´ì¢Œí‘œê³„ì™€ ìœˆë„ìš°ì¢Œí‘œê³„ ë³€í™˜ ì›ë¦¬

ğŸ“œ`Game2D.cpp`
- `glfwGetCursorPos` â†’ ìœˆë„ìš°ì˜ x í¬ì§€ì…˜ê³¼ yí¬ì§€ì…˜ì„ ê°€ì ¸ ì˜¤ëŠ” `glfw` ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ í•¨ìˆ˜. (ìœˆë„ìš° ì¢Œí‘œê³„)
- `screen_coordinates` ê°€ trueë©´ <u>ìœˆë„ìš° ì¢Œí‘œê³„ë¥¼ í™”ë©´ ì¢Œí‘œê³„ë¡œ ë³€í™˜.</u>
- `screen_coordinates` ê°€ falseë©´ <u>ë³€í™˜ ì—†ì´</u> ìœˆë„ìš° ì¢Œí‘œê³„ ê·¸ëŒ€ë¡œ ë¦¬í„´.

```cpp
vec2 Game2D::getCursorPos(const bool& screen_coordinates)
	{
		double x_pos, y_pos;
		glfwGetCursorPos(glfw_window, &x_pos, &y_pos);   // ìœˆë„ìš° ì¢Œí‘œê³„ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
		
        /* ìœˆë„ìš° ì¢Œí‘œê³„ íŠ¹ì§•
		    Note that (0, 0) is left up corner. 
		    This is different from our screen coordinates.
		    0 <= x <= (width - 1)    ex) í•´ìƒë„ 100x100 ì´ë¼ë©´ 0<=x<=99
		    (height - 1) >= y >= 0   ex) hegit-1ì—ì„œ ì‹œì‘í•´ ìœ„ë¡œ ê°ˆìˆ˜ë¡ ê°’ì´ 0ì— ê°€ê¹Œì›Œì§€ë©° ì‘ì•„ì§
        */

		if (screen_coordinates)  // ìœˆë„ìš° ì¢Œí‘œê³„ë¥¼ í™”ë©´ ì¢Œí‘œê³„ë¡œ ë³€í™˜í•˜ê¸°. width >= height ë¼ê³  ê°€ì •.
		{
			// upside down y direction 
			// y ì¢Œí‘œ ìœ„ ì•„ë˜ ë’¤ì§‘ê¸° -> ìœˆë„ìš° ì¢Œí‘œëŠ” ìœ„ë¡œê°ˆìˆ˜ë¡ yê°ì†Œ ì•„ë˜ë¡œ ê°ˆìˆ˜ë¡ y ì¦ê°€ë‹ˆê¹Œ	
			y_pos = height - y_pos - 1; // 0 <= y <= height - 1

			// rescale and translate zero to center
			y_pos = y_pos / (height - 1); //  0.0 <= y <= 1.0
			y_pos = y_pos * 2.0;		  //  0.0 <= y <= 2.0
			y_pos = y_pos - 1.0;		  // -1.0 <= y <= 1.0

			x_pos = (x_pos / (width - 1) * 2.0 - 1.0) * width / height; //  -1.0 <= x <= 1.0

			return vec2(static_cast<float>(x_pos), static_cast<float>(y_pos)); // x, yë¥¼ floatë¡œ ìºìŠ¤íŒ… í•´ì£¼ê³  vec2ë¡œ ë¬¶ê³  ë°˜í™˜í•œë‹¤.
		}
		else  // ë³„ë‹¤ë¥¸ ë³€í™˜ ì—†ì´ ìœˆë„ìš° ì¢Œí‘œê³„ë¥¼ ê·¸ëŒ€ë¡œ ë¦¬í„´. floatë¡œ ìºìŠ¤íŒ… í•´ì£¼ê³  vec2ë¡œ ë¬¶ê¸°ë§Œ í•´ì„œ ë°˜í™˜í•œë‹¤.
		{
			return vec2(static_cast<float>(x_pos), static_cast<float>(y_pos));
		}
```

<br>

## ë§ˆìš°ìŠ¤ í˜„ì¬ ì»¤ì„œ ìœ„ì¹˜ì— ê·¸ë¦¼ ê·¸ë¦¬ê¸°

### ë…¸ë€ ë™ê·¸ë¼ë¯¸ê°€ ë§ˆìš°ìŠ¤ ì»¤ì„œë¥¼ ë”°ë¼ë‹¤ë‹ˆê²Œë” í•´ë³´ì
ì›ì ì— ê·¸ë¦¼ì´ ê·¸ë ¤ì§€ê³  ë§ˆìš°ìŠ¤ í˜„ì¬ ìœ„ì¹˜ë¡œ ê·¸ë¦¼ì´ ì´ë™í•˜ëŠ” ê³¼ì •ì´ ë§¤ í”„ë ˆì„ë§ˆë‹¤ ë°˜ë³µë˜ì–´ ë§ˆìš°ìŠ¤ í˜„ì¬ ìœ„ì¹˜ì— ê·¸ë ¤ì ¸ ìˆëŠ” ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. 

```cpp
#include "Game2D.h"

namespace jm
{
	class MouseExample : public Game2D
	{
	public:
		void update() override
		{
			const vec2 mouse_pos = getCursorPos();
			translate(mouse_pos);                   // ì‹¤í–‰ìˆœì„œ 2. ë§ˆìš°ìŠ¤ í˜„ì¬ ìœ„ì¹˜ë¡œ ì´ë™í•œë‹¤. 
			drawFilledCircle(Colors::gold, 0.1f);   // ì‹¤í–‰ìˆœì„œ 1. ì›ì ì— ë™ê·¸ë¼ë¯¸ë¥¼ ê·¸ë¦°ë‹¤.
		}
	};
}

int main(void)
{
	jm::MouseExample().init("This is my digital canvas!", 1000, 1000, false).run();

	return 0;
}
```

### ë§ˆìš°ìŠ¤ ì¢Œí´ì‹œ ë…¸ë€ ì›, ìš°í´ì‹œ ë¹¨ê°„ ì›ì´ ê·¸ë ¤ì§€ê²Œ í•´ë³´ì.

```cpp
#include "Game2D.h"

namespace jm
{
	class MouseExample : public Game2D
	{
	public:
		void update() override
		{
			const vec2 mouse_pos = getCursorPos(true);
			if (isMouseButtonPressed(GLFW_MOUSE_BUTTON_1) == true) // ë§ˆìš°ìŠ¤ ì¢Œí´ ì…ë ¥ì´ ë“¤ì–´ì˜¬ ì‹œ
			{
				translate(mouse_pos);
				drawFilledCircle(Colors::gold, 0.1f);
			}
			if (isMouseButtonPressed(GLFW_MOUSE_BUTTON_2))  // ë§ˆìš°ìŠ¤ ìš°í´ ì…ë ¥ì´ ë“¤ì–´ì˜¬ ì‹œ
			{
				translate(mouse_pos);
				drawFilledCircle(Colors::red, 0.1f);
			}
		}
	};
}

int main(void)
{
	jm::MouseExample().init("This is my digital canvas!", 1000, 1000, false).run();

	return 0;
}
```

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}