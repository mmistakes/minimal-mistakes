---
title:  "[C++] 1.1 ì‹¤ì‹œê°„ ìƒí˜¸ ì‘ìš© ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì¡°" 

categories:
  - C++ games
tags:
  - [Programming, Cpp, OpenGL, Graphics]

toc: true
toc_sticky: true

date: 2020-06-01
last_modified_at: 2020-06-01
---

ì¸í”„ëŸ°ì— ìˆëŠ” í™ì •ëª¨ êµìˆ˜ë‹˜ì˜ **í™ì •ëª¨ì˜ ê²Œì„ ë§Œë“¤ê¸° ì—°ìŠµ ë¬¸ì œ íŒ¨í‚¤ì§€** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê³µë¶€ì— ì‚¬ìš©ëœ í™ì •ëª¨ êµìˆ˜ë‹˜ì˜ ì½”ë“œë“¤ ë³´ëŸ¬ê°€ê¸°](https://github.com/jmhong-simulation/GameDevPracticePackage)   
[ğŸŒœ [í™ì •ëª¨ì˜ ê²Œì„ ë§Œë“¤ê¸° ì—°ìŠµ ë¬¸ì œ íŒ¨í‚¤ì§€] ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸°!](https://www.inflearn.com/course/c-2)
{: .notice--warning}

<br>

# Chapter 1. ê¸°ë³¸ ê¸°ëŠ¥ êµ¬í˜„ 
# 1.1 ì‹¤ì‹œê°„ ìƒí˜¸ ì‘ìš© ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì¡° 

ğŸ‘±ğŸ½â€â™€ï¸ <u>ê²Œì„ ì—”ì§„ì˜ ì›ë¦¬</u>ë¥¼ ì´í•´í•˜ê¸° ì¢‹ì€ ì½”ë“œë“¤ì´ë‹¤.

## Game2D.h ì„¤ëª…

`update` í•¨ìˆ˜ëŠ” <u>ê¼­ ì˜¤ë²„ë¼ì´ë”© í•´ì£¼ì–´ì•¼ í•œë‹¤.</u>

***ğŸ“ƒGame2D.h***
```cpp
#include "RGB.h"           // ìƒ‰ì„ ê²°ì •. R,G,B ê°’ì„ ë°›ëŠ” ìƒì„±ì æœ‰ 
#include "Vector2.h"       // 2ì°¨ì› ì¢Œí‘œ
#include "Vector3.h"       // 3ì°¨ì› ì¢Œí‘œ
#include "Colors.h"        
// ğŸ‘† RGBë¥¼ includeí•˜ì—¬ ë‹¤ì–‘í•œ ìƒ‰ìƒ ì´ë¦„ì˜ RGB ê°ì²´ë“¤ì„ ë¯¸ë¦¬ ì •ì˜í•´ ë‘ . const RGB yellow(255, 255, 0) ì´ëŸ°ì‹ìœ¼ë¡œ.
#include "Timer.h"
#include "DrawFunctions.h" 
// ğŸ‘† ì›, ì„¸ëª¨, ë„¤ëª¨, ì„ ë¶„ ë“±ë“± ê·¸ë¦¼ì„ ê·¸ë¦¬ëŠ” í•¨ìˆ˜ë“¤ì„ ëª¨ì€ í´ë˜ìŠ¤. drawWLine, drawFilledBox ë“±ë“±..

#include <GL/glew.h>
#include <GLFW/glfw3.h>
#include <thread>         // std::this_thread::sleep_for
#include <iostream>
#include <vector>
#include <string>
#include <map>

namespace jm
{
	using vec2 = Vector2<float>;
	using vec3 = Vector3<float>;

	class Game2D
	{
	private:
		
		/*ê²Œì„ ì°½ í•´ìƒë„*/ 
		int width = 640; 
		int height = 480;

		/*ê²Œì„ ì°½ í™”ë©´ì˜ í¬ì¸í„°*/
		GLFWwindow* glfw_window = nullptr;

		Timer timer;

		/*fps (í”„ë ˆì„)ì˜ ì—­ìˆ˜*/
		float spf = 1.0f / 60.0f;		 // second(s) per frame

		/*í‚¤ë³´ë“œ ì…ë ¥ì„ ë°›ì•„ì„œ ê·¸ë¦´ê±°ëƒ(true) ë§ê±°ëƒ(false) */
		std::map<int, bool> key_status;  // key_id, is_pressed
		std::map<int, bool> mbtn_status; // mouse_button_id, is_pressed
		bool draw_grid = false;

	public:                // ìƒì„±ì
		Game2D()
		{}

		/* ì œëª©(title), í•´ìƒë„(width, height), í’€ìŠ¤í¬ë¦° ì‚¬ìš©ì—¬ë¶€, ì–´ëŠ ëª¨ë‹ˆí„°ì— ì¶œë ¥í• ì§€
ì´ë ‡ê²Œ 4ê°€ì§€ ì„¤ì • ê°€ëŠ¥ */
		Game2D(const std::string& _title, const int& _width, const int& _height,
			const bool & use_full_screen = false, const int & display_ix = 0);

		~Game2D();

		Game2D & init(const std::string& _title, const int& _width, const int& _height,
			const bool & use_full_screen = false, const int & display_ix = 0);

		ì´ˆê¸°í™” í•˜ëŠ” ê³¼ì •ì—ì„œì˜ ì—ëŸ¬ ì¶œë ¥ (ê±°ì˜ ë³¼ ì¼ X)
		void reportErrorAndExit(const std::string& function_name, const std::string& message);

		bool isKeyPressed(const int& key); 
		bool isKeyReleased(const int & key);
		bool isKeyPressedAndReleased(const int& key); // ì‚¬ìš©ìê°€ í‚¤ë¥¼ ëˆŒë €ë‹¤ê°€ ë—ëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” í•¨ìˆ˜

		bool isMouseButtonPressed(const int& mbtn);
		bool isMouseButtonReleased(const int& mbtn);
		bool isMouseButtonPressedAndReleased(const int& mbtn);

		vec2 getCursorPos(const bool& screen_coordinates = true);

		float getTimeStep(); // í•œ í”„ë ˆì„ ë‹¹ ì‹œê°„ì´ ì–¼ë§ˆë‚˜ ì§€ë‚¬ëŠ”ì§€ ì¸¡ì •í•´ì£¼ëŠ” í•¨ìˆ˜

		void drawGrid();

		/*runê³¼ update ì•„ì£¼ ì¤‘ìš”!*/ 
 		void run(); // Game2D.cpp ì— ë°”ë”” ìˆìŒ

		virtual void update()  //ê°€ìƒí•¨ìˆ˜ì¸ ì´ìœ  -> ê¼­ ì˜¤ë²„ë¼ì´ë”© í•´ì„œ ì‚¬ìš©í•˜ë¼ëŠ” ì˜ë¯¸ ! 
		{
      // ì˜ˆì‹œ
			  // draw
			  // play sould
			  // physics update
			  // etc.
		}
	};
}
```

***ğŸ“œGame2D.cpp***ì—ì„œ `void Game2D::run()` í•¨ìˆ˜ ë¶€ë¶„ ì„¤ëª…
- `while`ë¶€ë¶„ì´ ì œì¼ ì¤‘ìš”í•˜ë‹¤. í”„ë¡œê·¸ë¨ì˜ ë©”ì¸ Loopê°€ ëœë‹¤.

```cpp
Game2D.cpp ä¸­

void Game2D::run()
	{
		if (glfw_window == nullptr)
			init("This is my digital canvas!", 1280, 960, false); // initialize with default setting

		// ê²Œì„ì˜ ë©”ì¸ ë£¨í”„
		while (!glfwWindowShouldClose(glfw_window))// main loop
		{
			// 1. ESC ëˆ„ë¥´ë©´ ì¢…ë£Œ 
			if (isKeyPressed(GLFW_KEY_ESCAPE)) {
				std::cout << "ESC key ends main loop" << std::endl;
				break;
			}
			
			// 2. íƒ€ì´ë¨¸ start
			timer.start();

			// 3. ë Œë”ë§ ì‹œì‘ ì „ ì „ì²˜ë¦¬
			glfwMakeContextCurrent(glfw_window);
			glClearColor(1, 1, 1, 1);			 // while background
			glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
			glMatrixMode(GL_MODELVIEW);
			glPushMatrix();

			// 4. ê²©ì ê·¸ë¦¬ê¸°
			drawGrid();

			// 5. â­update í•¨ìˆ˜ í˜¸ì¶œâ­
			update();	// the major worker function

			// 6. ë Œë”ë§ ì™„ë£Œí•˜ê³  ë§ˆë¬´ë¦¬
			glPopMatrix();
			// post draw
			glfwSwapBuffers(glfw_window); // double buffering
			//glfwSetInputMode(glfw_window, GLFW_STICKY_KEYS, GLFW_FALSE); // not working 
			glfwPollEvents();

			//const double dt = timer.stopAndGetElapsedMilli();

			//Debugging
			//std::cout << dt << std::endl;

			//if (dt < spf) // to prevent too high fps
			//{
			//	const auto time_to_sleep = static_cast<int>((spf - dt) * 1000.0f);
			//	std::this_thread::sleep_for(std::chrono::milliseconds(time_to_sleep));
			//	
			//	//Debugging
			//	//std::cout << "sleep " << time_to_sleep << std::endl;
			//}
		}

		glfwTerminate();
	}
```

***

## ë‚´ê°€ ì‹¤ìŠµí•œ ì½”ë“œ

### 1. ë¹ˆ í™”ë©´ë§Œ ì¶œë ¥í•˜ê¸°

```cpp
#include "Game2D.h"
#include "PrimitivesGallery.h"
#include "TankExample.h"
#include "FaceExample.h"
#include "WalkingPerson.h"
#include "SolarSystem.h"

namespace jm
{
	class RotatingStarExample : public Game2D
	{
	public:
		void update() override  // Game2Dì˜ update í•¨ìˆ˜ ì˜¤ë²„ë¼ì´ë”©
		{

		}
	};
}

int main(void)
{
	jm::RotatingStarExample().run();
	
	return 0;
}
```

### 2. í’€ ìŠ¤í¬ë¦°ì˜ ë¹ˆ ìŠ¤í¬ë¦° ì¶œë ¥í•˜ê¸°

```cpp
#include "Game2D.h"
#include "PrimitivesGallery.h"
#include "TankExample.h"
#include "FaceExample.h"
#include "WalkingPerson.h"
#include "SolarSystem.h"

namespace jm
{
	class RotatingStarExample : public Game2D
	{
	public:
		void update() override  // Game2Dì˜ update í•¨ìˆ˜ ì˜¤ë²„ë¼ì´ë”©
		{

		}
	};
}

int main(void)
{
	/* ìƒì„±ì ë„¤ë²ˆì§¸ ì¸ìˆ˜ë¥¼ trueë¡œ ë°”ê¿” í’€ìŠ¤í¬ë¦° 
	ì°½ ì´ë¦„ì€ "This is my digital canvas!" */
	jm::RotatingStarExample().init("This is my digital canvas!", 1280, 960, true).run();
	
	return 0;
}
```

### 3. ë³„ ê·¸ë ¤ë³´ê¸°

`DrawFunction.h`ì˜ `drawFilledStar` í•¨ìˆ˜ ì‚¬ìš©

```cpp
#include "Game2D.h"
#include "PrimitivesGallery.h"
#include "TankExample.h"
#include "FaceExample.h"
#include "WalkingPerson.h"
#include "SolarSystem.h"

namespace jm
{
	class RotatingStarExample : public Game2D
	{
	public:
		void update() override  // Game2Dì˜ update í•¨ìˆ˜ ì˜¤ë²„ë¼ì´ë”©
		{
				drawFilledStar(Colors::gold, 0.4f, 0.25f);
				// ë³„ì˜ ë°”ê¹¥ìª½ ì›ì˜ ë°˜ì§€ë¦„ì´ 0.4fë¼ëŠ” ì˜ë¯¸, ë³„ ì•ˆìª½ì˜ ì›ì˜ ë°˜ì§€ë¦„ì´ 0.25fë¼ëŠ” ì˜ë¯¸
		}
	};
}

int main(void)
{

	jm::RotatingStarExample().init("This is my digital canvas!", 1280, 960, false).run();
	
	return 0;
}
```

### 4. íšŒì „í•˜ëŠ” ë³„ ê·¸ë ¤ë³´ê¸° (ì‹œê°„ ê°œë… í•„ìš”)

```cpp
#include "Game2D.h"
#include "PrimitivesGallery.h"
#include "TankExample.h"
#include "FaceExample.h"
#include "WalkingPerson.h"
#include "SolarSystem.h"

namespace jm
{
	class RotatingStarExample : public Game2D
	{
		float time = 0.0f;  // ì‹œê°„ 0.0ì—ì„œ ì‹œì‘
	public:
		void update() override // Game2Dì˜ update í•¨ìˆ˜ ì˜¤ë²„ë¼ì´ë”©
		{
				rotate(time * 180.0f); // 1ì´ˆì— ë°˜ë°”í€´ ëŒê²Œë”

				drawFilledStar(Colors::gold, 0.4f, 0.25f);
				
				time += this->getTimeStep(); // ì‹œê°„ì´ í˜ëŸ¬ì•¼ í•¨
		}
	};
}

int main(void)
{

	jm::RotatingStarExample().init("This is my digital canvas!", 1280, 960, false).run();
	
	return 0;
}
```

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}