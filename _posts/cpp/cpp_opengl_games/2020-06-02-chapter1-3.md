---
title:  "[C++] 1.3 ìƒí˜¸ì‘ìš© ë§›ë³´ê¸° - í‚¤ë³´ë“œ ì…ë ¥ê³¼ ë°˜ì‘" 

categories:
  - C++ games
tags:
  - [Programming, Cpp, OpenGL, Graphics]

toc: true
toc_sticky: true

date: 2020-06-02
last_modified_at: 2020-06-02
---

ì¸í”„ëŸ°ì— ìˆëŠ” í™ì •ëª¨ êµìˆ˜ë‹˜ì˜ **í™ì •ëª¨ì˜ ê²Œì„ ë§Œë“¤ê¸° ì—°ìŠµ ë¬¸ì œ íŒ¨í‚¤ì§€** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤.ğŸ˜€   
[ğŸŒœ ê³µë¶€ì— ì‚¬ìš©ëœ í™ì •ëª¨ êµìˆ˜ë‹˜ì˜ ì½”ë“œë“¤ ë³´ëŸ¬ê°€ê¸°](https://github.com/jmhong-simulation/GameDevPracticePackage)   
[ğŸŒœ [í™ì •ëª¨ì˜ ê²Œì„ ë§Œë“¤ê¸° ì—°ìŠµ ë¬¸ì œ íŒ¨í‚¤ì§€] ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸°!](https://www.inflearn.com/course/c-2)
{: .notice--warning}

<br>

# Chapter 1. ê¸°ë³¸ ê¸°ëŠ¥ êµ¬í˜„ 
# 1.3 ìƒí˜¸ì‘ìš© ë§›ë³´ê¸° - í‚¤ë³´ë“œ ì…ë ¥ê³¼ ë°˜ì‘

## `ğŸ“ƒ TankExample.h` ì½”ë“œ ì„¤ëª…

- class 3ê°œ
  1. MyTank
    - íƒ±í¬ ê°ì²´ë¥¼ ì°ì–´ë‚¼ í´ë˜ìŠ¤
  2. MyBullet 
    - ì´ì•Œ ê°ì²´ë¥¼ ì°ì–´ë‚¼ í´ë˜ìŠ¤
  3. TankExample
    - Game2Dë¥¼ ìƒì†ë°›ìœ¼ë©° updateí•¨ìˆ˜ë¥¼ ê°€ì§€ê³  ìˆë‹¤.
    - ê²Œì„ì„ ì‹¤í–‰ì‹œí‚´

```cpp
#pragma once

#include "Game2D.h"

namespace jm
{
	class MyTank // íƒ±í¬ í´ë˜ìŠ¤
	{
	public:
		vec2 center = vec2(0.0f, 0.0f); // â­ íƒ±í¬ì˜ í˜„ì¬ ìœ„ì¹˜ (ì²˜ìŒì—” ì›ì . ì‚¬ìš©ìì˜ í‚¤ë³´ë“œ ì¡°ì‘ì— ë”°ë¼ ê³„ì† ê°±ì‹ ë  ê²ƒ)

		void draw()  // íƒ±í¬ë¥¼ ê·¸ë¦¬ëŠ” í•¨ìˆ˜.
		{
			beginTransformation();  
			{
				translate(center);                          // ì‹¤í–‰ìˆœì„œ <6>. âœ¨ bodyëŠ” 'center'ë¡œ, barrelì€ 'center + (0.13f, 0.1f)'ë¡œ, turretì€ 'center + (-0.02f, 0.1f)'ë¡œ ì´ë™í•œë‹¤.
				drawFilledBox(Colors::green, 0.25f, 0.1f); // ì‹¤í–‰ìˆœì„œ <1>. bodyë¥¼ ê·¸ë¦°ë‹¤.
				translate(-0.02f, 0.1f);                    // ì‹¤í–‰ìˆœì„œ <5>. âœ¨ barrelì€ (0.13f, 0.1f)ë¡œ, turretì€ (-0.02f, 0.1f)ë¡œ ì´ë™í•œë‹¤.
				drawFilledBox(Colors::blue, 0.15f, 0.09f); // ì‹¤í–‰ìˆœì„œ <2>. turretì„ ê·¸ë¦°ë‹¤.
				translate(0.15f, 0.0f);                     // ì‹¤í–‰ìˆœì„œ <4>. âœ¨ barrelì´ (0.15f, 0.0f)ë¡œ ì´ë™í•œë‹¤.
				drawFilledBox(Colors::red, 0.15f, 0.03f);  // ì‹¤í–‰ìˆœì„œ <3>. barrelì„ ê·¸ë¦°ë‹¤.
			}
			endTransformation();
		}
	};

	class MyBullet // ì´ì•Œ í´ë˜ìŠ¤
	{
	public:
		vec2 center = vec2(0.0f, 0.0f);   // â­ì´ì•Œì˜ í˜„ì¬ ìœ„ì¹˜ (ì²˜ìŒì—” ì›ì . ì‹œê°„ì— ë”°ë¼ ê³„ì† ê°±ì‹ ë  ê²ƒ)
		vec2 velocity = vec2(0.0f, 0.0f); // â­ì´ì•Œì˜ ì†ë„

		void draw()  // ì´ì•Œ ê·¸ë¦¬ëŠ” í•¨ìˆ˜.
		{
			beginTransformation();
			translate(center);  // ì‹¤í–‰ìˆœì„œ <3>. ì•„ë˜ ë‘ ë„í˜•ì´ í•¨ê»˜ í‰í–‰ì´ë™í•œë‹¤.
			drawFilledRegularConvexPolygon(Colors::yellow, 0.02f, 8); // ì‹¤í–‰ìˆœì„œ <1>.
			drawWiredRegularConvexPolygon(Colors::gray, 0.02f, 8); // ì‹¤í–‰ìˆœì„œ <2>.
			endTransformation();
		}

		void update(const float& dt)  // â­ ì´ì•Œì˜ ìœ„ì¹˜ì¸ center ê°’ì„ ì‹œê°„ë§ˆë‹¤ ì—…ë°ì´íŠ¸ í•œë‹¤.(ì´ update í•¨ìˆ˜ëŠ” MyBullet ìì²´ì˜ í•¨ìˆ˜)
		{
			center += velocity * dt;  // â­ ì´ì•Œì˜ ìœ„ì¹˜ê°€ 'ì†ë„ * ì‹œê°„'ì— ë”°ë¼ ë°”ë€œ. dtëŠ” ì‹œê°„ ê°„ê²©ì´ ë¨
		}  
	};

	class TankExample : public Game2D // ê²Œì„ì„ ì‹¤í–‰ì‹œí‚¬ í´ë˜ìŠ¤. Game2Dë¥¼ ìƒì† ë°›ìŒ.
	{
	public:
		MyTank tank;

		MyBullet *bullet = nullptr;  // bulletì€ ì´ì•Œì´ ë°œì‚¬ ëì„ ë•Œë§Œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— í¬ì¸í„°ë¡œ ë˜ì–´ìˆê³  null í¬ì¸í„°ë¡œ ì´ˆê¸°í™”í•œë‹¤.

	public:
		TankExample()
			: Game2D("This is my digital canvas!", 1024, 768, false, 2)
		{}

		~TankExample()   // â­ ì†Œë©¸ì !! nullptr ì•„ë‹ë•Œë§Œ ì´ì•Œ ê°ì²´ ë™ì  ë©”ëª¨ë¦¬ë¥¼ delete ì‹œì¼œì£¼ëŠ” ì—­í• ì„ í•œë‹¤.
		{
			if(bullet != nullptr) delete bullet;
		}

        // update() ì€ run ì•ˆì—ì„œ â­ë¬´í•œë£¨í”„â­ë¡œ ëŒì•„ê°€ë‹ˆê¹Œ ì•„ë˜ í‚¤ë“¤ì´ ëˆŒë ¸ëŠ”ì§€ ë§¤ í”„ë ˆì„ë§ˆë‹¤ ê³„ì† ì²´í¬í•œë‹¤.
        // Game2Dì˜ updateí•¨ìˆ˜ ì˜¤ë²„ë¼ì´ë”©. ë©”ì¸ ë¬´í•œ ë£¨í”„ë¥¼ ëŒë¦¬ëŠ” run()ì•ˆì—ì„œ í˜¸ì¶œëœë‹¤.
		void update() override  
		{

			// â­ íƒ±í¬ ì´ë™ ! í‚¤ë³´ë“œ ë°©í–¥í‚¤ì— ë”°ë¼ ë¶€ë“œëŸ½ê²Œ ì›€ì§ì´ë„ë¡ í•œì¹¸ * 1/60 ë§Œí¼ ì›€ì§ì´ê²Œ.
            // getTimeStep() í•¨ìˆ˜ëŠ” Game2Dì— ìˆëŠ” í•¨ìˆ˜ë¡œ ìƒì†ë°›ì•„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœ í•¨ìˆ˜ë‹¤. í”„ë ˆì„ì„ ë¦¬í„´í•¨.
			if (isKeyPressed(GLFW_KEY_LEFT))	tank.center.x -= 0.5f * getTimeStep();
			if (isKeyPressed(GLFW_KEY_RIGHT))	tank.center.x += 0.5f * getTimeStep();
			if (isKeyPressed(GLFW_KEY_UP))		tank.center.y += 0.5f * getTimeStep();
			if (isKeyPressed(GLFW_KEY_DOWN))	tank.center.y -= 0.5f * getTimeStep();


			// â­ í¬íƒ„ ë°œì‚¬ ! í¬íƒ„ì„ ë°œì‚¬í•˜ëŠ”ê±´ ê³§ í¬íƒ„ì„ ìƒì„±í•œë‹¤ëŠ” ê²ƒ. ìŠ¤í˜ì´ìŠ¤ë°” ëˆ„ë¥´ë©´ ë°œì‚¬
			if (isKeyPressedAndReleased(GLFW_KEY_SPACE)) 
			{
				bullet = new MyBullet;           // â­ í¬íƒ„ ìƒì„±
				bullet->center = tank.center;    // â­ íƒ±í¬ì˜ í˜„ì¬ìœ„ì¹˜ë¡œ ì´ì•Œ í˜„ì¬ìœ„ì¹˜ê°€ ì •í•´ì§ (íƒ±í¬ì—ì„œ ë°œì‚¬ë˜ë‹ˆê¹Œ )
				bullet->center.x += 0.2f;        // â­ ê·¸ë˜ë„ ë°œí¬í•˜ëŠ” ê³³ì—ì„œ ë°œì‚¬ë  ìˆ˜ ìˆê²Œ ìœ„ì¹˜ ì¡°ì •
				bullet->center.y += 0.1f;
				bullet->velocity = vec2(2.0f, 0.0f);  // â­ ì†ë„ ì§€ì •. 
			}

            // ì‹œê°„ì— ë”°ë¼ ì´ì•Œì˜ ìœ„ì¹˜ë¥¼ ì—…ëƒí•œë‹¤. 
			if (bullet != nullptr) bullet->update(getTimeStep()); 
            // â­ dtëŠ” getTimeStep()ì˜ ë¦¬í„´ê°’ì´ ëœë‹¤. ( 1/60 )
            // â­ if ( bullet != nullptr ) ë¡œ nullptr ì²´í¬ ì•ˆí•˜ê³  ê·¸ëƒ¥ bullet->update í˜¸ì¶œí•´ë²„ë¦¬ë©´ ëŸ°íƒ€ì„ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤. 
            // ì™œëƒí•˜ë©´ ìŠ¤í˜ì´ìŠ¤ ëˆ„ë¥´ê¸° ì „ê¹Œì§„ bulletì´ nullptrì´ë¼ ì•„ë¬´ê²ƒë„ ê°€ë¦¬í‚¤ê³  ìˆì§€ ì•Šì€ë° (ì´ì•Œ ê°ì²´ê°€ ì—†ëŠ”ë°) updateì„ í˜¸ì¶œ í•˜ë ¤ê³  í• í…Œë‹ˆê¹Œ

			// rendering
			tank.draw(); // â­ íƒ±í¬ ê·¸ë¦¬ê¸°
			if (bullet != nullptr) bullet->draw(); // â­ ì´ì•Œì€ í¬ì¸í„°ë¼ nullptrì´ ì•„ë‹ë•Œë§Œ drawí•˜ê¸°.
		}
	};
}

```

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}