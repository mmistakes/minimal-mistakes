---
title:  "[C++] 2.3 λ‹¤ν•μ„±μΌλ΅ μ μ—°ν•κ²" 

categories:
  - C++ games
tags:
  - [Programming, Cpp, OpenGL, Graphics]

toc: true
toc_sticky: true

date: 2020-06-07
last_modified_at: 2020-06-07
---

μΈν”„λ°μ— μλ” ν™μ •λ¨ κµμλ‹μ **ν™μ •λ¨μ κ²μ„ λ§λ“¤κΈ° μ—°μµ λ¬Έμ  ν¨ν‚¤μ§€** κ°•μλ¥Ό λ“£κ³  μ •λ¦¬ν• ν•„κΈ°μ…λ‹λ‹¤.π€   
[π κ³µλ¶€μ— μ‚¬μ©λ ν™μ •λ¨ κµμλ‹μ μ½”λ“λ“¤ λ³΄λ¬κ°€κΈ°](https://github.com/jmhong-simulation/GameDevPracticePackage)   
[π [ν™μ •λ¨μ κ²μ„ λ§λ“¤κΈ° μ—°μµ λ¬Έμ  ν¨ν‚¤μ§€] κ°•μ λ“¤μΌλ¬ κ°€κΈ°!](https://www.inflearn.com/course/c-2)
{: .notice--warning}

<br>

# Chapter 2. κ°μ²΄ μ§€ν–¥μΌλ΅ κ°€λ” κΈΈ : λ‹¤ν•μ„±μΌλ΅ μ μ—°ν•κ²

## π”” λ¶€λ¨ ν¬μΈν„°λ΅ μμ‹ κ°μ²΄ μ°Έμ΅°ν•κΈ°

- μμ‹ κ°μ²΄ μ¤‘μ—μ„ <u>λ¶€λ¨λ΅λ¶€ν„° μƒμ†λ°›μ€ ν•¨μλ‚ λ³€μ</u>λ” <u>λ¶€λ¨ ν¬μΈν„°</u>λ΅ μ ‘κ·Όν•  μ μλ‹¤.
  ```cpp
  GeometricObject * my_obj = &my_tri;
  my_obj->draw();
  ```
  - λ¶€λ¨ νƒ€μ…μ `my_obj`κ°€ Triangle νƒ€μ…μ μμ‹ κ°μ²΄μΈ `my_tri`μ μ£Όμ†λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°κ°€ λλ‹¤.
  - *my_obj->draw();*
    - Triangle νƒ€μ…μ μμ‹μ„ μ°Έμ΅°ν•κ³  μκΈ° λ•λ¬Έμ— <u>Triangleμ draw()κ°€ νΈμ¶λλ‹¤.</u>
- λ‹¨ C++μ—μ„λ” κ°€μƒ ν•¨μκ°€ μ•„λ‹λΌλ©΄ λ¶€λ¨ ν¬μΈν„°λ΅ μμ‹ κ°μ²΄λ¥Ό μ°Έμ΅°ν•λ”λΌλ„ λ¬΄μ΅°κ±΄ ***λ¶€λ¨ ν•¨μλ¥Ό νΈμ¶*** ν•λ‹¤.
  - [C++μ™€ Javaμ μ°¨μ΄μ  ν¬μ¤νΈ μ°Έκ³ ](https://ansohxxn.github.io/c++%20games/chapter2-2/#java%EC%99%80-c%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90)

<br>

### λ¶€λ¨ νƒ€μ…μ ν¬μΈν„°λ“¤μ„ λ²΅ν„°μ— λ‹΄μ•„ κ΄€λ¦¬ν•΄λ³΄μ.

- β¨ vector μ μ›μ† νƒ€μ…μ„ λ¶€λ¨ νƒ€μ…μ ν¬μΈν„°λ΅ μ§€μ •ν•λ©΄ <u>μ—¬λ¬ νƒ€μ…μ μμ‹ κ°μ²΄λ¥Ό μ ‘κ·Ό ν•  μ μλ‹¤.</u> β¨
  - `Geometric *` νƒ€μ… ν¬μΈν„° ν•λ‚λ΅ &my_tri, &my_box, &my_cir λ‹¤ μ°Έμ΅° κ°€λ¥.
    - μ΄λ°κ² λ°”λ΅ `λ‹¤ν•μ„±`. λ¶€λ¨ ν¬μΈν„° ν•λ‚λ΅ μ—¬λ¬κ°€μ§€ μμ‹μ„ λ‹¤ μ°Έμ΅°ν•  μ μλ‹¤.
  - κ° μμ‹ κ°μ²΄λ“¤μ ν¬μΈν„°λ¥Ό λ¶€λ¨ νƒ€μ… ν¬μΈν„°λ΅ μ°Έμ΅°ν•λ” μƒνƒλ΅ λ²΅ν„°μ— λ„£μ–΄μ£ΌκΈ° 
- <u>λ¶€λ¨ νƒ€μ… ν¬μΈν„°</u>λ“¤μ„ λ‹΄μ€ λ²΅ν„° ν•λ²λ§ forλ¬ΈμΌλ΅ μνν•λ©΄ <u>μ—¬λ¬ νƒ€μ…μ μμ‹ κ°μ²΄λ“¤ μ „λ¶€ draw()</u> μ‹ν‚¬ μ μμ. 

```cpp
std::vector<GeometricObject *> my_objs; // λ¶€λ¨ νƒ€μ…μ ν¬μΈν„°λ“¤μ„ λ‹΄λ” λ²΅ν„°

my_objs.push_back(&my_tri);   
my_objs.push_back(&my_cir);
my_objs.push_back(&my_box);

for (const auto & obj : my_objs)   
	obj->draw();
```

### μμ‹ κ°μ²΄λ¥Ό λ™μ  ν• λ‹ΉμΌλ΅ μƒμ„±
- κ·Έλƒ¥ `Triangle my_tri` λ” λ²”μ„λ¥Ό λ²—μ–΄λ‚ μ‚¬λΌμ§€λ©΄ update()μ—μ„ drawμ‹ μ ‘κ·Ό λ»ν•κ² λ””λ‹κΉ.
  - newλ΅ λ™μ ν• λ‹Ή λ°›μΌλ©΄ deleteν•κΈ° μ „κΉμ§€λ” ν™λ©”λ¨λ¦¬μ— κ³„μ† μ΅΄μ¬ν•΄μ„ μ‚¬μ© κ°€λ¥.
- μ΄μ  `my_tri.init` κ°€ μ•„λ‹ `my_tri->init`
- auto νƒ€μ…μ ν¬μΈν„°λ΅ μ„ μ–Έ.
  - λ‚μ¤‘μ— λ¶€λ¨ νƒ€μ…μ ν¬μΈν„°μ— μ®κΈΈ κ²ƒ 

```cpp
class Example : public Game2D
	{
	public:

		std::vector<GeometricObject *> my_objs;

		Example()
			: Game2D()
		{
			auto *my_tri = new Triangle; // new λ΅ λ™μ ν• λ‹Ή ν›„ μ£Όμ† λ¦¬ν„΄
			auto *my_cir = new Circle; // new λ΅ λ™μ ν• λ‹Ή ν›„ μ£Όμ† λ¦¬ν„΄
			auto *my_box = new Box; // new λ΅ λ™μ ν• λ‹Ή ν›„ μ£Όμ† λ¦¬ν„΄

			my_tri->init(Colors::gold, vec2{ -0.5f, 0.2f }, 0.1f);
			my_cir->init(Colors::olive, vec2{ 0.1f, 0.1f }, 0.1f);
			my_box->init(Colors::black, vec2{ 0.5f, 0.5f }, 0.2f, 0.1f);
		
			my_objs.push_back(my_tri);
			my_objs.push_back(my_cir);
			my_objs.push_back(my_box);
		}

		void update() override
		{
			for (const auto & obj : my_objs)
				obj->draw();
		}
	};
```
<br>

## π”” μƒμ„±μλ¥Ό μ΄μ©ν•μ—¬ κ°„κ²°ν•κ² μ΄κΈ°ν™” ν•κΈ°
μƒμ„±μμ—μ„ μ΄κΈ°ν™”λ¥Ό ν•΄μ£Όλ©΄ κ°μ²΄ μƒμ„±κ³Ό λ™μ‹μ— μ΄κΈ°ν™”κ°€ κ°€λ¥ν•λ‹¤. μƒμ„±μ μ•μ—μ„ init ν•¨μ νΈμ¶!

```cpp
Triangle(const RGB& _color, const vec2& _pos, const float& _size)
{
	init(_color, _pos, _size);
}

void init(const RGB& _color, const vec2& _pos, const float& _size)
{
	GeometricObject::init(_color, _pos);
			size = _size;
}
```
- init μ΄κΈ°ν™” ν•¨μλ¥Ό λ”°λ΅ λ‘κ³  μƒμ„±μ μ•μ—μ„ initμ„ μ΄μ©ν•λ” μ‹.
- κ°μ²΄ μƒμ„±κ³Όλ” λ³„κ°λ΅ ν•λ‚ ν•λ‚ μμ‹κ°μ²΄λ§λ‹¤ init ν•¨μ μ¨μ„ μ΄κΈ°ν™” ν•  ν•„μ”κ°€ μ—†μ–΄μ΅λ‹¤.
- μ΄λ° κ³Όμ •μ—μ„ upgrade ν•¨μμ drawλ” κ±΄λ“¤μΌ ν•„μ”κ°€ μ—†λ‹¤.

### π“Box.h

```cpp

Box()
{}
		
Box(const RGB& _color, const vec2& _pos, const float& _width, const float& _height)  // μƒμ„±μ
{
	init(_color, _pos, _width, _height);
}

void init(const RGB& _color, const vec2& _pos, const float& _width, const float& _height)
{
	GeometricObject::init(_color, _pos);

	width = _width;
	height = _height;
}
```
### π“main

```cpp
auto *my_tri = new Triangle(Colors::gold, vec2{ -0.5f, 0.2f }, 0.1f);
auto *my_cir = new Circle(Colors::olive, vec2{ 0.1f, 0.1f }, 0.1f);
auto *my_box = new Box(Colors::black, vec2{ 0.5f, 0.5f }, 0.2f, 0.1f);
```

<br>

## π”” κ°€μƒ μ†λ©Έμ

```cpp
GeometricObject * my_obj = &my_tri;
delete my_obj;  // λ¶€λ¨ μ†λ©Έμκ°€ νΈμ¶λλ‹¤.
```
λ¶€λ¨ ν¬μΈν„°λ΅ μμ‹ κ°μ²΄λ¥Ό μ°Έμ΅°ν•  λ•, λ¶€ν¬ ν¬μΈν„°λ¥Ό `delete`μ‹ν‚¤λ©΄ μμ‹ κ°μ²΄λ¥Ό μ°Έμ΅°ν•κ³  μμμ—λ„ λ¶κµ¬ν•κ³  <u>λ¶€λ¨ μ†λ©Έμλ¥Ό νΈμ¶ν•λ‹¤</u> C++μ€ ν¬μΈν„°κ°€ μ–΄λ–¤ νƒ€μ…μ΄λƒλ¥Ό λ” μ¤‘μ”ν•κ² λ”°μ§€κΈ° λ•λ¬Έμ—.

> `κ°€μƒ μ†λ©Έμ` : μμ‹ ν΄λμ¤μ μ†λ©Έμκ°€ μ‹¤ν–‰ λλ„λ΅ ν•λ‹¤.

λ¶€λ¨ ν΄λμ¤μ μ†λ©Έμ μ„ μ–Έ μ•μ— `virtual`μ„ λ¶™μ—¬μ£Όλ©΄ μμ‹ ν΄λμ¤μ μ†λ©Έμκ°€ νΈμ¶λλ‹¤.

```cpp
// λ¶€λ¨ ν΄λμ¤ GeometricObject

virtual ~GeometricObject()
{}
```

- *cf) μ¤λ§νΈ ν¬μΈν„°*
  - λ¶€λ¨ ν¬μΈν„°λ¥Ό `μ¤λ§νΈ ν¬μΈν„°`λ΅ μ‚¬μ©ν•λ©΄ λ™μ  ν• λ‹Ήμ„ ν•λ”λΌλ„ deleteμ„ λ”°λ΅ ν•΄μ¤„ ν•„μ”κ°€ μ—†λ‹¤. 
  - λν• μ¤λ§νΈ ν¬μΈν„° μ¤‘ `shared_ptr`λ” λ¶€λ¨ μ†λ©Έμμ— virtualμ„ λ¶™μ΄μ§€ μ•μ•„λ„ μλ™μΌλ΅ μμ‹ μ†λ©Έμκ°€ νΈμ¶λλ‹¤.


<br>

    π κ°μΈ κ³µλ¶€ κΈ°λ΅μ© λΈ”λ΅κ·Έμ…λ‹λ‹¤. μ¤λ¥λ‚ ν‹€λ¦° λ¶€λ¶„μ΄ μμ„ κ²½μ° 
    μ–Έμ λ“ μ§€ λ“κΈ€ νΉμ€ λ©”μΌλ΅ μ§€μ ν•΄μ£Όμ‹λ©΄ κ°μ‚¬ν•κ² μµλ‹λ‹¤! π„

[λ§¨ μ„λ΅ μ΄λ™ν•κΈ°](#){: .btn .btn--primary }{: .align-right}