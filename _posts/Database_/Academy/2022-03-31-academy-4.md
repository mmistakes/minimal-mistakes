---
layout: single
title:  " DAY-22. DataBase ìˆ«ìí•¨ìˆ˜, ë‚ ì§œí•¨ìˆ˜"
categories: Database-academy
tag: [Database, ìˆ«ìí•¨ìˆ˜, ë‚ ì§œí•¨ìˆ˜]
toc: true
toc_sticky: true
author_profile: false
sidebar:
  nav: "docs"
---


# ğŸ” 2022-03-31 - 1

## ë°ì´í„°ë² ì´ìŠ¤ 

<!--Quote-->

> â— ìˆ˜ì—…ì„ ë“£ê³ , ê°œì¸ì´ ê³µë¶€í•œ ë‚´ìš©ì„ ì ì€ ê²ƒ ì´ê¸°ì— ì˜¤ë¥˜ê°€ ë§ì„ ìˆ˜ë„ ìˆìŒ 

# 1ï¸âƒ£ ìˆ«ì í•¨ìˆ˜

## ì ˆëŒ€ê°’ êµ¬í•˜ê¸° â†’ abs

abs(ìˆ«ì) : ì¸ìë¡œ ì „ë‹¬ë°›ì€ ìˆ«ìì˜ ì ˆëŒ€ê°’ì„ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜

```java
select abs(10) from dual; -- 10
select abs(-10) from dual; -- 10
```

## ë‚˜ë¨¸ì§€ êµ¬í•˜ê¸° â†’ mod()

mod(ìˆ«ì, ë‚˜ëˆŒ ê°’) : ì¸ìë¡œ ì „ë‹¬ë°›ì€ ìˆ«ìë¥¼ ë‚˜ëˆŒ ê°’ìœ¼ë¡œ ë‚˜ëˆ ì„œ ë‚˜ë¨¸ì§€ë¥¼ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜ 

```java
select mod(10,3) from dual; -- 1
select mod(10,2) from dual; -- 2
```

## ë°˜ì˜¬ë¦¼ â†’ round()

ì¸ìë¡œ ë°›ì€ ìˆ«ìë¥¼ ë°˜ì˜¬ë¦¼í•˜ì—¬ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜

1) round(ìˆ«ì)

ì†Œìˆ˜ì  ë°”ë¡œ ì•„ë˜ì—ì„œ ë°˜ì˜¬ë¦¼ 

```java
select round(45.4) from dual; -- 45
select round(45.5) from dual; -- 46
select round(123.456) from dual; -- 123
select round(123.567) from dual; -- 124 
```

2) round(ìˆ«ì, ì†Œìˆ˜ì  ì¸ë±ìŠ¤ ìœ„ì¹˜) 

ì¸ìë¡œ ë°›ì€ ìˆ«ìë¥¼ ì§€ì •í•œ ìœ„ì¹˜ ë‹¤ìŒ ìë¦¬ìˆ˜ì—ì„œ ë°˜ì˜¬ë¦¼í•˜ì—¬ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜

 -> (ì†Œìˆ˜ì  ì¸ë±ìŠ¤ + 1) ì—ì„œ ë°˜ì˜¬ë¦¼

```java
select round(123.456,2) from dual; --123.46 ì¶œë ¥
-- 123.456ì—ì„œ ì†Œìˆ˜ì  ì…‹ì§¸ ìë¦¬ì¸ 6ì—ì„œ ë°˜ì˜¬ë¦¼

select round(123.456,-2) from dual; --100 ì¶œë ¥
-- ì¸ë±ìŠ¤ê°€ ìŒìˆ˜ë¡œ ë“¤ì–´ì˜¤ë©´ ì†Œìˆ˜ì ì´ ì•„ë‹Œ ì •ìˆ˜ë¶€ë¶„ì—ì„œ ì˜¤ë¥¸ìª½ ë¶€í„° ì¶œë°œ 
ê·¸ë˜ì„œ 123 ì—ì„œ 2ì—ì„œ ë°˜ì˜¬ë¦¼
```

## ì†Œìˆ˜ì  ë²„ë¦¬ê¸° â†’ floor()

ì¸ìë¡œ ë°›ì€ ìˆ«ìì˜ ì†Œìˆ˜ì  ìë¦¬ë¥¼ ëª¨ë‘ ë²„ë¦¬ê³  ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜

ì •ìˆ˜ ê°’ë§Œ ì–»ì„ ìˆ˜ ìˆìŒ

```java
select floor(123.456) from dual; -- 123
```

## ì†Œìˆ˜ì  ìë¥´ê¸° â†’ trunc(ìˆ«ì, ì†Œìˆ˜ì  ì¸ë±ìŠ¤ ìœ„ì¹˜)

ì¸ìë¡œ ë°›ì€ ìˆ«ìë¥¼ ì§€ì •í•œ ìœ„ì¹˜ê¹Œì§€ ì˜ë¼ì„œ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜ -> ë°˜ì˜¬ë¦¼ x

```java
select trunc(123.456,1) from dual; -- 123.4  -- ë°˜ì˜¬ë¦¼ì„ ì•ˆí•˜ê³  ì§€ì •í•´ì¤€ ì†Œìˆ˜ì  ì²«ë²ˆì§¸ìë¦¬ê¹Œì§€ í‘œê¸°
select round(123.456,1) from dual; -- 123.5  -- ë°˜ì˜¬ë¦¼ì„ í•œë‹¤
```

## ì†Œìˆ˜ì  ë²„ë¦¬ê³  ì˜¬ë¦¬ê¸° â†’ ceil()

ì¸ìë¡œ ë°›ì€ ìˆ«ìê°€ ì†Œìˆ˜ì  ìë¦¬ë¥¼ ê°€ì§€ê³  ìˆë‹¤ë©´ ë¬´ì¡°ê±´ ë°˜ì˜¬ë¦¼ í•˜ê³  ì†Œìˆ˜ì ì„ ë²„ë¦¼

```java
select ceil(123.456) from dual; -- 124 -- ì†Œìˆ˜ì ì´ ìˆìœ¼ë‹ˆê¹Œ ë°˜ì˜¬ë¦¼ í•˜ê³  ì†Œìˆ˜ì  ë²„ë¦¬ê¸° 
select floor(123.456) from dual; -- 123 -- ì†Œìˆ˜ì ì„ ê·¸ëƒ¥ ë²„ë¦¬ê¸° 
```

| ê²°ê³¼ê°’ : ì •ìˆ˜ | ê²°ê³¼ê°’ : ì‹¤ìˆ˜ |
| --- | --- |
| floor | round |
| ceil | trunc |



# 2ï¸âƒ£ ë‚ ì§œí•¨ìˆ˜

## sysdate

ì‹œìŠ¤í…œì— ì €ì¥ë˜ì–´ìˆëŠ” í˜„ì¬ ë‚ ì§œ(ì‹œê°„í¬í•¨) ë°˜í™˜

```java
select sysdate from dual; -- ì‹œìŠ¤í…œì˜ í˜„ì¬ ë‚ ì§œ
```

## current_date

session(ì ‘ì†)timezone

```java
select current_date from dual;
```

## ë‚ ì§œ ê°œì›” ìˆ˜ ì°¨ì´ êµ¬í•˜ê¸° â†’ months_between()

months_between(ë‚ ì§œí˜•1, ë‚ ì§œí˜•2) : ë‚ ì§œ1ê³¼ ë‚ ì§œ2ì˜ ì°¨ì´ë¥¼ ê³„ì‚°

```java
select months_between(sysdate, hire_date) from employee; 
select floor(months_between(sysdate, hire_date) / 12) from employee; -- ê·¼ì†ë…„ìˆ˜ êµ¬í•˜ê¸°
```

## ë‚ ì§œ ë”í•˜ê¸° â†’ add_months()

add_months(ê¸°ì¤€ ë‚ ì, ë”í•  ê°œì›” ìˆ˜) : ì²« ë²ˆì§¸ ì¸ìê°’ì¸ ë‚ ì§œë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•´ì„œ ë‘ ë²ˆì§¸ ì¸ìê°’ì„ ë”í•´ì„œ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜

```java
select add_months(sysdate,1) from dual;  -- 22/04/30 -- 1ê°œì›” ë”í•˜ê¸°
select add_months(sysdate,-1) from dual; -- 22/02/28 -- 1ê°œì›” ë¹¼ê¸° 
```



```java
ğŸ” employee í…Œì´ë¸”ì—ì„œ ì‚¬ì›ëª…, ì…ì‚¬ì¼, ì…ì‚¬ í›„ 6ê°œì›”ì´ ëœ ë‚ ì§œ ì¡°íšŒ

select emp_name, hire_date, add_months(hire_date,6) "ì…ì‚¬ í›„ 6ê°œì›”" from employee;
```

## ê°€ê¹Œìš´ ë‚ ì§œ êµ¬í•˜ê¸° â†’ next_day()

next_day(ê¸°ì¤€ ë‚ ì§œ, ìš”ì¼/ìˆ«ì) : ê¸°ì¤€ ë‚ ì§œë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•´ì„œ ì˜¤ë¥¸ìª½ì— í•´ë‹¹í•˜ëŠ” ê°€ì¥ ê°€ê¹Œìš´ ë‚ ì§œë¥¼ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜

**ìš”ì¼ í‘œê¸°**

1. í•œê¸€ : 'ì›”', 'ì›”ìš”ì¼â€™
2. ìˆ«ìì˜ ì˜ë¯¸ : 1 -> ì¼ìš”ì¼ 2-> ì›”ìš”ì¼ .... 7-> í† ìš”ì¼ ==> ìš”ì¼ì„ ë²ˆí˜¸ë¡œ ë°”ê¾¼ê²ƒ

```java
select next_day(sysdate,'ì›”') from dual; -- ì˜¤ëŠ˜ ë‚ ì§œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê°€ì¥ ê°€ê¹Œìš´ ì›”ìš”ì¼ì€ 22/04/04
select next_day(sysdate,'ì›”ìš”ì¼') from dual;
select next_day(sysdate,2) from dual; -- 2ëŠ” ì›”ìš”ì¼ì„ ì˜ë¯¸ 
```

## ê·¸ ë‹¬ì˜ ë§ˆì§€ë§‰ ë‚  êµ¬í•˜ê¸° â†’ last_day()

last_day(ê¸°ì¤€ ë‚ ì§œ) : ê¸°ì¤€ ë‚ ì§œë¥¼ ë°”íƒ•ìœ¼ë¡œ í•´ì„œ í•´ë‹¹ ë‚ ì§œê°€ ì†í•œ ë‹¬ì˜ ë§ˆì§€ë§‰ ë‚ ì„ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜

```java
select last_day(add_months(sysdate,-1)) from dual; -- 22/02/28
// sysdateëŠ” í˜„ì¬ë¥¼ ê¸°ì¤€ìœ¼ë¡œ 22/03/31 ì—ë‹¤ê°€ add_monthsë¡œ -1ì„ ë”í•´ì¤˜ 22/02/28ì´ ë˜ê³ 
// 02ì›”ì˜ last_dayëŠ” 02/28ì´ê¸°ì— 22/02/28 ì¶œë ¥

ğŸ” ë‹¤ìŒë‹¬ì˜ ë§ˆì§€ë§‰ ë‚ 
select last_day(add_months(sysdate,1)) from dual;
// sysdateëŠ” í˜„ì¬ë¥¼ ê¸°ì¤€ìœ¼ë¡œ 22/03/31 ì—ë‹¤ê°€ add_monthsë¡œ 1ì„ ë”í•´ì¤˜ 22/04/30ì´ ë˜ê³ 
// 04ì›”ì˜ last_dayëŠ” 04/30ì´ê¸°ì— 22/04/30 ì¶œë ¥
```

## ê¸°ì¤€ ë‚ ì§œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë…„ë„,ì›”,ì¼ ë½‘ê¸° â†’ extract()

ê¸°ì¤€ë‚ ì§œë¡œ ë¶€í„° ë…„/ì›”/ì¼ì„ ì¶”ì¶œí•´ì„œ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜

- extract(year/month/day from date(ê¸°ì¤€ë‚ ì§œ)


```java
ğŸ”
select extract(year from sysdate) from dual; -- 22
select extract(month from sysdate) from dual; -- 03
select extract(day from sysdate) from dual; -- 31
```

```java
ğŸ” employee í…Œì´ë¸”ì—ì„œ ì‚¬ì›ëª…, ì…ì‚¬ë…„ë„, ì…ì‚¬ì›”, ì…ì‚¬ì¼ì„ ì¡°íšŒ
    select  emp_name,
	        hire_date, 
	        extract(year from hire_date),
		    extract(month from hire_date),
	        extract(day from hire_date),
	from employee;
```



```java
ğŸ”
employee í…Œì´ë¸” ì‚¬ì›ëª…, ì…ì‚¬ì¼, ë…„ì°¨ë¥¼ ì¶œë ¥ 
ì…ì‚¬ì¼ -> yyyyë…„ mmì›” ddì¼ í˜•ì‹ìœ¼ë¡œ ì¶œë ¥ 
ë…„ì°¨ ì¶œë ¥ ì‹œì—ëŠ” ì†Œìˆ˜ì ì€ ì˜¬ë¦¼ìœ¼ë¡œ ì²˜ë¦¬ -> 28.144 -> 29ë…„ì°¨ 
ì¶œë ¥ ì‹œì— ì •ë ¬ì€ ì…ì‚¬ì¼ ê¸°ì¤€ìœ¼ë¡œ ì˜¤ë¦„ì°¨ìˆœ

1ë²ˆ í’€ì´
    select emp_name"ì´ë¦„", 
           extract(year from hire_date) || 'ë…„' || 
           extract(month from hire_date)|| 'ì›”' || 
           extract(month from hire_date)|| 'ì¼' "ì…ì‚¬ì¼",
           ceil((sysdate-hire_date)/365) "ì…ì‚¬ë…„ì°¨"
        from employee // ì—¬ê¸°ì„œ 'ë…„ì°¨'ë¥¼ ë¶™ì´ë©´ ì˜¤ë¦„ì°¨ìˆœ x
	order by "ì…ì‚¬ì¼" asc;

â— ë¬¸ìì—´ì„ ê¸°ì¤€ìœ¼ë¡œ order by -> ë¬¸ìë¡œì¨ ë” ì‘ì€ ìˆ«ìë¥¼ ì‘ë‹¤ê³  ì¸ì‹(10ê³¼ 3ì´ ìˆë‹¤ë©´ 10ì´ ë” ì‘ì€ ìˆ˜ -> ì•ìë¦¬ ë§Œ ë³´ë‹ˆê¹Œ)

2ë²ˆ í’€ì´ 
select emp_name"ì´ë¦„", 
        concat(extract(year from hire_date),'ë…„') ||
        concat(extract(month from hire_date),'ì›”') || 
        concat(extract(month from hire_date),'ì¼') "ì…ì‚¬ì¼" ,
        ceil((sysdate-hire_date)/365)||'ë…„ì°¨' "ì…ì‚¬ë…„ì°¨" from employee
        order by "ì…ì‚¬ì¼" asc;
```



```java
ğŸ”
íŠ¹ë³„ ë³´ë„ˆìŠ¤ë¥¼ ì§€ê¸‰ -> ìë£Œê°€ í•„ìš”
employee -> ì…ì‚¬ì¼ì„ ê¸°ì¤€ìœ¼ë¡œ ë‹¤ìŒë‹¬ 1ì¼ ë¶€í„° 6ê°œì›”ì„ ê³„ì‚°í•´ì„œ ì¡°íšŒ
ì‚¬ì›ëª…, ì…ì‚¬ì¼, ê¸°ì¤€ì¼, ê¸°ì¤€ì¼ + 6ê°œì›” 
22/01/05 ì…ì‚¬ -> 22/02/01 ê¸°ì¤€ì¼ -> 22/08/01 ê¸°ì¤€ì¼ + 6ê°œì›” 
ì¶œë ¥í•  ë•Œ ì…ì‚¬ì¼ ê¸°ì¤€ìœ¼ë¡œ ì¶œë ¥

1ë²ˆ í’€ì´ 
select * from employee;
select emp_name,
       hire_date,
       add_months( trunc(hire_date,'MM'), 1 ),
       add_months(ADD_MONTHS( TRUNC(hire_date,'MM'), 1 ),6)
       from employee
    order by hire_date asc;
    
    
2ë²ˆ í’€ì´     
select  emp_name "ì‚¬ì›ëª…",
        hire_date "ì…ì‚¬ì¼",
        last_day(hire_date) + 1 "ê¸°ì¤€ì¼",
        add_months(last_day(hire_date) + 1,6) "ê¸°ì¤€ì¼ + 6ê°œì›”"
        from employee
    order by hire_date asc;
```



