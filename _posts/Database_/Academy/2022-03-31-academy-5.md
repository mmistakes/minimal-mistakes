---
layout: single
title:  " DAY-22. DataBase í˜•ë³€í™˜,ê·¸ë£¹í•¨ìˆ˜,ì¡°ê±´ì‹"
categories: Database-academy
tag: [Database, í˜•ë³€í™˜, ê·¸ë£¹ í•¨ìˆ˜, ì¡°ê±´ì‹]
toc: true
toc_sticky: true
author_profile: false
sidebar:
  nav: "docs"
---


# ğŸ” 2022-03-31 - 2

## ë°ì´í„°ë² ì´ìŠ¤ 

<!--Quote-->

> â— ê°œì¸ì´ ê³µë¶€í•œ ë‚´ìš©ì„ ì ì€ ê²ƒ ì´ê¸°ì— ì˜¤ë¥˜ê°€ ë§ì„ ìˆ˜ë„ ìˆìŒ 


## ğŸ”” í˜•ë³€í™˜

### 1) ë‚ ì§œë‚˜ ìˆ«ìë¥¼ ë¬¸ìë¡œ â†’ to_char()
to_char(date/number, format)
- ë‚ ì§œ í˜¹ì€ ìˆ«ìë¥¼ íŠ¹ì •í•œ í˜•ì‹ì˜ ë¬¸ìí˜•ìœ¼ë¡œ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜
- format â†’ ì»¤ìŠ¤í„°ë§ˆì´ì§• ì´ë¼ê³  ìƒê°

1) **ğŸš€ ë‚ ì§œí˜• â†’ ë¬¸ìí˜•**


```java
ğŸ”
select sysdate from dual; -- 22/03/31 ì¶œë ¥
select to_char(sysdate,'YYYY--MM--DD') from dual; -- 2022-03-31 ì¶œë ¥
select to_char(sysdate,'YYYY/MM/DD') from dual; -- 2022/03/31 ì¶œë ¥ 
```

**í‘œê¸°**

ë…„ë„ : YY / YYYY ë¡œ í‘œê¸°

ì›” : MM , 

ì›” í•œê¸€ë¡œ ì¶œë ¥ : MONTH

ì¼ : DD

ìš”ì¼ í•œê¸€ë¡œ ì¶œë ¥: DAY, DY

ì‹œ ë¶„ ì´ˆ : HH:MI:SS

ì˜¤ì „ ì˜¤í›„ : AM, PM



```java

ğŸ”ì…ì‚¬ë…„ì›ì¼ì„ to_charë¥¼ í™œìš©í•´ ë…„ì›”ì¼ í˜•ì‹ìœ¼ë¡œ ì¶œë ¥

select emp_name, hire_date, to_char(hire_date,'YYYY"ë…„" MM"ì›”" DD"ì¼"') from employee;
```

ğŸ’¡ í•œê¸€ì„ í˜•ì‹ì— ì¶”ê°€í•˜ê³  ì‹¶ë‹¤ë©´ í•œê¸€ì˜ ì–‘ìª½ì„ ""ë¡œ ë¬¶ê¸°

```java
// DAY : ìš”ì¼ , ìš”ì¼ ê¹Œì§€ ì¶œë ¥
select to_char(sysdate,'YY/MM/DD/DAY') from dual; // 22/03/31/ëª©ìš”ì¼

// DY : x(ìš”ì¼)
select to_char(sysdate,'YY/MM/DD/DY') from dual; // 22/03/31/ëª©

// MONTH : xì›”
select to_char(sysdate,'YY/MONTH/DD') from dual; // 22/3ì›” /31

// HH MI SS ì‹œë¶„ì´ˆ
select to_char(sysdate,'HH:MI:SS') from dual; // 12:09:08

// PM/AM : ì˜¤í›„ / ì˜¤ì „
select to_char(sysdate,'PMHH:MI:SS') from dual; // ì˜¤í›„12:10:16

// HH24 : 24ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ í‘œê¸° 
select to_char(sysdate,'HH24:MI:SS') from dual; // 13:33:09
```



```java
ğŸ” employee í…Œì´ë¸” ì‚¬ì›ëª…, ì…ì‚¬ì¼ -> 1990/02/05(í™”)
select emp_name, to_char(hire_date, 'YYYY/MM/DD/(DY)')from employee;
```

1) **ğŸš€ìˆ«ìí˜• â†’ ë¬¸ìí˜•**

- to_char(ëŒ€ìƒ ìˆ«ì,â€™999,999,999â€™)
- to_char(ëŒ€ìƒ ìˆ«ì,â€™000,000,000â€™)

```java
select to_char(123456789,'999,999,999') from dual; // 123,456,789
select to_char(123457789,'000,000,000') from dual; // 123,457,789
```


```java
// 9ë¥¼ ì‚¬ìš©í–ˆì„ ë•Œ ë²”ìœ„('999,999,999') ë³´ë‹¤ ì ìœ¼ë©´ ê²°ê³¼ê°’ì€ ì˜ë¼ì„œ ë‚˜ì˜´
select to_char(12345,'999,999,999')from dual; //      12,345

// 0ì„ ì‚¬ìš©í–ˆì„ ë•Œ ë²”ìœ„('000,000,000') ë³´ë‹¤ ì ìœ¼ë©´ ê²°ê³¼ê°’ + ë¹ˆì¹¸ì„ 0ìœ¼ë¡œ ì±„ìš´ë‹¤
select to_char(12345,'000,000,000')from dual; // 000,012,345
```

### í†µí™”í‘œì‹œ ###

L(local)ì— ë§ëŠ” ì›í™” í‘œì‹œë¥¼ í•´ì¤Œ í•œêµ­ -> ï¿¦

```java
select to_char(12345,'L999,999') from dual; --          ï¿¦12,345
```

### nvl(ìˆ«ì/ì»¬ëŸ¼, ì¹˜í™˜ê°’)

ë§Œì•½ í•´ë‹¹ ìˆ«ì/ì»¬ëŸ¼ì´ nullê°’ì´ë¼ë©´ ì¹˜í™˜ê°’ìœ¼ë¡œ ë³€í™˜í•´ì£¼ëŠ” í•¨ìˆ˜

```java
select bonus, nvl(bonus,0) from employee; //bonusê°€ null ì´ë©´ bonusëŠ” 0ìœ¼ë¡œ ì¹˜í™˜í•´ì„œ ê³„ì‚°
```



```java
ğŸ”
employee -> ì§ì›ëª…, ì§ê¸‰ì½”ë“œ, ì—°ë´‰(ì›) ì¡°íšŒ
ë‹¨, ì—°ë´‰ì€ ï¿¦ ë¡œ í•´ì£¼ê¸° 

select * from employee;
select emp_name "ì§ì›ëª…", 
	   job_code "ì§ê¸‰ì½”ë“œ", 
	   to_char((salary + salary*0.3) * 12,'L999,999,999') "ì—°ë´‰(ì›)"
	   //to_char(((salary + (salary * nvl(bonus,0)))*12),'L999,999,999') -- ìœ„ì˜ ë¬¸ì¥ê³¼ ê°™ì€ í‘œí˜„ 
	from employee;

// L000,000,000 ìœ¼ë¡œ í•˜ë©´ ì–µë‹¨ìœ„ê°€ ì•„ë‹Œì‚¬ëŒì€ 0ìœ¼ë¡œ ì±„ì›Œì§€ê²Œ ë˜ë²„ë¦¼
```

![1.png](/assets/images/posts/2022-03-31/1.png)

### 2) ìˆ«ìë‚˜ ë¬¸ìë¥¼ ë°ì´íŠ¸ íƒ€ì…ìœ¼ë¡œì˜ ë³€ê²½ â†’ to_date()

to_date(ìˆ«ì/ë¬¸ì,í˜•ì‹) : ìˆ«ìí˜• í˜¹ì€ ë¬¸ìí˜• ë°ì´í„°ë¥¼ ë°ì´íŠ¸(ë‚ ì§œ) íƒ€ì…ìœ¼ë¡œ ë°”ê¿”ì£¼ëŠ” í•¨ìˆ˜

```java
select to_date(20120505) from dual; // 12/05/05
select to_date(20120505,'YYYYMMDD') from dual; // 12/05/05
select to_date(20120505,'YYMMDD') from dual; // 12/05/05
select to_date('20120505','YYMMDD') from dual; // 12/05/05
```

```java
// ì‹œê°„ì„ ì…ë ¥ í• ë•Œ ì‹œê°„ ì•ì— ë…„ì›”ì¼ì„ ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ê·¸ ë‹¬ì˜ ì²«ì§¸ë‚ ì„ ë°˜í™˜ í•œë‹¤
select to_date('110808','HH:MI:SS') from dual; // 22/03/01
select to_char(to_date('110808','HH:MI:SS'),'YYYY/MM/DD HH:MI:SS') from dual; 

// ë…„ë„ê°’ì„ ë°˜í™˜í• ë•Œ 2000/1900ë…„ëŒ€ì— ëŒ€í•œ ê°’ì„ ëª…í™•íˆ ì œì‹œí•˜ì§€ ì•Šìœ¼ë©´ 2000ë…„ëŒ€ë¥¼ default ê°’ìœ¼ë¡œ ì¸ì‹
select to_char(to_date('890909','YY/MM/DD'),'YYYY/MM/DD') from dual; // 2089/09/09
```

â— ë…„ë„ê°’ì„ ë°˜í™˜í• ë•Œ 2000/1900ë…„ëŒ€ì— ëŒ€í•œ ê°’ì„ ëª…í™•íˆ ì œì‹œí•˜ì§€ ì•Šìœ¼ë©´ 2000ë…„ëŒ€ë¥¼ default ê°’ìœ¼ë¡œ ì¸ì‹



```java
ğŸ” employee í…Œì´ë¸”ì—ì„œ 2000ë…„ë„ ì´í›„ì— ì…ì‚¬í•œ ì‚¬ì›ëª…, ì‚¬ë²ˆ, ì…ì‚¬ì¼ ì¡°íšŒ

select emp_name, emp_id, hire_date from employee
    where hire_date > to_date('20000101','YY/MM/DD');
```

### 3) ë¬¸ìì—´ì„ ìˆ«ìí˜•ìœ¼ë¡œ ë³€í™˜ â†’ to_number

- ë¬¸ìì—´ì„ ìˆ«ìí˜•ìœ¼ë¡œ ë³€í™˜í•´ì£¼ëŠ” í•¨ìˆ˜
- ë„˜ê²¨ì£¼ëŠ” ë¬¸ìí˜•ì˜ í˜•ì‹ì— ë§ê²Œ ìˆ«ìí˜•ì‹ë„ ë™ì¼í•˜ê²Œ í•´ì•¼í•œë‹¤

```java
select to_number('123,456,789','999,999,999') from dual; // 123456789 
select to_number('123,456,789','999,999') from dual; // error
select to_number('123,123','9999,999') from dual; // error ìˆ«ìë¡œ ë³€í™˜ë¶ˆê°€í•œ ë¬¸ìì—´ì„ ëˆ”ê²¨ì¤„ ìˆ˜ x
```

### 4) ë¬µì‹œì  í˜•ë³€í™˜

ì˜¤ë¼í´ì—ì„œëŠ” ì–´ëŠ ì •ë„ ìë™ì ìœ¼ë¡œ ìë£Œí˜•ì„ ìœ ì¶”í•´ì„œ í˜•ë³€í™˜

```java
select emp_name, salary from employee
    where salary = 8000000; // ìˆ«ì
select emp_name, salary from employee
    where salary = '8000000'; // ë¬¸ìë¡œ ì…ë ¥ -> ìë™ìœ¼ë¡œ í˜•ë³€í™˜ -> ìˆ«ìë¡œ ì¶œë ¥
    
select 25 + '25' from dual; // 50
```


```java
ğŸ”
    60ë…„ ëŒ€ìƒì˜ ì§ì›ëª…ê³¼ ë…„ìƒ, ë³´ë„ˆìŠ¤ ìœ¨ì„ ì¶œë ¥í•˜ì‹œì˜¤ 
    ê·¸ë•Œ ë³´ë„ˆìŠ¤ ê°’ì´ nullì¸ ê²½ìš°ì—ëŠ” 0%ë¡œ 

    select * from employee;
    select  emp_name "ì§ì›ëª…", 
            substr(emp_no,1,2) "ë…„ìƒ",
            nvl(bonus,0)*100 || '%' "ë³´ë„ˆìŠ¤ìœ¨" from employee
            // where emp_no like '6%';
        where to_number(substr(emp_no,1,2)) between 60 and 69;
```


## ğŸ”” ê·¸ë£¹ í•¨ìˆ˜

### 1) í•©ê³„ ì¶œë ¥ â†’ sum()

sum(ìˆ«ì/ì»¬ëŸ¼) : í•´ë‹¹ ì»¬ëŸ¼/ìˆ«ì ê°’ì˜ ì´ í•©ì„ êµ¬í•´ì£¼ëŠ” í•¨ìˆ˜



```java
select sum(salary) from employee;

!!ê·¸ë£¹í•¨ìˆ˜ë¥¼ ì‚¬ìš©í• ë•Œì—ëŠ” ë‹¨ì¼í•œ ê²°ê³¼ê°’ì´ ë‚˜ì˜¨ë‹¤
select emp_name, sum(salary) from employee; 
-- not a single-group group function ì—ëŸ¬ ë°œìƒ
```

### 2) í‰ê·  ì¶œë ¥ â†’ avg()

í•´ë‹¹ ì»¬ëŸ¼ ê°’ë“¤ì˜ í‰ê· ì„ êµ¬í•´ì£¼ëŠ” í•¨ìˆ˜



```java
    ì†¡ì¢…ê¸° ì‚¬ì›ê³¼ ì„ ë™ì¼ ì‚¬ì›ì˜ í‰ê·  ê¸‰ì—¬ êµ¬í•´ë³´ê¸°

    select round(avg(salary),0) 
		from employee
    where emp_name in ('ì†¡ì¢…ê¸°','ì„ ë™ì¼');
```

```java

    ì „ ì§ì›ì˜ ë³´ë„ˆìŠ¤ í‰ê·  -> ì†Œìˆ˜ì  ì…‹ì§¸ ìë¦¬ìˆ˜ì—ì„œ ë°˜ì˜¬ë¦¼

    ê·¸ë£¹í•¨ìˆ˜ : ê·¸ë£¹í•¨ìˆ˜ ì‚¬ìš©ì‹œ null ê°’ì´ ì¡´ì¬í•˜ë©´ nullê°’ì€ ì•„ì˜ˆ ì œì™¸ ëŒ€ìƒ 
    -> ì¦‰ nullê°’ì¸ ì‚¬ëŒì€ ì•„ì˜ˆ ì œì™¸í•˜ê³  ê°’ì„ ë‚˜ëˆ ì„œ í‰ê· ë‚¸ê±°ì„
    select round(avg(bonus),2) from employee; -- 0.22 nullê°’ ì œì™¸

    null ê°’ë„ í¬í•¨í•˜ê³  ê³„ì‚°í•˜ë ¤ë©´ nvl ì‚¬ìš©
    select round(avg(nvl(bonus,0)),2) from employee;  -- 0.08 nullê°’ í¬í•¨
```

> â— ê·¸ë£¹í•¨ìˆ˜ : ê·¸ë£¹í•¨ìˆ˜ ì‚¬ìš©ì‹œ null ê°’ì´ ì¡´ì¬í•˜ë©´ nullê°’ì€ ì•„ì˜ˆ ì œì™¸ ëŒ€ìƒ


### 3) ì»¬ëŸ¼ ìˆ˜ ì¶œë ¥ â†’ count()

í•´ë‹¹ ì»¬ëŸ¼ -> ë°ì´í„°ì˜ ê°œìˆ˜ë¥¼ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜



```java
    select count(*) from employee; -- 23

-- bonusë¥¼ ì§€ê¸‰í•´ì•¼í•˜ëŠ” ì‚¬ì›ì˜ ìˆ˜ ì¹´ìš´íŠ¸
    select count(*) from employee 
        where bonus is not null; -- 9

-- ë¶€ì„œì½”ë“œê°€ D5ì¸ ì‚¬ì›ì˜ ìˆ˜ ì¹´ìš´íŠ¸
    select count(*) from employee 
        where dept_code ='D5';

-- ë¶€ì„œì½”ë“œê°€ D5ì¸ ì‚¬ì›ì˜ ìˆ˜ ì¹´ìš´íŠ¸
    select count(*) from employee 
        where dept_code ='D5';
    
-- ì‚¬ì›ë“¤ì´ ì†í•´ ìˆëŠ” ë¶€ì„œì˜ ìˆ˜ ì¹´ìš´íŠ¸
    select count(distinct dept_code) from employee;
    select * from employee;
```

### 4) ìµœëŒ€ê°’,ìµœì†Œê°’ ë°˜í™˜ â†’ max/min()

í•´ë‹¹ ê·¸ë£¹ì—ì„œ ìµœëŒ€ê°’/ìµœì†Ÿê°’ì„ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜ 

```java
-- ìµœëŒ€ê°’,ìµœì†Œê°’ ë°˜í™˜ â†’ max/min()
    select max(salary), min(salary) from employee;
```

## ğŸ”” ì¡°ê±´ì‹

### 1) decode

- decode(ëŒ€ìƒí‘œí˜„ì‹,ì¡°ê±´1,ê²°ê³¼1,ì¡°ê±´2,ê²°ê³¼2...,default)
- ëŒ€ìƒí‘œí˜„ì‹ì´ ì¡°ê±´1ì— ì í•©í•˜ë©´ ê²°ê³¼1 ë°˜í™˜, ì¡°ê±´2ì— ì ì—…í•˜ë©´ ê²°ê³¼2 ë°˜í™˜... ëª¨ë“ ì¡°ê±´ì— ë¶€í•©x -> default
- defaultì˜ ê°’ì„ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•´ì£¼ì§€ ì•Šìœ¼ë©´ dafault = null
- equal ë¹„êµë§Œ ê°€ëŠ¥ -> í¬ë‹¤ ì‘ë‹¤ ì´ëŸ°ê±° ì•ˆëŒ

```java
-- ì£¼ë¯¼ë²ˆí˜¸ê°€ 1ì´ë©´ ë‚¨ì 2ë©´ ì—¬ì 
    select emp_name "ì‚¬ì›ëª…", decode(substr(emp_no,8,1),'1','ë‚¨','2','ì—¬') "ì„±ë³„" 
		from employee;

-- 'ì—¬'ë¥¼ default ê°’ìœ¼ë¡œ
    select emp_name "ì‚¬ì›ëª…", decode(substr(emp_no,8,1),'1','ë‚¨','ì—¬') "ì„±ë³„" 
		from employee;
```



```java
    ğŸ” ì‚¬ë²ˆ ì§ì›ëª…ê³¼ í‡´ì‚¬ì—¬ë¶€ë¥¼ ì¶œë ¥í•˜ëŠ” ENT_YN(í‡´ì‚¬ì—¬ë¶€)ê°€ 'Y'ê³¼ ê°™ë‹¤ë©´ 
        í‡´ì‚¬ì¼ì„ ì ì–´ë¼ ê·¸ê²Œ ì•„ë‹ˆë©´ ì¬ì§ì¤‘ ì¶œë ¥**

    select emp_id "ì‚¬ë²ˆ", 
        emp_name "ì§ì›ëª…", 
        decode(ent_yn,'N','ì¬ì§ì¤‘',to_char(ent_date,'YY"ë…„" MM"ì›”" DD"ì¼" "í‡´ì‚¬"')) "í‡´ì‚¬ì—¬ë¶€" 
        from employee
    order by í‡´ì‚¬ì—¬ë¶€, ì‚¬ë²ˆ asc;

    ğŸ’¡ order by ì•ìª½ì— ìœ„ì¹˜í•œ ì»¬ëŸ¼ 1ì°¨ ì •ë¦¬ í›„, 2ë²ˆì§¸ ì»¬ëŸ¼ ìˆœìœ¼ë¡œ ì •ë¦¬

```

### 2) case


```java
    case 
        when ì¡°ê±´1 then ê²°ê³¼ 1
        when ì¡°ê±´2 then ê²°ê³¼ 2
        ...
        else(ëª¨ë“ ì¡°ê±´ì´ ì¶©ì¡±ë˜ì§€ ì•Šìœ¼ë©´ else , decodeì˜ default)
     end
```

- ì¡°ê±´1ì´ ì„±ë¦½í•˜ë©´ ê²°ê³¼ 1 ì¶œë ¥ or ì¡°ê±´1ì´ ì„±ë¦½ x ë©´ ì¡°ê±´ 2ë¡œ ë“¤ì–´ê°
- ëª¨ë“  ì¡°ê±´ ì„±ë¦½ x â†’ elseë¬¸ ì‹¤í–‰



```java
    select 
        case 
            when 'ê°€ë‚˜ë‹¤' = 'í•˜í•˜í•˜' then 'ê°™ìŒ'
        end
    from dual; -- null 

    -> else (ê¸°ë³¸ê°’)ì„ ì„¤ì •í•´ì£¼ì§€ ì•Šìœ¼ë©´ ì¡°ê±´ì´ ëª¨ë‘ ë§ì§€ ì•Šì„ ë•Œ null ê°’ ë°˜í™˜
```



â— ì˜¤ë¥˜ ë°œìƒ

```java
    select 
        case 
            when 'ê°€ë‚˜ë‹¤' = 'í•˜í•˜í•˜' then 'ê±°ì§“'
            when 1 > 5 then 20
        else 10
    end
    from dual; -- ì˜¤ë¥˜ ë°œìƒ
```

![2.png](/assets/images/posts/2022-03-31/2.png)



ğŸ’¡ ì˜¤ë¥˜ ë°©ì§€

```java
    select 
        case 
            when 'ê°€ë‚˜ë‹¤' = 'í•˜í•˜í•˜' then 10
            when 1 > 5 then 20
        else 10
        end
    from dual;

    -- ê²°ê³¼ê°’ì„ ì ì–´ì¤„ ë•Œ ë™ì¼í•œ ìë£Œí˜•ìœ¼ë¡œ ì‚¬ìš© í•´ì•¼í•œë‹¤ 
    -> ìˆ«ìë©´ ìˆ«ìë§Œ ë°›ì•„ì•¼í•˜ê³  ë¬¸ìë©´ ë¬¸ìë§Œ ë°›ì•„ì•¼ í•œë‹¤
```



```java
   ğŸ” ì‚¬ë²ˆ ì§ì›ëª…ê³¼ í‡´ì‚¬ì—¬ë¶€ë¥¼ ì¶œë ¥í•˜ëŠ” ENT_YN(í‡´ì‚¬ì—¬ë¶€)ê°€ 'Y'ê³¼ ê°™ë‹¤ë©´ 
       í‡´ì‚¬ì¼ì„ ì ì–´ë¼ ê·¸ê²Œ ì•„ë‹ˆë©´ ì¬ì§ì¤‘ ì¶œë ¥**

    select emp_id "ì‚¬ë²ˆ", emp_name "ì§ì›ëª…",
        case
            when ent_yn = 'N' then 'ì¬ì§ì¤‘'
            else to_char(ent_date,'YY"ë…„" MM"ì›”" DD"ì¼" "í‡´ì‚¬"') 
        end "í‡´ì‚¬ì—¬ë¶€"
    from employee
    order by í‡´ì‚¬ì—¬ë¶€, ì‚¬ë²ˆ asc;
```