---
layout: single
title:  " DAY-22. JDBC ì´í´ë¦½ìŠ¤ ì—°ë™, ë°ì´í„° ì¡°ì‘"
categories: Database-jdbc
tag: [Database, ì´í´ë¦½ìŠ¤ ì—°ë™, ë°ì´í„° ì¡°ì‘]
toc: true
toc_sticky: true
author_profile: false
sidebar:
  nav: "docs"
---


# ğŸ” 2022-04-11

## ë°ì´í„°ë² ì´ìŠ¤ - JDBC

<!--Quote-->

> â— ìˆ˜ì—…ì„ ë“£ê³ , ê°œì¸ì´ ê³µë¶€í•œ ë‚´ìš©ì„ ì ì€ ê²ƒ ì´ê¸°ì— ì˜¤ë¥˜ê°€ ë§ì„ ìˆ˜ë„ ìˆìŒ 


# 1ï¸âƒ£ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì´í´ë¦½ìŠ¤ì˜ í™œìš©


## ë°ì´í„°ë² ì´ìŠ¤ì™€ ì´í´ë¦½ìŠ¤ ì—°ë™

```java
public class Test {
	public static void main(String[] args) {

		try(Connection con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","kh","kh"))	{
			System.out.println("DB ì ‘ì† ì„±ê³µ!");
		}catch(Exception e) {
			e.printStackTrace();
		}
	}
}
```

- "jdbc:oracle:thin:@localhost:1521:xe","kh","kh" -> @localhost:1521:xe","ê³„ì •ì•„ì´ë””","ê³„ì •ë¹„ë²ˆ"
- Connection ê°ì²´ ìƒì„± -> getConnection(url,username,userpw)

## ì´í´ë¦½ìŠ¤ë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°ì´í„° ì¶”ê°€

```java
public class Insert {
	public static void main(String[] args) {
		
		String url = "jdbc:oracle:thin:@localhost:1521:xe";
		String username = "kh";
		String password = "kh";
		
		// Connection ê°ì²´ ìƒì„± -> url, username, password -> oracleê³¼ ì—°ë™ì‹œ í•„ìš”
		try(Connection con = DriverManager.getConnection(url,username,password);
			Statement stmt = con.createStatement();){
			
			System.out.println("DBì ‘ì† ì„±ê³µ");
			String sql = "insert into cafe values(seq_cafe.nextval, 'ì•„ì´ìŠ¤ì•„ë©”ë¦¬ì¹´ë…¸', 3000, sysdate)";
			
			// executeUpdate() ë©”ì„œë“œì˜ ë°˜í™˜ê°’(ì •ìˆ˜)
			int rs = stmt.executeUpdate(sql);
			
			if(rs > 0) { // 0ë³´ë‹¤ í¬ë‹¤ëŠ”ê±´ insert update delete ì¤‘ ì‘ì—…ì´ ì‹¤í–‰ì´ ë¬ë‹¤ëŠ”ê²ƒ 
				System.out.println("ë°ì´í„° ì¶”ê°€ ì„±ê³µ");
			}
			else {
				System.out.println("ë°ì´í„° ì¶”ê°€ ì‹¤íŒ¨");
			}

		}catch(Exception e) {
			e.printStackTrace();
		}
	}
}
```

- Statement ê°ì²´ë¥¼ í™œìš©í•œë‹¤ â†’ ì´ë•Œ Connection ì—°ê²°ì´ í™•ì¸ëœ í›„ ìƒì„±
- Statement stmt = con.createStatement(); â†’ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆê²Œ ì—°ê²°

**executeUpdate()**

- stmt.executeUpdate(sql);ë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìˆ˜ì •
- Statement ê°ì²´ ìƒì„± -> ì˜¤ë¼í´ì—ì„œ sql ë¬¸ì„ ì „ì†¡í•´ ì¿¼ë¦¬ì˜ ê²°ê³¼ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê°ì²´, ì ‘ì†ì´ ëœí›„ ìƒì„±
- í–‰ì˜ ë°ì´í„°ì— ì˜í–¥ì„ ì¤„ ê²½ìš°(insert,update,delete) -> í–‰ì— ë³€í™”ê°€ ìƒê¹€. -> executeUpdate() ë©”ì„œë“œ ì‚¬ìš©
- executeUpdate ê°ì²´ëŠ” ì¸ìê°’ìœ¼ë¡œ ë„˜ê²¨ì¤€ ì¿¼ë¦¬ë¬¸ì„ í†µí•´ì„œ ì˜í–¥ì„ ë°›ì€ í–‰ì˜ ê°œìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤ â†’ ì •ìˆ˜(int)ë¡œ ë°›ëŠ”ë‹¤

**â— ì£¼ì˜** 

1. Connection ì‚¬ìš©ì‹œ ë°˜ë“œì‹œ ê°€ì¥ ë¨¼ì € í”„ë¡œì íŠ¸ì— JDBCì—°ë™ í•  ìˆ˜ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€ 
2. sqldeveloperì—ì„œ ë°ì´í„° ì¡°ì‘ì‹œ commit ë°˜ë“œì‹œ í•´ì•¼í•œë‹¤.

## ì´í´ë¦½ìŠ¤ë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°ì´í„° ì‚­ì œ

```java
public class Delete {
	public static void main(String[] args) {
		
		String url = "jdbc:oracle:thin:@localhost:1521:xe";
		String username = "kh";
		String password = "kh";
		
		try(Connection con = DriverManager.getConnection(url,username,password);
			Statement stmt = con.createStatement();){
			
			// product_id ê°€ 3ì¸ ë°ì´í„°ë¥¼ ì‚­ì œ
			String sql = "delete from cafe where product_id = 3";
			
			int rs = stmt.executeUpdate(sql);
			
			if(rs > 0) {
				System.out.println("ë°ì´í„° ì‚­ì œ ì„±ê³µ");
			}
			else {
				System.out.println("ë°ì´í„° ì‚­ì œ ì‹¤íŒ¨");
			}
			
		}catch(Exception e) {
			e.printStackTrace();
		}
	}
}
```

## ì´í´ë¦½ìŠ¤ë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°ì´í„° ìˆ˜ì •

```java
public class Update {

	public static void main(String[] args) {
		String url = "jdbc:oracle:thin:@localhost:1521:xe";
		String username = "kh";
		String password = "kh";
		
		try(Connection con = DriverManager.getConnection(url,username,password);
			Statement stmt = con.createStatement()){
			
			String sql ="update tbl_student set name ='ê¹€ì˜ìˆ˜', phone = '010-1234-1234', birth_date = '1985/12/20' where no = 1";
			int rs = stmt.executeUpdate(sql);
			
			if(rs > 0) {
				System.out.println("ë°ì´í„° ìˆ˜ì • ì„±ê³µ");
			}
			else {
				System.out.println("ë°ì´í„° ìˆ˜ì • ì‹¤íŒ¨");
			}
			
		}catch(Exception e) {
			e.printStackTrace();
		}
	}
}
```

## ì´í´ë¦½ìŠ¤ë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°ì´í„° ì¡°íšŒ

- ì¶”ê°€,ì‚­ì œ,ì¡°íšŒëŠ”executeUpdateì´ì§€ë§Œ ì¡°íšŒëŠ” **executeQuery**ì„ ì‚¬ìš©í•œë‹¤
- ResultSetìœ¼ë¡œ ê°’ì„ ë°›ëŠ”ë‹¤

ğŸ’¡ ResultSetì˜ ì»¤ì„œ ê°œë… 

```java
System.out.println("rs.next : " + rs.next()); // trueì¶œë ¥
System.out.println("rs.next : " + rs.next()); // false í˜„ì¬ product_idê°€ 1ì¸ ë°ì´í„° ë°–ì—ì—†ë‹¤
			
// ì»¤ì„œê°€ ë°ì´í„°ë¥¼ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ìƒíƒœì—ì„œ ê°’ì„ ì–»ì–´ë‚´ëŠ” ë°©ë²•
/* product_id(1) -> number -> getInt,  
 * product_name(2) -> varchar2
 * price(3) -> number -> getInt
 * register_date(4)) -> date
*/
```

- ResultSetì„ ì´ìš©í•˜ë©´ í…Œì´ë¸”ì˜ ê°€ì¥ ìœ„ìª½ì— ì»¤ì„œê°€ ì¡´ì¬í•œë‹¤ ë”°ë¼ì„œ ì²«ë²ˆì§¸ í–‰ì„ ê°€ë¥´í‚¤ê³  ì‹¶ë‹¤ë©´ **rs.next()**ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤
- rs.next() ì‹¤í–‰ ì‹œ ì•„ë˜í–‰ì— ë°ì´í„°ê°€ ì¡´ì¬í•˜ë©´ trueë¥¼ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ falseë¥¼ ë°˜í™˜

![1.jpg](/assets/images/posts/2022-04-11/1.jpg)

1. ì˜¤ë¼í´ì˜ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•(ì»¬ëŸ¼ ì¸ë±ìŠ¤ë¥¼ í™œìš©)

```java
public class Select {

	public static void main(String[] args) {
		String url = "jdbc:oracle:thin:@localhost:1521:xe";
		String username ="kh";
		String password ="kh";
		
		try(Connection con = DriverManager.getConnection(url,username,password);
			Statement stmt = con.createStatement()){
						
			// Product_id ê°€ 1ë²ˆì¸ ë©”ë‰´ ì •ë³´ë§Œ ê°€ì ¸ì˜¤ê¸° 
			String sql = "select * from cafe where product_id = 1";	
			ResultSet rs = stmt.executeQuery(sql);
			
			**// 1. ì˜¤ë¼í´ì˜ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•(ì»¬ëŸ¼ ì¸ë±ìŠ¤ë¥¼ í™œìš©)**
			// ë§Œì•½ ì»¤ì„œë¥¼ ë‚´ë ¸ì„ë•Œ í–‰ì´ ì¡´ì¬í•œë‹¤ë©´ ê°’ì„ ì¶œë ¥í•˜ê² ë‹¤ -> rs.next()ê°€ trueê°€ ë„ì¶œí•œë‹¤ë©´
			if(rs.next()) {
				System.out.println(rs.getInt(1));  // 1ë²ˆ ì»¬ëŸ¼
				System.out.println(rs.getString(2)); // 2ë²ˆ ì»¬ëŸ¼
				System.out.println(rs.getInt(3)); // 3ë²ˆ ì»¬ëŸ¼
				System.out.println(rs.getDate(4)); // 4ë²ˆ ì»¬ëŸ¼
			}

		}catch(Exception e) {
			e.printStackTrace();
		}
	}
}
```

```java
if(rs.next()) {
		System.out.println(rs.getInt(1));  // 1ë²ˆ ì»¬ëŸ¼
		System.out.println(rs.getString(2)); // 2ë²ˆ ì»¬ëŸ¼
		System.out.println(rs.getInt(3)); // 3ë²ˆ ì»¬ëŸ¼
		System.out.println(rs.getDate(4)); // 4ë²ˆ ì»¬ëŸ¼
}
```

ì¶œë ¥ë¬¸)

![2.png](/assets/images/posts/2022-04-11/2.png)

1. ì»¬ëŸ¼ëª…ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•

```java
public class Select {

	public static void main(String[] args) {
		String url = "jdbc:oracle:thin:@localhost:1521:xe";
		String username ="kh";
		String password ="kh";
		
		try(Connection con = DriverManager.getConnection(url,username,password);
			Statement stmt = con.createStatement()){
						
			// Product_id ê°€ 1ë²ˆì¸ ë©”ë‰´ ì •ë³´ë§Œ ê°€ì ¸ì˜¤ê¸° 
			String sql = "select * from cafe where product_id = 1";
			
			// ë§Œì•½ ì»¤ì„œë¥¼ ë‚´ë ¸ì„ë•Œ í–‰ì´ ì¡´ì¬í•œë‹¤ë©´ ê°’ì„ ì¶œë ¥í•˜ê² ë‹¤ -> rs.next()ê°€ trueê°€ ë„ì¶œí•œë‹¤ë©´
			// 2. ì»¬ëŸ¼ëª…ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
			if(rs.next()) {
				System.out.println(rs.getInt("product_id"));
				System.out.println(rs.getString("product_name"));
				System.out.println(rs.getInt("price"));
				System.out.println(rs.getDate("register_date"));
			}

		}catch(Exception e) {
			e.printStackTrace();
		}
	}
}
```

1. í…Œì´ë¸”ì˜ ëª¨ë“  ë°ì´í„° ì¶œë ¥ 

```java
public class Select {

	public static void main(String[] args) {
		String url = "jdbc:oracle:thin:@localhost:1521:xe";
		String username ="kh";
		String password ="kh";
		
		try(Connection con = DriverManager.getConnection(url,username,password);
			Statement stmt = con.createStatement()){
						
		String sql = "select * from cafe";
		ResultSet rs = stmt.executeQuery(sql);
		
		// ë°ì´í„°ê°€ ì—†ì„ ë•Œ ê¹Œì§€ ì¶œë ¥ í•˜ëŠ”ë²•
		// whileë¬¸ì„ ëŒë ¤ rs.next()ê°€ falseê°€ ë‚˜ì˜¬ ë•Œ ê¹Œì§€ -> ë°ì´í„°ê°€ ì—†ì„ ë•Œ 
		while(rs.next()) {
			System.out.println(rs.getInt(1));  
			System.out.println(rs.getString(2));
			System.out.println(rs.getInt(3)); 
			System.out.println(rs.getDate(4)); 
		}
	
		}catch(Exception e) {
			e.printStackTrace();
		}
	}
}
```

1. ì—°ìŠµ

ë°ì´í„°ë² ì´ìŠ¤ 

![3.png](/assets/images/posts/2022-04-11/3.png)

ìë°” ì½”ë“œ 

```java
package com.kh.student;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

public class Select {

	public static void main(String[] args) {
		
		String url = "jdbc:oracle:thin:@localhost:1521:xe";
		String username = "kh";
		String password = "kh";
		
		try(Connection con = DriverManager.getConnection(url,username,password);
			Statement stmt = con.createStatement()){
			
			/*
			// jordy ë§Œ ë½‘ì•„ì˜¤ê¸°
			String sql = "select * from tbl_student where no = 4";
			ResultSet rs = stmt.executeQuery(sql);
			
			if(rs.next()) {
				System.out.println(rs.getInt(1));
				System.out.println(rs.getString(2));
				System.out.println(rs.getString(3));
				System.out.println(rs.getDate(4));
			}
			*/
			
			// ëª¨ë‘ ë½‘ì•„ë³´ê¸° 
			String sql = "select * from tbl_student";
			ResultSet rs = stmt.executeQuery(sql);
			
			while(rs.next()) {
				System.out.println(rs.getInt(1));
				System.out.println(rs.getString(2));
				System.out.println(rs.getString(3));
				System.out.println(rs.getDate(4));
				System.out.println("");
			}
			
		}
		catch(Exception e) {
			e.printStackTrace();
		}
	}
}
```