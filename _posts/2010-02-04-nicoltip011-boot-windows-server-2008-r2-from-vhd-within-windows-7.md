---
title: NicolTIP#011: Boot Windows Server 2008 R2 from VHD within Windows 7
date: 2010-02-04 07:25
tags: [bcdedit, boot, diskpart, NicolTIP, vhd, Window 7, windows 2008 R2]
---
<p>Bare in mind that I already have Windows 7 installed.</p>  <ul>   <li>     <p>Physical disk that will hold VHD file must be formatted (does not have to be empty, can not be USB) </p>   </li>    <li>     <p>Boot from Windows Server 2008 R2 DVD </p>   </li>    <li>     <p>When first installation dialog box appears pres SHIFT + F10 to open command prompt </p>   </li>    <li>     <p>Launch <strong><em>diskpart</em></strong></p>   </li>    <li>     <p>At diskpart prompt enter following command <strong><em>create vdisk file=c:\win2k8r2.vhd type=fixed maximum=20000 </em></strong>(this will create VHD file of 20 GB and it will be fixed size, you can even use <em>expandable </em>as type. You can also change name and location of vdisk file) </p>   </li>    <li>     <p>Next, run <strong><em>select vdisk file=c:\</em></strong><strong><em>win2k8r2</em></strong><strong><em>.vhd</em></strong></p>   </li>    <li>     <p>Run <strong><em>attach vdisk</em></strong></p>   </li>    <li>     <p>Exit from diskpart and command prompt </p>   </li>    <li>     <p>When selecting partition on which to install Windows Server 2008 R2, select newly created and attached VHD partition. Ignore any warnings like &quot;â€¦ cannot boot from this partition&quot;. </p>   </li> </ul>  <p>When installation finishes, you will have an option to boot from Windows 7 or Windows 2008 R2. If you want to remove Windows 2008 R2, all you need to do is edit boot menu with <em>bcdedit </em>command and delete or move VHD file.</p>
