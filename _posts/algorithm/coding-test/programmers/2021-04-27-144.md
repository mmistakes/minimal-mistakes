---
title:  "[C++λ΅ ν’€μ΄] λ™κµ΄ νƒν— (DFS, BFS) β­β­β­β­" 

categories:
  - Programmers
tags:
  - [Algorithm, Coding Test]

toc: true
toc_sticky: true

date: 2021-04-27
last_modified_at: 2021-04-27
---

# π“ λ™κµ΄ νƒν—

> λ‚μ΄λ„ β­β­β­β­

## π€ λ¬Έμ 

![image](https://user-images.githubusercontent.com/42318591/116122634-05d95d00-a6fd-11eb-8fef-6b67f6ec6440.png)

![image](https://user-images.githubusercontent.com/42318591/116122656-0d006b00-a6fd-11eb-94d2-6d46395b37f2.png)

![image](https://user-images.githubusercontent.com/42318591/116122697-17226980-a6fd-11eb-92bf-18ad784d70e0.png)

![image](https://user-images.githubusercontent.com/42318591/116122720-1db0e100-a6fd-11eb-98ee-e683103c22e8.png)


<br>

## π€ λ‚΄ ν’€μ΄ 

μ–΄λ–»κ² μ ‘κ·Όν•΄μ•Όν• μ§€ λ¨λ¥΄κ² μ–΄μ„ μ–΄λ–»κ² ν’€μ΄ν•λ©΄ λλ”μ§€λ¥Ό κµ¬κΈ€λ§ ν•΄ λ³΄μ•λ”λ° μƒκ°λ³΄λ‹¤ ν’€μ΄κ°€ μ§κ΄€μ μ΄μ€λ‹¤.. κ·Έλƒ¥ DFS νΉμ€ BFS λ΅ μνλ¥Ό ν•λ κ·Έ μ „μ— λ°©λ¬Έμ„ λ§μ³μ•Ό ν•  λ…Έλ“κ°€ μλ‹¤λ©΄ λ°©λ¬Έ ν•μ§€ μ•κ³  μμ•½λ§ ν•΄λ‘” ν›„, μ „μ— λ°©λ¬Έν•΄μ•Όν•  κ·Έ λ…Έλ“κ°€ λ°©λ¬Έν•λ©΄ κ·Έμ μ„μ•Ό μμ•½ν•΄λ‘μ—λ λ…Έλ“λ¥Ό λ°©λ¬Έν•λ©΄ λλ” κ²ƒμ΄μ€λ‹¤. μΆ€ λ” κ³ λ―Όν•΄λ³Όκ±Έ κ·Έλ¬λ‹¤.

λ‚λ” μ…λ ¥ ν¬κΈ°κ°€ ν¬λ©΄ DFS λ” μ–΄λ µκ² κµ¬λ‚ν•κ³  κΈ°κ³„μ μΌλ΅ μƒκ°ν•λ” λ²„λ¦‡μ΄ μλ”λ°.. **μ΄λ―Έ λ°©λ¬Έν• λ…Έλ“λ¥Ό λ‹¤μ‹ μ¬λ°©λ¬Έλ§ ν•μ§€ μ•λ”λ‹¤λ©΄ λ”± λ…Έλ“ κ°μλ§νΌμ μ‹κ°„λ³µμ΅λ„λ¥Ό μ΄λ£° μ μλ‹¤.** μ‹κ°„ λ³µμ΅λ„μ— λ€ν•΄μ„ κ³ λ―Όμ„ λ” λ§μ΄ ν•΄λ³΄μ•„μ•Όκ² λ‹¤.π‰

<br>

### π”¥ DFS ν’€μ΄ β­•

> order [[8, 5], [6, 7], [4, 1]] μΈ κ²½μ°μ DFS μν μμ„

- μµμΆ… λ°©λ¬Έμμ„ π‘‰ 0, 3, 6, 7, 4, 1, 8, 2, 5 π‘‰ λ¨λ“  λ…Έλ“λ¥Ό λ°©λ¬Έν•¨
  - 0 : λ°©λ¬Έ μ™„λ£
    - 1 : 4 κ°€ μ•„μ§ λ°©λ¬Έλμ§€ μ•μ•μΌλ―€λ΅ 1 μ„ `reserve[4]` μ— λ³΄κ΄€ ν›„ return
    - 3 : λ°©λ¬Έ μ™„λ£
      - 6 : λ°©λ¬Έ μ™„λ£
    - 7 : λ°©λ¬Έ μ™„λ£ (6 μ΄ λ¨Όμ € λ°©λ¬Έ λμ—μΌλ―€λ΅ λ¬Έμ  μ—†μ)
      - 4 : λ°©λ¬Έ μ™„λ£ (4 κ°€ λ“λ””μ–΄ λ°©λ¬Έ λμ—μΌλ―€λ΅ 1 μ„ μ΄μ  λ°©λ¬Έν•  μ μλ‹¤.`reserve[4]`μΈ 1 λ¥Ό λ°”λ΅ λ‹¤μμ— λ°©λ¬Έν•λ„λ΅ ν•¨) 
        - 1 : λ°©λ¬Έ μ™„λ£
          - 8 : λ°©λ¬Έ μ™„λ£
          - 2 : λ°©λ¬Έ μ™„λ£
      - 5 : λ°©λ¬Έ μ™„λ£ (8 μ΄ λ¨Όμ € λ°©λ¬Έ λμ—μΌλ―€λ΅ λ¬Έμ  μ—†μ)

> order [[4, 1], [8, 7], [6, 5]] μΈ κ²½μ°μ DFS μν μμ„

- μµμΆ… λ°©λ¬Έμμ„ π‘‰ 0, 3, 6 π‘‰ λ¨λ“  λ…Έλ“λ¥Ό λ°©λ¬Έν•μ§€ λ» ν•¨
  - 0 : λ°©λ¬Έ μ™„λ£
    - 1 : 4 κ°€ μ•„μ§ λ°©λ¬Έλμ§€ μ•μ•μΌλ―€λ΅ `reserve[4]` μ— λ³΄κ΄€ ν›„ return
    - 3 : λ°©λ¬Έ μ™„λ£
      - 6 : λ°©λ¬Έ μ™„λ£
    - 7 : 8 μ΄ μ•„μ§ λ°©λ¬Έλμ§€ μ•μ•μΌλ―€λ΅ 7 μ„ `reserve[8]` μ— λ³΄κ΄€ ν›„ return

```cpp
#include <string>
#include <vector>
#include <unordered_map>

using namespace std;

vector<vector<int>> graph;  // μΈμ ‘ λ¦¬μ¤νΈ (μ •μ  λ³„ μ—°κ²°λ μ •μ )
unordered_map<int, int> reserve; // Key : λ°© λ²νΈ,  Value : μ΄ λ°© λ‹¤μμ— λ°©λ¬Έν•΄μ•Όν•λ” μμ•½λ λ°©
unordered_map<int, int> before;  // Key : λ°© λ²νΈ,  Value : μ΄ λ°© μ „μ— λ°λ“μ‹ λ°©λ¬Έν•΄μ•Ό ν•λ” λ°©
vector<bool> visited;  // λ°©λ¬Έμ΄ μ™„λ£λ λ°©

void DFS(int num) { // ν„μ¬ λ°©λ¬Έ λ°© : num
    if (!visited[before[num]]) { // μ΄μ „μ— λ°©λ¬Έν•΄μ•Ό ν•λ” λ°©μ΄ μ•„μ§ λ°©λ¬Έ μƒνƒκ°€ μ•„λ‹λΌλ©΄ num μ€ λ°©λ¬Έλ  μ μ—†μΌλ―€λ΅ λμ•„κ°€μ•Ό ν•λ‹¤. 
        reserve[before[num]] = num; // reserve[before[num]] μ— num μ„ μ €μ¥ν•΄λ‘κ³  λ‚μ¤‘μ— before[num] μ„ λ°©λ¬Έν•κ² λλ©΄ κ·Έλ• num μ„ λ°©λ¬Έν•μ
        return;
    }

    visited[num] = true; // num λ°©λ¬Έ μ™„λ£ μ²λ¦¬
    if (reserve[num] > 0) // num μ΄ μ•„μ§ λ°©λ¬Έλμ§€ μ•μ•„ λ°©λ¬Έ λ»ν–μ—λ λ°©μ΄ μλ‹¤λ©΄ (reserve[num > 0]) κ·Έ λ°© DFS λ°©λ¬Έν•λ¬ κ³ κ³ 
        DFS(reserve[num]);
    for (int i = 0; i < graph[num].size(); ++i){ // num κ³Ό μ—°κ²°λ λ‹¤μ λ°©λ“¤ DFS μν
        int next = graph[num][i];
        if (!visited[next]) // λ°©λ¬Έν•μ  μ—†λ” λ°©μ— λ€ν•΄μ„λ§ μν κ°€λ¥
            DFS(next);  
    } 
}

bool solution(int n, vector<vector<int>> path, vector<vector<int>> order) {
    bool answer = true;
    
    // graph μ±„μ°κΈ°
    graph.resize(n);
    for (int i = 0; i < path.size(); ++i) {
        graph[path[i][0]].push_back(path[i][1]);
        graph[path[i][1]].push_back(path[i][0]);
    }

    // before μ±„μ°κΈ°
    for (int i = 0; i < order.size(); ++i)
        before[order[i][1]] = order[i][0];
    
    // λ§μ•½ 0 λ³΄λ‹¤ λ¨Όμ € λ°©λ¬Έλμ•Ό ν•λ” λ°©μ΄ μλ‹¤κ³  order μ—μ„ λ§ν•κ³  μλ‹¤λ©΄ κ·Έκ±΄ μλ»λ κ²ƒμ΄λ‹¤. 0 λ¶€ν„° λ¨Όμ € λ°©λ¬Έν•λ‹¤κ³  λ¬Έμ μ—μ„ λ§ν•΄μ£Όμ—κΈ°μ—!
    if (before[0] != 0) return false;

    visited.resize(n);
    visited[0] = true; // 0 λ² λ°© λ°©λ¬Έμ²λ¦¬
    // 0 λ²λ°©κ³Ό μ—°κ²°λ λ°©λ“¤μ— λ€ν•΄ DFS
    for (int i = 0; i < graph[0].size(); ++i)
        DFS(graph[0][i]);

    // DFS μνλ¥Ό μ „λ¶€ λλ‚Έ ν›„, λ°©λ¬Έ μ•λ λ°©μ΄ ν•λ‚λΌλ„ μμΌλ©΄ answer = false
    for (int i = 0; i < n; ++i) {
        if (!visited[i]) {
            answer = false;
            break;
        }
    }

    return answer;
}
```

<br>

### π”¥ BFS ν’€μ΄ β­•


> order [[8, 5], [6, 7], [4, 1]] μΈ κ²½μ°μ BFS μν μμ„

"μμ•½"μ€ λ‹¤μμ— λ°©λ¬Έν•κΈ° μ„ν• "ν μ‚½μ…" ν–‰μ„λ¥Ό λ»ν•λ‹¤. νμ— λ“¤μ–΄κ°„ κ²ƒμ€ `checked[i]` μ— true λ΅ ν‘μ‹λλ‹¤.

- μµμΆ… λ°©λ¬Έμμ„ π‘‰ 0, 3, 6, 7, 4, 1, 8, 5, 2 π‘‰ λ¨λ“  λ…Έλ“λ¥Ό λ°©λ¬Έν•¨
  - 0 : λ°©λ¬Έ 
    - 1 : 4 κ°€ μ•„μ§ μμ•½λμ§€ μ•μ•μΌλ―€λ΅ 1 μ„ `reserve[4]` μ— λ³΄κ΄€ ν›„ μμ•½ μ•ν•κ³  λ„μ–΄κ°„λ‹¤.
    - 3 : μμ•½ 
    - 7 : 6 μ΄ μ•„μ§ μμ•½λμ§€ μ•μ•μΌλ―€λ΅ 7 μ„ `reserve[6]` μ— λ³΄κ΄€ ν›„ μμ•½ μ•ν•κ³  λ„μ–΄κ°„λ‹¤.
  - 3 : λ°©λ¬Έ
    - 6 : μμ•½ (6 μ΄ λ“λ””μ–΄ μμ•½ λμ—μΌλ―€λ΅ 7 μ„ μ΄μ  μμ•½ν•  μ μλ‹¤.`reserve[6]`μΈ 7 λ„ μμ•½ ν•¨)
      7 : μμ•½
  - 6 : λ°©λ¬Έ
  - 7 : λ°©λ¬Έ
    - 4 : μμ•½ (4 κ°€ λ“λ””μ–΄ μμ•½ λμ—μΌλ―€λ΅ 1 μ„ μ΄μ  μμ•½ν•  μ μλ‹¤.`reserve[4]`μΈ 1 λ„ μμ•½ ν•¨)
      - 1 : μμ•½
    - 5 : 8 μ΄ μ•„μ§ μμ•½λμ§€ μ•μ•μΌλ―€λ΅ 5 μ„ `reserve[8]` μ— λ³΄κ΄€ ν›„ μμ•½ μ•ν•κ³  λ„μ–΄κ°„λ‹¤.
  - 4 : λ°©λ¬Έ
  - 1 : λ°©λ¬Έ
    - 8 : μμ•½ (8 μ΄ λ“λ””μ–΄ μμ•½ λμ—μΌλ―€λ΅ 5 μ„ μ΄μ  μμ•½ν•  μ μλ‹¤.`reserve[8]`μΈ 5 λ„ μμ•½ ν•¨)
      - 5 : μμ•½
    - 2 μμ•½
  - 8 : λ°©λ¬Έ
  - 5 : λ°©λ¬Έ
  - 2 : λ°©λ¬Έ

> order [[4, 1], [8, 7], [6, 5]] μΈ κ²½μ°μ DFS μν μμ„

- μµμΆ… λ°©λ¬Έμμ„ π‘‰ 0, 3, 6 π‘‰ λ¨λ“  λ…Έλ“λ¥Ό λ°©λ¬Έν•μ§€ λ» ν•¨
  - 0 : λ°©λ¬Έ 
    - 1 : 4 κ°€ μ•„μ§ μμ•½λμ§€ μ•μ•μΌλ―€λ΅ 1 μ„ `reserve[4]` μ— λ³΄κ΄€ ν›„ μμ•½ μ•ν•κ³  λ„μ–΄κ°„λ‹¤.
    - 3 : μμ•½
    - 7 : 8 μ΄ μ•„μ§ μμ•½λμ§€ μ•μ•μΌλ―€λ΅ 7 μ„ `reserve[8]` μ— λ³΄κ΄€ ν›„ return
  - 3 : λ°©λ¬Έ
    - 6 : μμ•½
  - 6 : λ°©λ¬Έ


```cpp
#include <string>
#include <vector>
#include <unordered_map>
#include <queue>

using namespace std;

vector<vector<int>> graph;
unordered_map<int, int> reserve;
unordered_map<int, int> before;
vector<bool> checked; // λ°© λ³„λ΅ νμ— μ‚½μ…λ μ μ΄ μλ”μ§€

void BFS() {
    queue<int> q;
    checked[0] = true;
    q.push(0); // 0 λ² λ°©λ¶€ν„° μ‹μ‘

    while (!q.empty()) {
        int now = q.front();
        q.pop();

        for (int i = 0; i < graph[now].size(); ++i) {
            int next = graph[now][i];
            if (checked[next]) continue; // μ΄λ―Έ νμ— μ‚½μ…λμ  μλ” λ°©μ΄λ©΄ X
            if (!checked[before[next]]) { // μ΄ λ°© μ „μ— λ¨Όμ € μμ•½ λμ•Όν•  λ°©μ΄ μ•„μ§ μμ•½λμ§€ μ•μ€ μƒνƒλΌλ©΄ X
                reserve[before[next]] = next;
                continue;
            }
            // 1. next μμ•½
            q.push(next);
            checked[next] = true;
            // 2. next κ°€ μμ•½λμ§€ μ•μ•„ μμ•½λμ§€ λ»ν•κ³  μμ—λ λ°© μμ•½
            if (reserve.find(next) != reserve.end()) {
                q.push(reserve[next]);
                checked[reserve[next]] = true;
            }
        }
    }
}

bool solution(int n, vector<vector<int>> path, vector<vector<int>> order) {
    bool answer = true;
    
    graph.resize(n);
    for (int i = 0; i < path.size(); ++i) {
        graph[path[i][0]].push_back(path[i][1]);
        graph[path[i][1]].push_back(path[i][0]);
    }

    for (int i = 0; i < order.size(); ++i)
        before[order[i][1]] = order[i][0];

    if (before[0] != 0) return false;

    checked.resize(n);
    BFS();

    for (int i = 0; i < n; ++i) {
        if (!checked[i]) {
            answer = false;
            break;
        }
    }

    return answer;
}
```


***
<br>

    π κ°μΈ κ³µλ¶€ κΈ°λ΅μ© λΈ”λ΅κ·Έμ…λ‹λ‹¤. μ¤λ¥λ‚ ν‹€λ¦° λ¶€λ¶„μ΄ μμ„ κ²½μ° 
    μ–Έμ λ“ μ§€ λ“κΈ€ νΉμ€ λ©”μΌλ΅ μ§€μ ν•΄μ£Όμ‹λ©΄ κ°μ‚¬ν•κ² μµλ‹λ‹¤! π„

[λ§¨ μ„λ΅ μ΄λ™ν•κΈ°](#){: .btn .btn--primary }{: .align-right}