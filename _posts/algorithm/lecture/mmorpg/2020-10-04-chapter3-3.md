---
title:  "Chapter 3-3. í”Œë ˆì´ì–´ ì´ë™" 

categories:
  -  Algorithm Lesson 2
tags:
  - [Algorithm, Data Structure, C Sharp]

toc: true
toc_sticky: true

date: 2020-10-04
last_modified_at: 2020-10-04
---

ì¸í”„ëŸ°ì— ìˆëŠ” Rookissë‹˜ì˜ **[C#ê³¼ ìœ ë‹ˆí‹°ë¡œ ë§Œë“œëŠ” MMORPG ê²Œì„ ê°œë°œ ì‹œë¦¬ì¦ˆ] Part2: ìë£Œêµ¬ì¡°ì™€ ì•Œê³ ë¦¬ì¦˜** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click]((https://www.inflearn.com/course/ìœ ë‹ˆí‹°-MMORPG-ìœ ë‹ˆí‹°-ê°œë°œ-part2#))
{: .notice--warning}

# Chapter 3. ë¯¸ë¡œ ì¤€ë¹„

## ğŸ“œPlayer.cs

> í”Œë ˆì´ì–´ì˜ ìœ„ì¹˜ ê²°ì • ë° ì—…ë°ì´íŠ¸

```c#
using System;
using System.Collections.Generic;
using System.Text;

namespace Algorithm
{
    class Player
    {
        public int PosY { get; private set; }
        public int PosX { get; private set; }

        Random _random = new Random();

        Board _board;

        public void Initialize(int posY, int posX, Board board)
        {
            PosX = posX;
            PosY = posY;

            _board = board;
        }

        const int MOVE_TICK = 100;   // 0.1 ì´ˆ ë§ˆë‹¤ ì›€ì§ì´ê²Œ
        int _sumTick = 0;
        public void Update(int deltaTick)
        {
            _sumTick += deltaTick;
            if (_sumTick >= MOVE_TICK)
            {
                _sumTick = 0;

                // ì—¬ê¸°ì—ë‹¤ê°€ 0.1ì´ˆë§ˆë‹¤ ì‹¤í–‰ë  ë¡œì§ì„ ë„£ì–´ ì¤€ë‹¤. 
                int randValue = _random.Next(0, 4);  // 4 ê°€ì§€ì˜ ëœë¤í•œ ë°©í–¥
                switch (randValue)
                {
                    case 0:   // ìƒ
                        if (PosY - 1 >= 0 && _board.Tile[PosY - 1, PosX] == Board.TileType.Empty)
                            PosY = PosY - 1; 
                        break;
                    case 1:   // í•˜
                        if (PosY + 1 < _board.Size && _board.Tile[PosY + 1, PosX] == Board.TileType.Empty)
                            PosY = PosY + 1;
                        break;
                    case 2:   // ì¢Œ
                        if (PosX - 1 >= 0 && _board.Tile[PosY, PosX - 1] == Board.TileType.Empty)
                            PosX = PosX - 1;
                        break;
                    case 3:   // ìš°
                        if (PosX + 1 < _board.Size && _board.Tile[PosY, PosX + 1] == Board.TileType.Empty)
                            PosX = PosX + 1;
                        break;
                }
            }
        }
    }
}

```

- í”Œë ˆì´ì–´ì˜ ìœ„ì¹˜ì— ê´€í•œ ê¸°ëŠ¥ì„ ë‹´ë‹¹í•œë‹¤. ğŸ‘‰ `PosX`, `PosY`
  - í”Œë ˆì´ì–´ì˜ ìœ„ì¹˜ë¥¼ ê²°ì •í•  ë• ë²½ì´ë©´ ê°ˆ ìˆ˜ ì—†ê³  ë²½ì´ ì•„ë‹ ë•Œë§Œ ê°ˆ ìˆ˜ ìˆì–´ì„œ ë¯¸ë¡œ íƒ€ì¼ì— ëŒ€í•œ ì •ë³´ê°€ í•„ìš”í•˜ë‹¤. ğŸ‘‰ `_board`
- *Initialize* 
  - ì¸ìˆ˜ë¡œ ë“¤ì–´ì˜¨ ê°’ìœ¼ë¡œ `PosX`, `PosY`, `_board` ì´ˆê¸°í™”
- *Update(int deltaTick)*
  - > í”Œë ˆì´ì–´ì˜ ìœ„ì¹˜ `PosX`, `PosY` ë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤. ë‹¨, `MOVE_TICK` ì‹œê°„ì´ ê²½ê³¼ë  ë•Œ ë§ˆë‹¤ë§Œ ì‹¤í–‰
    - ë©”ì¸ í•¨ìˆ˜ì—ì„œ ë§¤ í”„ë ˆì„ë§ˆë‹¤ ğŸ“œPlayerì˜ ì´ *Update(int deltaTick)* í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ê²ƒì´ê³  ê·¸ë•Œë§ˆë‹¤ ë§¤ê°œ ë³€ìˆ˜ì¸ `deltaTick`ì— í”„ë ˆì„ ê°„ ê°„ê²© ì‹œê°„ì„ ì¸ìˆ˜ë¡œ ë³´ë‚¼ ê²ƒì´ë‹¤. ë§¤ í”„ë ˆì„ ë•Œ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ `_sumTick`ì— í”„ë ˆì„ ê²½ê³¼ ì‹œê°„ì´ ë”í•´ì§€ê³  ì´ê²Œ `MOVE_TICK` ì‹œê°„ì„ ë„˜ê¸°ë©´ ê·¸ ë•Œì„œì•¼ ì‹¤í–‰í•  ê²ƒì´ë‹¤!
      - ì˜ˆë¥¼ ë“¤ì–´, 30 í”„ë ˆì„ë§ˆë‹¤ ì´ *Update(int deltaTick)* í•¨ìˆ˜ê°€ ì‹¤í–‰ ë˜ê³ (1/30 = 0.033ì´ˆ = 33 ë°€ë¦¬ì„¸ì»¨ì¦ˆ)ë§ˆë‹¤ ì‹¤í–‰ë¨), `MOVE_TICK` ê°’ì´ 100 ì´ë¼ë©´ (100 ë°€ë¦¬ì„¸ì»¨ì¦ˆ = 0.1ì´ˆ)
        - ëŒ€ëµ 3 ~ 4 í”„ë ˆì„ ê°„ê²©ìœ¼ë¡œ *Update(int deltaTick)* í•¨ìˆ˜ê°€ ì‹¤í–‰ë  ê²ƒì´ë‹¤. 33 * 4 > 100
        - `MOVE_TICK`ì„ ê²½ê³¼í•  ë•Œë©´, ë‹¤ì‹œ `_sumTick`ì„ 0 ìœ¼ë¡œ ì´ˆê¸°í™”
  - **4 ê°œì˜ ë°©í–¥ ì¤‘ ëœë¤í•˜ê²Œ ì„ íƒí•˜ì—¬ ê·¸ ë°©í–¥ìœ¼ë¡œ ê°ˆ ìˆ˜ ìˆë‹¤ë©´ í”Œë ˆì´ì–´ë¥¼ ì´ë™ì‹œí‚¨ë‹¤.**
    - ê·¸ ë°©í–¥ì´ ê°ˆìˆ˜ ìˆëŠ” ê³³ì¸ì§€(ë²½ì´ ì•„ë‹Œ ê³³ì¸ì§€), íƒ€ì¼ ì¸ë±ìŠ¤ë¥¼ ì´ˆê³¼í•˜ëŠ” ê³³ì€ ì•„ë‹Œì§€ ë¨¼ì € ì²´í¬í•˜ê³ 
      - ê°ˆ ìˆ˜ ìˆë‹¤ë©´ í•´ë‹¹ ë°©í–¥ìœ¼ë¡œ ì´ë™.

<br>

## ğŸ“œBoard.cs

> ë¯¸ë¡œì— ê´€í•œ ì •ë³´, ë¯¸ë¡œ ë Œë”ë§

```c#
using System;
using System.Collections.Generic;
using System.Text;

namespace Algorithm
{
    class Board
    {
        const char CIRCLE = '\u25cf';

        public TileType[,] Tile { get; private set; }  // ë§µì˜ íƒ€ì¼ë“¤ì„ ë‹´ì„ ë°°ì—´
        public int Size { get; private set; }

        Player _player;

        public enum TileType
        {
            Empty,   // ê°ˆ ìˆ˜ ìˆëŠ” íƒ€ì¼
            Wall,    // ê°ˆ ìˆ˜ ì—†ëŠ” íƒ€ì¼
        }

        public void Initialize(int size, Player player)
        {
            if (size % 2 == 0)
                return;

            _player = player;

            Tile = new TileType[size, size];
            Size = size;

            // GenerateByBinaryTree();
            GenerateBySideWinder();
        }

        public void Render()
        {
            ConsoleColor prevColor = Console.ForegroundColor;

            for (int y = 0; y < Size; y++)
            {
                for (int x = 0; x < Size; x++)
                {
                    // í”Œë ˆì´ì–´ ì¢Œí‘œ ê°–ê³  ì™€ì„œ, ê·¸ ì¢Œí‘œë‘ í˜„ì¬ y, x ê°€ ì¼ì¹˜í•˜ë©´ í”Œë ˆì´ì–´ ì „ìš© ìƒ‰ìƒì¸ íŒŒë€ìƒ‰ìœ¼ë¡œ í‘œì‹œ
                    if (y == _player.PosY && x == _player.PosX)
                        Console.ForegroundColor = ConsoleColor.Blue;
                    else
                        Console.ForegroundColor = GetTileColor(Tile[y, x]);

                    Console.Write(CIRCLE);  
                }
                Console.WriteLine(); 
            }
        }


        void GenerateBySideWinder()
        {
             // ...
        }

        void GenerateByBinaryTree()
        {
             // ...
        }

        ConsoleColor GetTileColor(TileType type)
        {
            // ...
        }
    }
}

```

- ë¯¸ë¡œ ë Œë”ë§ì‹œ í”Œë ˆì´ì–´ì˜ ìœ„ì¹˜ë¥¼ ì•Œì•„ì•¼ í•˜ë¯€ë¡œ `Player _player` ğŸ“œPlayer ë©¤ë²„ ì„ ì–¸ì´ í•„ìš”í•˜ë‹¤.
- ë¯¸ë¡œ ë Œë”ë§ì‹œ ë¯¸ë¡œì˜ ëª¨ë“  íƒ€ì¼ì„ ê²€ì‚¬í•  ë•Œ, í•´ë‹¹ íƒ€ì¼ì´ í”Œë ˆì´ì–´ì˜ í˜„ì¬ ìœ„ì¹˜ì™€ ì¼ì¹˜í•˜ë‹¤ë©´ íŒŒë€ìƒ‰ìœ¼ë¡œ ê·¸ë ¤ì¤€ë‹¤.

<br>

## ğŸ“œPrdogram.cs

> ë©”ì¸ í•¨ìˆ˜. ë³¸ê²© í”Œë ˆì´. ë¬´í•œ ë£¨í”„ë¡œ 1ï¸âƒ£ ì…ë ¥ 2ï¸âƒ£ ë¡œì§ 3ï¸âƒ£ ë Œë”ë§ í•œë‹¤.

```c#
using System;

namespace Algorithm
{
    class Program
    {
        static void Main(string[] args)
        {
            Board board = new Board();

            Player player = new Player();
            
            board.Initialize(25, player);  // í”Œë ˆì´ì–´ë³´ë‹¤ ë¨¼ì € ì´ë‹ˆì…œë¼ì´ì§•ì´ ì´ë£¨ì–´ì ¸ì•¼ í•¨
            player.Initialize(1, 1, board);

            Console.CursorVisible = false;

            const int WAIT_TICK = 1000 / 30; // 1000ë°€ë¦¬ì„¸ì»¨ì¦ˆ/30 = 1ì´ˆ/30 = 1/30ì´ˆ = 33ë°€ë¦¬ì„¸ì»¨ì¦ˆ ì¯¤ = 30 í”„ë ˆì„ í™˜ê²½ì—ì„œ 1 í”„ë ˆì„ë‹¹ ê±¸ë¦¬ëŠ” ì‹œê°„

            int lastTick = 0;
            while (true)
            {
                #region í”„ë ˆì„ ê´€ë¦¬
                int currentTick = System.Environment.TickCount;  // ë°€ë¦¬ ì„¸ì»¨ì¦ˆë¡œ ë‚˜íƒ€ë‚¸ í˜„ì¬ì‹œê°„.  1ì´ˆ = 1000 ë°€ë¦¬ì„¸ì»¨ì¦ˆ
                if (currentTick - lastTick < WAIT_TICK) // ë§Œì•½ ê²½ê³¼í•œ ì‹œê°„ì´ 1/30ì´ˆë³´ë‹¤ ì‘ë‹¤ë©´ ì•„ë˜ ëª¨ë“  ë¶€ë¶„ì„ ì‹¤í–‰í•˜ì§€ ì•Šê³  ë‹¤ì‹œ ìœ„ë¡œ
                    continue;
                int deltaTick = currentTick - lastTick; // 1í”„ë ˆì„ ì§€ë‚  ë•Œë§ˆë‹¤ ì—…ë°ì´íŠ¸
                lastTick = currentTick;  // ë§ˆì§€ë§‰ ì¸¡ì • ì‹œê°„ ì—…ëƒ
                #endregion

                // 1.ì…ë ¥

                // 2.ë¡œì§
                player.Update(deltaTick);

                // 3.ë Œë”ë§
                Console.SetCursorPosition(0, 0);
                board.Render();
            }
        }
    }
}

```

```c#
board.Initialize(25, player);
player.Initialize(1, 1, board);
```

ğŸ“¢ **ë¯¸ë¡œì˜ ì´ˆê¸°í™”ê°€ í”Œë ˆì´ì–´ ì´ˆê¸°í™”ë³´ë‹¤ ë¨¼ì € ì´ë£¨ì–´ì ¸ì•¼ í•œë‹¤!!** ğŸ“œPlayer ì—ì„œ í”Œë ˆì´ì–´ì˜ ìœ„ì¹˜ë¥¼ ì—…ëƒ í•  ë•Œ ğŸ“œBoard ì˜ ë¯¸ë¡œ ë°°ì—´ì˜ íƒ€ì¼ë¥¼ ê°€ì ¸ì™€ ë²½ì¸ì§€ ë²½ì´ ì•„ë‹Œì§€ ë”°ì ¸ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ì´ ìˆœì„œë¥¼ ë’¤ë°”ê¾¼ ë°”ëŒì— ê³„ì† ëŸ°íƒ€ì„ ì—ëŸ¬ê°€ ë‚¬ëŠ”ë° ì´ìœ ë¥¼ ì°¾ëŠë¼ ì• ë¨¹ì—ˆë‹¤. ğŸ˜¡ 

![image](https://camo.githubusercontent.com/78f3fb08bfbb8316b6c3c2ebaf2b46e6bcb2fe84/68747470733a2f2f706f737466696c65732e707374617469632e6e65742f4d6a41794d4445774d4452664e7a63672f4d4441784e6a41784f4441794e6a517a4e6a55332e5134625851414d62365553514f676f554b487a304e526261344a433358744e664d47445a43526157307341672e57316f50773759387973576e4f4b4559685955364a4f4d6b33594466686651467764586678716a4153576b672e4749462e736f6879756e655f616e2f4749465f323032302d31302d30345f2545432539382541342545442539422538345f362d30372d33352e6769663f747970653d77373733)

4 ê°œì˜ ë°©í–¥ ì¤‘ ëœë¤í•˜ê²Œ í•œ ë°©í–¥ì„ ì„ íƒí•´ì„œ ê°ˆ ìˆ˜ ìˆë‹¤ë©´ ê°€ê¸° ë•Œë¬¸ì— êµ‰ì¥íˆ.. ë°”ë³´ ê°™ì´.. ê°”ë˜ ê¸¸ ë‹¤ì‹œ ë˜ëŒì•„ê°€ê³ .. ê·¸ëŸ¬ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤.

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}