---
title: "2.1 네트워크 애플리케이션의 원리"
excerpt: "2.1 네트워크 애플리케이션의 원리"
categories: ['Computer Network']
tags:
  - computer
  - network

toc: true
toc_sticky: true
use_math: true
 
date: 2024-03-18
last_modified_at: 2024-03-25
---
## 1. 네트워크 애플리케이션 구조

&nbsp;&nbsp;새로운 애플리케이션을 개발할 때는 여러 종단 시스템에서 실행되는 소프트웨어를 작성해야한다. 우리가 라우터나 링크 계층 스위치와 같은 네트워크 코어 장비에서 실행되는 소프트웨어까지 작성할 필요는 없다. 종단 시스템에만 애플리케이션 소프트웨어가 존재한다는 기본 설계 방식은 인터넷 애플리케이션들이 빠르고 널리 발전하는 원동력이 되었다.

* **애플리케이션 구조**(application architectures)
  * 애플리케이션 개발자가 설계한다.
  * 애플리케이션이 다양한 종단 시스템에서 어떻게 조직되어야 하는지 알려준다.

애플리케이션 개발자가 애플리케이션 구조를 선택할 때 가능한 두가지 구조를 알아보자.

### 클라이언트-서버-구조(client-server architecture)

* 웹 서버가 클라이언트 호스트로부터 객체를 요청받으면 웹 서버는 요청된 개체를 클라이언트 호스트로 보내면서 응답한다.
* 이 구조에서 클라이언트끼리는 서로 통신하지 않는다. 예를 들어, 웹 애플리케이션에서는 2개의 브라우저가 직접적으로 통신하지 않는다.
* 서버가 고정 **IP 주소**를 갖는다.
* 서버는 항상 동작하고 있으므로 클라이언트는 언제든지 서버 주소로 패킷을 보내서 서버에 연결할 수 있다.
* 웹, 파일 전송, 원격 로그인, 전자메일 

#### 서버(server)
  * 항상 동작하고 있는 호스트
  * 클라이언트로부터 서비스 요청을 받는다.

#### 클라이언트(client)
  * 네트워크를 통해 서비스를 요청하는 컴퓨터 또는 프로그램을 의미한다.
  * 서비스를 제공하는 서버에 서비스 요청을 보낸다.

#### 데이터센터(data center)
  * 하나의 서버 호스트가 클라이언트로부터 오는 모든 요청에 응답하는 것은 불가능하다. 이러한 이유로 많은 수의 호스트를 갖춘 **데이터 센터**가 가상의 서버를 생성하는 역할로 사용된다.

### P2P 구조

* 항상 켜져 있는 인프라스트럭처 서버에 최소로 의존하거나 전혀 의존하지 않는 대신에 애플리케이션은 **피어**(peer)라는 간헐적으로 연결된 호스트 쌍이 서로 직접 통신하게 한다.
* **피어**는 서비스 제공자가 아닌 사용자들이 제어하는 데스크톱과 랩톱이 소유하고 있다. 대부분의 피어들은 가정, 대학, 사무실에 위치한다.
* 특정 서버를 통하지 않고 피어가 서로 통신하므로 피어 투 피어(peer-to-peer, P2P)라고 부른다.
* P2P 애플리케이션에는 파일 공유 애플리케이션인 비트토렌트(BitTorrent)가 있다.

#### 자기 확장성(self-scalability)

* P2P 파일 공유 애플리케이션에서는 각 피어들이 파일을 요구함으로써 작업 부하를 만들어내지만 각 피어들은 파일을 다른 피어들에게 분배함으로써 서비스 능력을 추가한다.

#### 효율적인 비용

* P2P 구조는 서버 인프라스트럭처와 서버 대역폭을 요구하지 않기 때문에 비용이 많이 들지 않는다.
* 하지만 고도의 분산 구조 특성으로 인해 보안, 성능, 신뢰성 면에서 문제점이 발생 가능하다.

## 2. 프로세스 간 통신

### 프로세스(process)
* 종단 시스템에서 실행되는 프로그램
* 운영체제에서 실제 통신하는 것은 프로그램이 아니라 **프로세스**이다.
* 2개의 종단 시스템에서 프로세스는 컴퓨터 네트워크를 통한 **메시지**(message) 교환으로 서로 통신한다. 송신 프로새스는 메시지를 만들어 네트워크로 보내고 수신 프로세스는 메시지를 받고 역으로 보냄으로써 응답한다.

### 클라이언트와 서버 프로세스
&nbsp;&nbsp;두 프로세스 간의 통신 세션에서 통신을 초기화하는 프로세스를 **클라이언트**라고 하고, 세션을 시작하기 위해 접속을 기다리는 프로세스를 **서버**라고 한다. 이때 통신을 초기화한다는 것은 다른 프로세스와 세션을 시작하기 위해 접속을 초기화한다는 뜻이다.

&nbsp;&nbsp;네트워크 애플리케이션은 네트워크에서 서로 메시지를 보내는 두 프로세스로 구성된다. 통신하는 각 쌍에 대해 **클라이언트**의 프로세스와 **서버**의 프로세스 중 하나로 이름을 짓는다. 웹에서 브라우저는 클라이언트, 웹 서버는 서버 프로세스이다. P2P 파일 공유에서는 파일을 내려받는 피어를 클라이언트, 파일을 올리는 피어를 서버라고 한다.

### 프로세스와 컴퓨터 네트워크 사이의 인터페이스
![image](https://github.com/Bogamie/bogamie2.github.io/assets/162293185/68452dbf-3818-41f6-b1bc-6984ed8194d7){: width="80%" height="80%"}{: .align-center}
#### 소켓(socket)
* 메시지가 이동하는 통로로 프로세스는 **소켓**을 통해 네트워크로 메시지를 주고 받는다. 
* 소켓은 호스트의 애플리케이션 계층과 트랜스포트 계층 간의 인터페이스(서로 다른 두 개의 시스템, 장치 사이에서 정보나 신호를 주고받는 경우의 접점이나 경계면)이다.
* 네트워크 애플리케이션이 인터넷에 만든 프로그래밍 인터페이스로 애플리케이션과 네트워크 사이의 **API**(Application Programming Interface)라고 한다.

### 프로세스 주소 배정
&nbsp;&nbsp;특정 목적지로 우편 메일을 보내기 위해서는 목적지 주소가 있어야 한다. 마찬가지로 한 호스트에서 수행되고 있는 프로세스가 다른 호스트의 프로세스로 패킷을 보내기 위해선 수신 프로세스의 주소가 있어야 한다.

#### IP 주소
* 인터넷에서 호스트는 **IP 주소**로 식별된다.
* IP 주소는 32비트로 구성되며 호스트를 유일하게 식별한다.
* IP 주소를 아는 것에서 그치는 것이 아니라 수신 호스트의 프로세스가 어디에 위치해 있는지도 알아야 한다. **포트 번호**(port number)가 이 목적을 위해 사용된다.

## 3. 애플리케이션이 이용 가능한 트랜스포트 서비스

&nbsp;&nbsp;소켓이 애플리케이션 프로세스와 트랜스포트 프로토콜 간의 인터페이스라는 것을 기억하자. 송신 측의 애플리케이션은 소켓을 통해 메시지를 보낸다. 트랜스포트 프로토콜은 네트워크를 통해 메시지를 수신 프로세스의 소캣으로 이동시킬 책임이 있다.

&nbsp;&nbsp;이때 트랜스포트 계층 프로토콜이 애플리케이션들에게 제공할 수 있는 서비스는 넓은 범위에서 네 가지로 볼 수 있다.

### 신뢰적 데이터 전송
* [패킷들은 컴퓨터 네트워크 내에서 손실될 수 있다.](https://bogamie.github.io/computer%20network/computer-network-4/#%ED%8C%A8%ED%82%B7-%EC%86%90%EC%8B%A4){: target="_blank"} 메일, 파일 전송, 재무 애플리케이션의 경우 데이터 손실은 위험한 결과를 초래할 수 있기 때문에 조치를 취해야 한다.
* 프로토콜이 보장된 데이터 전송 서비스를 제공한다면 이를 **신뢰적 데이터 전송**(reliable data transfer)을 제공한다고 한다.
* 트랜스포트 프로토콜이 이 서비스를 제공할 때, 송신 프로세스는 데이터를 소캣으로 보내고 그 데이터가 오류 없이 수신 프로세스에 도착할 것이라는 확신을 갖는다.
* 트랜스포트 프로토콜이 이 서비스를 제공하지 않을 때, 송신 프로세스가 보낸 데이터는 수신 프로세스에 모두 도착하지 않을 수 있다. 어느 정도의 데이터 손실을 허용하는 오디오/비디오와 같은 **손실 허용 애플리케이션**(loss-tolerant application)에서는 받아들여질 수 있다.

### 처리율
* 두 프로세스 간의 통신 세션에서 송신 프로세스가 수신 프로세스로 네트워크 경로를 통해 비트를 전달할 수 있는 비율을 나타낸다.
* 다른 세션들이 네트워크 경로를 따라 대역폭을 공유하고, 이 세션들이 생겼다 없어졌다 하기 때문에 처리율은 변동한다.
* 이러한 특징에서 트랜스포트 프로토콜은 명시된 속도의 처리율을 보장하는 서비스를 제공한다.
* 현존하는 많은 멀티미디어 애플리케이션은 대역폭에 민감하고 이러한 것들을 **대역폭 민감 애플리케이션**(bandwidth-sensitive application)이라 한다. 대역폭 민감 애플리케이션의 경우에 보장된 처리율을 제공 받지 못한다면 낮은 속도로 인코딩하거나 전달을 포기해야 한다.
* **탄력적 애플리케이션**(elastic application)은 가용한 처리율이 많으면 많은대로 적으면 적은대로 이용할 수 있다. 전자메일, 파일 전송, 웹 전송이 해당된다.

### 시간
* 트랜스포트 계층 프로토콜은 시간 보장을 제공할 수 있다. 송신자가 소켓으로 내보내는 모든 비트가 수신자의 소켓에 100 ms 내에 도착하게 하는 등이 이에 해당된다.
* 인터넷 전화, 가상 환경, 원격회의, 게임과 같은 실시간 상호작용 애플리케이션이 필요로 하는 서비스이다.
* 위의 나열한 애플리케이션이 이 서비스를 효과적으로 제공받기 위해선 데이터 전송에 엄격한 시간 제한 조건을 만족 시켜야 한다.
* 비실시간 애플리케이션의 경우 낮은 지연이 선호되지만 종단 간 지연에 엄격한 제약을 받는 것은 아니다.

### 보안
* 트랜스포트 프로토콜은 애플리케이션에 하나 이상의 보안 서비스를 제공할 수 있다. 트랜스포트 프로토콜은  송신 프로세스가 전송하는 모든 데이터를 암호화할 수 있고 수신 호스트로 전달하기 전에 데이터의 암호를 해독할 수 있다.
* 트랜스포트 프로토콜은 기밀성 외에도 데이터 무결성, 종단 인증 등의 다른 보안 서비스를 제공한다.
 
## 4. 인터넷 전송 프로토콜이 제공하는 서비스
&nbsp;&nbsp;인터넷은 애플리케이션에게 UDP와 TCP 2개의 전송 프로토콜을 제공한다. 두 프로토콜은 애플리케이션에게 각기 다른 서비스 모델을 제공한다. 지금부터 이 둘을 알아보자.

### TCP 서비스
* TCP(Transmission Control Protocol) 서비스 모델은 연결지향형 서비스와 신뢰적인 데이터 전송 서비스를 포함한다.
* TCP는 혼잡 제어 방식을 통해 인터넷 전체의 성능 향상을 야기한다. 네트워크가 혼잡 상태에 이르면 프로세스(클라이언트/서버) 속도를 낮춘다. 각 TCP 연결이 네트워크 대역폭을 공평하게 공유하게끔 제한한다.

#### 연결지향형 서비스
* 애플리케이션 계층 메시지를 전송하기 전에 클라이언트와 서버가 서로 전송 제어 정보를 교환하여 미리 연결을 설정한다. 이를 핸드셰이킹 과정이라 하고 이 후, **TCP 연결**이 두 프로세스의 소켓 사이에 존재한다고 말한다. 이 연결은 두 프로세스가 동시에 서로에게 메시지를 보낼 수 있기에 **전이중 연결**이라고 한다. 애플리케이션이 메시지 전송을 마치면 연결을 끊는다.

#### 신뢰적인 데이터 전송 서비스
* 통신 프로세스는 모든 데이터를 오류 없이 순서대로 전달하기 위해 TCP에 의존한다. TCP는 애플리케이션의 한쪽이 바이트 스트림(데이터를 바이트 단위로 주고 받는 것을 말함)을 소켓으로 전달하면 그 바이트 스트림이 손실되거나 중복되지 않게 수신 소켓으로 전달한다.
 
### UDP 서비스
* 최소의 서비스 모델을 가진 간단한 전송 프로토콜이다. TCP와 다르게 비연결형 서비스를 제공하므로 두 프로세스가 통신하기 전 핸드셰이킹을 하지 않는다.
* UDP는 메시지가 수신 소켓에 도착하는 것을 보장하지 않는다. 또한 수신 소켓에 도착하는 메시지들의 순서가 뒤바뀔 수 있다.
* TCP와 달리 혼잡 제어 방식을 포함하지 않는다. 따라서 USP의 송신 측은 데이터를 원하는 속도로 보낼 수 있다. 하지만 종단 간 링크들의 제한된 대역폭, 혼잡으로 인해 속도가 작아질 수 있다.

### 인터넷 트랜스포트 프로토콜이 제공하지 않는 서비스
&nbsp;&nbsp;앞서 트랜스포트 프로토콜이 제공하는 신뢰적 데이터 전송, 처리율, 시간, 보안의 네 가지 차원에서의 서비스를 살펴보았다. 그렇다면 TCP, UDP가 제공하는 서비스를 살펴보자.

* TCP는 신뢰적 종단 간 데이터 전송을 제공한다. 또한 보안 서비스르 제공하기 위해 애플리케이션 계층에선 TLS를 통해 쉽게 강화할 수 있다.

## 5. 애플리케이션 계층 프로토콜
&nbsp;&nbsp;네트워크 프로세스는 소켓으로 메시지를 보냄으로써 통신한다. 이때 서로 다른 종단 시스템에서 실행되는 애플리케이션의 프로세스가 메시지를 전달하는 방법을 정의하는 **애플리케이션 계층 프로토콜**(application-layer protocol)을 통해 통신한다. 애플리케이션 계층 프로토콜은 다음과 같은 내용을 전달한다.

* 교환 메시지 타입(요청 메시지와 응답 메시지)
* 여러 메시지 타입의 문법(메시지 내부의 필드와 필드 간의 구별 방법)
* 필드의 의미, 즉 필드에 있는 정보의 의미
* 언제, 어떻게 프로세스가 메시지를 전송하고 메시지에 응답하는지 결정하는 규칙

&nbsp;&nbsp;네트워크 애플리케이션과 애플리케이션 계층 프로토콜을 구별하는 것은 중요하다. 후자는 전자의 한 요소이다. 웹은 사용자가 필요에 따라 웹 서버로부터 문서를 얻게 해주는 네트워크 애플리케이션이다. 웹 애플리케이션은 HTML, 웹 브라우저, 웹 서버, 애플리케이션 계층 프로토콜을 포함하는 여러 요소들로 구성된다. 웹 애플리케이션 계층 프로토콜, HTTP는 브라우저와 웹 서버 사이에서 교환되는 메시지의 포맷과 순서를 정의한다.