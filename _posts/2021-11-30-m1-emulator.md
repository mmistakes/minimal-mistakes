---
toc: true
title: "M1ì—ì„œ ARM64 ì•ˆë“œë¡œì´ë“œ ì—ë®¬ë ˆì´í„° ì‹¤í–‰"
date: 2021-11-30
categories: [ android ]
---

## ë°±ê·¸ë¼ìš´ë“œ

M1 í”„ë¡œì„¸ì„œì˜ ê²½ìš° ARM64 ì•„í‚¤í…ì³ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì˜¤íˆë ¤ ì•ˆë“œë¡œì´ë“œ ì—ë®¬ë ˆì´í„°ê°€ ë” ì˜ ìµœì í™”ë˜ì§€ ì•Šì„ê¹Œ? ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.

### ARM64 ì—ë®¬ë ˆì´í„° ë‹¤ìš´ë¡œë“œ

AVD ì´ë¯¸ì§€ ì„ íƒ í™”ë©´ì—ì„œ `Other images` íƒ­ì„ ì„ íƒí•˜ë©´ ì—­ì‹œ ARM64ìš© ì´ë¯¸ì§€ë“¤ì´ ë“±ì¥í•©ë‹ˆë‹¤.

![Install ARM64 Emulator](https://raw.githubusercontent.com/urunimi/urunimi.github.io/master/_posts/2021-11-30/m1-emulator-0.png)

ì €ëŠ” API 31 ê¸°ë°˜ì— Google API ê°€ ì„¤ì¹˜ëœ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œ í–ˆìŠµë‹ˆë‹¤.

### ì—ë®¬ë ˆì´í„° ì‹¤í–‰

ê·¸ëŸ°ë° ì´ê²Œ ì™ ê±¸? ì‹¤í–‰í•˜ìë§ˆì ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ë©´ì„œ AVD ê°€ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

>
> The emulator process for avd XXX was killed.
>

![Launch Emulator](https://raw.githubusercontent.com/urunimi/urunimi.github.io/master/_posts/2021-11-30/m1-emulator-1.png)

ê·¸ë˜ì„œ í•´ê²°ë°©ë²•ì„ ì°¾ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.

### ì›ì¸ íŒŒì•…

í„°ë¯¸ë„ì—ì„œ AVD ëª…ë ¹ì–´ë¥¼ ì§ì ‘ ì‹¤í–‰í•´ì„œ ì›ì¸ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.

```sh
â¯ cd Library/Android/sdk/emulator
â¯ emulator -list-avds
Pixel_2_API_31
â¯ emulator -avd Pixel_2_API_31
Could not launch '/Users/ben/Library/Android/sdk/emulator/../emulator/qemu/darwin-x86_64/qemu-system-aarch64': No such file or directory
```

í•˜ì§€ë§Œ í•´ë‹¹ ê²½ë¡œ `darwin-x86_64/qemu-system-aarch64` ì—ëŠ” ì•„ë¬´ëŸ° íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. AVDë¥¼ ì‹¤í–‰í•  ë•Œ x86_64 í•˜ìœ„ í´ë”ë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì—¬ì„œ ê´€ë ¨ í‚¤ì›Œë“œë¡œ êµ¬ê¸€ë§ì„ í–ˆëŠ”ë° ì´ [Github ì´ìŠˆ](https://github.com/google/android-emulator-m1-preview/issues/34)ë¥¼ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.

>
> Just run darwin-aarch64-replace.sh and everything fine.
>

ìœ„ì˜ ëª…ë ¹ì–´ê°€ AVD ê´€ë ¨ ì•„í‚¤í…ì³ ì„¤ì •ì„ ARM64 ì•„í‚¤í…ì³ë¡œ ë³€ê²½í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¡œ ë³´ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ `emulator` í´ë”ë¥¼ í™•ì¸í•´ë³´ë‹ˆ í•´ë‹¹ ìŠ¤í¬ë¦½íŠ¸ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

## í•´ê²°ë°©ë²•

### ARM64ìš© AVD ë‹¤ìš´ë¡œë“œ

ìœ„ì—ì„œ ë°œê²¬í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í–ˆë”ë‹ˆ ì•„ë˜ì™€ ê°™ì´ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ ë°›ì•„ì„œ ì••ì¶•ì„ í•´ì œí•©ë‹ˆë‹¤.

```sh
â¯ ./darwin-aarch64-replace.sh
curl -L https://github.com/google/android-emulator-m1-preview/releases/download/0.2/emulator-darwin-aarch64-0.2-engine-only.zip -o emulator-darwin-aarch64-0.2.zip
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   682  100   682    0     0   1804      0 --:--:-- --:--:-- --:--:--  1804
100 91.8M  100 91.8M    0     0   412k      0  0:03:47  0:03:47 --:--:-- 1040k
unzip emulator-darwin-aarch64-0.2.zip
Archive:  emulator-darwin-aarch64-0.2.zip
   creating: emulator-darwin-aarch64-0.2/
  inflating: emulator-darwin-aarch64-0.2/NOTICE.csv  
  inflating: emulator-darwin-aarch64-0.2/qsn  
  inflating: emulator-darwin-aarch64-0.2/qemu-img
  #...
  inflating: emulator-darwin-aarch64-0.2/emulator  
rm: ./qemu-img: No such file or directory
```

í•´ë‹¹ í´ë”ë¥¼ í™•ì¸í•´ë³´ë‹ˆ ì œëŒ€ë¡œ ì‘ì—…ì´ ë§ˆë¬´ë¦¬ ì•ˆë˜ì„œ `emulator` í´ë”ë¥¼ êµì²´í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.

### AVD ì‹¤í–‰

ë‹¤ì‹œ AVD ë¥¼ ì‹¤í–‰í•´ ë´…ë‹ˆë‹¤.

![Launch Emulator](https://raw.githubusercontent.com/urunimi/urunimi.github.io/master/_posts/2021-11-30/m1-emulator-2.png)

ì •ìƒì ìœ¼ë¡œ AVD ê°€ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰
