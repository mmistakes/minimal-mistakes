---
layout: single
title:  "Spring ê¸°ì´ˆ - 3"
categories: Spring
tag: [Spring , ìŠ¤í”„ë§ì˜ ì •ì„]
toc: true
toc_sticky: true
author_profile: false
sidebar:
  nav: "docs"
---

# ğŸ’»2022-03-15

## Spring  

<!--Quote-->
> ğŸ’¡ íŒ¨ìŠ¤íŠ¸ ìº í¼ìŠ¤ ìŠ¤í”„ë§ì˜ ì •ì„ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„± ì˜ˆì •

> â— ê°œì¸ì´ ê³µë¶€í•œ ë‚´ìš©ì„ ì ì€ ê²ƒ ì´ê¸°ì— ì˜¤ë¥˜ê°€ ë§ì„ ìˆ˜ë„ ìˆìŒ 


## 1ï¸âƒ£HttpServletRequest

- httpí”„ë¡œí† ì½œì˜ requestì •ë³´ë¥¼ ì„œë¸”ë¦¿ì—ê²Œ ì „ë‹¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©
- í—¤ë”ì •ë³´, íŒŒë¼ë¯¸í„°, ì¿ í‚¤, URI, URL ë“±ì˜ ì •ë³´ë¥¼ ì½ì–´ ë“¤ì´ëŠ” ë©”ì†Œë“œ í¬í•¨
- Bodyì˜ Streamì„ ì½ì–´ ë“¤ì´ëŠ” ë©”ì†Œë“œ í¬í•¨

## 2ï¸âƒ£HttpServletResponse

- ìš”ì²­ì„ ë³´ë‚¸ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µì„ ë³´ë‚´ê¸° ìœ„í•´ WASì—ì„œ ìƒì„±ë˜ì–´ ì„œë¸”ë¦¿ì—ê²Œ ì „ë‹¬ë¨
- ì„œë¸”ë¦¿ì€ ì´ ê°ì²´ë¥¼ ì´ìš©í•˜ì—¬ content type, ì‘ë‹µì½”ë“œ, ì‘ë‹µ ë©”ì‹œì§€ë“±ì„ ì „ì†¡

## 3ï¸âƒ£GetMapping & PostMapping

```java
@Controller
public class RegisterController {
	//@RequestMapping(value="/register/add", method={RequestMethod.GET, RequestMethod.POST})
	//@RequestMapping("/register/add") // ì‹ ê·œíšŒì› ê°€ì… í™”ë©´ -> getë°©ì‹ 
	@GetMapping("/register/add")
	public String register() {
		return "registerForm"; // web-inf/views/regiserForm.jsp
	}
	
	//@RequestMapping(value="/register/save", method=RequestMethod.POST) 
	@PostMapping("/register/save") // 4.3 ë¶€í„° ìœ„ì— ì‹ì´ ë„ˆë¬´ ê¸¸ì–´ì„œ ì´ê±¸ë¡œ -> postë°©ì‹ 
	public String save() {
		return "registerInfo";
	}
}
```

- RequestMapping ëŒ€ì‹  ì‚¬ìš©
- @GetMapping & @PostMapping ì˜ ì£¼ì†Œê°€("/register/add") ê²¹ì¹œë‹¤ í•˜ì§€ë§Œ Getê³¼ Postë¡œ êµ¬ë¶„ì„ ì§€ì–´ì£¼ê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ê°€ ì•ˆë‚œë‹¤.

## 4ï¸âƒ£try ~ catch ë‹¨ì¶•í‚¤

- ìš°ì¸¡ ë§ˆìš°ìŠ¤ í´ë¦­ surround with â†’ try ~ catch í´ë¦­

## 5ï¸âƒ£ì˜ˆì™¸ ì²˜ë¦¬ ë©”ì„œë“œ

```java
// ì˜ˆì™¸ ì²˜ë¦¬ ë©”ì„œë“œ 
	// í•˜ë‚˜ì˜ í•¸ë“¤ëŸ¬ë¡œ ì—¬ëŸ¬ê°œì˜ Exceptionì„ ì²˜ë¦¬ 
	@ExceptionHandler({NullPointerException.class, FileNotFoundException.class})
	public String catcher2(Exception ex, Model m) {
		m.addAttribute("ex",ex);
		return "error";
	}
	
	@ExceptionHandler(Exception.class)
	public String catcher(Exception ex, Model m) {
		m.addAttribute("ex",ex);
		return "error";
	}
	
	
	@RequestMapping("/ex")
	public String main() throws Exception {
		throw new Exception("ì˜ˆì™¸ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
	}
	
	@RequestMapping("/ex2")
	public String main2() throws Exception {
		throw new NullPointerException("ì˜ˆì™¸ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
		
	}
	
	@RequestMapping("/ex3")
	public String main3() throws Exception {
		throw new FileNotFoundException("ì˜ˆì™¸ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
		
	}
```

- try ~ catch ì—ì„œ catchê°€ ì¤‘ë³µë˜ê¸°ì— ExceptionHandlerë¥¼ ì´ìš©
- ExceptionHandlerhandlerë¡œ ì—¬ëŸ¬ê°œì˜ ì˜ˆì™¸ ì²˜ë¦¬ ë°©ë²•ì€ ë°°ì—´ ë°©ì‹ì„ ì´ìš©
- mainí•¨ìˆ˜ ì˜†ì— throws Exception í•„ìˆ˜ 
- Modelì€ ì˜ˆì™¸ì²˜ë¦¬ì™€ëŠ” ê´€ê³„ê°€ ì—†ìŒ. ë‹¨ì§€ viewë¡œ ë„˜ê²¨ì£¼ê¸° ìœ„í• ë¿

```java
package com.fastcampus.ch2;

import java.io.FileNotFoundException;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class ExceptionController2 {
	
	
	@RequestMapping("/ex3")
	public String main() throws Exception {
		throw new Exception("ì˜ˆì™¸ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
	}
	
	@RequestMapping("/ex4")
	public String main2() throws Exception {
		throw new FileNotFoundException("ì˜ˆì™¸ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
		
	}
	
}

```

- ExceptionHandlerê°€ ì—†ë‹¤

```java
package com.fastcampus.ch2;

import java.io.FileNotFoundException;

import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.bind.annotation.ExceptionHandler;

@ControllerAdvice("com.fastcampus.ch2") // íŒ¨í‚¤ì§€ ì§€ì •: ì´íŒ¨í‚¤ì§€ì—ë§Œ ì ìš© / ì•ˆì ìœ¼ë©´ ëª¨ë“  íŒ¨í‚¤ì§€ì— ì ìš©
public class GlobalCatcher {

	@ExceptionHandler({NullPointerException.class, FileNotFoundException.class})
	public String catcher5(Exception ex, Model m) {
		m.addAttribute("ex",ex);
		return "error";
	}
	
	@ExceptionHandler(Exception.class)
	public String catcher6(Exception ex, Model m) {
		m.addAttribute("ex",ex);
		return "error";
}
}
```

- í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì— ì˜ˆì™¸ì²˜ë¦¬í•˜ëŠ” ExceptionHandlerë¥¼ ë§Œë“¤ê³  @ControllerAdviceë¥¼ í•´ì£¼ë©´ ì—¬ê¸°ì„œ ë‹¤ ì˜ˆì™¸ì²˜ë¦¬ëœë‹¤ ë§Œì•½ í´ë˜ìŠ¤ì•ˆì—  ExceptionHandlerê°€ ìˆë‹¤ë©´ GlobalCatcherê°€ ì•„ë‹Œ ê·¸ í´ë˜ìŠ¤ ì•ˆì—ìˆëŠ”  ExceptionHandlerê°€ ì²˜ë¦¬í•´ì¤€ë‹¤