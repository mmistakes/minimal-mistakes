# 회원가입 id(email) 중복시 응답 status code

### 400 Bad Request

```
The request could not be understood by the server due to malformed syntax. The client SHOULD NOT repeat the request without modifications.
-RFC 2616
```

400 코드는 요청에서 지켜야할 문법을 제대로 지키지 않아서 서버가 이해하지 못 했을 때 주로 사용된다. 

```
The server cannot or will not process the request due to something that is perceived to be a client error (e.g., malformed request syntax, invalid request message framing, or deceptive request routing).
- RFC 7231
```

RFC 2616의 개정판인 RFC 7231에서는 서버가 처리 못 하는 것뿐 아니라 어떤 다른 오류로 처리하지 않는 부분에도 광범위하게 사용되는 것으로 정의된다.

### 409 Conflict

```
The request could not be completed due to a conflict with the current state of the target resource. This code is used in situations where the user might be able to resolve the conflict and resubmit the request. The server SHOULD generate a payload that includes enough information for a user to recognize the source of the conflict.
-RFC 7231
```

409 코드는 리소스의 현재 상태와 충돌해서 해당 요청을 처리할 수 없어 클라이언트가 충돌을 수정해서 다시 요청을 보내야할 때 사용된다. 

### 403 Forbidden

```
The server understood the request but refuses to authorize it. A server that wishes to make public why the request has been forbidden can describe that reason in the response payload (if any).
- RFC 7231
```

403 코드는 유효성 검사에서 실패했거나 인가에 실패했을 때 주로 사용된다.



### 결론

회원가입시 id가 중복된 상황에서는 요청은 정상적이고 클라이언트가 요청을 보내기 전까지는 id의 중복여부를 알 수 있는 상황도 아니기 때문에 400코드의 맥락과는 어긋난다. (하지만 개정판에서 기존보다 광범위한 사용 범위를 정의하고 있으므로 사용 불가능한 것은 아니다.)

또 id 중복은 유효성 검사나 인가와는 다른 맥락이기 때문에 403 코드는 적합하지 않다. 

결론적으로 이미 생성된 유저의 id 리소스와 회원가입하려는 유저의 id가 충돌한 경우라고 볼 수 있기 때문에 409코드를 사용했다.