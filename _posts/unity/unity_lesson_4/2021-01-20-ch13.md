---
title:  "Ch 13. ë©”ë‰´ êµ¬í˜„ & ê²Œì„ ë¦¬ì…‹" 

categories:
  -  Unity Lesson 4
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2021-01-20
last_modified_at: 2021-01-20
---

ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° ê°•ì¢Œ] ë¦¬ë“¬ ê²Œì„** ìœ íŠœë¸Œ ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.youtube.com/watch?v=eLdiOCWPfPc&list=PLUZ5gNInsv_MCnum4bOQRI72LdGkIY3tY&index=2&t=231s)
{: .notice--warning}

## ğŸš€ ë©”ë‰´ êµ¬í˜„


![image](https://user-images.githubusercontent.com/42318591/105134924-8010a900-5b32-11eb-82f6-ef954fe1c9ea.png)

![image](https://user-images.githubusercontent.com/42318591/105135013-9d457780-5b32-11eb-8a86-8c8d753bb920.png)

ë©”ì¸ ë©”ë‰´ì—ì„œ í”Œë ˆì´ ë²„íŠ¼ ëˆ„ë¥´ë©´ íƒ€ì´í‹€ ë©”ë‰´ë¡œ ë„˜ì–´ê°. (ë©”ì¸ ë©”ë‰´ ë¹„í™œ, íƒ€ì´í‹€ ë©”ë‰´ í™œì„±í™”)

![image](https://user-images.githubusercontent.com/42318591/105135061-b9e1af80-5b32-11eb-9e3f-8a74e6f980e5.png)

íƒ€ì´í‹€ ë©”ë‰´ì—ì„œ Back ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë©”ì¸ ë©”ë‰´ë¡œ ëŒì•„ê°€ê³ , Play ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ê²Œì„ ì‹œì‘! 


ë˜ ë‹¤ë¥¸ ì”¬ì„ ë§Œë“¤ì–´ì„œ ì „í™˜í•  í•„ìš” ì—†ì´ ì´ë ‡ê²Œ ì´ë¯¸ì§€ ì—„ì²­ í¬ê²Œ ë§Œë“¤ì–´ì„œ ë‹¤ ê°€ë ¤ë²„ë¦¬ê²Œ í•˜ê³ (ê²€ì€ ë°°ê²½.. ì´ë¯¸ì§€ UIì´ë‹¤.) ì´ ì´ë¯¸ì§€ë¥¼ ë¹„í™œ, í™œì„±í™” í•˜ì—¬ ì”¬ ì „í™˜í•˜ëŠ” íš¨ê³¼ë¥¼ ì£¼ëŠ” ê²ƒë„ ì¢‹ì€ ë°©ë²•ì¸ ê²ƒ ê°™ë‹¤. 



### âœˆ íƒ€ì´í‹€ ë©”ë‰´

#### ğŸ“œTitleMenu 

```c#
public class TitleMenu : MonoBehaviour
{
    [SerializeField] GameObject goStageUI = null;

    public void BtnPlay()  // ë²„íŠ¼ ì´ë²¤íŠ¸ ë“±ë¡
    {
        goStageUI.SetActive(true);  // ìŠ¤í…Œì´ì§€ ë©”ë‰´ í™œì„±í™”
        this.gameObject.SetActive(false); // íƒ€ì´í‹€ ë©”ë‰´ ë„ê³  
    }
}

```

<br>

### âœˆ ìŠ¤í…Œì´ì§€ ë©”ë‰´

#### ğŸ“œStageMenu

```c#
public class StageMenu : MonoBehaviour
{
    [SerializeField] GameObject TitleMenuUI = null;
    
    public void BtnBack()  // ë²„íŠ¼ ì´ë²¤íŠ¸ ë“±ë¡
    {
        TitleMenuUI.SetActive(true); // íƒ€ì´í‹€ ë©”ë‰´ í™œì„±í™”
        this.gameObject.SetActive(false); // ìŠ¤í…Œì´ì§€ ë¹„í™œ
    }

    public void BtnPlay()  // ë²„íŠ¼ ì´ë²¤íŠ¸ ë“±ë¡
    {
        GameManager.instance.GameStart(); // ê²Œì„ ë§¤ë‹ˆì €ë¥¼ í†µí•´ ê²Œì„ ìŠ¤íƒ€íŠ¸ (ë°‘ì—ì„œ ì‘ì„±)
        this.gameObject.SetActive(false); // ìŠ¤í…Œì´ì§€ ë¹„í™œ
    }
}
```

<br>

### âœˆ  ê²Œì„ ì‹œì‘/ì¢…ë£Œì‹œ í•´ì•¼ë  ì²˜ë¦¬

#### ğŸ“œGameManager

```c#
public class GameManager : MonoBehaviour
{
    [SerializeField] GameObject[] goGameUI = null; // ê²Œì„ì´ ì‹œì‘ë˜ì–´ì•¼ ë¹„ë¡œì†Œ í™œì„±í™” ë˜ëŠ” ëª¨ë“  ì˜¤ë¸Œì íŠ¸ë“¤ ì´ ë°°ì—´ì— í• ë‹¹í•´ë‘” ìƒíƒœ
    [SerializeField] GameObject goTitleUI = null;

    public static GameManager instance;
    public bool isStartGame = false;

    private void Start()
    {
        instance = this; // ì‹±ê¸€í†¤
    }

    public void GameStart()
    {
        for(int i = 0; i < goGameUI.Length; i++)
        {
            goGameUI[i].SetActive(true);
        }
        isStartGame = true;
    }

    public void MainMenu()
    {
        for (int i = 0; i < goGameUI.Length; i++)
        {
            goGameUI[i].SetActive(false);
        }
        goTitleUI.SetActive(true);
    }
}
```

<br>

#### ğŸ“œNoteManager

```c#
    void Update()
    {
        if (GameManager.instance.isStartGame)
        {
            //...  
        }
    }

    public void RemoveNote()
    {
        GameManager.instance.isStartGame = false;
```

<br>


<br>

#### ğŸ“œPlayerController

```c#
    void Update()
    {
        if (GameManager.instance.isStartGame)
        {
```


<br>

#### ğŸ“œResult

```c#
    public void BtnMainMenu() // ë²„íŠ¼ ì´ë²¤íŠ¸ ë“±ë¡ (ë©”ì¸ ë©”ë‰´ë¡œ ëŒì•„ê°ê¸°)
    {
        goUI.SetActive(false);
        GameManager.instance.MainMenu();
        theCombo.ResetCombo();
    }
```

<br>


## ğŸš€ ê²Œì„ ë¦¬ì…‹í•˜ê¸°

- ê²Œì„ì„ ìƒˆë¡­ê²Œ ë‹¤ì‹œ ì‹œì‘í•˜ë©´ ì´ˆê°€í™” ìƒíƒœì—ì„œ ê²Œì„í•  ìˆ˜ ìˆë„ë¡! (ì´ì „ ê²Œì„ ê¸°ë¡ë“¤ ë¦¬ì…‹)
- ìŠ¤í…Œì´ì§€ë¥¼ í”„ë¦¬íŒ¹ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ ê²Œì„ì´ ì‹œì‘ë˜ë©´ ìŠ¤í…Œì´ì§€ê°€ Instantiate ë˜ë„ë¡ í•˜ê³  ê²Œì„ì´ ëë‚˜ë©´ Destroy ë˜ë„ë¡ í•¨

### âœˆ ì´ˆê¸°í™”

```c#
// ğŸ“œScoreManager
    public void Initialized()
    {
        currentSrore = 0;
        txtScore.text = "0";
    }

// ğŸ“œTimingManager
    public void Initialized()
    {
        for (int i = 0; i < judgementRecord.Length; i++)
            judgementRecord[i] = 0;
    }

// ğŸ“œStatusManager
    public void Initialized()
    {
        currentHp = maxHp;
        currentShield = 0;
        currentShieldCombo = 0;
        shieldGauge.fillAmount = 0;
        isDead = false;
        SettingHPImage();
        SettingShieldImage();
    }

// ğŸ“œPlayerController
    public void Initialized()
    {
        transform.position = Vector3.zero;
        destPos = Vector3.zero;
        realCube.localPosition = Vector3.zero;
        canMove = true;
        s_canPressKey = true;
        isFalling = false;
        myRigid.useGravity = false;
        myRigid.isKinematic = true;
    }

// ğŸ“œCenterFlame
    public void ResetMusic()
    {
        musicStart = false;
    }
```

<br>

### âœˆ ìŠ¤í…Œì´ì§€ í”„ë¦¬íŒ¹ ìƒì„± íŒŒê´´

```c#
// ğŸ“œStageManager
GameObject currentStage;

    public void RemoveStage()
    {
        if (currentStage != null)
            Destroy(currentStage);
    }

    public void SettingsStage()
    {
        stepCount = 0;
        
        currentStage = Instantiate(stage, Vector3.zero, Quaternion.identity);
        stagePlates = currentStage.GetComponent<Stage>().plates;
        totalPlateCount = stagePlates.Length;
```


<br>

### ğŸ“œGameManager

```c#
    private void Start()
    {
        instance = this;
        theCombo = FindObjectOfType<ComboManager>();
        theScore = FindObjectOfType<ScoreManager>();
        theTiming = FindObjectOfType<TimingManager>();
        theStatus = FindObjectOfType<StatusManager>();
        thePlayer = FindObjectOfType<PlayerController>();
        theStage = FindObjectOfType<StageManager>();
    }

    public void GameStart()
    {
        for(int i = 0; i < goGameUI.Length; i++)
        {
            goGameUI[i].SetActive(true);
        }
        theStage.RemoveStage();
        theStage.SettingsStage();
        theCombo.ResetCombo();
        theScore.Initialized();
        theTiming.Initialized();
        thePlayer.Initialized();
        theStatus.Initialized();

        isStartGame = true;
    }
```

<br>

### âœˆ ê²œ ë‹¤ì‹œ ì‹œì‘í•˜ë©´ ê²°ê³¼ì°½ ë¹„í™œ 

```c#
// ğŸ“œResult
    public void closeResult()
    {
        goUI.SetActive(false);
    }

// ğŸ“œStageMenu
    Result result;
    result = FindObjectOfType<Result>();
    [SerializeField] GameObject resultUI = null; // Result UI 
    public void BtnPlay()
    {
        if (resultUI.activeSelf)
            theResult.closeResult();
        //..
    }

// ğŸ“œMainMenu
    Result result;
    result = FindObjectOfType<Result>();
    [SerializeField] GameObject resultUI = null; // Result UI 
    public void MainMenu()
    {
        if (resultUI.activeSelf)
            result.closeResult();
```

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}