---
title:  "Ch 2. íŒì • ì´í™íŠ¸ íš¨ê³¼" 

categories:
  -  Unity Lesson 4
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-12-22
last_modified_at: 2020-12-22
---

ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° ê°•ì¢Œ] ë¦¬ë“¬ ê²Œì„** ìœ íŠœë¸Œ ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.youtube.com/watch?v=eLdiOCWPfPc&list=PLUZ5gNInsv_MCnum4bOQRI72LdGkIY3tY&index=2&t=231s)
{: .notice--warning}

## ğŸš€ ì´í™íŠ¸ ì´ë¯¸ì§€ ì• ë‹ˆë©”ì´ì…˜

![image](https://user-images.githubusercontent.com/42318591/102858714-125b5980-446e-11eb-8caf-49e396b09c18.png)


### ì²« ë²ˆì§¸ : Note Hit Effect

![image](https://user-images.githubusercontent.com/42318591/102858457-aa0c7800-446d-11eb-942c-46f40e90a50d.png)

- Sprite Mode `Multiple`
  - `Single`ì€ Sprite í•˜ë‚˜ê°€ ê·¸ëƒ¥ Sprite í•œê°œë¡œ ì´ë£¨ì–´ì§„ ê²½ìš°ë‹¤.
  - `Multiple`ì€ Sprite í•˜ë‚˜ê°€ ì—¬ëŸ¬ê°œ Sprite ë¡œ ì´ë£¨ì–´ì§„ ê²½ìš°ë‹¤.
    - Sprite Editor ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. (Sprite Editor íŒ¨í‚¤ì§€ ì„¤ì¹˜í•´ì•¼ ë¨)

![image](https://user-images.githubusercontent.com/42318591/102858552-d1634500-446d-11eb-9865-14418a23ef02.png)

SpriteEditor ì—ì„œ ì´ë ‡ê²Œ í•˜ë‚˜ì˜ Spriteë¥¼ 5 X 2 = 10 ê°œì˜ Sprite ë¡œ ìª¼ê° ë‹¤. ì´ Sprite ëŠ” ì´ì œ 10 ê°œì˜ ë…ë¦½ì ì¸ Sprite ë¡œ ì´ë£¨ì–´ì ¸ìˆê²Œ ëœë‹¤.

![image](https://user-images.githubusercontent.com/42318591/102858589-e5a74200-446d-11eb-927c-e47e4ed409cf.png)

air-blast ì´ë¯¸ì§€ í•˜ë‚˜ì— ì´ë ‡ê²Œ 10 ê°œì˜ ì´ë¯¸ì§€ê°€ ë“¤ì–´ìˆê²Œ ë¨. ì²«ë²ˆì§¸ ì´ë¯¸ì§€ë¶€í„° ì—´ë²ˆì§¸ ì´ë¯¸ì§€ê¹Œì§€ ì°¨ë¡€ëŒ€ë¡œ ì¬ìƒí•˜ë©´ ê·¸ëŸ´ì‹¸í•œ ì• ë‹ˆë©”ì´ì…˜ì´ ë  ê²ƒì´ë‹¤!

![image](https://user-images.githubusercontent.com/42318591/102859033-9a416380-446e-11eb-9582-5cd3a73f922d.png)

ê°€ìš´ë°ì—ì„œ íƒ€ê²©í•  ë•Œë§ˆë‹¤ ìƒê²¨ë‚˜ëŠ” ì´í™íŠ¸ íš¨ê³¼ë¡œ ì“¸ ê²ƒ.

![image](https://user-images.githubusercontent.com/42318591/102858646-feaff300-446d-11eb-95c6-59c2d9653f0b.png)

- `NoteHitEffect` ì´ë¯¸ì§€
  - 10 ê°œì˜ Sprite ì´ë¯¸ì§€ë¥¼ ì°¨ë¡€ëŒ€ë¡œ í‚¤ë¡œ ì¶”ê°€. ì²« ë²ˆì¬ ì´ë¯¸ì§€ì—ì„œ ì—´ë²ˆì§¸ ì´ë¯¸ì§€ê¹Œì§€ ì‹œê°„ ìˆœì„œëŒ€ë¡œ `NoteHitEffect` ì´ë¯¸ì§€ UI ì˜ Sprite ë¡œ í• ë‹¹
  - ë í”„ë ˆì„ì—ì„œëŠ” ì´ë¯¸ì§€ë¥¼ ë¹„í™œì„±í™” í•˜ì—¬ ë³´ì´ì§€ ì•Šê²Œ í•œë‹¤. 

![image](https://user-images.githubusercontent.com/42318591/102858618-f3f55e00-446d-11eb-828f-a1997f4fa9f8.png)

- `Empty` ê·¸ëƒ¥ ì•„ë¬´ ì¼ë„ ì•ˆí•˜ëŠ” ë¹ˆ ìƒíƒœì´ë‹¤.
- ìœ„ì—ì„œ ë§Œë“  ì• ë‹ˆë©”ì´ì…˜ì´ "Hit" íŠ¸ë¦¬ê±°ê°€ ë°œë™ë˜ë©´ ì¬ìƒë˜ë„ë¡ ì „ì´ ì¡°ê±´ì„ ì§ ë‹¤.

<br>

### ë‘ ë²ˆì§¸ : Judgement Effect

![image](https://user-images.githubusercontent.com/42318591/102859063-a88f7f80-446e-11eb-8bfd-73629bc009b7.png)

Judgement Effect ì´ë¯¸ì§€ì˜ Sprite ì¢…ë¥˜ëŠ” 5 ê°€ì§€. (Perfect, Cool, Good, Bad, Miss)

![image](https://user-images.githubusercontent.com/42318591/102858804-3cad1700-446e-11eb-862f-de54fac244b0.png)

![image](https://user-images.githubusercontent.com/42318591/102858838-4afb3300-446e-11eb-9c62-5b26cc0f634c.png)

<br>

## ğŸš€ ì´í™íŠ¸ ì´ë¯¸ì§€ ì¬ìƒì‹œí‚¤ê¸°

### ğŸ“œEffectManager

> ì´ë¯¸ì§€ë“¤ì˜ ë¶€ëª¨ì¸ `Effect`ì— ë¶™ì¸ë‹¤.

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class EffectManager : MonoBehaviour
{
    [SerializeField] Animator noteHitAnimator = null;

    [SerializeField] Animator judgementAnimator = null;
    [SerializeField] Image judgementImage = null;
    [SerializeField] Sprite[] judgementSprite = null;

    string hit = "Hit";

    public void JudgementEffect(int p_num)
    {
        judgementImage.sprite = judgementSprite[p_num];
        judgementAnimator.SetTrigger(hit);
    }

    public void NoteHitEffect()
    {
        noteHitAnimator.SetTrigger(hit);
    }
}

```

![image](https://user-images.githubusercontent.com/42318591/102859331-0fad3400-446f-11eb-9144-6d6a6b7b6dd9.png)


<br>

### ğŸ“œTimingManager

```c#
    EffectManager theEffect;

    void Start()
    {
        theEffect = FindObjectOfType<EffectManager>();

        // ...
    }

    public void CheckTiming()
    {
        for(int i = 0; i < boxNoteList.Count; i++)
        {
            float t_notePosX = boxNoteList[i].transform.localPosition.x;

            // íŒì • ìˆœì„œ : Perfect -> Cool -> Good -> Bad
            for (int j = 0; j < timingBoxs.Length; j++)
            {
                if (timingBoxs[j].x <= t_notePosX && t_notePosX <= timingBoxs[j].y)
                {
                    // ë…¸íŠ¸ ì œê±°
                    boxNoteList[i].GetComponent<Note>().HideNote();
                    boxNoteList.RemoveAt(i);

                    // ì´í™íŠ¸ ì—°ì¶œ â­â­
                    if (j < timingBoxs.Length - 1) // Perfect, Cool, Good íŒì •ë•Œë§Œ ì´í™íŠ¸ íš¨ê³¼. Bad ì¼ë• X
                        theEffect.NoteHitEffect();
                    theEffect.JudgementEffect(j);

                    return;
                }
            }
        }

        theEffect.JudgementEffect(timingBoxs.Length);
    }
```

<br>

### ğŸ“œNote

```c#
    public bool GetNoteFlag()
    {
        return noteImage.enabled;
    }
```

í™”ë©´ ë°–ì„ ë²—ì–´ë‚˜ ì½œë¼ì´ë”ì— ë„ë‹¬í•œ ë…¸íŠ¸ê°€ ì´ë¯¸ì§€ê°€ ì•ˆêº¼ì ¸ ìˆë‹¤ë©´ Miss ì¸ ê²ƒì´ë‹¤. ì´ë¥¼ ì•Œë ¤ì£¼ê¸° ìœ„í•´ ë§Œë“  í•¨ìˆ˜.

<br>

### ğŸ“œNoteManager

```c#
    EffectManager theEffect;

    void Start()
    {
        theTimingManager = GetComponent<TimingManager>();
        theEffect = FindObjectOfType<EffectManager>();
    }

    private void OnTriggerExit2D(Collider2D collision)
    {
        if (collision.CompareTag("Note"))
        {
            if (collision.GetComponent<Note>().GetNoteFlag())
                theEffect.JudgementEffect(4); // ë…¸íŠ¸ê°€ ì´ë¯¸ì§€ ì•ˆêº¼ì§€ê³  ê·¸ëŒ€ë¡œ í™”ë©´ ë°– ë²—ì–´ë‚˜ë©´ Miss ìŠ¤í”„ë¼ì´íŠ¸ ë„ìš°ê¸°
            theTimingManager.boxNoteList.Remove(collision.gameObject);
            Destroy(collision.gameObject);
        }
    }
```



***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}