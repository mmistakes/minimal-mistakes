---
title:  "Ch 9. ê²°ê³¼ UI, ì ìˆ˜ ê³„ì‚°" 

categories:
  -  Unity Lesson 4
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2021-01-18
last_modified_at: 2020-01-18
---

ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° ê°•ì¢Œ] ë¦¬ë“¬ ê²Œì„** ìœ íŠœë¸Œ ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.youtube.com/watch?v=eLdiOCWPfPc&list=PLUZ5gNInsv_MCnum4bOQRI72LdGkIY3tY&index=2&t=231s)
{: .notice--warning}

## ğŸš€ ê²°ê³¼ UI 

![image](https://user-images.githubusercontent.com/42318591/105003876-8d685d80-5a76-11eb-97da-d57dad685177.png)

![image](https://user-images.githubusercontent.com/42318591/105003826-7de91480-5a76-11eb-9d08-5299080037ee.png)

### ğŸ“œTimingManager

```c#
int[] judgementRecord = new int[5];

    public int[] GetJudgementRecord()
    {
        return judgementRecord;
    }

    public void MissRecord()
    {
        judgementRecord[4]++;  // Missì˜ íŒì • ê¸°ë¡
    }

    public bool CheckTiming()
    {

                    if (CheckCanNextPlate())
                    {
                        theScoreManager.IncreaseScore(j);  // ì ìˆ˜ ì¦ê°€
                        theStage.ShowNextPlate(); // ë‹¤ìŒ í”Œë ˆì´íŠ¸ í˜¸ì¶œ
                        theEffect.JudgementEffect(j); // íŒì • ì—°ì¶œ
                        judgementRecord[j]++;  // íŒì • ê¸°ë¡
                    }
                    else
                    {
                        theEffect.JudgementEffect(5);
                    }
                        
                    return true;
                }
            }
        }
        
        // Miss
        theCombo.ResetCombo();
        theEffect.JudgementEffect(timingBoxs.Length);
        MissRecord();
        return false;
```


- `judgementRecord`
  - ì¸ë±ìŠ¤ë³„ë¡œ, ì¦‰ Perfect, Cool, Good, Bad, Miss ë³„ë¡œ íšŸìˆ˜ë¥¼ ì „ë¶€ ê¸°ë¡í•´ì•¼ í•œë‹¤. ê·¸ë˜ì•¼ ê²°ê³¼ UI ì— ë„ìš¸ ìˆ˜ ìˆë‹¤!

<br>

### ğŸ“œScoreManager

```c#
    public int GetCurrentScore()
    {
        return currentSrore;
    }
```

<br>

### ğŸ“œComboManager

```c#
    int currentCombo = 0;
    int maxCombo = 0;

    public void IncreaseCombo(int p_num = 1)
    {
       //...
        if (maxCombo < currentCombo)
            maxCombo = currentCombo;
        //...
    }

    public int GetMaxCombo()
    {
        return maxCombo;
    }
```

ìµœëŒ€ ì½¤ë³´ë¥¼ ê¸°ë¡í•´ì•¼ í•œë‹¤. 

<br>

### ğŸ“œResult

> `Result`ì— ë¶™ì¸ë‹¤.

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class Result : MonoBehaviour
{
    [SerializeField] GameObject goUI = null;
    [SerializeField] Text[] txtCount = null;
    [SerializeField] Text txtCoin = null;
    [SerializeField] Text txtScore = null;
    [SerializeField] Text txtMaxCombo = null;

    ScoreManager theScore;
    ComboManager theCombo;
    TimingManager theTiming;

    void Start()
    {
        theScore = FindObjectOfType<ScoreManager>();
        theCombo = FindObjectOfType<ComboManager>();
        theTiming = FindObjectOfType<TimingManager>();
    }

    public void ShowResult()
    {
        // ê²°ê³¼ UI í™œìƒí™”
        goUI.SetActive(true);

        // ì´ˆê¸°í™”
        for (int i = 0; i < txtCount.Length; i++)
            txtCount[i].text = "0";
        txtCoin.text = "0";
        txtScore.text = "0";
        txtMaxCombo.text = "0";

        // ì ìˆ˜ë“¤ ê°€ì ¸ì˜¤ê¸°
        int[] t_judgement = theTiming.GetJudgementRecord();
        int t_currentScore = theScore.GetCurrentScore();
        int t_maxCombo = theCombo.GetMaxCombo();
        int t_coin = (t_currentScore / 50);

        // í…ìŠ¤íŠ¸ ì„¸íŒ… (ê°€ì ¸ì˜¨ ê²ƒë“¤ë¡œ)
        for (int i = 0; i < txtCount.Length; i++)
        {
            txtCount[i].text = string.Format("{0:#,##0}", t_judgement[i]);
        }
        txtScore.text = string.Format("{0:#,##0}", t_currentScore);
        txtMaxCombo.text = string.Format("{0:#,##0}", t_maxCombo);
        txtCoin.text = string.Format("{0:#,##0}", t_coin);
    }
}

```

![image](https://user-images.githubusercontent.com/42318591/105003995-b2f56700-5a76-11eb-8e93-2af7a0feb494.png)

<br>

### ğŸ“œGoalPlate

```c#
Result theResult;
theResult = FindObjectOfType<Result>();

    private void OnTriggerEnter(Collider other)
    {
        if (other.CompareTag("Player"))
        {
            theAudio.Play();
            PlayerController.s_canPressKey = false;
            theNote.RemoveNote();
            theResult.ShowResult();
        }
    }
```

ëª©í‘œ ì§€ì ì— ë„ë‹¬í–ˆì„ ë•Œ ê²°ê³¼ UI ë„ìš°ê¸° *theResult.ShowResult();*

<br>

### ğŸ“œNoteManager

```c#
    private void OnTriggerExit2D(Collider2D collision)
    {
        if (collision.CompareTag("Note"))
        {
            if (collision.GetComponent<Note>().GetNoteFlag())
            {
                theTimingManager.MissRecord();
                theEffect.JudgementEffect(4);
                theCombo.ResetCombo();
            }
```

ë…¸íŠ¸ë¥¼ ì™„ì „íˆ ë†“ì³ë²„ë ¸ì„ ë•Œ Miss íšŸìˆ˜ë¥¼ ì¹´ìš´íŒ… í•  ìˆ˜ ìˆë„ë¡ *theTimingManager.MissRecord();*

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}