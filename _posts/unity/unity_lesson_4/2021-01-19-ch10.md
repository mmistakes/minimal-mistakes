---
title:  "Ch 10. ë‚­ë– ëŸ¬ì§€ ì¶”ë½" 

categories:
  -  Unity Lesson 4
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2021-01-19
last_modified_at: 2020-01-19
---

ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° ê°•ì¢Œ] ë¦¬ë“¬ ê²Œì„** ìœ íŠœë¸Œ ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.youtube.com/watch?v=eLdiOCWPfPc&list=PLUZ5gNInsv_MCnum4bOQRI72LdGkIY3tY&index=2&t=231s)
{: .notice--warning}

## ğŸš€ ë‚­ë– ëŸ¬ì§€ ì¶”ë½

ë°”ë‹¥ì— ë³´ì´ì§€ ì•Šê³  ì•„ì£¼ í° ì½œë¼ì´ë”ë¥¼ ë‘ê³ , ì¶”ë½í•˜ì—¬ ì´ ì½œë¼ì´ë”ì— ë‹¿ìœ¼ë©´ ë‹¤ì‹œ ë¶€í™œì‹œí‚¤ëŠ” ì´ëŸ° ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ë©´ ëœë‹¤! 

### ğŸ“œPlayerController

```c#
bool isFalling = false; // ì¶”ë½ ì¤‘ì¸ì§€

Vector3 originPos = new Vector3(); // ì¶”ë½í•˜ê³  ë‚˜ë©´ ì›ë˜ ìœ„ì¹˜ë¡œ ë¶€í™œì‹œì¼œì•¼ í•˜ë¯€ë¡œ ê¸°ì–µí•˜ê¸° ìœ„í•´

Rigidbody myRigid;

    void Start()
    {
        myRigid = GetComponentInChildren<Rigidbody>(); // ì´ ìŠ¤í¬ë¦½íŠ¸ê°€ ë¶™ëŠ” ë¹ˆ ì˜¤ë¸Œì íŠ¸ì¸ Playerì˜ ìì‹ íë¸Œì— Rigidbodyê°€ ìˆë‹¤. íë¸Œì¸ ìì‹ì—ê²Œì„œ Rigidbody ê°€ì ¸ì˜´.
        originPos = transform.position; // ë¶€í™œ í¬ì¸íŠ¸ì´ì ì‹œì‘ ìœ„ì¹˜. ë¶€í™œ í¬ì¸íŠ¸ê°€ ì—¬ëŸ¬ê°œë©´ ê·¸ë•Œ ê·¸ë•Œë§ˆë‹¤ ìƒˆë¡­ê²Œ ì„¸íŒ…í•˜ê³  ì €ì¥í•´ì„œ ê¸°ì–µì‹œì¼œë†“ìœ¼ë©´ ë  ê²ƒ ê°™ë‹¤.
    }


    void Update()
    {
        CheckFalling(); // í˜¹ì‹œ ì¶”ë½ì¤‘ì€ ì•„ë‹Œì§€ ì²´í¬

        if (Input.GetKeyDown(KeyCode.A) || Input.GetKeyDown(KeyCode.D) ||
            Input.GetKeyDown(KeyCode.W) || Input.GetKeyDown(KeyCode.S))
        {
            // ì¶”ë½ ì¤‘ì´ ì•„ë‹ë•Œë§Œ íë¸Œê°€ ì´ë™,íšŒì „,ë°˜ë™ì„ í•  ìˆ˜ ìˆë‹¤. !isFalling
            if (canMove && s_canPressKey && !isFalling)
            {
                Calc();

                // íŒì • ì²´í¬ : Perfect, Cool, Good, Bad ì¼ ë•Œë§Œ True
                if (theTimingManager.CheckTiming())
                {
                    StartAction();
                }
            }
        }
    }

    void CheckFalling()
    {
        if (!isFalling && canMove) // ì™„ì „íˆ ë©ˆì¶”ê³  ì²´í¬ + ë–¨ì–´ì§€ëŠ” ì¤‘ì´ ì•„ë‹ ë•Œë§Œ ì²´í¬í•˜ë„ë¡
        {
            // '!' ì£¼ëª©! í”Œë ˆì´ì–´ì—ì„œ ì•„ë˜ë¡œ Raycastë¥¼ ìˆì„ ë•Œ ì•„ë¬´ ê²ƒë„ ì—†ë‹¤ë©´ ì¶”ë½ ì¤‘ì¸ê²ƒì´ë‹¤. 
            // ì¶”ë½ ì¤‘ì´ ì•„ë‹ˆë¼ë©´ ìŠ¤í…Œì´ì§€ì˜ Plate ì™€ ì¶©ëŒë˜ì•¼ ì •ìƒì´ë‹¤.
            if (!Physics.Raycast(transform.position, Vector3.down, 1.1f))
            {
                Falling();
            }
        }
    }

    // ì¶”ë½ ì¤‘ì´ë¼ë©´ ë¬¼ë¦¬ì ìœ¼ë¡œ ì¶”ë½í•˜ë„ë¡ ìì‹ íë¸Œì˜ ì¤‘ë ¥ í™œì„±í™”, ë¬¼ë¦¬ í™œì„±í™”
    void Falling()
    {
        isFalling = true;
        myRigid.useGravity = true;
        myRigid.isKinematic = false;
    }

    // ì´ì œ ì¶”ë½ì´ ëë‚˜ì„œ(ë°‘ì— ê¹”ë¦° Deadzone Colliderì— ì¶©ëŒ) ë¶€í™œí•´ì•¼ í•œë‹¤ë©´ 
    // ìì‹ íë¸Œì˜ ì¤‘ë ¥ ë‹¤ì‹œ ë¹„í™œì„±í™”, ë¬¼ë¦¬ ë¹„í™œì„±í™”
    // ì›ë˜ ìœ„ì¹˜ë¡œ ë¦¬ì…‹
    // âœ¨ë–¨ì–´ì§„ê±´ Rigidbodyê°€ ë¶™ì–´ìˆëŠ” ìì‹ íë¸Œì´ê³  ë¶€ëª¨ì¸ ë¹ˆ ì˜¤ë¸Œì íŠ¸ëŠ” ì›ë˜ ìœ„ì¹˜ ê·¸ëŒ€ë¡œì— ìˆë‹¤. ë”°ë¼ì„œ ìì‹ íë¸Œë„ ë‹¤ì‹œ ë¶€ëª¨ ìœ„ì¹˜ì— ë¶™ì—¬ì£¼ì–´ì•¼ í•˜ë¯€ë¡œ localPositionì„ ì›ì ìœ¼ë¡œ ë¦¬ì…‹í•˜ëŠ” ê²ƒì´ë‹¤.
    public void ResetFalling()
    {
        isFalling = false;
        myRigid.useGravity = false;
        myRigid.isKinematic = true;

        transform.position = originPos;
        realCube.localPosition = Vector3.zero;
    }
```

<br>


### ğŸ“œ DeadZone

![image](https://user-images.githubusercontent.com/42318591/105009292-a58fab00-5a7d-11eb-8d9e-81342f905338.png)

![image](https://user-images.githubusercontent.com/42318591/105009335-b04a4000-5a7d-11eb-8fe4-0b96cf9286be.png)

ë¹ˆ ì˜¤ë¸Œì íŠ¸ `DeadZone`ì„ ë§Œë“¤ê³  ëŒ€ë¹µ í° Box Colliderë¥¼ ë¶™ì¸ë‹¤. <u>í”Œë ˆì´ì–´ê°€ ì¶”ë½í•˜ì—¬ ì´ ê³³ì— ë‹¿ìœ¼ë©´ ë‹¤ì‹œ ì›ë˜ ìœ„ì¹˜ë¡œ ë¶€í™œì‹œí‚¤ê¸°ë¡œ í•¨.</u>


```c#
public class DeadZone : MonoBehaviour
{
    private void OnTriggerEnter(Collider other)
    {
        if (other.CompareTag("Player"))
        {
            other.GetComponentInParent<PlayerController>().ResetFalling();
        }
    }
}
```

ë°ë“œì¡´ì˜ ì½œë¼ì´ë”ê°€ "Player"ì™€ ì¶©ëŒí–ˆë‹¤ëŠ” ê²ƒì€ `Player`ì˜ ìì‹ì¸ `realCube`ì™€ ì¶©ëŒí–ˆë‹¤ëŠ” ê²ƒì´ë‹¤. `realCube`ì˜ ë¶€ëª¨ì¸ `Player`ì˜ 
ğŸ“œPlayerControllerë¥¼ í˜¸ì¶œí•˜ì—¬ *ResetFalling()* í•¨ìˆ˜ í˜¸ì¶œë¡œ ë¶€í™œ.


***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}