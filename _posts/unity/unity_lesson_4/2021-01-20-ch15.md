---
title:  "Ch 15. ë°ì´í„° ì„¸ì´ë¸Œ & ë¡œë“œ" 

categories:
  -  Unity Lesson 4
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2021-01-20
last_modified_at: 2021-01-20
---

ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° ê°•ì¢Œ] ë¦¬ë“¬ ê²Œì„** ìœ íŠœë¸Œ ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.youtube.com/watch?v=eLdiOCWPfPc&list=PLUZ5gNInsv_MCnum4bOQRI72LdGkIY3tY&index=2&t=231s)
{: .notice--warning}


## ğŸš€ ë°ì´í„° ì„¸ì´ë¸Œ & ë¡œë“œ

ë¹ˆ ì˜¤ë¸Œì íŠ¸ `DataBase`ë¥¼ ë§Œë“¤ê³  ê±°ê¸°ì— ğŸ“œDataBaseManager ë¥¼ ë¶™ì„. ìŠ¤í…Œì´ì§€ë³„ë¡œ ì ìˆ˜ë¥¼ ì €ì¥í•  ê²ƒ.

### ğŸ“œ DataBaseManager

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class DataBaseManager : MonoBehaviour
{
    public int[] score;  // ë…¸ë˜ë³„ ìµœê³  ì ìˆ˜ë“¤ ì´ ë°°ì—´ì— ì €ì¥

    private void Start()
    {
        LoadScore();
    }

    public void SaveScore()
    {
        for(int i = 0; i < score.Length; i++)
            PlayerPrefs.SetInt("Score1", score[i]);
    }

    public void LoadScore()
    {
        if (PlayerPrefs.HasKey("Score1"))
        {
            for (int i = 0; i < score.Length; i++)
                PlayerPrefs.GetInt("Score1", score[i]);
        }
    }
}

```


<br>

### ğŸ“œResult

```c#
    int currentSong = 0;
    public void SetCurrentSong(int p_songNum) { currentSong = p_songNum; }

    public void ShowResult()
    {
        //...
        if (t_currentScore > theData.score[currentSong])
        {
            theData.score[currentSong] = t_currentScore;
            theData.SaveScore();
        }
```

ê²°ê³¼ì°½ì„ ë„ìš¸ ë•Œ, ê¸°ì¡´ì— ì €ì¥ë˜ì–´ ìˆë˜ ìµœê³  ì ìˆ˜ *theData.score[currentSong]* ë³´ë‹¤ ì´ë²ˆ ê²Œì„ì—ì„œì˜ ì ìˆ˜ *t_currentScore* ê°€ ë” ë†’ë‹¤ë©´ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•œë‹¤!


<br>

### ğŸ“œ GameManager

```c#
    public void GameStart(int p_songNum, int p_bpm)
    {
        //..
        result.SetCurrentSong(p_songNum);
```

ê²Œì„ì´ ì‹œì‘ë˜ë©´ í˜„ì¬ ë…¸ë˜ê°€ ë­”ì§€ ì„¸íŒ…


<br>

### ğŸ“œ StageMenu

```c#
    private void OnEnable()
    {
        if (theData == null)
            theData = FindObjectOfType<DataBaseManager>();
        SettingSong();
        theResult = FindObjectOfType<Result>();
    }
    
    void SettingSong()
    {
        txtSongName.text = songList[currentSong].name;
        txtSongComposer.text = songList[currentSong].composer;
        txtSongScore.text = string.Format("{0:#,##0}", theData.score[currentSong]);
```

- *Start*ë¥¼ *OnEnable* ë¡œ ë³€ê²½í•˜ì˜€ë‹¤.
  - ìŠ¤í…Œì´ì§€ ë©”ë‰´ëŠ” ê²Œì„ì´ ì‹œì‘ë˜ë©´ ë¹„í™œë˜ì—ˆë‹¤ê°€ ê²Œì„ì´ ëë‚˜ê³  ë©”ì¸ë©”ë‰´ë¡œ ëŒì•„ê°€ê±°ë‚˜ í•˜ë©´ ë‹¤ì‹œ í™œì„±í™”ëœë‹¤. ë”°ë¼ì„œ ìŒì•…ì„ ë‹¤ì‹œ ì„¸íŒ…í•˜ê¸° ìœ„í•´ì„  *Start*ë³´ë‹¤ *OnEnable*ì´ ì ì ˆí•˜ë‹¤.
- ìŠ¤í…Œì´ì§€ ë©”ë‰´ì—ì„œ ë³´ì´ëŠ” í•´ë‹¹ ìŒì•…ì˜ ì ìˆ˜ë¥¼ DBì—ì„œ ê°–ê³  ì˜¤ê¸°.

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}