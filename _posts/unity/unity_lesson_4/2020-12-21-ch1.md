---
title:  "Ch 1. λ…ΈνΈ λ§λ“¤κΈ°, λ…ΈνΈ νμ •" 

categories:
  -  Unity Lesson 4
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-12-21
last_modified_at: 2020-12-21
---

μΌ€μ΄λ””λ‹μ **[μ λ‹ν‹° κ°•μΆ] λ¦¬λ“¬ κ²μ„** μ νλΈ κ°•μλ¥Ό λ“£κ³  μ •λ¦¬ν• ν•„κΈ°μ…λ‹λ‹¤. π€  
[π κ°•μ λ“¤μΌλ¬ κ°€κΈ° Click](https://www.youtube.com/watch?v=eLdiOCWPfPc&list=PLUZ5gNInsv_MCnum4bOQRI72LdGkIY3tY&index=2&t=231s)
{: .notice--warning}

## π€ μ•λ“λ΅μ΄λ“ ν™κ²½ μ„Έν…

- λΉλ“ μ„Έν… 
  - UnityHub μ—μ„ Android Build Supportμ™€ λ”λ¶μ–΄ SDK, JDK κΉμ§€ μ„¤μΉ
  - Build Setting μ—μ„ μ•λ“λ΅μ΄λ“λ΅ switch platform
- ν•΄μƒλ„λ” 1920 x 1080 (ν° κΈ°μΆ…λ§λ‹¤ λ‹¤λ¥΄μ§€λ§ λ³΄ν†µμ€ μ΄λ ‡λ‹¤. λ…ΈνΈ 9λ¶€ν„°λ” λ” ν° ν•΄μƒλ„ ν•„μ”)
- μ΄λ―Έμ§€λ“¤μ€ λ¨λ‘ Sprite νƒ€μ…μΌλ΅

### BGM μ‚¬μ΄λ“ μ„Έν…

![image](https://user-images.githubusercontent.com/42318591/102728450-51ef4c00-436f-11eb-9958-1576340891e8.png)

- BGMμ‚¬μ΄λ“λ“¤μ€
  - Force To Mono μ²΄ν¬
    - λ¨λ…Έμ™€ μ¤ν…λ μ¤μ μ°¨μ΄ 
      - μ¤ν…λ μ¤ : ν•λ‚ μ΄μƒμ μ±„λ„μ„ μ‚¬μ©ν•λ‹¤. μλ¥Ό λ“¤μ–΄ μ™Όμ½ μ΄μ–΄ν°, μ¤λ¥Έμ½ μ΄μ–΄ν° μ†λ¦¬ λ‹¤λ¥Έ μ΄λ° κ²½μ°λ” 2 κ°μ μ±„λ„μ„ μ‚¬μ©ν•λ” μ¤ν…λ μ¤ μ‚¬μ΄λ“. λ”°λΌμ„ λ” ν„μ¥κ° μλ‹¤.
      - λ¨λ…Έ : ν•λ‚μ μ±„λ„λ§ μ‚¬μ©. μ–΄λ–¤ μ¤ν”Όμ»¤λ¥Ό μ΄μ©ν•λ“  λ¨λ“  κ³³μ—μ„ λ™μΌν• μ‚¬μ΄λ“κ°€ μ¶λ ¥λκ² λλ‹¤. 
    - μ»΄ν“¨ν„°λ” μ¤ν”Όμ»¤λ¥Ό μ—¬λ¬κ° λ‘ μλ„ μλ” ν™κ²½μ΄λΌ μ¤ν…λ μ¤ μ‚¬μ΄λ“κ°€ μΆ‹μ§€λ§ λ¨λ°”μΌμ€ μ¤ν”Όμ»¤κ°€ ν•λ‚λΌ λ¨λ…Έ μ‚¬μ΄λ“λ΅ ν•΄λ„ μ¶©λ¶„ν•λ‹¤.
      - μ¤ν…λ μ¤κ°€ μ©λ‰λ„ ν¬κΈ° λ•λ¬Έμ— κµ³μ΄ μ¤ν”Όμ»¤κ°€ ν•λ‚μΈ λ¨λ°”μΌμ—μ„ μ¤ν…λ μ¤λ¥Ό μ„ νƒν•  μ΄μ κ°€ μ—†λ‹¤. λ¨λ°”μΌμ€ μ©λ‰ μ¤„μ΄λ”κ² μƒλ…! 
  - Load Typeμ€ Streaming 
    - λ””μ¤ν¬μ—μ„ λ°”λ΅ μ½μ–΄λ“¤μ—¬μ„ μ¬μƒ. λ°μ΄ν„°λ¥Ό μ½μ–΄ λ“¤μ΄λ” κ³³μ΄ λ©”λ¨λ¦¬κ°€ μ•„λ‹ λ””μ¤ν¬.
      - BGMμ€ μ©λ‰λ„ ν¬κ³  κΈΈμ΄λ„ κΈ΄ μ‚¬μ΄λ“μ΄λ©° μ§€μ—° μ‹κ°„ μΆ€ μμ–΄λ„ μƒκ΄€ μ—†κΈ° λ•λ¬Έμ— λ©”λ¨λ¦¬μ— μ μ¬ν•΄μ„ μ¬μƒν•κΈ°λ³΄λ‹¤λ” λ””μ¤ν¬λ΅λ¶€ν„° μ½μ–΄λ“¤μ΄λ”κ² ν¨μ¨μ μΈ λ©”λ¨λ¦¬ μ‚¬μ©μƒ μΆ‹μ„ κ²ƒμ΄λ‹¤.
    - [μ¶μ² λ° μ¤λ””μ¤ ν΄λ¦½ μ„¤μ • μ°Έκ³ ν•κΈ°](https://overworks.github.io/unity/2018/09/22/unity-audio-clip-import-guide.html) 
  - νμΌ ν¬κΈ°λ¥Ό μ¤„μ΄κ³  μ‹¶λ‹¤λ©΄ ν€„λ¦¬ν‹° κ°’μ„ λ‚®μ¶°λ„ μΆ‹λ‹¤.


<br>

## π€ λ…ΈνΈ UI λ§λ“¤κΈ°

![image](https://user-images.githubusercontent.com/42318591/102734504-4c9bfc80-4383-11eb-80bf-9d0d6c1e141f.png)

> μΊ”λ²„μ¤μ Scale Mode λ¥Ό "Scale With Screen Size" λ΅ ν•λ‹¤.

- λ¨λ°”μΌμ€ μ΄ λ¨λ“κ°€ μ λ‹Ήν•λ‹¤. μΊ”λ²„μ¤μ μ‚¬μ΄μ¦κ°€ μ λ™μ μΌλ΅ λ§μ¶°μ§€κ² ν•λ‹¤.
  - *Reference Resoulution* κ·Έ κΈ°μ¤€μ΄ λ  ν•΄μƒλ„
    - ν„μ¬ μ“°κ³  μλ” ν•΄μƒλ„μΈ 1920 x 1080 μ„ κΈ°μ¤€μΌλ΅ ν•λ‹¤.
    - μ΄ ν•΄μƒλ„λ¥Ό κΈ°μ¤€μΌλ΅ μΊ”λ²„μ¤ μ‚¬μ΄μ¦κ°€ μ λ™μ μΌλ΅ κ²½μ°μ— λ”°λΌ λ³€ν•κ² λλ‹¤.
  - *Math*
    - Width, Height λ‘ μ¤‘μ—μ„ μ–΄λ μ½μΌλ΅ λ” κ°’μ„ λ•΅κΈ°λλƒμ— λ”°λΌ κ°€λ΅ μ„Έλ΅ μ¤‘ μ–΄λ μ½μ„ ν¬κΈ° λ³€ν™”μ‹ μ™κ³΅ν•μ§€ μ•κ² ν• κ±΄μ§€λ¥Ό κ²°μ •ν•λ‹¤.
    - μΊ”λ²„μ¤μ μ„Έλ΅ ν¬κΈ°λ” μ μ§€ν•κ³  μ‹¶μΌλ―€λ΅ Height μ½μΌλ΅ μµλ€λ΅ λμ–΄λ‹Ήκ²¨ 1 λ΅ λ§μ¶λ‹¤. 


![image](https://user-images.githubusercontent.com/42318591/102735084-d26c7780-4384-11eb-94e2-39f3fc365893.png)

- `Note` μ „μ²΄λ¥Ό λ¬¶λ” λΉ μ¤λΈμ νΈ
  - π“NoteManager π‘‰ λ…ΈνΈλ“¤ μ „μ²΄μ μΌλ΅ κ΄€λ¦¬. λ…ΈνΈλ¥Ό μƒμ„±μ‹ν‚¤κ³  μ κ±°ν•¨.
  - π“TimingManager π‘‰ μ „μ²΄ λ…ΈνΈλ“¤μ νμ • μ²λ¦¬ (Perfect, Bad κ°™μ€)
  - Box Collider 2D
    - λ…ΈνΈκ°€ ν™”λ©΄ λ°–μ„ λ²—μ–΄λ‚λ©΄ μ‚­μ λμ•Ό ν•λ‹¤. λ”°λΌμ„ ν™”λ©΄ μ¤λ¥Έμ½ λ°”κΉ¥μ— μ΄λ΅μƒ‰ μ €κ² λ°”λ΅ λ°•μ¤ μ½λΌμ΄λ”λ‹¤. μ €κΈ°μ— λ…ΈνΈκ°€ λ‹ΏμΌλ©΄(Trigger μ¶©λ) μ‚­μ λλ„λ΅ ν•  κ²ƒμ΄λ‹¤. 
      - `IsTrigger` μ²΄ν¬
- `Container` κ²€μ • λ°°κ²½μ΄λ―Έμ§€
- `Line` λΉ¨κ°„ μ¤„ μ΄λ―Έμ§€
- `CenterFlame` κ°€μ΄λ° μ΄λ―Έμ§€. μ €κΈ°μ— λ…ΈνΈκ°€ λ“¤μ–΄κ°€λ” μκ°„ ν„°μΉν•΄μ•Ό λ¨! 
  - Box Collider 2D
    - λ…ΈνΈμ™€ μ¶©λ νμ •
  - Audio Source
  - π“CenterFlame
    - μ²« λ²μ§Έ λ…ΈνΈμ™€ μ¶©λλλ©΄ BGM μ¬μƒ
- `NoteAppearLocation` λΉ μ¤λΈμ νΈ
  - λ…ΈνΈκ°€ μƒμ„±λ  μ„μΉ. ν™”λ©΄ λ°– μ™Όμ½μ— μ„μΉν•
- `PlayerContorller` λΉ μ¤λΈμ νΈ
  - π“PlayerConotrller
    - λ§¤ ν”„λ μ„λ§λ‹¤ Space Bar μ…λ ¥μ„ μ²΄ν¬ν•μ—¬ μ¤νμ΄μ¤λ°” μ…λ ¥μ΄ λ“¤μ–΄μ¤λ©΄ π“TimingManagerμ νμ • μ²΄ν¬ μ‹¤ν–‰
      - λ‚μ¤‘μ— μ¤νμ΄μ¤λ°” λ§κ³  λ¨λ°”μΌμ— λ§λ” ν„°μΉλ΅ λ°”κΏ€ κ²ƒ

![image](https://user-images.githubusercontent.com/42318591/102735238-3b53ef80-4385-11eb-8503-89c64f27eb6c.png)

> μ•„λ μ΄λ―Έμ§€λ“¤μ€ **μ „λ¶€ ν¬λ…ν•κ² λ””ν΄νΈ**λ‹¤. κµ¬λ¶„μ„ μ„ν•΄ μƒ‰μ„ λ„£μ–΄μ¤.

- `PerfectRect` μ΄λ―Έμ§€ : λ…Έλ€ μ΄λ―Έμ§€. λ…ΈνΈκ°€ μ΄ μμ—­μ— λ“¤μ–΄μ™€ μμ„ λ• ν„°μΉν•λ©΄ Perfect νμ •
- `CoolRect` μ΄λ―Έμ§€ : νλ€ μ΄λ―Έμ§€. λ…ΈνΈκ°€ μ΄ μμ—­μ— λ“¤μ–΄μ™€ μμ„ λ• ν„°μΉν•λ©΄ Cool νμ •. Perfectλ³΄λ‹¤ λ„“μ€ λ²”μ„.
- `GoodRect` μ΄λ―Έμ§€ : μ΄λ΅ μ΄λ―Έμ§€. λ…ΈνΈκ°€ μ΄ μμ—­μ— λ“¤μ–΄μ™€ μμ„ λ• ν„°μΉν•λ©΄ Good νμ •. Coolλ³΄λ‹¤ λ„“μ€ λ²”μ„.
- `BadRect` μ΄λ―Έμ§€ : μ£Όν™© μ΄λ―Έμ§€. λ…ΈνΈκ°€ μ΄ μμ—­μ— λ“¤μ–΄μ™€ μμ„ λ• ν„°μΉν•λ©΄ Bad νμ •. Goodλ³΄λ‹¤ λ„“μ€ λ²”μ„.
- μ•„λ¬΄ μ΄λ―Έμ§€μ—λ„ νμ •λμ§€ μ•μ•λ‹¤λ©΄ Miss νμ •ν•κ² ν•  κ²ƒ

![image](https://user-images.githubusercontent.com/42318591/102735275-51fa4680-4385-11eb-8e60-51e5202ffc47.png)

μƒμ„±λ  λ…ΈνΈ ν”„λ¦¬νΉμ΄λ‹¤. 

- νƒκ·Έλ” "Note"
- π“Note
  - ν•λ‚ ν•λ‚μ λ…ΈνΈλ§λ‹¤ μ‹¤ν–‰λμ•Όν•  μ‚¬ν•­λ“¤
    - λ…ΈνΈλ” λ§¤ ν”„λ μ„λ§λ‹¤ μ¤λ¥Έμ½μΌλ΅ μ›€μ§μ—¬μ•Ό ν•λ‹¤.
    - λ…ΈνΈλ” ν”λ μ΄μ–΄κ°€ μ¤νμ΄μ¤λ°” λ„λ¥΄λ©΄ μ΄λ―Έμ§€λ¥Ό λΉ„ν™μ„±ν™” ν•΄μ•Ό ν•λ‹¤.
      - λ…ΈνΈ μ‚­μ λ” ν™”λ©΄ λ°”κΉ¥μ—μ„ μ΄λ£¨μ–΄μ Έμ•Ό ν•κ³  μ¤νμ΄μ¤λ°” λ„λ¥Όμ‹μ—” μ„μ‹μ μΌλ΅ λ…ΈνΈ μ΄λ―Έμ§€λ§ μ•λ³΄μ΄κ² ν•λ‹¤. 
  - Box Collider 2D
    - κ°€μ΄λ°μ—λ“  ν™”λ©΄λ°–μ—μ„λ“  μ¶©λ νμ •μ΄ ν•„μ”ν•λ―€λ΅
    - `IsTrigger`μ²΄ν¬
  - Rigidbody 2D
    - Trigger μ¶©λμ΄ λ°μƒν•κΈ° μ„ν•΄μ„  ν•μ½μ— Rigidbody κ°€ λ¶™μ–΄μμ–΄μ•Ό ν•λ―€λ΅
    - Typeμ„ `Kinematic`μΌλ΅ ν•μ—¬ λ¬Όλ¦¬ μ²λ¦¬ X
    - `Simulated` μ²΄ν¬
      - μ΄κ² λ°λ“μ‹ μ²΄ν¬ λμ–΄μ•Ό λ‹¤λ¥Έ Rigidbody νΉμ€ Collider μ™€ μƒνΈμ‘μ©μ΄ κ°€λ¥ν•λ‹¤. 
      - μ²΄ν¬ ν•΄μ  ν•λ©΄ λ¬Όλ¦¬ μ²λ¦¬ λμ§€ μ•μ
    - `Use FUll Kinematic Contacts` μ²΄ν¬
      - μ΄ μ„¤μ •μ„ μ²΄ν¬ν•λ©΄ Rigidbody 2Dμ λ¨λ“  Body Typeκ³Ό μ¶©λ μƒνΈμ‘μ© ν•  μ μλ‹¤.
      - μ΄κ² μ²΄ν¬ ν•΄μ λλ©΄ Kinematicμ΄ μ•„λ‹ Dynamic νƒ€μ…μΈ κ²½μ°μ™€λ§ μ¶©λ μƒνΈμ‘μ© λλ‹¤.

<br>

## π€ μ¤ν¬λ¦½νΈ

### π“Note

> λ…ΈνΈ ν”„λ¦¬νΉμ— λ¶™λ”λ‹¤.

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class Note : MonoBehaviour
{
    public float noteSpeed = 400;
    private Image noteImage;

    void Start()
    {
        noteImage = GetComponent<Image>();
    }

    public void HideNote()
    {
        noteImage.enabled = false;
    }

    void Update()
    {
        transform.localPosition += Vector3.right * noteSpeed * Time.deltaTime;
    }
}
```

- λ§¤ ν”„λ μ„λ§λ‹¤ μ¤λ¥Έμ½μΌλ΅ 1μ΄μ— `noteSpeed`λ§νΌ μ΄λ™ν•λ‹¤.

<br>

### π“CenterFlame

> `CenterFlame` μ΄λ―Έμ§€μ— λ¶™λ”λ‹¤.

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class CenterFlame : MonoBehaviour
{
    AudioSource myAudio;
    bool musicStart = false;

    void Start()
    {
        myAudio = GetComponent<AudioSource>();
    }

    private void OnTriggerEnter2D(Collider2D collision)
    {
        if (!musicStart)
        {
            if (collision.CompareTag("Note"))
            {
                myAudio.Play();
                musicStart = true;
            }
        }
    }
}
```

κ°€μ΄λ°μ— μ²« λ²μ§Έ λ…ΈνΈκ°€ λ“¤μ–΄μ™€ Trigger μ¶©λμ΄ μΌμ–΄λ‚λ©΄ BGMμ„ μ¬μƒν•λ‹¤. 

<br>

### π“TimingManager


```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class TimingManager : MonoBehaviour
{
    public List<GameObject> boxNoteList = new List<GameObject>(); 

    [SerializeField] Transform center = null; // νμ • λ²”μ„μ μ¤‘μ‹¬
    [SerializeField] RectTransform[] timingRect = null; // λ‹¤μ–‘ν• νμ • λ²”μ„
    Vector2[] timingBoxs = null; // νμ • λ²”μ„ μµμ†κ°’ x, μµλ€κ°’ y
```

- `boxNoteList`
  - μƒμ„±λ λ…ΈνΈλ“¤μ„ λ‹΄μ.
    - π“NoteManager μ—μ„ λ…ΈνΈ ν•λ‚ν•λ‚ μƒμ„±ν•  λ•λ§λ‹¤ μ΄ λ¦¬μ¤νΈμ— μ¶”κ°€ν•΄μ¤„ κ²ƒμ΄λ‹¤.
  - μ–΄λ νμ • λ²”μ„(Perfect, Bad λ“±λ“±)μ— μλ”μ§€ λ¨λ“  λ…ΈνΈλ“¤μ„ λΉ„κµν•΄μ•Ό ν•¨
- `center`
  - νμ • λ²”μ„μ μ¤‘μ‹¬.
  - μ¦‰, `CenterFlame`μ΄ λ“¤μ–΄κ°€κ² λ¨
- `timingRect`
  - Perfect, Cool, Good, Bad μ΄λ ‡κ² 4 κ°μ νμ • λ²”μ„ μ΄λ―Έμ§€κ°€ λ“¤μ–΄κ°„λ‹¤.
  - κ°κ°μ λ²”μ„ μ•μ— λ“¤μ–΄μ¤λ©΄ κ·Έλ ‡κ² νμ •ν•λ‹¤.
- `timingBoxs`
  - Perfect, Cool, Good, Bad μ΄λ ‡κ² 4 κ°μ νμ • λ²”μ„μ— λ§μ¶°μ„ 4 μ ν¬κΈ°λ¥Ό κ°–κ² λ  κ²ƒ
  - Vector2 μΈλ° x λ” νμ • λ²”μ„μ μµμ†κ°’ y λ” νμ • λ²”μ„μ μµλ€κ°’μΌλ΅ μ“Έ κ²ƒ.
    - μ²« λ²μ§Έ μ›μ†.x π‘‰ Perfect μ μµμ†κ°’, μ²« λ²μ§Έ μ›μ†.y π‘‰ Perfect μ μµλ€κ°’ μ΄λ°μ‹
    - νμ • λ²”μ„μ μµμ†κ°’μ€ μ¤‘μ‹¬μ—μ„ νμ • λ²”μ„ μ΄λ―Έμ§€ λ„λΉ„μ μ λ°μ„ λΊ€ κ°’μ΄ λκ² κ³ 
    - νμ • λ²”μ„μ μµλ€κ°’μ€ μ¤‘μ‹¬μ—μ„ νμ • λ²”μ„ μ΄λ―Έμ§€ λ„λΉ„μ μ λ°μ„ λ”ν• κ°’μ΄ λκ² λ‹¤.
    - μ„ νμ • λ²”μ„ μ•μ— λ“¤μ–΄μ¤λ©΄ ν•΄λ‹Ή νμ •μ„ λ°›μ•λ‹¤κ³  λ³Ό μ μλ‹¤.

```c#
    void Start()
    {
        timingBoxs = new Vector2[timingRect.Length];

        for (int i = 0; i < timingRect.Length; i++)
        {
            timingBoxs[i].Set(center.localPosition.x - timingRect[i].rect.width / 2,
                              center.localPosition.x + timingRect[i].rect.width / 2);
        }
    }

    public void CheckTiming()
    {
        for(int i = 0; i < boxNoteList.Count; i++)
        {
            float t_notePosX = boxNoteList[i].transform.localPosition.x;

            // νμ • μμ„ : Perfect -> Cool -> Good -> Bad
            for (int j = 0; j < timingBoxs.Length; j++)
            {
                if (timingBoxs[j].x <= t_notePosX && t_notePosX <= timingBoxs[j].y)
                {
                    boxNoteList[i].GetComponent<Note>().HideNote();
                    boxNoteList.RemoveAt(i);

                    switch(j)
                    {
                        case 0:
                            Debug.Log("Perfect");
                            break;
                        case 1:
                            Debug.Log("Cool");
                            break;
                        case 2:
                            Debug.Log("Good");
                            break;
                        case 3:
                            Debug.Log("Bad");
                            break;
                    }
                    return;
                }
            }
        }

        Debug.Log("Miss");
    }
}
```

- *Start*
  - κ²μ„μ΄ μ‹μ‘λλ©΄ `timingBoxs`λ„ `timingRect`μ™€ ν¬κΈ°κ°€ λ™μΌν• λ°°μ—΄λ΅ λ§λ“¤μ–΄μ¤
  - `timingBoxs`μ x, y κ°’ μ„Έν…
    - `timingBoxs[2].x` π‘‰ Good νμ • λ²”μ„μ μµμ†κ°’. μ¦‰ μ¤‘μ‹¬μ„μΉμ—μ„ Good νμ • μ΄λ―Έμ§€ λ„λΉ„μ μ λ° λΊ€ κ°’.
    - `y`λ” κ·Έ λ°λ€
- *CheckTiming*
  - ν„μ¬ κ²€μ‚¬ν•΄μ•Ό ν•λ” λ…Έλ“λ“¤μ„ μ „λ¶€ κ²€μ‚¬ν•λ©΄μ„ νμ •ν•λ‹¤. `boxNoteList` λ¦¬μ¤νΈ κ²€μ‚¬
  - *if (timingBoxs[j].x <= t_notePosX && t_notePosX <= timingBoxs[j].y)*
    - ν•΄λ‹Ή λ²”μ„ μ•μ— λ“¤μ–΄μ¤λ©΄ κ·Έ νμ •μΈ κ²ƒμ΄λ‹¤.
      - μ΄λ―Έμ§€λ¥Ό μ•λ³΄μ΄κ² ν•λ‹¤. (μ‚­μ λ” ν™”λ©΄ λ°–μ—μ„ μ΄λ£¨μ–΄μ§ κ²ƒ)
      - λ¦¬μ¤νΈμ—μ„ μ‚­μ 
    - νμ • ν–μΌλ‹ return ν•μ—¬ λ‚κ°„λ‹¤. ν•λ² Cool νμ • λ°›μ•μΌλ©΄ λ” μ΄μƒ λ‹¤μ νμ • κ²€μ‚¬ν•  ν•„μ”κ°€ μ—†κΈ° λ•λ¬Έ
  - 4 κ°μ νμ • μ΄λ―Έμ§€ λ²”μ„μ— λ‹¤ λ“¤μ–΄κ°€μ§€ λ»ν–λ‹¤λ©΄ Miss μΈ κ²ƒμ΄λ‹¤.

![image](https://user-images.githubusercontent.com/42318591/102737053-bcad8100-4389-11eb-9c97-6edf166d9dc8.png)


<br>

### π“PlayerController

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class PlayerController : MonoBehaviour
{
    TimingManager theTimingManager;

    void Start()
    {
        theTimingManager = FindObjectOfType<TimingManager>();
    }

    void Update()
    {
        if (Input.GetKeyDown(KeyCode.Space))
        {
            theTimingManager.CheckTiming(); // νμ • μ²΄ν¬
        }
    }
}

```

μ¤νμ΄μ¤λ°” μ…λ ¥μ΄ λ“¤μ–΄μ¤λ©΄ π“TimingManagerμ *CheckTiming* ν•¨μλ¥Ό νΈμ¶ν•μ—¬ κ·Έ μ‹μ μ—μ„μ λ¨λ“  λ…ΈνΈλ“¤μ„ νμ • κ²€μ‚¬ν•λ‹¤.

<br>

### π“NoteManateer

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class NoteManager : MonoBehaviour
{
    public int bpm = 0; // λ¦¬λ“¬κ²μ„ λΉ„νΈ λ‹¨μ„. 1λ¶„λ‹Ή λ‡ λΉ„νΈμΈμ§€.
    double currentTime = 0d; // λ¦¬λ“¬ κ²μ„μ€ μ¤μ°¨ μ μ€κ² μ¤‘μ”ν•΄μ„ floatλ³΄λ‹¨ double

    [SerializeField] Transform tfNoteAppear = null; // λ…ΈνΈ μƒμ„± μ„μΉ μ¤λΈμ νΈ
    [SerializeField] GameObject goNote = null; // μƒμ„±ν•  λ…ΈνΈ ν”„λ¦¬νΉ

    TimingManager theTimingManager;

    void Start()
    {
        theTimingManager = GetComponent<TimingManager>();
    }

    void Update()
    {
        currentTime += Time.deltaTime;

        if (currentTime >= 60d / bpm) 
        {
            GameObject t_note = Instantiate(goNote, tfNoteAppear.position, Quaternion.identity);
            t_note.transform.SetParent(this.transform);
            t_note.transform.localScale = new Vector3(1f, 1f, 0f);

            theTimingManager.boxNoteList.Add(t_note);
            
            currentTime -= 60d / bpm;  // currentTime = 0 μΌλ΅ λ¦¬μ…‹ν•΄μ£Όλ©΄ μ•λλ‹¤. 
        }            
    }

    private void OnTriggerExit2D(Collider2D collision)
    {
        if (collision.CompareTag("Note"))
        {
            theTimingManager.boxNoteList.Remove(collision.gameObject);
            Destroy(collision.gameObject);
        }
    }
}

```

- *if (currentTime >= 60d / bpm)*
  - 60/bpm = ν• λΉ„νΈλ‹Ή μ‹κ°„ (120bpmμ΄λΌλ©΄ ν• λΉ„νΈλ‹Ή μ†μ” μ‹κ°„μ€ 0.5μ΄)
  - μ¦‰, 60/bpm λ§λ‹¤ λ…ΈνΈλ¥Ό μƒμ„±ν•λ‹¤. ν• λΉ„νΈλ§λ‹¤ λ…ΈνΈλ¥Ό μƒμ„±ν•λ” κ²ƒ
- λ…ΈνΈ μƒμ„± ν›„ λ°λ“μ‹ μƒμ„±ν• λ…ΈνΈμ λ¶€λ¨λ¥Ό μ΄ μ¤ν¬λ¦½νΈκ°€ λ¶™λ” μ¤λΈμ νΈμ΄μ μΊ”λ²„μ¤μ μμ‹μΈ `Note`μ μμ‹μΌλ΅ λ„£μ–΄μ¤€λ‹¤.
  - <u>β¨λ…ΈνΈλ” μ΄λ―Έμ§€λ‹¤. μ΄λ¬ν• UIλ“¤μ€ λ°λ“μ‹ μΊ”λ²„μ¤μ μμ‹μ΄μ—¬μ•Όμ§€λ§ λ³΄μ΄κΈ° λ•λ¬Έμ΄λ‹¤β¨</u> μ΄λ―Έμ§€λ“¤μ€ λ°λ“μ‹ μΊ”λ²„μ¤ μ„μ— μμ–΄μ•Ό λ³΄μ—¬μ§„λ‹¤.
- *SetParent*μ μν–¥ λ•λ¬ΈμΈμ§€ λ°λΌλ„ μκΎΈ λ…ΈνΈμ scale κ°’μ΄ 0.562 μ΄λ ‡κ² λ” μ‘κ² μ„¤μ •λμ–΄ μƒμ„±λκΈΈλ localSalce μ„ 1, 1 λ΅ μ›λ ν¬κΈ°λ΅ ν”„λ¦¬νΉκ³Ό κ°™κ² λ§μ¶°μ£Όλ„λ΅ ν–λ‹¤.
- π“TimingManager `boxNoteList` λ¦¬μ¤νΈμ— ν•΄λ‹Ή λ…ΈνΈ μ¶”κ°€
- `currentTime -= 60d / bpm;`
  - <u>currentTime = 0 μΌλ΅ λ¦¬μ…‹ν•΄μ£Όλ©΄ μ•λλ‹¤.</u>
    - 120bpmμ΄λΌλ©΄ currentTimeμ΄ λ”± 0.5κ°€ λλ”κ² μ•„λ‹λΌ 0.51005551 μ΄λ°μ‹μΌλ΅ μ•½κ°„μ μ¤μ°¨κ°€ λ” ν•΄μ§€κ² λκΈ° λ•λ¬Έμ΄λ‹¤. μ΄ μ¤μ°¨λ¥Ό λ¬΄μ‹ν•κ³  0 μΌλ΅ λ¦¬μ…‹ν•΄λ²„λ¦¬λ©΄ κ·Έ μ¤μ°¨λ§νΌμ μ‹κ°„ μ†μ‹¤μ΄ κ³„μ† λ„μ  λμ–΄ λ¶€μ •ν™•ν• λ¦¬λ“¬κ²μ„μ΄ λ  μ μλ‹¤.
    -  60d/bpm λ§νΌ λΉΌμ£Όλ©΄ μ¤μ°¨λ§ λ‚¨κ² μ§€! κ·ΈλΌ λ‹¤μ λ…ΈνΈλ” μ¤μ°¨λ§νΌ λ” λΉ¨λ¦¬ λ‚μ¤λ” μ‹μΌλ΅ μ΅°μ •μ΄ λ  κ²ƒμ΄λ‹¤.

![image](https://user-images.githubusercontent.com/42318591/102737042-b6b7a000-4389-11eb-8a5d-9bf7de1dcae8.png)

- 120 bpm 1λ¶„λ‹Ή 120λΉ„νΈ
- λ…ΈνΈ μƒμ„± μ„μΉ μ¤λΈμ νΈλ” `NoteAppearLocation`
- μƒμ„±ν•  λ…ΈνΈ ν”„λ¦¬νΉ

***
<br>

    π κ°μΈ κ³µλ¶€ κΈ°λ΅μ© λΈ”λ΅κ·Έμ…λ‹λ‹¤. μ¤λ¥λ‚ ν‹€λ¦° λ¶€λ¶„μ΄ μμ„ κ²½μ° 
    μ–Έμ λ“ μ§€ λ“κΈ€ νΉμ€ λ©”μΌλ΅ μ§€μ ν•΄μ£Όμ‹λ©΄ κ°μ‚¬ν•κ² μµλ‹λ‹¤! π„

[λ§¨ μ„λ΅ μ΄λ™ν•κΈ°](#){: .btn .btn--primary }{: .align-right}