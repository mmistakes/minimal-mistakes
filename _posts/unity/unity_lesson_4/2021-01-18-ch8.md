---
title:  "Ch 8. ê³¨ì¸ ì§€ì " 

categories:
  -  Unity Lesson 4
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2021-01-18
last_modified_at: 2020-01-18
---

ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° ê°•ì¢Œ] ë¦¬ë“¬ ê²Œì„** ìœ íŠœë¸Œ ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.youtube.com/watch?v=eLdiOCWPfPc&list=PLUZ5gNInsv_MCnum4bOQRI72LdGkIY3tY&index=2&t=231s)
{: .notice--warning}

## ğŸš€ ê³¨ì¸ ì§€ì 

íë¸Œê°€ ê³¨ì¸ ì§€ì ì— ë„ë‹¬í•˜ë©´ ê²Œì„ì´ ì¢…ë£Œë˜ë„ë¡ í•œë‹¤.

![image](https://user-images.githubusercontent.com/42318591/104881474-b1f40500-59a4-11eb-997d-9889a0ca41c6.png)

í”Œë ˆì´ì–´ íë¸Œê°€ ì´ ê³¨ë“œ í”Œë ˆì´íŠ¸ì— ë‹¿ìœ¼ë©´ ê²Œì„ì´ ëë‚œ ê²ƒìœ¼ë¡œ ê°„ì£¼í•  ê²ƒì´ê¸° ë–„ë¬¸ì— 1ï¸âƒ£ë¹µë¹ ë ˆ íš¨ê³¼ìŒì´ ìš¸ë¦¬ê³  2ï¸âƒ£ë” ì´ìƒ í”Œë ˆì´ì–´ë¥¼ ì›€ì§ì¼ ìˆ˜ ì—†ê²Œ í•˜ë©° 3ï¸âƒ£ë…¸íŠ¸ë„ ë” ì´ìƒ ìƒì„±ë˜ë©´ ì•ˆëœë‹¤. 

ê³¨ë“œ í”Œë ˆì´íŠ¸ì— ë°•ìŠ¤ ì½œë¼ì´ë”ë¥¼ ë¶™ì´ëŠ”ë° ê·¸ ë°”ìš´ë“œ í¬ê¸°ë¥¼ ì¢€ ì‘ê²Œ í•œë‹¤. ë”± ë§ëŠ” í¬ê¸°ë¡œ í•´ë²„ë¦¬ë©´ í”Œë ˆì´ì–´ íë¸Œê°€ ë‹¿ìë§ˆì ê²Œì„ì´ ì¢…ë£Œë˜ë‹ˆê¹Œ ì¢€ ì‘ê²Œ.. ê·¸ë¦¬ê³  AudioSourceë„ ë¶™ì—¬ì¤€ë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ ë¹„í™œí•˜ê³  `plated` ë°°ì—´ì˜ ì›ì†Œë¡œ ë„£ì–´ì¤Œ.


<br>

### ğŸ“œ PlayerControllsd

```c#
public static bool s_canPressKey = true;  // ì´ ê°’ì´ falseë©´ íë¸Œë¥¼ ì›€ì§ì¼ ìˆ˜ ì—†ë„ë¡(ì´ë™ íšŒì „ ë°˜ë™ ì‹œí‚¤ëŠ” StartAction í˜¸ì¶œ ë¶ˆê°€)

    void Update()
    {
        if (Input.GetKeyDown(KeyCode.A) || Input.GetKeyDown(KeyCode.D) ||
            Input.GetKeyDown(KeyCode.W) || Input.GetKeyDown(KeyCode.S))
        {
            if (canMove && s_canPressKey)
            {
                Calc();

                // íŒì • ì²´í¬ : Perfect, Cool, Good, Bad ì¼ ë•Œë§Œ True
                if (theTimingManager.CheckTiming())
                {
                    StartAction();
                }
            }
        }
    }
```

<br>


### ğŸ“œ NoteManager

```c#
bool noteActive = true;

    public void RemoveNote()
    {
        noteActive = false;
        for (int i = 0; i < theTimingManager.boxNoteList.Count; i++)
        {
            theTimingManager.boxNoteList[i].SetActive(false);
            ObjectPool.instance.noteQueue.Enqueue(theTimingManager.boxNoteList[i]);
        }
    }

    void Update()
    {
        if (noteActive)
        {
            currentTime += Time.deltaTime;

            if (currentTime >= 60d / bpm) // 60/bpm = í•œ ë¹„íŠ¸ë‹¹ ì‹œê°„ (120bpmì´ë¼ë©´ í•œ ë¹„íŠ¸ë‹¹ ì†Œìš” ì‹œê°„ì€ 0.5ì´ˆ)
            {
                GameObject t_note = ObjectPool.instance.noteQueue.Dequeue();
                t_note.transform.position = tfNoteAppear.position;
                t_note.transform.localScale = new Vector3(1f, 1f, 0f);
                t_note.SetActive(true);

                theTimingManager.boxNoteList.Add(t_note);
                currentTime -= 60d / bpm;
            }
        }     
    }
```

- ë…¸íŠ¸ ìƒì„±ì€ `noteActive` ì´ true ì¼ ë•Œë§Œ ì´ë£¨ì–´ì§€ë„ë¡. 
- `noteActive`ì„ falseë¡œ ë§Œë“¤ê³  *RemoveNote* ëª¨ë“  ë…¸íŠ¸ë“¤ì„ ë¹„í™œ í•˜ê³  ì˜¤ë¸Œì íŠ¸ í’€ì— ë„ë¡œ ë„£ê¸° 

<br>


### ğŸ“œGoalPlate

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class GoalPlate : MonoBehaviour
{
    AudioSource theAudio;
    NoteManager theNote;

    void Start()
    {
        theAudio = GetComponent<AudioSource>();
        theNote = FindObjectOfType<NoteManager>();
    }

    private void OnTriggerEnter(Collider other)
    {
        if (other.CompareTag("Player"))
        {
            theAudio.Play(); // íš¨ê³¼ìŒ ì¬ìƒ
            PlayerController.s_canPressKey = false; // ì´ë™ ë§‰ê¸°
            theNote.RemoveNote(); // ë…¸íŠ¸ ìƒì„± ì¤‘ì§€
        }
    }
}

```

ê³¨ë“œí”Œë ˆì´íŠ¸ê°€ í”Œë ˆì´ì–´ì™€ ì¶©ëŒí•˜ë©´ ê²Œì„ì´ ì¢…ë£Œë˜ë„ë¡ ì²˜ë¦¬. ğŸ“œNoteManagerì˜ *RemoveNote* í˜¸ì¶œí•˜ì—¬ ë…¸íŠ¸ ìƒì„± ë§‰ê¸°.

![image](https://user-images.githubusercontent.com/42318591/104881504-c20be480-59a4-11eb-835e-c17663b96d30.png)

*OnTriggerEnter* ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ìˆ˜ ìˆë„ë¡ í”Œë ˆì´ì–´ ì˜¤ë¸Œì íŠ¸ì—ê²Œ Rigidbody ë¥¼ ë¶™ì—¬ì£¼ê³  Collider ì˜ IsTriggerë¥¼ ì²´í¬í•´ì¤€ë‹¤. ê·¸ë¦¬ê³  íƒœê·¸ë„ "Player"ë¡œ ì„¤ì •.




***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}