---
title:  "Chapter 10-3. ìƒì¡´í‚· : ë§ˆìš°ìŠ¤ ì»¤ì„œ ê°ì¶”ê¸°" 

categories:
  -  Unity Lesson 3 
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-12-11
last_modified_at: 2020-12-11
---

ì¸í”„ëŸ°ì— ìˆëŠ” ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° 3D] ì‹¤ì „! ìƒì¡´ê²Œì„ ë§Œë“¤ê¸° - Advanced** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.inflearn.com/course/unity-2#)
{: .notice--warning}


# ìƒì¡´ í‚· : ë§ˆìš°ìŠ¤ ì»¤ì„œ ê°ì¶”ê¸°

- í‰ì†Œ ê²Œì„ ë• ë§ˆìš°ìŠ¤ ì»¤ì„œë¥¼ ë¹„í™œì„±í™” í•œë‹¤. ì»¤ì„œì™€ í¬ë¡œìŠ¤í—¤ì–´ì™€ ê°™ì´ ìˆìœ¼ë©´ í—·ê°ˆë¦¬ë‹ˆê¹Œ..
- ì»´í“¨í„° ëª¨ë‹ˆí„° í™”ë©´ ì´ë¯¸ì§€ í‰ì†Œì—” ë¹„í™œì„±í™”
  - `E`í‚¤ ëˆ„ë¥´ë©´ ì»´í“¨í„° ì¼œì§ ğŸ‘‰ ì´ë•Œë§Œ ë§ˆìš°ìŠ¤ ì»¤ì„œ í™œì„±í™”
    - ğŸ‘‰ ğŸ“œActionController ì—ì„œ ê°ì§€í•´ì•¼ í•¨
  - `ESC`í‚¤ ëˆ„ë¥´ë©´ ì»´í“¨í„° êº¼ì§ ğŸ‘‰ ë§ˆìš°ìŠ¤ ì»¤ì„œ ë‹¤ì‹œ ë¹„í™œì„±í™”
    - ì»´í“¨í„° ìì²´ì—ì„œ `ESC`í‚¤ ì…ë ¥ ê°ì§€


## ğŸ“œComputerKit

```c#
    [SerializeField] private GameObject go_BaseUI;  // ëª¨ë‹ˆí„° í™”ë©´ ë°°ê²½ ì´ë¯¸ì§€UI
    public bool isPowerOn = false; // ì „ì› ì¼œì§„ ìƒíƒœì¸ì§€. ì¤‘ë³µ ì¼œê¸° ë°©ì§€.

    void Start()
    {
        Cursor.lockState = CursorLockMode.Locked; 
        Cursor.visible = false; 

        theInventory = FindObjectOfType<Inventory>();
        theAudio = GetComponent<AudioSource>();
    }

    void Update()
    {
        if (isPowerOn)
            if (Input.GetKeyDown(KeyCode.Escape))
                PowerOff();
    }

    public void PowerOn() // ğŸ“œActionController ì—ì„œ í˜¸ì¶œ
    {
        Cursor.lockState = CursorLockMode.None;
        Cursor.visible = true; 

        isPowerOn = true;
        go_BaseUI.SetActive(true);
    }

    private void PowerOff()
    {
        Cursor.lockState = CursorLockMode.Locked;
        Cursor.visible = false;

        theToolTip.HideToolTip();
        isPowerOn = false;
        go_BaseUI.SetActive(false);
    }
```

- ê²Œì„ì´ ì‹œì‘ë˜ë©´(ì»´í“¨í„° ì˜¤ë¸Œì íŠ¸ê°€ í™œì„±í™” ë˜ë©´)
  - ê²Œì„ ì „ì²´ì—ì„œ ë§ˆìš°ìŠ¤ ì»¤ì„œë¥¼ ì ê·¸ê³  ë³´ì´ì§€ ì•Šê²Œ í•œë‹¤. ì¦‰, ì´ ê²Œì„ì—ì„  ìœˆë„ìš° ë§ˆìš°ìŠ¤ ì»¤ì„œê°€ ë³´ì´ì§€ ì•Šê²Œ í•  ê²ƒì´ë‹¤. í´ë¦­ì´ í•„ìš”í•˜ê³  ì´ëŸ´ ë•Œë§Œ ìœˆë„ìš° ë§ˆìš°ìŠ¤ ì»¤ì„œë¥¼ í™œì„±í™” í•  ê²ƒì´ë‹¤! 
    ```c#
    // Cursor.lockState = CursorLockMode.Confined; ğŸ‘‰ ë§ˆìš°ìŠ¤ ì»¤ì„œê°€ ê²Œì„ì˜ ì°½ ë°–ìœ¼ë¡œ ì´íƒˆë˜ì§€ ì•Šë„ë¡ í•¨.
    // Cursor.lockState = CursorLockMode.Locked; ğŸ‘‰ ë§ˆìš°ìŠ¤ ì»¤ì„œ ì •ìƒ ìƒíƒœ. ê²Œì„ ì¤‘ì— ë§ˆìš°ìŠ¤ ì»¤ì„œê°€ ë³´ì„.
    Cursor.lockState = CursorLockMode.Locked; // ğŸ‘‰ ë§ˆìš°ìŠ¤ ì»¤ì„œë¥¼ ê²Œì„ ì¤‘ì•™ ì¢Œí‘œì— ê³ ì •ì‹œí‚¤ê³  ì ê¶ˆë²„ë¦°ë‹¤. ë Œë”ë§ë„ í•˜ì§€ ì•Šê²Œ í•œë‹¤.
    Cursor.visible = false; // ë§ˆìš°ìŠ¤ ì»¤ì„œë¥¼ ë‹¨ìˆœíˆ ë Œë”ë§ í•˜ì§€ ì•ŠëŠ”ë‹¤. CursorLockMode.Locked ì—ì„œë„ ë Œë”ë§ ì•ˆí•˜ê²Œ í•´ì£¼ì§€ë§Œ  ë³´í†µ ê°™ì´ ì“´ë‹¤ê³  í•œë‹¤.
    ```
- ë§ˆìš°ìŠ¤ ì»¤ì„œ í™œì„±í™” ğŸ‘‰ ì»´í“¨í„° ê°€ê¹Œì´ì— ê°€ì„œ ì»´í“¨í„°ë¥¼ ë°”ë¼ë³´ê³  `E`í‚¤ë¥¼ ëˆŒëŸ¬ ì»´í“¨í„°ë¥¼ ì¼°ì„ ë•Œë§Œ
  - *PowerOn()*
    - ì»´í“¨í„° í™œì„±í™” (ë§ˆìš°ìŠ¤ ì»¤ì„œ í™œì„±í™”, ëª¨ë‹ˆí„° ì´ë¯¸ì§€ í™œì„±í™”)
    - ğŸ“œActionController ì—ì„œ í˜¸ì¶œ í•  ê²ƒì´ë‹¤.
      - ë©”ì¸ ì¹´ë©”ë¼ì˜ Raycast ì™€ ì¶©ëŒí•˜ë©´ ì•¡ì…˜ í…ìŠ¤íŠ¸ë„ ë„ìš¸ê²ƒì´ê³  ê·¸ ë•Œ `E`í‚¤ë¥¼ ëˆ„ë¥´ë©´ ì»´í“¨í„°ê°€ ì¼œì§€ë„ë¡
  - *PowerOff()*
    - ì»´í“¨í„° ë¹„í™œì„±í™” (ë§ˆìš°ìŠ¤ ì»¤ì„œ ë¹„í™œì„±í™”, íˆ´íŒ ë¹„í™œì„±í™”, ëª¨ë‹ˆí„° ì´ë¯¸ì§€ ë¹„í™œì„±í™”)
      - ğŸ“œComputerKit ë‚´ì˜ Update ë¬¸ì—ì„œ `ESC`í‚¤ë¥¼ ê°ì§€í•˜ê³  ì…ë ¥ ë˜ë©´ ì´ í•¨ìˆ˜ í˜¸ì¶œ


![image](https://user-images.githubusercontent.com/42318591/101862033-cf1f0200-3bb4-11eb-96c9-c4f061226f51.png)

í”Œë ˆì´ì–´ê°€ ëª¨ë‹ˆí„°ë¥¼ ë°”ë¼ë³¼ ë•Œ ì•¡ì…˜ í…ìŠ¤íŠ¸ë¥¼ ë„ì›Œì•¼ í•˜ê¸° ë•Œë¬¸ì— ëª¨ë‹ˆí„° ë¶€ë¶„ì— Box Collider ë¥¼ ì¶”ê°€í–ˆë‹¤. ë©”ì¸ ì¹´ë©”ë¼ì˜ Raycast ë¥¼ ë§ì„ ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ì„œ.

![image](https://user-images.githubusercontent.com/42318591/101861618-cda10a00-3bb3-11eb-83fa-2c687bf0a738.png)

ì»´í“¨í„°ì˜ íƒœê·¸ì™€ ë ˆì´ì–´ë¥¼ "Computer"ë¡œ.

![image](https://user-images.githubusercontent.com/42318591/101861759-338d9180-3bb4-11eb-9df3-6b3efc05f7ad.png)

`go_BaseUI`ì— ëª¨ë‹ˆí„° ì´ë¯¸ì§€ í• ë‹¹.

<br>

### ğŸ“œActionController

```c#
    private bool lookComputer = false; // ì»´í“¨í„°ë¥¼ ë°”ë¼ë³¼ ì‹œ true
    [SerializeField] private ComputerKit theComputer; // ğŸ“œComputerKit.cs

    void Update()
    {
        CheckAction();
        TryAction();
    }

    private void CheckAction()
    {
        if (Physics.Raycast(transform.position, transform.forward, out hitInfo, range, layerMask))
        {
            if (hitInfo.transform.tag == "Item")
                ItemInfoAppear();
            else if (hitInfo.transform.tag == "Weak_Animal")
                MeatInfoAppear();
            else if (hitInfo.transform.tag == "Fire")
                FireInfoAppear();
            else if (hitInfo.transform.tag == "Computer")
                ComputerInfoAppear();
            else
                InfoDisappear();
        }
        else
            InfoDisappear();
    }

    private void TryAction()
    {
        if(Input.GetKeyDown(KeyCode.E))
        {
            CheckAction();
            CanPickUp();
            CanMeat();
            CanDropFire();
            CanComputerPowerOn();
        }
    }

    private void ComputerInfoAppear()
    {
        if (!hitInfo.transform.GetComponent<ComputerKit>().isPowerOn)
        {
            Reset();
            lookComputer = true;
            actionText.gameObject.SetActive(true);
            actionText.text = "ì»´í“¨í„° ê°€ë™ " + "<color=yellow>" + "(E)" + "</color>";
        }
    }

    private void InfoDisappear()
    {
        pickupActivated = false;
        dissolveActivated = false;
        firedLookActivated = false;
        lookComputer = false;  // ì¶”ê°€ !
        actionText.gameObject.SetActive(false);
    }

    private void CanComputerPowerOn()
    {
        if (lookComputer)
        {
            if (hitInfo.transform != null)
            {
                if (!hitInfo.transform.GetComponent<ComputerKit>().isPowerOn)
                {
                    hitInfo.transform.GetComponent<ComputerKit>().PowerOn();
                    InfoDisappear();
                }
            }
        }
    }
```

- *CheckAction()*
  - ë©”ì¸ì¹´ë©”ë¼ì˜ Raycast ê°€ ë¶€ë”ªì¹œ ëŒ€ìƒì´ ì»´í“¨í„°ë¼ë©´ ì»´í“¨í„°ì˜ ì•¡ì…˜ í…ìŠ¤íŠ¸ë¥¼ ë„ìš°ê¸° ìœ„í•´ *ComputerInfoAppear()* í˜¸ì¶œ
- *ComputerInfoAppear()*
  - ì»´í“¨í„°ê°€ í˜„ì¬ ê°€ë™ì¤‘ì´ ì•„ë‹ˆë¼ë©´ ì»´í“¨í„°ì˜ ì•¡ì…˜ í…ìŠ¤íŠ¸ ë„ìš°ê³  `lookComputer`ëŠ” true ê°’ìœ¼ë¡œ ë³€ê²½
- *TryAction()*
  - ë§¤ í”„ë ˆì„ë§ˆë‹¤ `E`í‚¤ê°€ ë“¤ì–´ì™”ë‚˜ ê°ì§€í•œë‹¤. *CanComputerPowerOn()* ì‹¤í–‰
- *CanComputerPowerOn()*
  - `lookComputer`ê°€ true ì¸ ìƒíƒœì´ê³  ì»´í“¨í„°ê°€ ê°€ë™ì¤‘ì´ ì•„ë‹ˆë¼ë©´ ì»´í“¨í„° ì´ë¯¸ì§€ë¥¼ í™œì„±í™” í•˜ê³  ì•¡ì…˜ í…ìŠ¤íŠ¸ëŠ” ë¹„í™œì„±í™” í•œë‹¤.
    - ğŸ“œComputerKitì˜ *PowerOn* í•¨ìˆ˜ ì‹¤í–‰

![image](https://user-images.githubusercontent.com/42318591/101861792-47d18e80-3bb4-11eb-88b8-5c72e0ff0669.png)

- `layerMask`ì— "Computer"ë ˆì´ì–´ë¥¼ ì¶”ê°€í•˜ì—¬ ë©”ì¸ì¹´ë©”ë¼ì˜ Raycastë¥¼ ì»´í“¨í„°ê°€ ë°›ì„ ìˆ˜ ìˆë„ë¡ í•œë‹¤.
- `theComputer`ì— ğŸ“œComputerKit ê°€ ë¶™ì–´ ìˆëŠ” ì»´í“¨í„° ì˜¤ë¸Œì íŠ¸ í• ë‹¹

<br>

- ğŸ“œInventory ì™€ ğŸ“œCraftManualë„ ì°½ì´ í™œì„±í™” ë  ë•Œ ë§ˆìš°ìŠ¤ ì»¤ì„œë¥¼ í™œì„±í™” í•˜ì˜€ê³ , ì°½ì´ ë¹„í™œì„±í™” ë˜ë©´ ë§ˆìš°ìŠ¤ ì»¤ì„œë„ ë‹¤ì‹œ ë¹„í™œì„±í™” ë˜ê²Œ ì½”ë“œë¥¼ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.
  - ì´ ë¶€ë¶„ì€ ë‹¤ìŒ í¬ìŠ¤íŠ¸ì—ì„œ ê²Œì„ë§¤ë‹ˆì €ë¥¼ í†µí•´ ëª¨ë“  ì°½ë“¤ì˜ ì»¤ì„œ í™œì„±í™”/ë¹„í™œì„±í™”ë¥¼ ì¼ê´„ ê´€ë¦¬í•  ê²ƒì´ë‹¤.


***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}