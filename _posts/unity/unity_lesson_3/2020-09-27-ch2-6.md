---
title:  "Chapter 2-6. ë¬´ê¸° : Weapon Manager" 

categories:
  -  Unity Lesson 3 
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-09-27
last_modified_at: 2020-09-27
---

ì¸í”„ëŸ°ì— ìˆëŠ” ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° 3D] ì‹¤ì „! ìƒì¡´ê²Œì„ ë§Œë“¤ê¸° - Advanced** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.inflearn.com/course/unity-2#)
{: .notice--warning}

<br>

# Chapter 2. ë¬´ê¸°
# Weapon Manager

## ğŸš– ë¬´ê¸° êµì²´

### ğŸ“œWeaponManager.cs

> `Holder`ì— ë¶™ì¸ë‹¤.

- ë§¤ë‹ˆì €ì´ë‹ˆë§Œí¼ ëª¨ë‘ê°€ ê³µìœ í•  ìˆ˜ ìˆëŠ” `static` ë©¤ë²„ë“¤ì„ ê°€ì§€ê³  ìˆë‹¤.
  - `static`
    - í´ë˜ìŠ¤ ë³€ìˆ˜
    - ì ‘ê·¼ì´ ì‰½ê³  ê²Œì„ ë‚´ë‚´ ë©”ëª¨ë¦¬ì— ë‚¨ì•„ ìˆë‹¤. ê³µìœ  ë˜ì•¼ í•˜ë¯€ë¡œ.
      - ë”°ë¼ì„œ ë‚¨ë°œí•˜ë©´ ì•ˆë˜ê³  ì ì¬ì ì†Œì— ì‚¬ìš© í•˜ê¸°ë¥¼ ê¶Œì¥
- ë¬´ê¸° êµì²´
- ì—¬ëŸ¬ ë¬´ê¸°ë“¤ì˜ ë™ì‘ ê´€ë¦¬

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class WeaponManager : MonoBehaviour
{
    public static bool isChangeWeapon = false;  // ë¬´ê¸° êµì²´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€. (Trueë©´ ëª»í•˜ê²Œ)

    [SerializeField]
    private float changeweaponDelayTime;  // ë¬´ê¸° êµì²´ ë”œë ˆì´ ì‹œê°„. ì´ì„ êº¼ë‚´ê¸° ìœ„í•´ ì† ì§‘ì–´ ë„£ëŠ” ê·¸ ì‹œê°„. ëŒ€ëµ Weapon_Out ì• ë‹ˆë©”ì´ì…˜ ì‹œê°„.
    [SerializeField]
    private float changeweaponEndDelayTime;  // ë¬´ê¸° êµì²´ê°€ ì™„ì „íˆ ëë‚œ ì‹œì . ëŒ€ëµ Weapon_In ì• ë‹ˆë©”ì´ì…˜ ì‹œê°„.

    [SerializeField]
    private Gun[] guns;  // ëª¨ë“  ì¢…ë¥˜ì˜ ì´ì„ ì›ì†Œë¡œ ê°€ì§€ëŠ” ë°°ì—´
    [SerializeField]
    private Hand[] hands;  // ëª¨ë“  ì¢…ë¥˜ì˜ Hand í˜• ë¬´ê¸°ë¥¼ ê°€ì§€ëŠ” ë°°ì—´

    // ê´€ë¦¬ ì°¨ì›ì—ì„œ ì´ë¦„ìœ¼ë¡œ ì‰½ê²Œ ë¬´ê¸° ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ Dictionary ìë£Œ êµ¬ì¡° ì‚¬ìš©.
    private Dictionary<string, Gun> gunDictionary = new Dictionary<string, Gun>();
    private Dictionary<string, Hand> handDictionary = new Dictionary<string, Hand>();

    [SerializeField]
    private string currentWeaponType;  // í˜„ì¬ ë¬´ê¸°ì˜ íƒ€ì… (ì´, ë„ë¼ ë“±ë“±)
    public static Transform currentWeapon;  // í˜„ì¬ ë¬´ê¸°. staticìœ¼ë¡œ ì„ ì–¸í•˜ì—¬ ì—¬ëŸ¬ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ í´ë˜ìŠ¤ ì´ë¦„ìœ¼ë¡œ ë°”ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•¨.
    public static Animator currentWeaponAnim; // í˜„ì¬ ë¬´ê¸°ì˜ ì• ë‹ˆë©”ì´ì…˜. staticìœ¼ë¡œ ì„ ì–¸í•˜ì—¬ ì—¬ëŸ¬ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ í´ë˜ìŠ¤ ì´ë¦„ìœ¼ë¡œ ë°”ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•¨.

    [SerializeField]
    private GunController theGunController;  // ì´ ì¼ë• ğŸ“œGunController.cs í™œì„±í™”, ì†ì¼ ë• ğŸ“œGunController.cs ë¹„í™œì„±í™” 
    [SerializeField]
    private HandController theHandController; // ì† ì¼ë• ğŸ“œHandController.cs í™œì„±í™”, ğŸ“œHandController.cs ë¹„í™œì„±í™”

    void Start()
    {
        for (int i = 0; i < guns.Length; i++)
        {
            gunDictionary.Add(guns[i].gunName, guns[i]);
        }
        for (int i = 0; i < hands.Length; i++)
        {
            handDictionary.Add(hands[i].handName, hands[i]);
        }
    }

    void Update()
    {
        if(!isChangeWeapon)
        {
            
            if (Input.GetKeyDown(KeyCode.Alpha1)) // 1 ëˆ„ë¥´ë©´ 'ë§¨ì†'ìœ¼ë¡œ ë¬´ê¸° êµì²´ ì‹¤í–‰
            {
                StartCoroutine(ChangeWeaponCoroutine("HAND", "ë§¨ì†"));
            }
            else if (Input.GetKeyDown(KeyCode.Alpha2)) // 2 ëˆ„ë¥´ë©´ 'ì„œë¸Œ ë¨¸ì‹ ê±´'ìœ¼ë¡œ ë¬´ê¸° êµì²´ ì‹¤í–‰
            {
                StartCoroutine(ChangeWeaponCoroutine("GUN", "SubMachineGun1"));
            }

        
        }
    }

    public IEnumerator ChangeWeaponCoroutine(string _type, string _name)
    {
        isChangeWeapon = true;
        currentWeaponAnim.SetTrigger("Weapon_Out");

        yield return new WaitForSeconds(changeweaponDelayTime);

        CancelPreWeaponAction();
        WeaponChange(_type, _name);

        yield return new WaitForSeconds(changeweaponEndDelayTime);

        currentWeaponType = _type;
        isChangeWeapon = false;
    }

    private void CancelPreWeaponAction()
    {
        switch(currentWeaponType)
        {
            case "GUN":
                theGunController.CancelFineSight();
                theGunController.CancelReload();
                GunController.isActivate = false;
                break;
            case "HAND":
                HandController.isActivate = false;
                break;
        }
    }

    private void WeaponChange(string _type, string _name)
    {
        if(_type == "GUN")
        {
            theGunController.GunChange(gunDictionary[_name]);
        }
        else if(_type == "HAND")
        {
            theHandController.HandChange(handDictionary[_name]);
        }
    }
}

```

> ë¬´ê¸° íƒ€ì… ì¢…ë¥˜ ğŸ‘‰ **Gun**(SubMachineGun1 ë“±ë“±), **Hand**(Hand, Knuckle ë“±ë“±))

> ë©¤ë²„ ë³€ìˆ˜

- `static` ë³€ìˆ˜ë“¤ì€ ë‹¤ë¥¸ ìŠ¤í¬ë¦½íŠ¸ë“¤ì—ì„œ `WeaponManager` í´ë˜ìŠ¤ ì´ë¦„ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆê³  ì—¬ëŸ¬ ê³³ì—ì„œ ê³µìœ  ëœë‹¤.
- `isChangeWeapon` ğŸ‘‰ ë¬´ê¸° êµì²´ ì¤‘ì¸ì§€.
  - í˜„ì¬ ë¬´ê¸° êµì²´ ì¤‘ì¼ ë•Œ ë¬´ê¸° êµì²´ ëª…ë ¹ì´ ë˜ ë“¤ì–´ì˜¤ë©´ ì•ˆë˜ë¯€ë¡œ ì¤‘ë³µ ì‹¤í–‰ì„ ë°©ì§€ í•˜ê¸° ìœ„í•´ í•„ìš”.
  - <u>static ë©¤ë²„</u>
  - Gun ì¢…ë¥˜ë“  Hand ì¢…ë¥˜ë“  ì–´ë–¤ ë¬´ê¸°ë˜ ê°„ì— ì¼ë‹¨ ë¬´ê¸° êµì²´ë¥¼ ì‹¤í–‰ ì¤‘ì´ë©´ ë˜ ë¬´ê¸° êµì²´í•˜ë©´ ì•ˆëœë‹¤.
    - ë”°ë¼ì„œ ëª¨ë“  ë¬´ê¸°ë“¤ì´ ë¬´ê¸° êµì²´ ì¤‘ì¸ì§€ ìƒí™©ì„ ì•Œê³  ìˆì–´ì•¼ í•œë‹¤. ë”°ë¼ì„œ `static`ì´ì–´ì•¼ í•¨.
- ì´ ì¢…ë¥˜ì¸ ë¬´ê¸° ì˜¤ë¸Œì íŠ¸ë“¤ê³¼, í•¸ë“œí˜• ì¢…ë¥˜ì¸ ë¬´ê¸° ì˜¤ë¸Œì íŠ¸ë“¤ì„ ê°ê° `guns`, `hands` ë°°ì—´ì— í• ë‹¹í•  ê²ƒì´ë‹¤.
  - ê·¸ëŸ¬ë‚˜ ì–´ë–¤ ì´ì´ `guns[2]` ì¸ë±ìŠ¤ 2ì¸ì§€ ê¸°ì–µí•˜ê¸°ê°€ í˜ë“œë‹ˆê¹Œ **Dictionary** ìë£Œ êµ¬ì¡°ë¡œ ë¬´ê¸°ë“¤ì„ ê´€ë¦¬í•  ê²ƒì´ë‹¤. ë¬´ê¸° ì´ë¦„ìœ¼ë¡œ ë¬´ê¸° ì˜¤ë¸Œì íŠ¸ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡! ê°œë°œì ì…ì¥ì—ì„œ êµ¬ë¶„ì´ ì‰½ë„ë¡.
- `currentWeapon` ğŸ‘‰ í˜„ì¬ ë“¤ê³  ìˆëŠ” ë¬´ê¸° ì˜¤ë¸Œì íŠ¸
  - **Transform íƒ€ì…ì¸ ì´ìœ ** 
    - Gun ì¢…ë¥˜ë“  Hand ì¢…ë¥˜ë“  <u>ì–´ë–¤ ë¬´ê¸°ë˜ ê°„ì— ëª¨ë‘ Transform ì»´í¬ë„ŒíŠ¸ë¥¼ ê°–ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤!</u> ë”°ë¼ì„œ ëª¨ë“  ì¢…ë¥˜ì˜ ë¬´ê¸°ë¥¼ ì´ ë©¤ë²„ í•˜ë‚˜ë¡œ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•˜ì—¬! ë‹¤í˜•ì„± ëŠë‚Œ..
  - <u>static ë©¤ë²„</u>
    - í˜„ì¬ ë“¤ê³  ìˆëŠ” ë¬´ê¸°ì˜ Controller.cs ì—ì„œ `WeaponManager.currentWeapon`ì— ìê¸° ìì‹ ì„ í• ë‹¹í•˜ê²Œ ë  ê²ƒì´ë‹¤. 
- `currentWeaponAnim` ğŸ‘‰ í˜„ì¬ ë“¤ê³  ìˆëŠ” ë¬´ê¸°ì˜ ì• ë‹ˆë©”ì´í„° ì»´í¬ë„ŒíŠ¸
  <u>static ë©¤ë²„</u>
    - í˜„ì¬ ë“¤ê³  ìˆëŠ” ë¬´ê¸°ì˜ Controller.cs ì—ì„œ `WeaponManager.currentWeaponAnim`ì— ìê¸° ìì‹ ì˜ Animator ì»´í¬ë„ŒíŠ¸ë¥¼ í• ë‹¹í•˜ê²Œ ë  ê²ƒì´ë‹¤. 
- ë¬´ê¸° êµì²´ì‹œ ì–´ë–¤ ë¬´ê¸°ë¥¼ í™œì„±í™”,ë¹„í™œì„±í™”í• ì§€ ì•Œì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì— ğŸ“œGunController.cs, ğŸ“œHandController.cs  í•„ìš”.

<br>

> ë©¤ë²„ í•¨ìˆ˜

- *Start()*
  - ê²Œì„ì´ ì‹œì‘ë˜ë©´ `guns`, `hands` ë°°ì—´ ì›ì†Œë“¤ì„ ê°ê°ì˜ Dictionary ì— ë„£ì–´ì¤€ë‹¤.
  - Key ëŠ” ë¬´ê¸° ì´ë¦„(string), ValueëŠ” ë¬´ê¸° ì˜¤ë¸Œì íŠ¸(Gun í˜¹ì€ Hand)
- *Update()*
  - ë§¤í”„ë ˆì„ë§ˆë‹¤ í‚¤ ì…ë ¥ì„ ê²€ì‚¬í•œë‹¤.
  - ë‹¨ ì´ ê³¼ì •ì€  `isChangeWeapon`ê°€ False ì¼ ë•Œë§Œ ì´ë£¨ì–´ì ¸ì•¼ í•œë‹¤. ì´ë¯¸ ë¬´ê¸° êµì²´ ì¤‘ì¼ë• ì•ˆë¼.
    - 1 í‚¤ë¥¼ ëˆ„ë¥´ë©´  ë¬´ê¸° êµì²´ í•¨ìˆ˜ë¥¼ ì‹¤í–‰ í•˜ë˜ ì¸ìˆ˜ë¥¼ `ë§¨ì†`ìœ¼ë¡œ ë„˜ê¸´ë‹¤.
    - 2 í‚¤ë¥¼ ëˆ„ë¥´ë©´  ë¬´ê¸° êµì²´ í•¨ìˆ˜ë¥¼ ì‹¤í–‰ í•˜ë˜ ì¸ìˆ˜ë¥¼ `SubMachineGun1`ìœ¼ë¡œ ë„˜ê¸´ë‹¤.
    - ì˜ˆì‹œë¡œ ê·¸ëƒ¥ í•˜ë“œì½”ë”© ëœ ë¶€ë¶„ì´ë¼ ë‚˜ì¤‘ì— ìˆ˜ì •í•  ì˜ˆì •
- ***ChangeWeaponCoroutine(string _type, string _name)***
  - <u>Gun ì¢…ë¥˜ë“  Hand ì¢…ë¥˜ë“  ì–´ë–¤ ë¬´ê¸°ë˜ ê°„ì— ë¬´ê¸°ë¥¼ êµì²´í•˜ëŠ” ë¡œì§ì€ ê°™ë‹¤.(ê·¸ë˜ì„œ ğŸ“œWeaponManager.cs ì—ì„œ ë‹´ë‹¹í•˜ëŠ” ê²ƒì´ë‹¤.) ì‹¬ì§€ì–´ ì• ë‹ˆë©”ì´ì…˜ ì´ë¦„ë„ ë˜‘ê°™ë‹¤. ë”°ë¼ì„œ ë™ì¼í•œ í•¨ìˆ˜ë¥¼ ì“°ë˜ ë¬´ê¸°ì— ë”°ë¼ ì¸ìˆ˜ë§Œ ë‹¤ë¥´ê²Œ í•´ì£¼ë©´ ëœë‹¤.</u>
    - `isChangeWeapon`ë¥¼ Trueë¡œ ë§Œë“¤ê¸° (ë¬´ê¸° êµì²´ ê³¼ì •ì„ ì§„í–‰í• ê±°ë‹ˆ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€)
    - ë¬´ê¸°êº¼ë‚´ëŠ” ì• ë‹ˆë©”ì´ì…˜ ì¬ìƒ
      - ì–´ë–¤ ë¬´ê¸°ë˜ ê°„ì—, ë¬´ê¸° êº¼ë‚´ëŠ” ì¡°ê±´ ì• ë‹ˆë©”ì´ì…˜ Trigger íŒŒë¼ë¯¸í„°ëŠ” ë‹¤ "Weapon_Out"ë¼ê³  ì´ë¦„ ì§€ì–´ë†“ìŒ
    - ë¬´ê¸° ì§‘ì–´ ë„£ëŠ” ì• ë‹ˆë©”ì´ì…˜ ì¬ìƒí•  ë™ì•ˆ ëŒ€ê¸°
      - ì½”ë£¨í‹´
    - *CancelPreWeaponAction()* ì‹¤í–‰ìœ¼ë¡œ **ê¸°ì¡´ì— ë“¤ê³  ìˆëŠ” ë¬´ê¸°ëŠ” í•´ì œí•œë‹¤.**
    - *WeaponChange(_type, _name)* ì‹¤í–‰ìœ¼ë¡œ **ë°”ê¾¸ê³ ì í•˜ëŠ” ë¬´ê¸°ë¡œ êµì²´í•œë‹¤.**
    - ë¬´ê¸° êº¼ë‚´ëŠ” ì• ë‹ˆë©”ì´ì…˜ ì¬ìƒí•  ë™ì•ˆ ëŒ€ê¸°
      - ì½”ë£¨í‹´
    - `currentWeaponType` í˜„ì¬ ë¬´ê¸° íƒ€ì… ì—…ëƒ
    - `isChangeWeapon`ë¥¼ Falseë¡œ ë§Œë“¤ê¸° (ì´ì œ ë¬´ê¸° êµì²´ ë˜ í•´ë„ ë¨)
- 1ï¸âƒ£ *CancelPreWeaponAction()* ğŸ‘‰ ë“¤ê³  ìˆë˜ ë¬´ê¸° ë‚´ë¦¬ê¸°
  - ë“¤ê³  ìˆë˜ ë¬´ê¸°ê°€ "GUN" íƒ€ì…ì´ë¼ë©´
    - ì •ì¡°ì¤€ í•´ì œ (í˜¹ì‹œë¼ë„ ì •ì¡°ì¤€ ì¤‘ì¼ ê²ƒì„ ëŒ€ë¹„í•˜ì—¬)
    - ì¬ì¥ì „ í•´ì œ (í˜¹ì‹œë¼ë„ ì¬ì¥ì „ ì¤‘ì¼ ê²ƒì„ ëŒ€ë¹„í•˜ì—¬) 
      - ğŸ“œGunController.cs ì— *CancelReload()* ì¶”ê°€ í•¨
    - í•´ë‹¹ ë¬´ê¸° ë¹„í™œì„±í™”
      - ğŸ“œGunController.cs ì˜ `isActive`ë¥¼ Falseë¡œ
  - ë“¤ê³  ìˆë˜ ë¬´ê¸°ê°€ "HAND" íƒ€ì…ì´ë¼ë©´
    - í•´ë‹¹ ë¬´ê¸° ë¹„í™œì„±í™”
      - ğŸ“œHandController.cs ì˜ `isActive`ë¥¼ Falseë¡œ
- 2ï¸âƒ£ *WeaponChange(string _type, string _name)* ğŸ‘‰ ë“¤ê³ ì í•˜ëŠ” ìƒˆ ë¬´ê¸°ë¡œ ë“¤ê¸°
  - ë“¤ê³  ìˆë˜ ë¬´ê¸°ê°€ "GUN" íƒ€ì…ì´ë¼ë©´
    - "GUN" ì¢…ë¥˜ ë¬´ê¸°ë¥¼ í™œì„±í™” í•˜ê³  ì—¬ëŸ¬ ì´ˆê¸°í™” ì‘ì—…ì„ í•˜ëŠ” ğŸ“œGunController.cs ì˜ *GunChange()* í•¨ìˆ˜ ì‹¤í–‰
  - ë“¤ê³  ìˆë˜ ë¬´ê¸°ê°€ "HAND" íƒ€ì…ì´ë¼ë©´
    - "HAND" ì¢…ë¥˜ ë¬´ê¸°ë¥¼ í™œì„±í™” í•˜ê³  ì—¬ëŸ¬ ì´ˆê¸°í™” ì‘ì—…ì„ í•˜ëŠ” ğŸ“œHandController.cs ì˜ *HandChange()* í•¨ìˆ˜ ì‹¤í–‰

<br>

### ğŸ“œGunController.cs

```c#
// ì¶”ê°€ëœ ë©¤ë²„ ë³€ìˆ˜

public static bool isActivate = true;  // í™œì„±í™” ì—¬ë¶€
```
```c#
    void Update()
    {
        if (isActivate)
        {
            GunFireRateCalc();
            TryFire();
            TryReload();
            TryFineSight();
        }
    }

    void Start()
    {
        originPos = Vector3.zero;
        audioSource = GetComponent<AudioSource>();
        theCrosshair = FindObjectOfType<Crosshair>();

        WeaponManager.currentWeapon = currentGun.GetComponent<Transform>();
        WeaponManager.currentWeaponAnim = currentGun.anim;
    }

    public void CancelReload()
    {
        if(isReload)
        {
            StopAllCoroutines();
            isReload = false;
        }
    }

    public void GunChange(Gun _gun)
    {
        if (WeaponManager.currentWeapon != null)
            WeaponManager.currentWeapon.gameObject.SetActive(false);

        currentGun = _gun;
        WeaponManager.currentWeapon = currentGun.GetComponent<Transform>();
        WeaponManager.currentWeaponAnim = currentGun.anim;

        currentGun.transform.localPosition = Vector3.zero;
        currentGun.gameObject.SetActive(true);

        isActivate = true;
    }
```

- *Update()* 
  - `isActive` í•  ë•Œë§Œ, ì´ ë¬´ê¸°ê°€ í™œì„±í™” ë˜ìˆì„ ë•Œë§Œ ì‹¤í–‰í•˜ë„ë¡ í•œë‹¤.
    - ë°œì‚¬í•˜ê³  ì¬ì¥ì „í•˜ê³  ì •ì¡°ì¤€í•˜ê±°ë‚˜ ê·¸ëŸ° ëª¨ë“  `Gun`ê³¼ ê´€ë ¨ëœ ì¼ë“¤.
- *Start()*
  - ê¸°ë³¸ì ì¸ ë””í´íŠ¸ ë¬´ê¸°ë¥¼ `Gun`ìœ¼ë¡œ ì‚¼ì„ ê²ƒì´ë¼ì„œ íŠ¹ë³„íˆ static ë³€ìˆ˜ì¸ ğŸ“œWeaponManagerì˜ `currentWeapon`ì— ğŸ“œGunController.csë§Œ ê²Œì„ì´ ì‹œì‘ë˜ìë§ˆì ìê¸° ìì‹ ì„ í• ë‹¹í•´ì¤€ë‹¤.
    - Transform íƒ€ì…ìœ¼ë¡œ í• ë‹¹ í•´ì£¼ì–´ì•¼.
- *GunChange(Gun _gun)*
  - ì´ìœ¼ë¡œ êµì²´í•˜ê³ ì í•  ë•Œ í•„ìš”. í˜¸ì¶œì€ ğŸ“œWeaponManager ì—ì„œ ì´ë£¨ì–´ì§
  - í˜„ì¬ ë“¤ê³  ìˆëŠ” ë¬´ê¸°ê°€ ìˆë‹¤ë©´ í•´ë‹¹ ë¬´ê¸° ì˜¤ë¸Œì íŠ¸ëŠ” ë¹„í™œì„±í™” í•´ì£¼ê¸°. SetActive(False)
    - ğŸ“œWeaponManagerì˜ `currentWeapon`ê°€ ê³µìœ  ë³€ìˆ˜ì´ê¸° ë•Œë¬¸ì— ê°€ëŠ¥í•œ ì¼.
    - í˜„ì¬ ë“¤ê³  ìˆëŠ” ë¬´ê¸°ì•ˆ `WeaponManager.currentWeapon`ê°€ ë§¨ì†ì´ë“  ë„ë¼ë“  ë­ë“  ê°„ì— ì¼ë‹¨ ë¹„í™œì„±í™” í•œë‹¤. ì´ìœ¼ë¡œ ë°”ê¿”ì•¼ í•˜ë‹ˆê¹Œ.
  - ì—…ë°ì´íŠ¸
    - ìì‹ ì˜ `currentGun`
    - `WeaponManager.currentWeapon`ë¥¼ ìê¸° ìì‹ ìœ¼ë¡œ ì—…ëƒ (Transformìœ¼ë¡œ)
    - `WeaponManager.currentWeaponAnim`ì„ ìê¸° ìì‹ ì˜ Animatorë¡œ ì—…ëƒ
  - ì´ì„ êµì²´í•¨ìœ¼ë¡œì„œ ë¬´ê¸° ìœ„ì¹˜ê°€ ë‹¬ë¼ì¡Œì„ ê²ƒì„ ëŒ€ë¹„í•˜ì—¬ ì›ì ìœ¼ë¡œ ë‹¤ì‹œ ì´ˆê¸°í™” (ë¡œì»¬ë¡œì„œ ì›ì ì´ ì´ì˜ ì‹œì‘ ìœ„ì¹˜ì„)
  - í˜„ì¬ ì´ ì˜¤ë¸Œì íŠ¸ í™œì„±í™” SetActive(True)
  - `isActive` í™œì„±í™”


<br>

### ğŸ“œHandController.cs

```c#
// ì¶”ê°€ëœ ë©¤ë²„ ë³€ìˆ˜

public static bool isActivate = true;  // í™œì„±í™” ì—¬ë¶€
```
```c#
    void Update()
    {
        if(isActivate)
            TryAttack();
    }

    public void HandChange(Hand _hand)
    {
        if (WeaponManager.currentWeapon != null)
            WeaponManager.currentWeapon.gameObject.SetActive(false);

        currentHand = _hand;
        WeaponManager.currentWeapon = currentHand.GetComponent<Transform>();
        WeaponManager.currentWeaponAnim = currentHand.anim;

        currentHand.transform.localPosition = Vector3.zero;
        currentHand.gameObject.SetActive(true);

        isActivate = true;
    }
```

- *Update()* 
  - `isActive` í•  ë•Œë§Œ, ì´ ë¬´ê¸°ê°€ í™œì„±í™” ë˜ìˆì„ ë•Œë§Œ ì‹¤í–‰í•˜ë„ë¡ í•œë‹¤.
- `GUN`ê³¼ ë‹¤ë¥´ê²Œ ê¸°ë³¸ ë¬´ê¸°ê°€ ì†ì¸ê±´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— Start() ì—ì„œ ë”°ë¡œ ì„¤ì •í•´ì¤€ê±´ ì—†ì—ˆìŒ
- *HandChange(Hand _hand)*
  - ìœ„ì™€ ë™ì¼


![image](https://user-images.githubusercontent.com/42318591/94355101-056fd980-00bc-11eb-85b8-0911e24b86d1.png)




<br>

### ë¬´ê¸° êµì²´ ì• ë‹ˆë©”ì´ì…˜

![image](https://user-images.githubusercontent.com/42318591/94355060-ab6f1400-00bb-11eb-8243-457f1edfd100.png)

![image](https://user-images.githubusercontent.com/42318591/94355064-b88c0300-00bb-11eb-933a-ad92a5a1fc2b.png)

`SubMachineGun1`, `Hand` ë‘˜ ë‹¤ ê°ê° Weapon_Out ì• ë‹ˆë©”ì´ì…˜ë„ ì—°ê²°í•´ì£¼ì—ˆë‹¤. íŒŒë¼ë¯¸í„° ì¶”ê°€í•´ì£¼ê³  `AnyState` ğŸ‘‰ `Weapon_Out` ë¡œ ì „ì´í•˜ë„ë¡ í•˜ì˜€ìŒ. (Has Exit Time ì²´í¬ í•´ì œ, Time Duration 0.1, ì „ì´ ì¡°ê±´ì€ "Weapon_Out"ì´ Trueì¼ ë•Œ)


<br>

### ë“¤ê³  ìˆëŠ” ë¬´ê¸°ì— ë”°ë¥¸ ê±·ê¸°, ë›°ê¸° ì• ë‹ˆë©”ì´ì…˜ ì¬ìƒ

#### ğŸ“œCrosshair.cs

```c#
    public void WalkingAnimation(bool _flag)
    {
        WeaponManager.currentWeaponAnim.SetBool("Walk", _flag);  // ê±·ê¸°ì‹œ ë¬´ê¸° ì• ë‹ˆë©”ì´ì…˜
        animator.SetBool("Walking", _flag); // ê±·ê¸°ì‹œ í¬ë¡œìŠ¤í—¤ì–´ ì• ë‹ˆë©”ì´ì…˜
    }

    public void RunningAnimation(bool _flag)
    {
        WeaponManager.currentWeaponAnim.SetBool("Run", _flag); // ë›°ê¸°ì‹œ ë¬´ê¸° ì• ë‹ˆë©”ì´ì…˜
        animator.SetBool("Running", _flag); // ë›°ê¸°ì‹œ í¬ë¡œìŠ¤í—¤ì–´ ì• ë‹ˆë©”ì´ì…˜
    }
    }

    public void JumpingAnimation(bool _flag)
    {
        animator.SetBool("Running", _flag); // ì í”„ì‹œ í¬ë¡œìŠ¤í—¤ì–´ ì• ë‹ˆë©”ì´ì…˜
    }
    }
```

*ë¬´ê¸°ì— ë”°ë¥¸ ê±·ê¸°, ë›°ê¸° ì• ë‹ˆë©”ì´ì…˜ì„ êµ¬í˜„í•˜ì§€ ì•Šì•˜ì—ˆë‹¤.*

- `ê±·ê¸°`, `ë›°ê¸°`ëŠ” ì´ì´ë“  ì†ì´ë“  ê°„ì— ì–´ë–¤ ë¬´ê¸°ë“  ê°„ì— ì• ë‹ˆë©”ì´ì…˜ì´ ì¬ìƒë˜ëŠ” ë¡œì§ì´ ë™ì¼í•˜ë‹¤. ì‹¬ì§€ì–´ <u>ê±·ê¸°, ë›°ê¸° ìƒíƒœì— ë”°ë¥¸ í¬ë¡œìŠ¤í—¤ì–´ ì• ë‹ˆë©”ì´ì…˜</u> ì¡°ê±´ê³¼ë„ ë™ì¼í•˜ë‹¤.
  - ê±·ê¸° 
    - ğŸ“œPlayerConotrller.cs ì˜ *MoveCheck()* í•¨ìˆ˜ì—ì„œ `isWalk` ê°’ì„ ì„¤ì •í•˜ê³ 
    - ê·¸ì— ë”°ë¼ ğŸ“œCrosshair.csì˜ *WalkingAnimation(bool _flag)* ì˜ ì¸ìˆ˜ë¡œ ë„˜ê²¨ ì• ë‹ˆë©”ì´ì…˜ íŒŒë¼ë¯¸í„° "Walking"ì˜ Bool ê°’ì„ ì„¤ì •í•˜ê³  ì• ë‹ˆë©”ì´ì…˜ì„ ì¬ìƒí–ˆì—ˆë‹¤.
  - ë‹¬ë¦¬ê¸°
    - ğŸ“œPlayerConotrller.cs ì˜ *Run()* í•¨ìˆ˜ì—ì„œ `isWalk` ê°’ì„ Trueë¡œ ì„¤ì •í•˜ê±°ë‚˜, *RunCancel()* í•¨ìˆ˜ì—ì„œ  `isWalk` ê°’ì„ Falseë¡œ ì„¤ì •í–ˆì—ˆê³ 
    - ê·¸ì— ë”°ë¼ ğŸ“œCrosshair.csì˜ *RunningAnimation(bool _flag)* ì˜ ì¸ìˆ˜ë¡œ ë„˜ê²¨ ì• ë‹ˆë©”ì´ì…˜ íŒŒë¼ë¯¸í„° "Running"ì˜ Bool ê°’ì„ ì„¤ì •í•˜ê³  ì• ë‹ˆë©”ì´ì…˜ì„ ì¬ìƒí–ˆì—ˆë‹¤.
- ë”°ë¼ì„œ í•œ ë¬¸ì¥ìœ¼ë¡œ ì–´ë–¤ ë¬´ê¸° ì¢…ë¥˜ë“  ê°„ì— ê±·ê¸°, ë›°ê¸° ì• ë‹ˆë©”ì´ì…˜ì„ ì¬ìƒí•  ìˆ˜ ìˆë„ë¡
  - *WalkingAnimation(bool _flag)* ì— 
    - *WeaponManager.currentWeaponAnim.SetBool("Walk", _flag);* ì¶”ê°€
  - *RunningAnimation(bool _flag)* ì— 
    - *WeaponManager.currentWeaponAnim.SetBool("Run", _flag);* ì¶”ê°€
- *JumpingAnimation(bool _flag)* ì„ ë”°ë¡œ ë§Œë“¤ì–´ ì¤€ ì´ìœ ëŠ”, ì í”„ í•˜ê±°ë‚˜ ì¶”ë½í•  ë•Œë„, ì¦‰ `isGround`ê°€ Falseì¼ ë•Œë„ í¬ë¡œìŠ¤ í—¤ì–´ ì• ë‹ˆë©”ì´ì…˜ì„ "Running" íŒŒë¼ë¯¸í„°ë¡œ ì“°ê¸° ë•Œë¬¸ì—
  - ì§„ì§œ ë›¸ ë–„ëŠ” ë¬´ê¸°ë„ ì• ë‹ˆë©”ì´ì…˜ì„ ì ìš©í•˜ê³ 
  - ê·¸ëƒ¥ ì¶”ë½í•  ë•ŒëŠ” ë¬´ê¸°ëŠ” ì• ë‹ˆë©”ì´ì…˜ ì ìš© X í¬ë¡œìŠ¤í—¤ì–´ë§Œ ë‹¬ë¦¬ê¸°ë¡œ ì ìš©ë  ìˆ˜ ìˆë„ë¡ ë”°ë¡œ í•¨ìˆ˜ë¥¼ íŒ ë‹¤.

<br>

#### ğŸ“œPlayerConotrller.cs

```c#
    // ì§€ë©´ ì²´í¬
    private void IsGround()
    {
        isGround = Physics.Raycast(transform.position, Vector3.down, capsuleCollider.bounds.extents.y + 0.1f);
        theCrosshair.JumpingAnimation(!isGround);
    }
```

- RunningAnimation(!isGround); ì—ì„œ JumpingAnimation(!isGround); ë¡œ ë°”ê¿¨ë‹¤.


***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}