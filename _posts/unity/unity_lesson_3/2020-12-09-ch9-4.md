---
title:  "Chapter 9-4. ê±´ì¶• : ê±´ì¶• ì•„ì´í…œ ì†Œëª¨" 

categories:
  -  Unity Lesson 3 
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-12-09
last_modified_at: 2020-12-09
---

ì¸í”„ëŸ°ì— ìˆëŠ” ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° 3D] ì‹¤ì „! ìƒì¡´ê²Œì„ ë§Œë“¤ê¸° - Advanced** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.inflearn.com/course/unity-2#)
{: .notice--warning}


# ê±´ì¶• ì‹œìŠ¤í…œ

## ğŸš€ ê±´ì¶• UI í•„ìš”í•œ ì•„ì´í…œ í…ìŠ¤íŠ¸

![image](https://user-images.githubusercontent.com/42318591/101590418-b6d0ab00-3a2d-11eb-98ce-e101ec153033.png)

ì´ëŸ°ì‹ìœ¼ë¡œ í•´ë‹¹ ìŠ¬ë¡¯ì˜ ê±´ì¶•ë¬¼ì„ ê±´ì¶•í•˜ê¸° ìœ„í•´ì„œ í•„ìš”í•œ ì•„ì´í…œì„ í‘œì‹œí•´ì¤„ ê²ƒì´ë‹¤. í…ìŠ¤íŠ¸ UI ë¥¼ ìŠ¬ë¡¯ë“¤ì— ì¶”ê°€í•´ì¤€ë‹¤. 

### ğŸ“œCraftManual.cs

```c#
[System.Serializable]
public class Craft
{
    public string craftName; // ì´ë¦„
    public Sprite craftImage; // ì´ë¯¸ì§€
    public string craftDescription; // ì„¤ëª…
    public string[] craftNeedItem;  // í•„ìš”í•œ ì•„ì´í…œ
    public int[] craftNeedItemCount; // í•„ìš”í•œ ì•„ì´í…œì˜ ê°œìˆ˜
    public GameObject go_prefab; // ì‹¤ì œ ì„¤ì¹˜ ë  í”„ë¦¬íŒ¹
    public GameObject go_PreviewPrefab; // ë¯¸ë¦¬ ë³´ê¸° í”„ë¦¬íŒ¹
}

public class CraftManual : MonoBehaviour
{
    [SerializeField]
    private Text[] text_SlotNeedItem;
```

í•„ìš”í•œ ì•„ì´í…œ í…ìŠ¤íŠ¸ë„ ì¶”ê°€í•´ì£¼ì. í•„ìš”í•œ ì•„ì´í…œì€ ì—¬ëŸ¬ê°œì¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë°°ì—´ë¡œ ì„ ì–¸í•œë‹¤. 

- í•„ìš”í•œ ì•„ì´í…œ `craftNeedItem` ë°°ì—´
- í•„ìš”í•œ ì•„ì´í…œì˜ ê°œìˆ˜ `craftNeedItemCount` ë°°ì—´
  - craftNeedItemCount[i]ì€ craftNeedItem[i] ì•„ì´í…œì˜ ê°¯ìˆ˜ê°€ ë“¤ì–´ê°„ë‹¤.

ì´ í…ìŠ¤íŠ¸ë¥¼ í‘œì‹œí•  4 ê°œì˜ í…ìŠ¤íŠ¸ UI ì˜¤ë¸Œì íŠ¸ë“¤ë„ ë°°ì—´ë¡œ ì¶”ê°€í•´ì£¼ì.

![image](https://user-images.githubusercontent.com/42318591/101601904-952cef00-3a40-11eb-9f58-8efe95bc8056.png)

- ëª¨ë‹¥ë¶ˆ ê±´ì¶•ì‹œ Leaf 3 ê°œ, Log 2 ê°œ í•„ìš”
- í† ëŒ€ ê±´ì¶•ì‹œ Log 2 ê°œ í•„ìš”
- ê¸°ë‘¥ ê±´ì¶•ì‹œ Log 1 ê°œ í•„ìš”

```c#
    private void ClearSlot()
    {
        for (int i = 0; i < go_Slots.Length; i++)
        {
            image_Slot[i].sprite = null;
            text_SlotName[i].text = "";
            text_SlotDescription[i].text = "";
            text_SlotNeedItem[i].text = "";
            go_Slots[i].SetActive(false);
        }
    }

    private void TabSlotSetting(Craft[] _craft_tab)
    {
        ClearSlot();

        craft_SelectedTab = _craft_tab;

        int startSlotNumber = (page - 1) * go_Slots.Length; // 4 ì˜ ë°°ìˆ˜

        for (int i = startSlotNumber; i < craft_SelectedTab.Length; i++)
        {
            if (i == page * go_Slots.Length) // ìŠ¬ë¡¯ 4 ê°œ ì´ˆê³¼í•˜ì§€ ì•Šë„ë¡
                break;

            go_Slots[i - startSlotNumber].SetActive(true);

            image_Slot[i - startSlotNumber].sprite = craft_SelectedTab[i].craftImage;
            text_SlotName[i - startSlotNumber].text = craft_SelectedTab[i].craftName;
            text_SlotDescription[i - startSlotNumber].text = craft_SelectedTab[i].craftDescription;

            for (int j = 0; j < craft_SelectedTab[i].craftNeedItem.Length; j++)
            {
                text_SlotNeedItem[i - startSlotNumber].text += craft_SelectedTab[i].craftNeedItem[j];
                text_SlotNeedItem[i - startSlotNumber].text += " x " + craft_SelectedTab[i].craftNeedItemCount[j] + "\n";
            }
        }
    }
```

- *ClearSlot()*
  - ì•„ì´í…œ ì„¤ëª… í…ìŠ¤íŠ¸ `text_SlotNeedItem`
- *TabSlotSetting(Craft[] _craft_tab)*
  - ê±´ì¶•ë¬¼ì„ ì§€ì„ ë•Œ í•„ìš”í•œ ì•„ì´í…œì´ ì—¬ëŸ¬ê°œì¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— `text_SlotNeedItem`ì— í…ìŠ¤íŠ¸ ë¬¸ìì—´ ì„¤ì •ì‹œ forë¬¸ìœ¼ë¡œ ëŒë ¤ì•¼ í•œë‹¤. 
    ```
    ì•„ì´í…œì´ 3 ê°œë¼ë©´

    í†µë‚˜ë¬´ x 10
    ë‚˜ë­‡ê°€ì§€ x 5
    ë‚˜ë­‡ì x 2

    ì´ë ‡ê²Œ 3 ì¤„ë¡œ ë‚˜ë‰œ í•˜ë‚˜ì˜ í…ìŠ¤íŠ¸ë¡œì„œ ë“¤ì–´ê°€ì•¼ í•¨.
    ```
    ```c#
            for (int j = 0; j < craft_SelectedTab[i].craftNeedItem.Length; j++)
            {
                text_SlotNeedItem[i - startSlotNumber].text += craft_SelectedTab[i].craftNeedItem[j];
                text_SlotNeedItem[i - startSlotNumber].text += " x " + craft_SelectedTab[i].craftNeedItemCount[j] + "\n"; // í•œ ì¤„ ë„ìš°ê¸°
            }
    ```

![image](https://user-images.githubusercontent.com/42318591/101590521-eda6c100-3a2d-11eb-8939-e17b6dbbfac9.png)

4 ê°œì˜ í•„ìš”í•œ ì•„ì´í…œ í…ìŠ¤íŠ¸ UI ì˜¤ë¸Œì íŠ¸ë„ `text_SlotNeedItem` ë°°ì—´ì— í• ë‹¹í•´ì£¼ê¸° 

<br>

## ğŸš€ ê±´ì¶• ì•„ì´í…œ ì†Œëª¨ ì²˜ë¦¬

ê±´ì¶•í•˜ë©´ ê·¸ ê±´ì¶•í•  ë•Œ ì†Œëª¨ë˜ëŠ” ì•„ì´í…œì„ ì¸ë²¤í† ë¦¬ í˜¹ì€ í€µìŠ¬ë¡¯ì— ìˆëŠ” ì•„ì´í…œì—ì„œ ì°¨ê°í•´ì£¼ì–´ì•¼ í•œë‹¤. ë”°ë¼ì„œ ğŸ“œInventory.cs ì—ì„œ public í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì ì ˆí•˜ê²Œ ì´ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ í•¨

### ğŸ“œInventory.cs

```c#
    public int GetItemCount(string _itemName)
    {
        int temp = SearchSlotItem(slots, _itemName);
        return temp != 0 ? temp : SearchSlotItem(quickSlots, _itemName);
    }

    private int SearchSlotItem(Slot[] _slots, string _itemName)
    {
        for (int i = 0; i < _slots.Length; i++)
        {
            if (_slots[i].item != null)
            {
                if (_itemName == _slots[i].item.itemName)
                    return _slots[i].itemCount;
            }
        }

        return 0;
    }

    public void SetItemCount(string _itemName, int _itemCount)
    {
        if (!ItemCountAdjust(slots, _itemName, _itemCount))
            ItemCountAdjust(quickSlots, _itemName, _itemCount);
    }

    private bool ItemCountAdjust(Slot[] _slots, string _itemName, int _itemCount)
    {
        for (int i = 0; i < _slots.Length; i++)
        {
            if (_slots[i].item != null)
            {
                if (_itemName == _slots[i].item.itemName)
                {
                    _slots[i].SetSlotCount(-_itemCount);
                    return true;
                }
            }
        }
        return false; // ì¸ë²¤í† ë¦¬ì— ì—†ì–´ì„œ í€µìŠ¬ë¡¯ì—ì„œ ë¹¼ì•¼ ë¨
    }
```

- ë¨¼ì € í˜„ì¬ ì¸ë²¤í† ë¦¬ í˜¹ì€ í€µìŠ¬ë¡¯ì—ì„œ ê°€ì§€ê³  ìˆëŠ” ì•„ì´í…œ ê°¯ìˆ˜ê°€ í•´ë‹¹ ê±´ì¶•ë¬¼ì— í•„ìš”í•œ ì•„ì´í…œ ê°¯ìˆ˜ë³´ë‹¤ ì‘ìœ¼ë©´ í”„ë¦¬ë·°ë¥¼ ìƒì„±í•˜ì§€ ëª»í•˜ê²Œ í•´ì•¼ í•œë‹¤. ì¦‰ ê±´ì¶• ìŠ¬ë¡¯ ëˆŒëŸ¬ë„ ê±´ì¶• ë˜ì§€ ì•Šê²Œë” í•´ì•¼ í•œë‹¤. ë”°ë¼ì„œ ì¸ìˆ˜ë¡œ ë°›ì€ ì•„ì´í…œì´ í˜„ì¬ ì¸ë²¤í† ë¦¬ í˜¹ì€ í€µìŠ¬ë¡¯ì— ëª‡ê°œ ìˆëŠ”ì§€ í™•ì¸í•´ì•¼ í•œë‹¤.
  - *GetItemCount*
    - ì¸ìˆ˜ë¡œ ë°›ì€ ì•„ì´í…œ ì´ë¦„ê³¼ ì¼ì¹˜í•˜ëŠ” ì•„ì´í…œì´ ì¸ë²¤í† ë¦¬ í˜¹ì€ í€µìŠ¬ë¡¯ì— ìˆë‹¤ë©´ ê·¸ ê°¯ìˆ˜ë¥¼ ë¦¬í„´í•œë‹¤. ì—†ë‹¤ë©´ 0 ë¦¬í„´
      - ì¸ë²¤í† ë¦¬ ìŠ¬ë¡¯ë“¤ì—ì„œ ê²€ì‚¬ë¥¼ ì§„í–‰í•˜ê³  *SearchSlotItem(slots, _itemName)*
      - ì—†ë‹¤ë©´ *SearchSlotItem(quickSlots, _itemName)* í€µìŠ¬ë¡¯ ìŠ¬ë¡¯ë“¤ì—ì„œ í•œë²ˆ ë” ê²€ì‚¬ ì§„í–‰
  - *SearchSlotItem*
    - ì¸ìˆ˜ë¡œ ë°›ì€ ìŠ¬ë¡¯ ë°°ì—´ì—ì„œ ì¸ìˆ˜ë¡œ ë°›ì€ ì´ë¦„ê³¼ ì¼ì¹˜í•˜ëŠ” ì•„ì´í…œì„ ì°¾ëŠ”ë‹¤.
    - ì°¾ì•˜ë‹¤ë©´ ê·¸ ì•„ì´í…œì˜ í˜„ì¬ ê°¯ìˆ˜ ë¦¬í„´
    - ì—†ë‹¤ë©´ 0 ë¦¬í„´
- ê±´ì¶•ë¬¼ì„ ì§€ì—ˆë‹¤ë©´ ì¸ë²¤í† ë¦¬ í˜¹ì€ í€µìŠ¬ë¡¯ì—ì„œ ë³´ìœ ì¤‘ì¸ ì•„ì´í…œ ê°¯ìˆ˜ì—ì„œ ì°¨ê° ì²˜ë¦¬ë¥¼ í•´ì•¼ í•œë‹¤. ê±´ì¶•ì— ì“°ì¸ ê°¯ìˆ˜ë§Œí¼! 
  - *SetItemCount*
    - ì¸ë²¤í† ë¦¬ ìŠ¬ë¡¯ë“¤ì—ì„œ ê²€ì‚¬ë¥¼ ì§„í–‰í•˜ê³  *ItemCountAdjust(slots, _itemName, _itemCount)* ì—†ë‹¤ë©´ *ItemCountAdjust(quickSlots, _itemName, _itemCount)* í€µìŠ¬ë¡¯ ìŠ¬ë¡¯ë“¤ì—ì„œ í•œë²ˆ ë” ê²€ì‚¬ ì§„í–‰
  - *ItemCountAdjust*
    - ì¸ìˆ˜ë¡œ ë°›ì€ ìŠ¬ë¡¯ ë°°ì—´ì—ì„œ ì¸ìˆ˜ë¡œ ë°›ì€ ì´ë¦„ê³¼ ì¼ì¹˜í•˜ëŠ” ì•„ì´í…œì„ ì°¾ëŠ”ë‹¤.
    - ì°¾ì•˜ë‹¤ë©´ ê·¸ ì•„ì´í…œì˜ ë³´ìœ  ê°¯ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ë°›ì€ `_itemCount` ë§Œí¼ ì°¨ê°í•˜ê³  true ë¦¬í„´
    - ëª» ì°¾ì•˜ë‹¤ë©´ false ë¦¬í„´


<br>

### ğŸ“œCraftManual.cs

```c#
    // í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸
    private Inventory theInventory;

    void Start()
    {
        theInventory = FindObjectOfType<Inventory>();

        tabNumber = 0;
        page = 1;
        TabSlotSetting(craft_fire);
    }
```

ğŸ“œInventory ë¥¼ ì»´í¬ë„ŒíŠ¸ë¡œ ê°€ì ¸ì˜¨ë‹¤. ìœ„ì—ì„œ ë§Œë“  public í•¨ìˆ˜ë“¤ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ.

```c#
    public void SlotClick(int _slotNumber)
    {
        selectedSlotNumber = _slotNumber + (page - 1) * go_Slots.Length;

        if (!CheckIngredient())
            return;

        go_Preview = Instantiate(craft_SelectedTab[selectedSlotNumber].go_PreviewPrefab, tf_Player.position + tf_Player.forward, Quaternion.identity);
        go_Prefab = craft_SelectedTab[selectedSlotNumber].go_prefab;
        isPreviewActivated = true;
        go_BaseUI.SetActive(false);
    }

    private bool CheckIngredient()
    {
        for (int i = 0; i < craft_SelectedTab[selectedSlotNumber].craftNeedItem.Length; i++)
        {
            if (theInventory.GetItemCount(craft_SelectedTab[selectedSlotNumber].craftNeedItem[i]) < craft_SelectedTab[selectedSlotNumber].craftNeedItemCount[i])
                return false;
        }

        return true;
    }

    private void UseIngredient()
    {
        for (int i = 0; i < craft_SelectedTab[selectedSlotNumber].craftNeedItem.Length; i++)
        {
            theInventory.SetItemCount(craft_SelectedTab[selectedSlotNumber].craftNeedItem[i], craft_SelectedTab[selectedSlotNumber].craftNeedItemCount[i]);
        }
    }

    private void Build()
    {
        if(isPreviewActivated && go_Preview.GetComponent<PreviewObject>().isBuildable())
        {
            UseIngredient();

            Instantiate(go_Prefab, go_Preview.transform.position, go_Preview.transform.rotation);
            Destroy(go_Preview);
            isActivated = false;
            isPreviewActivated = false;
            go_Preview = null;
            go_Prefab = null;
        }
    }
```


- *SlotClick*
  - í˜„ì¬ ë³´ìœ  ì•„ì´í…œìœ¼ë¡œ í´ë¦­í•œ ìŠ¬ë¡¯ì˜ ê±´ì¶•ë¬¼ì„ ì§€ì„ ìˆ˜ ì—†ë‹¤ë©´ í”„ë¦¬ë·°ë¥¼ ì§“ì§€ ëª»í•œë‹¤. `if (!CheckIngredient()) return;`
- *CheckIngredient()*
  - í˜„ì¬ ì„ íƒëœ íƒ­ì˜ ì„ íƒëœ ìŠ¬ë¡¯ì´ í•„ìš”í•œ ì•„ì´í…œë“¤ì€ ì—¬ëŸ¬ê°œê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ forë¬¸ ëŒë ¤ ë‹¤ ê²€ì‚¬
    - ì•„ì´í…œ í•˜ë‚˜ë¼ë„ ê°¯ìˆ˜ ëª¨ìë¥´ë©´ ê±´ì¶• ëª»í•œë‹¤.
    - í˜„ì¬ ì„ íƒëœ íƒ­ì˜ ì„ íƒëœ ìŠ¬ë¡¯ì´ í•„ìš”í•œ ì•„ì´í…œì˜ ê°¯ìˆ˜ë³´ë‹¤ í˜„ì¬ ë³´ìœ  ì¤‘ì¸ ì•„ì´í…œ ê°¯ìˆ˜ê°€ ë” ì‘ìœ¼ë©´ ê±´ì¶•í•˜ì§€ ëª»í•œë‹¤. false ë¦¬í„´ 
      - ğŸ“œInventoryì˜ *GetItemCount* í•¨ìˆ˜ ì‚¬ìš©
- *UseIngredient()*
  - ê±´ì¶•ì‹œ ì‹¤ì œ ê±´ì¶•ë¬¼ì— í•„ìš”í•œ ì•„ì´í…œë“¤ì˜ ì¸ë²¤í† ë¦¬orí€µìŠ¬ë¡¯ ì°¨ê° ì²˜ë¦¬.
    - ğŸ“œInventoryì˜ *SetItemCount* í•¨ìˆ˜ ì‚¬ìš©
- *Build()*
  - ê±´ì¶•ì‹œ *UseIngredient()* í˜¸ì¶œí•˜ì—¬ ì•„ì´í…œ ì°¨ê°


![image](https://user-images.githubusercontent.com/42318591/101590673-39f20100-3a2e-11eb-99be-c4a87064a410.png)


***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}