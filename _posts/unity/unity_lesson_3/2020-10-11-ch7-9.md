---
title:  "Chapter 7-9. AI : ê³ ê¸° í•´ì²´" 

categories:
  -  Unity Lesson 3 
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-10-11
last_modified_at: 2020-10-11
---

ì¸í”„ëŸ°ì— ìˆëŠ” ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° 3D] ì‹¤ì „! ìƒì¡´ê²Œì„ ë§Œë“¤ê¸° - Advanced** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.inflearn.com/course/unity-2#)
{: .notice--warning}

# Chapter 7. ë™ë¬¼ë“¤ì˜ ê³µê²©í˜• AI, ë„ë§í˜• AI êµ¬í˜„

## ğŸš– ì¹¼ ë§Œë“¤ê¸° (ê³ ê¸°ë¥¼ í•´ì²´í•  ìˆ˜ ìˆëŠ”)

### ì¹¼ ì§ˆí•˜ëŠ” ì† ëª¨ë¸

![image](https://user-images.githubusercontent.com/42318591/95693792-1f3b2000-0c69-11eb-9da2-3395e21b7efb.png)

ê³ ê¸°ë¥¼ í•´ì²´í•  ë•ŒëŠ” ì¹¼ì„ ë“¤ê³  ìˆëŠ” ì†ì´ ë‚˜ì™€ì•¼ í•˜ê¸° ë•Œë¬¸ì— `Holder`ì— ë¹ˆ ì˜¤ë¸Œì íŠ¸ `Meat Knife Holder`ë¥¼ ë§Œë“¤ê³  ê·¸ì˜ ìì‹ìœ¼ë¡œ ì¹¼ì„ ë“¤ê³  ìˆëŠ” ì† ëª¨ë¸ì„ ë„£ì–´ ì£¼ì—ˆë‹¤.

- `Meat Knife Holder`
  - ë ˆì´ì–´ëŠ” ë‹¤ë¥¸ ì†, ë¬´ê¸°ë“¤ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ Weapon ìœ¼ë¡œ í•´ì£¼ì–´ì•¼ Weapon Camera ì—ì„œ ë Œë”ë§ ë  ìˆ˜ ìˆë‹¤.
  - íŠ¸ëœìŠ¤í¼ ìƒíƒœë„ ë‹¤ë¥¸ ë¬´ê¸° Holder ë“¤ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ 
  - `Meat Knife`
    - ì• ë‹ˆë©”ì´í„° ë¶™ì´ê¸°
    - ê³ ê¸°ë¥¼ í•´ì²´í•  ë•Œë§Œ ë‚˜ì™€ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë””í´íŠ¸ ë¹„í™œì„±í™”

### ì¹¼ì§ˆ ì• ë‹ˆë©”ì´ì…˜

![image](https://user-images.githubusercontent.com/42318591/95693884-bc965400-0c69-11eb-86c2-c785aca74e34.png)

`Meat Knife`ê°€ í™œì„±í™”ë˜ìë§ˆì ê³ ê¸°ë¥¼ í•´ì²´í•˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ ì¬ìƒë  ê²ƒì´ë‹¤. ë””í´íŠ¸ State ì´ë¯€ë¡œ.

<br>

## ğŸš– ê³ ê¸° ì•„ì´í…œ

### ê³ ê¸° í”„ë¦¬íŒ¹

![image](https://user-images.githubusercontent.com/42318591/95694215-b5704580-0c6b-11eb-8896-76dba3e73275.png)

- `Meat Raw Item` í”„ë¦¬íŒ¹
  - íƒœê·¸ì™€ ë ˆì´ì–´ `Item`
  - Box Collider
  - Rigidbody
    - Mass 0.001
    - Drag 0.5
    - Angular Drag 0.5
  - ğŸ“œItemPickUp

<br>

### ê³ ê¸° ì•„ì´í…œí™”

![image](https://user-images.githubusercontent.com/42318591/95694253-f8321d80-0c6b-11eb-9d3b-13031c242ce3.png)

ë°©ê¸ˆ ë§Œë“  ê³ ê¸° í”„ë¦¬íŒ¹ í• ë‹¹. ê³ ê¸° í”„ë¦¬íŒ¹ì˜ ğŸ“œItemPickUp ì—ë„ ì´ `Meat_Raw` Item ì„ í• ë‹¹í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/42318591/95694266-16981900-0c6c-11eb-966a-f87dc64486ce.png)


<br>

### ğŸ“œWeakAnimal.cs

```c#
    [SerializeField]
    protected Item item_Prefab;  // í•´ë‹¹ ë™ë¬¼ì—ê²Œì„œ ì–»ì„ ì•„ì´í…œ
    [SerializeField]
    public int itemNumber;  // ì•„ì´í…œ íšë“ ê°œìˆ˜

    public Item GetItem()
    {
        this.gameObject.tag = "Untagged";
        Destroy(this.gameObject, 3f);
        return item_Prefab;
    }
```

ì•½í•œ ë™ë¬¼ë“¤(ë¼ì§€)ì€ ì£½ìœ¼ë©´ ì•„ì´í…œí™”(ê³ ê¸°) ì‹œí‚¬ ê²ƒì´ë¼ì„œ ì¶”ê°€í–ˆë‹¤.

- *GetItem()*
  - **í•´ë‹¹ ë™ë¬¼ì´ ì£½ìœ¼ë©´ ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ì•„ì´í…œí™”** í•  ê²ƒì´ë‹¤.
    - ë™ë¬¼ì´ ì£½ì–´ë„ íƒœê·¸ê°€ ê³„ì† "Weak_Animal"ì¸ ìƒíƒœë©´  ê°™ì€ ì—¬ëŸ¬ ê³³ì—ì„œ Raycast ì¶©ëŒ ì²˜ë¦¬ê°€ ì¼ì–´ë‚  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— íƒœê·¸ë¥¼ "Untagged"ë¡œ ë°”ê¿”ì¤€ë‹¤.
      - ì´ ê³¼ì •ì„ í•´ì£¼ì§€ ì•Šìœ¼ë©´ ë¼ì§€ê°€ ì£½ì–´ë„ íƒœê·¸ê°€ ê³„ì† "Weak_Animal"ì´ê¸° ë•Œë¬¸ì— ê³¡ê´­ì´ë¡œ ì£½ì€ ë¼ì§€ë¥¼ ë–„ë¦¬ë©´ ì†Œë¦¬ê°€ ë‚˜ê³  ë°ë¯¸ì§€ë„ ë¼ì§€ì—ê²Œ ë˜ ë“¤ì–´ê°€ê²Œ ëœë‹¤. ğŸ“œPickaxeController 
      - ì´ ê³¼ì •ì„ í•´ì£¼ì§€ ì•Šìœ¼ë©´ ì¶”í›„ ì„œìˆ ë  ğŸ“œActionController ì—ì„œ ë¼ì§€ê°€ ì£½ì—ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ì£½ì€ ë¼ì§€ë¥¼ í–¥í•´ ë°”ë¼ë³´ë©´ ê³„ì† 'ê³ ê¸° í•´ì²´' ì•¡ì…˜ í…ìŠ¤íŠ¸ê°€ í™œì„±í™” ë  ê²ƒì´ë¯€ë¡œ íƒœê·¸ë¥¼ "Untagged"ë¡œ ë°”ê¿”ì¤€ë‹¤. `else`ì— ê±¸ë¦¬ ë„ë¡ ğŸ‘‡
        ```c#
        else if (hitInfo.transform.tag == "Weak_Animal")
            MeatInfoAppear();
        else 
            InfoDisappear();
        ``` 
    - ë¼ì§€ê°€ ì£½ìœ¼ë©´ ë¼ì§€ë¥¼ 3ì´ˆ í›„ì— ì—†ì–´ì§€ê²Œ í•œë‹¤.
    - `Mear_Raw` Item ì´ í• ë‹¹ ë˜ì–´ ìˆëŠ” `item_Prefab`ì„ ë¦¬í„´í•œë‹¤.
      - ê³ ê¸° Item ë¦¬í„´


![image](https://user-images.githubusercontent.com/42318591/95694201-a25d7580-0c6b-11eb-9e85-728a69c8663e.png)

ë¼ì§€ëŠ” ì£½ìœ¼ë©´ `Mear_Raw` Item ì•„ì´í…œí™” ëœë‹¤. ë¼ì§€ë¥¼ ì‚¬ëƒ¥í•˜ë©´ ê³ ê¸° 2 ê°œë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.


<br>

## ğŸš– ê³ ê¸° í•´ì²´ ì²˜ë¦¬

### ğŸ“œPlayerControllder.cs

```c#
static public bool isActivated = true;

    void Update()  
    {
        if (isActivated)
        {
            IsGround();
            TryJump();
            TryRun();
            TryCrouch();
            Move();
            MoveCheck();
            if (!Inventory.invectoryActivated)
            {
                CameraRotation();
                CharacterRotation();
            }
        }
    }
```

- ê³ ê¸°ë¥¼ í•´ì²´í•  ë• í”Œë ˆì´ì–´ê°€ ì›€ì§ì¼ ìˆ˜ ì—†ë„ë¡ í•  ê²ƒì´ë‹¤. 
  - ê³ ê¸° í•´ì²´ ì¤‘ì—ëŠ” `isActivated`ë¥¼ í•´ì²´ ì¤‘ì¼ ë™ì•ˆë§Œ False ë¡œ ë§Œë“¤ ê²ƒì´ë‹¤.
- ì´ë ‡ê²Œ í•´ì£¼ëŠ” ì´ìœ 
  - ë°‘ì— ì„œìˆ í•  ğŸ“œActionController ì—ì„œ, ê³ ê¸° í•´ì²´ ì¤‘ì— í”Œë ˆì´ì–´ê°€ ê³ ê°œë¥¼ ëŒë¦¬ê±°ë‚˜ ì›€ì§ì—¬ì„œ ë©”ì¸ ì¹´ë©”ë¼ì—ì„œ ì˜ëŠ” Raycast ë°©í–¥ì´ ë°”ë€Œì–´ `hitInfo`ê°€ ì£½ì€ ë¼ì§€ê°€ ì•„ë‹Œ, Terrain ì´ ë˜ë²„ë¦°ë‹¤ê±°ë‚˜ í•˜ë©´, ë¼ì§€ë¡œë¶€í„° ê³ ê¸° ì•„ì´í…œì„ ì–»ìœ¼ë ¤ëŠ” ì•„ë˜ ì½”ë“œì—ì„œ ëŸ°íƒ€ì„ ì—ëŸ¬ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì´ë‹¤. `hitIfno`ì— ë¼ì§€ê°€ ìˆì§€ ì•Šê¸° ë•Œë¬¸ì—! ë”°ë¼ì„œ ê³ ê¸°ë¥¼ í•´ì²´í•˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ì„ í•  ë•Œ ë™ì•ˆì—ëŠ” `hitInfo`ì— ë‹¤ë¥¸ê²Œ ë“¤ì–´ê°€ì§€ ì•Šë„ë¡ í”Œë ˆì´ì–´ê°€ ì›€ì§ì´ì§€ ëª» í•˜ë„ë¡ ì„¤ì •.
    ```c#
    theInventory.AcquireItem(hitInfo.transform.GetComponent<WeakAnimal>().GetItem(), hitInfo.transform.GetComponent<WeakAnimal>().itemNumber);
    ```
- ë”°ë¼ì„œ `isActivated` True ì¼ ë•Œë§Œ Update ì‹¤í–‰ 


### ğŸ“œWeaponSway.cs

```c#
public static bool isActivated = true;

    void Update()
    {
        if (!Inventory.invectoryActivated && isActivated)
            TrySway();
    }
```

ê³ ê¸°ë¥¼ í•´ì²´í•˜ëŠ” ì†ì€ ğŸ“œWeaponSway ë¥¼ ì ìš©í•˜ì§€ ì•Šë„ë¡ í ê²ƒì´ê¸° ë•Œë¬¸ì— `isActivated` ì„¤ì •. ë”°ë¼ì„œ `isActivated` True ì¼ ë•Œë§Œ Update ì‹¤í–‰ 

<br>

### Animal Layer

![image](https://user-images.githubusercontent.com/42318591/95694728-7b547300-0c6e-11eb-919b-ea3b08d893ad.png)

ë¨¼ì € ë¼ì§€ì™€ ì‚¬ìì˜ Layer ë¥¼ `Animal`ë¡œ ì„¤ì •í•´ì£¼ì—ˆë‹¤. ğŸ“œActionController.cs ì—ì„œ ì•¡ì…˜ í…ìŠ¤íŠ¸ë¥¼ ë„ìš¸ ë•Œ `Item` Layer ë¥¼ ê°€ì§„ ê²ƒë“¤ì— ëŒ€í•´ì„œë§Œ Raycast ë¥¼ í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ë”°ë¡œ ë™ë¬¼ë“¤ìš© ë ˆì´ì–´ë¥¼ ë§Œë“¤ì–´ ì£¼ì—ˆê³ , Item ë¿ë§Œ ì•„ë‹ˆë¼ ë™ë¬¼ë“¤ì— ëŒ€í•´ì„œë„ Raycast ë¥¼ í•˜ë„ë¡ í•˜ì˜€ë‹¤.

![image](https://user-images.githubusercontent.com/42318591/95694761-adfe6b80-0c6e-11eb-96bf-c52a22ac783f.png)

ì£½ì€ ë¼ì§€ê°€ ë©”ì¸ ì¹´ë©”ë¼ì˜ Raycastë¥¼ ë°›ì•„ ì•¡ì…˜ í…ìŠ¤íŠ¸ë¥¼ ë„ìš¸ ìˆ˜ ìˆë„ë¡

![image](https://user-images.githubusercontent.com/42318591/95694754-a048e600-0c6e-11eb-9d8e-fcbc7ae279ec.png)

ë™ë¬¼ë“¤ ë ˆì´ì–´ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ ì£¼ì—ˆìœ¼ë‹ˆ ë©”ì¸ ì¹´ë©”ë¼ì— ì˜ ë‹´ê¸°ë„ë¡ Culling Mask ì¶”ê°€

![image](https://user-images.githubusercontent.com/42318591/95694772-c1a9d200-0c6e-11eb-8326-e69924321a35.png)

ë¬´ê¸°ì— ë§ì„ ìˆ˜ ìˆë„ë¡ ë™ë¬¼ ë ˆì´ì–´ ì¶”ê°€

### ğŸ“œActionController.cs

- ì£½ì€ ë¼ì§€ë¥¼ í™”ë©´ ê°€ìš´ë° ë“¤ì–´ì˜¤ê²Œ ë°”ë¼ë³´ë©´ ê³ ê¸°ë¥¼ ì£¼ìš¸ ìˆ˜ ìˆë‹¤ëŠ” ì•¡ì…˜ í…ìŠ¤íŠ¸ë¥¼ ë„ìš´ë‹¤.
  - ì¹´ë©”ë¼ì—ì„œ Raycast ì¨
- ì£½ì€ ë¼ì§€ë¥¼ í™”ë©´ ê°€ìš´ë° ë“¤ì–´ì˜¤ê²Œ ë°”ë¼ë³¸ ìƒíƒœì—ì„œ `E`í‚¤ë¥¼ ëˆ„ë¥´ë©´ 
  - ê³ ê¸°ë¥¼ í•´ì²´í•˜ëŠ” ì†ìœ¼ë¡œ ë°”ë€Œê³ 
  - ê³ ê¸°ë¥¼ í•´ì²´í•˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ ë‚˜ì˜¤ë©°
  - ê³ ê¸°ê°€ ì•„ì´í…œí™” ë˜ì–´ ì¸ë²¤í† ë¦¬ì— ë“¤ì–´ê°€ê²Œ í•œë‹¤.

```c#
public class ActionController : MonoBehaviour
{
    private bool pickupActivated = false;  // ì•„ì´í…œ ìŠµë“ ê°€ëŠ¥í• ì‹œ True 
    private bool dissolveActivated = false; // ê³ ê¸° í•´ì²´ ê°€ëŠ¥í•  ì‹œ True (ë¼ì§€ ì‹œì²´ë¥¼ ë°”ë¼ ë³¼ ë•Œ)
    private bool isDissolving = false;  // ê³ ê¸° í•´ì²´ ì¤‘ì¼ ë•Œ True (ì¤‘ë³µí•´ì„œ í•´ì²´í•˜ì§€ ì•Šë„ë¡)
aponManager;  // ê³ ê¸° í•´ì²´í•  ë•Œ ê¸°ì¡´ì— ë“¤ê³  ìˆë˜ ë¬´ê¸°ë¥¼ ë¹„í™œì„±í™”í•˜ê¸° ìœ„í•´ì„œ
    [SerializeField]
    private Transform tf_MeatDissolveTool;  // ê³ ê¸° í•´ì²´ ì†. ì¦‰ Meat Knife. ê³ ê¸° í•´ì²´í•  ë•Œ í™œì„±í™” í•´ì•¼ í•¨

    [SerializeField]
    private string sound_meat; // ê³ ê¸° í•´ì²´ ì†Œë¦¬

    void Update()
    {
        CheckAction();  // ê³ ê¸° or ì•„ì´í…œ ì•¡ì…˜ í…ìŠ¤íŠ¸ ë„ìš°ê¸° ì‹œë„
        TryAction();
    }

    private void TryAction()
    {
        if(Input.GetKeyDown(KeyCode.E))  // E í‚¤ ì…ë ¥ì´ ë“¤ì–´ ì˜¤ë©´ 
        {
            CheckAction();   // ê³ ê¸° or ì•„ì´í…œ ì•¡ì…˜ í…ìŠ¤íŠ¸ ë„ìš°ê¸° ì‹œë„
            CanPickUp();  // ì•„ì´í…œì„ ì£¼ìš¸ ìˆ˜ ìˆëŠ”ì§€ 
            CanMeat();  // ê³ ê¸°ë¥¼ ì£¼ìš¸ ìˆ˜ ìˆëŠ”ì§€
        }
    }
    
    public IEnumerator WhenInventoryIsFull()
    {
        itemFullText.gameObject.SetActive(true);
        itemFullText.text = "ì•„ì´í…œì´ ê½‰ ì°¼ìŠµë‹ˆë‹¤.";

        yield return new WaitForSeconds(3.0f);
        itemFullText.gameObject.SetActive(false);
    }

    private void CheckAction()
    {
        if (Physics.Raycast(transform.position, transform.forward, out hitInfo, range, layerMask))
        {
            if (hitInfo.transform.tag == "Item")
                ItemInfoAppear();
            else if (hitInfo.transform.tag == "Weak_Animal")
                MeatInfoAppear();
            else
                InfoDisappear();
        }
        else
            InfoDisappear();
    }

    private void ItemInfoAppear()
    {
        pickupActivated = true;
        actionText.gameObject.SetActive(true);
        actionText.text = hitInfo.transform.GetComponent<ItemPickUp>().item.itemName + " íšë“ " + "<color=yellow>" + "(E)" + "</color>";
    }

    private void MeatInfoAppear()
    {
        // ğŸ“œAnimal.csì˜ animalName, isDead ì„ public ìœ¼ë¡œ ë°”ê¿¨ë‹¤.
        if (hitInfo.transform.GetComponent<Animal>().isDead) // ì£½ì€ ë¼ì§€ë¥¼ ë°”ë¼ë´¤ì„ ê²½ìš°ì—ë§Œ (ì¹´ë©”ë¼ì—ì„œ ìœ Raycastê°€ ì£½ì€ ë¼ì§€ì™€ ì¶©ëŒ)
        {
            dissolveActivated = true;
            actionText.gameObject.SetActive(true);
            actionText.text = hitInfo.transform.GetComponent<Animal>().animalName + " í•´ì²´í•˜ê¸° " + "<color=yellow>" + "(E)" + "</color>";
        }
    }

    private void InfoDisappear()
    {
        pickupActivated = false;
        dissolveActivated = false;
        actionText.gameObject.SetActive(false);
    }

    private void CanPickUp()
    {
        if(pickupActivated)
        {
            if(hitInfo.transform != null)
            {
                Debug.Log(hitInfo.transform.GetComponent<ItemPickUp>().item.itemName + " íšë“ í–ˆìŠµë‹ˆë‹¤.");
                theInventory.AcquireItem(hitInfo.transform.GetComponent<ItemPickUp>().item);
                Destroy(hitInfo.transform.gameObject);
                InfoDisappear();
            }
        }
    }

    IEnumerator MeatCoroutine()
    {
        WeaponManager.isChangeWeapon = true;  // ê³ ê¸° í•´ì²´ ì¤‘ì— ë¬´ê¸°ê°€ êµì²´ë˜ì§€ ì•Šë„ë¡
        WeaponSway.isActivated = false;

        // ë“¤ê³  ìˆë˜ ë¬´ê¸° ë¹„í™œ
        WeaponManager.currentWeaponAnim.SetTrigger("Weapon_Out");
        PlayerController.isActivated = false;
        yield return new WaitForSeconds(0.2f);  // ì• ë‹ˆë©”ì´ì…˜ ì¬ìƒ í›„ ë¹„í™œë˜ë„ë¡
        WeaponManager.currentWeapon.gameObject.SetActive(false);

        // ì¹¼ êº¼ë‚´ê¸°
        tf_MeatDissolveTool.gameObject.SetActive(true);  // ì• ë‹ˆë©”ì´ì…˜ì€ ì´ë•Œ ìë™ìœ¼ë¡œ ì‹¤í–‰ë¨ (ë””í´íŠ¸ìƒíƒœë‹ˆê¹Œ)
        yield return new WaitForSeconds(0.2f);  // ì• ë‹ˆë©”ì´ì…˜ 0.2ì´ˆ ì§„í–‰ í›„
        SoundManager.instance.PlaySE(sound_meat);  // ê³ ê¸° í•´ì²´ ì†Œë¦¬
        yield return new WaitForSeconds(1.8f);  // ì¹¼ í•´ì²´í•˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ ë‹¤ ëë‚˜ê¸¸ ê¸°ë‹¤ë¦¼

        // ê³ ê¸° ì•„ì´í…œ ì–»ê¸°
        theInventory.AcquireItem(hitInfo.transform.GetComponent<WeakAnimal>().GetItem(), hitInfo.transform.GetComponent<WeakAnimal>().itemNumber);

        // ì¹¼ í•´ì²´ ì†ì€ ì§‘ì–´ ë„£ê³  ë‹¤ì‹œ ì›ë˜ ë¬´ê¸°ë¡œ
        WeaponManager.currentWeapon.gameObject.SetActive(true);
        tf_MeatDissolveTool.gameObject.SetActive(false);

        PlayerController.isActivated = true;
        WeaponSway.isActivated = true;
        WeaponManager.isChangeWeapon = false;  // ë‹¤ì‹œ ë¬´ê¸° êµì²´ê°€ ê°€ëŠ¥í•˜ë„ë¡
        isDissolving = false;
    }

    private void CanMeat()
    {
        if  (dissolveActivated)
        {
            if (hitInfo.transform.tag == "Weak_Animal" && hitInfo.transform.GetComponent<Animal>().isDead && !isDissolving)
            {
                isDissolving = true;
                InfoDisappear();
                
                StartCoroutine(MeatCoroutine()); // ê³ ê¸° í•´ì²´ ì‹¤ì‹œ
            }
        }
    }
}

```

- í‰ì†Œì—
  - *CheckAction* 
    - í™”ë©´ ê°€ìš´ë°ì— ë¬´ì–¸ê°€ê°€ ìˆì„ ë•Œ(ì¹´ë©”ë¼ë¡œë¶€í„° ìœ Raycastì—ì„œ True ë¦¬í„´ ë°›ì•˜ì„ ë•Œ)
      - ê·¸ê²Œ ì•„ì´í…œì´ë¼ë©´ ì£¼ìš¸ ìˆ˜ ìˆë‹¤ëŠ” ì•¡ì…˜ í…ìŠ¤íŠ¸ë¥¼ í™œì„±í™” 'ì‹œë„' í•œë‹¤.
        - *ItemInfoAppear();*
      - **ê·¸ê²Œ ë¼ì§€ë¼ë©´ ê³ ê¸°ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤ëŠ” ì•¡ì…˜ í…ìŠ¤íŠ¸ë¥¼ í™œì„±í™” 'ì‹œë„' í•œë‹¤.**
        - *MeatInfoAppear();* ğŸ‘‰ ê·¸ `hitInfo`ê°€ ì£½ì€ ë¼ì§€ì¼ ë•Œ
          ```c#
          private void MeatInfoAppear()
          {
              // ğŸ“œAnimal.csì˜ animalName, isDead ì„ public ìœ¼ë¡œ ë°”ê¿¨ë‹¤.
              if (hitInfo.transform.GetComponent<Animal>().isDead) // ì£½ì€ ë¼ì§€ë¥¼ ë°”ë¼ë´¤ì„ ê²½ìš°ì—ë§Œ (ì¹´ë©”ë¼ì—ì„œ ìœ Raycastê°€ ì£½ì€ ë¼ì§€ì™€ ì¶©ëŒ)
              {
                  dissolveActivated = true;  // ì´ì œë¶€í„° í•´ì²´ ê°€ëŠ¥í•˜ë„ë¡
                  actionText.gameObject.SetActive(true);  // ì•„ë˜ í…ìŠ¤íŠ¸ ë„ìš°ê¸°
                  actionText.text = hitInfo.transform.GetComponent<Animal>().animalName + " í•´ì²´í•˜ê¸° " + "<color=yellow>" + "(E)" + "</color>";
              }
          }
          ```
      - í™”ë©´ ê°€ìš´ë° ë­”ê°€ ìˆê¸´í•œë° ì•„ì´í…œ íƒœê·¸ë„ ì•„ë‹ˆê³  Weak Animal íƒœê·¸ë„ ì•„ë‹ˆë¼ë©´
        - *InfoDisappear()*
          - ë¼ì§€ê°€ ì£½ìœ¼ë©´ ğŸ“œWeakAnimalì˜ *GetItem()* ì— ì˜í•´ íƒœê·¸ë¥¼ "Untagged"ë¡œ ë°”ê¿€ ê²ƒì´ê¸° ë•Œë¬¸ì—, ì´ë ‡ê²Œ ì´ë¯¸ ê³ ê¸°ë¥¼ ì–»ì–´ íƒœê·¸ê°€ "Untagged"ê°€ ëœ ì£½ì€ ë¼ì§€ì¼ ê²½ìš°ì—ëŠ” í…ìŠ¤íŠ¸ë¥¼ ë„ìš°ì§€ ì•Šë„ë¡ else ì²˜ë¦¬ë¥¼ í•´ì£¼ì—ˆë‹¤.
            ```c#
            private void InfoDisappear()
            {
              pickupActivated = false;  // ì•„ì´í…œ ì£¼ìš¸ ìˆ˜ ì—†ë„ë¡
              dissolveActivated = false;  // í•´ì²´ê°€ ê°€ëŠ¥í•˜ì§€ ì•Šë„ë¡
              actionText.gameObject.SetActive(false);  // í…ìŠ¤íŠ¸ ë¹„í™œ
            }
            ```
- `E`í‚¤ ì…ë ¥ì´ ë“¤ì–´ ì™”ì„ ë•Œ
  - *CheckAction()* ì•¡ì…˜ í…ìŠ¤íŠ¸ ë„ìš°ê¸°
  - *CanPickUp()* ì•„ì´í…œ ì¤ê¸°
  - *CanMeat()* **ê³ ê¸° ì•„ì´í…œ ì–»ê¸°**
    - `dissolveActivated` í•´ì²´ê°€ ê°€ëŠ¥í•œ ìƒíƒœì¼ ë•Œë§Œ
      - `hitInfo`ê°€ ì•½í•œ ë™ë¬¼ì´ë©° + ì£½ì€ ìƒíƒœê³  + í•´ì²´ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ(ì¤‘ë³µ í•´ì²´ë˜ë©´ ì•ˆë˜ë‹ˆê¹Œ)
        - `isDissolving` í•´ì²´ ì¤‘ì„ì„ í‘œì‹œ
        - í…ìŠ¤íŠ¸ëŠ” ë¹„í™œ *InfoDisappear()*
        - ì‹¤ì œë¡œ í•´ì²´ ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤. *StartCoroutine(<u>MeatCoroutine()</u>);*
- *MeatCoroutine()* ğŸ‘‰ **ì‹¤ì œ ê³ ê¸° í•´ì²´ ì²˜ë¦¬**
  - ê³ ê¸° í•´ì²´ ì¤‘ì—ëŠ” ë¬´ê¸°ê°€ êµì²´ë˜ì§€ ì•Šë„ë¡ 
  - ê³ ê¸° í•´ì²´ ì¤‘ì—ëŠ” ë¬´ê¸°ê°€ í”ë“¤ë¦¬ì§€ ì•Šë„ë¡ (ğŸ“œWeaponSwayì— ì˜í•˜ì—¬ ë§ˆìš°ìŠ¤ íšŒì „ì— ë”°ë¼ ì†ì„ ìì—°ìŠ¤ëŸ½ê²Œ ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ì ë¦¬ê²Œ í–ˆì—ˆë‹¤. ê³ ê¸° í•´ì²´ ì†ì—ëŠ” ì´ê²Œ ë¶€ìì—°ìŠ¤ëŸ¬ì›Œì„œ)
    ```c#
        WeaponManager.isChangeWeapon = true;  // ê³ ê¸° í•´ì²´ ì¤‘ì— ë¬´ê¸°ê°€ êµì²´ë˜ì§€ ì•Šë„ë¡
        WeaponSway.isActivated = false;
    ```
  - ë“¤ê³  ìˆë˜ ë¬´ê¸° ë¹„í™œì„±í™” 
    - ë“¤ê³  ìˆë˜ ë¬´ê¸° ì§‘ì–´ë„£ëŠ” ì• ë‹ˆë©”ì´ì…˜ ì¬ìƒ
    - ê³ ê¸° í•´ì²´ ì¤‘ì—ëŠ” í”Œë ˆì´ì–´ê°€ ëª» ì›€ì§ì´ê²Œ í•˜ë©°
    - ë“¤ê³  ìˆë˜ ë¬´ê¸°ë¥¼ ì§‘ì–´ ë„£ëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ ì¶©ë¶„íˆ ì¬ìƒ ëœ í›„ ë¹„í™œ ë˜ë„ë¡ 0.2 ì´ˆ ê¸°ë‹¤ë¦¬ê³ 
    - ëŒê³  ìˆë˜ ë¬´ê¸° ë¹„í™œì„±í™”
      ```c#
        WeaponManager.currentWeaponAnim.SetTrigger("Weapon_Out");
        PlayerController.isActivated = false;
        yield return new WaitForSeconds(0.2f);  // ì• ë‹ˆë©”ì´ì…˜ ì¬ìƒ í›„ ë¹„í™œë˜ë„ë¡
        WeaponManager.currentWeapon.gameObject.SetActive(false);
      ```
  - ì¹¼ ë“¤ê³  ìˆëŠ” ì† ëª¨ë¸ êº¼ë‚´ê¸°
    - ì¹¼ ë“¤ê³  ìˆëŠ” ì† ëª¨ë¸ í™œì„±í™” `Meat Knife` ì˜¤ë¸Œì íŠ¸ í™œì„±í™”
    - ì´ ì˜¤ë¸Œì íŠ¸ê°€ í™œì„±í™” ë˜ìë§ˆì ì¹¼ì§ˆ í•˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ ì¬ìƒë  ê²ƒì´ë¯€ë¡œ, ìì—°ìŠ¤ëŸ½ê²Œ 0.2ì´ˆ ëŒ€ê¸° í›„ ê³ ê¸° í•´ì²´ ì†Œë¦¬ ì¬ìƒ
    - í•´ì²´ ì• ë‹ˆë©”ì´ì…˜ì´ ì „ë¶€ ë‹¤ ì§„í–‰ë  ìˆ˜ ìˆë„ë¡ 1.8ì´ˆ ê¸°ë‹¤ë¦¼
      ```c#
        tf_MeatDissolveTool.gameObject.SetActive(true);  // ì• ë‹ˆë©”ì´ì…˜ì€ ì´ë•Œ ìë™ìœ¼ë¡œ ì‹¤í–‰ë¨ (ë””í´íŠ¸ìƒíƒœë‹ˆê¹Œ)
        yield return new WaitForSeconds(0.2f);  // ì• ë‹ˆë©”ì´ì…˜ 0.2ì´ˆ ì§„í–‰ í›„
        SoundManager.instance.PlaySE(sound_meat);  // ê³ ê¸° í•´ì²´ ì†Œë¦¬
        yield return new WaitForSeconds(1.8f);  // ì¹¼ í•´ì²´í•˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ ë‹¤ ëë‚˜ê¸¸ ê¸°ë‹¤ë¦¼
      ```
  - ê³ ê¸° ì•„ì´í…œ ì–»ê¸°
    - `hitInfo`ì— ë”± ë¼ì§€ê°€ ê³„ì† ìœ ì§€ë˜ì•¼ ëŸ°íƒ€ì„ ì—ëŸ¬ê°€ ì•ˆë‚  ìˆ˜ ìˆëŠ”ë°, ğŸ“œPlayerContollerê°€ ì›€ì§ì´ì§€ ì•Šë„ë¡ í•´ì£¼ì—ˆê¸° ë•Œë¬¸ì— ê´œì°®ë‹¤. ê°•ì œë¡œ ë¼ì§€ë§Œ ë°”ë¼ë³´ê³  ìˆê²Œ ë˜ì„œ ê´œì°®ë‹¤.
      ```c#
      theInventory.AcquireItem(hitInfo.transform.GetComponent<WeakAnimal>().GetItem(), hitInfo.transform.GetComponent<WeakAnimal>().itemNumber);
      ```
  - ì¹¼ ë“¤ê³  ìˆëŠ” ì† ëª¨ë¸ì€ ë‹¤ì‹œ ë¹„í™œì„±í™” í•˜ê³  ì›ë˜ ë¬´ê¸° í™œì„±í™”
    ```c#
        WeaponManager.currentWeapon.gameObject.SetActive(true);
        tf_MeatDissolveTool.gameObject.SetActive(false);
    ```
  - ë‹¤ë¥¸ ì‘ì—… í•  ìˆ˜ ìˆë„ë¡ ë‹¤ì‹œ ì›ìƒ ë³µê·€
    ```c#
        PlayerController.isActivated = true;
        WeaponSway.isActivated = true;
        WeaponManager.isChangeWeapon = false;  // ë‹¤ì‹œ ë¬´ê¸° êµì²´ê°€ ê°€ëŠ¥í•˜ë„ë¡
        isDissolving = false;
    ```

![image](https://user-images.githubusercontent.com/42318591/95694832-fae24200-0c6e-11eb-900b-6e795d76de7b.png)

ì‚¬ìš´ë“œ ë§¤ë‹ˆì €ì— ê³ ê¸° í•´ì²´ ì†Œë¦¬ ì¶”ê°€í•¨.

![image](https://user-images.githubusercontent.com/42318591/95694965-b7d49e80-0c6f-11eb-9616-4b64245879d3.png)

Layer Mask ì—ëŠ” ì•„ì´í…œ, ë¼ì§€ ì—ê²Œ ë‹¤ ì¹´ë©”ë¼ì˜ Raycast ê°€ ì ìš©ë˜ë„ë¡ Animal Layer ë¥¼ ì¶”ê°€ë¡œ ì„ íƒí•´ì¤€ ìƒíƒœë‹¤. ì¹¼ ë“¤ê³  ìˆëŠ” ì† ëª¨ë¸ í• ë‹¹. ê³ ê¸° í•´ì²´ ì†Œë¦¬ ì´ë¦„ í• ë‹¹.

<br>

### ğŸ“œAnimal.cs

```c#
    protected void Dead()
    {
        PlaySE(sound_Dead);

        isWalking = false;
        isRunning = false;
        isDead = true;
        isAttacking = false;
        anim.SetTrigger("Dead");

        nav.ResetPath();
    }
```

ë™ë¬¼ì´ ì£½ìœ¼ë©´ ë” ì´ìƒ ê³µê²©í•˜ì§€ ëª»í•˜ë„ë¡, ì›€ì§ì´ì§€ ì•Šë„ë¡ í•˜ì˜€ë‹¤. *nav.ResetPath()*


***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}