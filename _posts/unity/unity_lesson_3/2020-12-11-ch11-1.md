---
title:  "Chapter 11-1. í¬ì…˜ ì œì¡° : ì—°ê¸ˆí…Œì´ë¸” ì œì‘(+ ì½”ë£¨í‹´ ì‚¬ìš©ì‹œ ì£¼ì˜ì‚¬í•­)" 

categories:
  -  Unity Lesson 3 
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-12-11
last_modified_at: 2020-12-11
---

ì¸í”„ëŸ°ì— ìˆëŠ” ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° 3D] ì‹¤ì „! ìƒì¡´ê²Œì„ ë§Œë“¤ê¸° - Advanced** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.inflearn.com/course/unity-2#)
{: .notice--warning}


# í¬ì…˜ ì œì¡° : ì—°ê¸ˆ í…Œì´ë¸” ì œì‘

## ğŸš€ ì—°ê¸ˆ í…Œì´ë¸” ë§Œë“¤ê¸°

![image](https://user-images.githubusercontent.com/42318591/101864998-77829580-3bb8-11eb-815c-de1df55ed6f3.png)

- ì—°ê¸ˆ í…Œì´ë¸” ì•„ì´í…œì„ í¬ì…˜ ë¨¹ì„ ë•Œì²˜ëŸ¼ ì†ì— ë“¤ê³  ìˆì„ ìˆ˜ ìˆë‹¤.
  - ì—°ê¸ˆ í…Œì´ë¸” ì•„ì´í…œì„ ì†ì— ë“¤ê³  ìˆìœ¼ë©´ ìë™ìœ¼ë¡œ ê±´ì¶• ì‹œìŠ¤í…œì²˜ëŸ¼ í”„ë¦¬ë·°ê°€ ìƒì„±ë˜ë©° í¬ë¡œìŠ¤í—¤ì–´ë¥¼ ë”°ë¼ë‹¤ë‹Œë‹¤. 
    - ì´ ìƒíƒœì—ì„œ ì¢Œí´ ëˆ„ë¥´ë©´ ì—°ê¸ˆ í…Œì´ë¸” ê±´ì¶• ê°€ëŠ¥

### âœˆ ì‹¤ì œ ê±´ì¶•ë¬¼

- Box Collider ë¥¼ ë¶™ì—¬ì¤€ë‹¤.
- Layerë¥¼ `Building`ìœ¼ë¡œ í•œë‹¤. 

<br>

### âœˆ í”„ë¦¬íŒ¹

- ğŸ“œPreviewObject.cs ë¥¼ ë¶™ì—¬ì¤€ë‹¤.
- Rigidbody ë¥¼ ë¶™ì—¬ì¤€ë‹¤.
- Box Collider ë¥¼ ë¶™ì—¬ì¤€ë‹¤.
  - `Is Trigger` ì²´í¬

<br>

## ğŸš€ ì—°ê¸ˆ í…Œì´ë¸” ì•„ì´í…œí™”

ì—°ê¸ˆ í…Œì´ë¸” ê°™ì€ `Kit` ì¢…ë¥˜ì˜ ì•„ì´í…œì€ ì†ì— ë“¤ê³  ìˆì„ ë•Œ ê¸°íƒ€ ê±´ì¶•ë¬¼ì²˜ëŸ¼ ê±´ì¶•ì´ ê°€ëŠ¥í•˜ë„ë¡ í”„ë¦¬ë·° ì˜¤ë¸Œì íŠ¸ë¥¼ ë§Œë“¤ì–´ì£¼ê³  ê±´ì¶•ì´ ê°€ëŠ¥í•˜ê²Œë” í•˜ëŠ” íŠ¹ì„±ì´ ìˆì–´ì•¼ í•œë‹¤. **ë”°ë¼ì„œ Kit ì•„ì´í…œì„ ì¶”ê°€í•´ì£¼ê³  ì´ì™€ ê´€ë ¨ëœ ì†ì„±ë“¤ë„ ì¶”ê°€í•´ì¤€ë‹¤.**

### ğŸ“œItem

```c#
[CreateAssetMenu(fileName = "New Item", menuName = "New Item/item")]
public class Item : ScriptableObject  // ê²Œì„ ì˜¤ë¸Œì íŠ¸ì— ë¶™ì¼ í•„ìš” X 
{
    public enum ItemType  // ì•„ì´í…œ ìœ í˜•
    {
        Equipment,
        Used,
        Ingredient,
        Kit,  // â­ì¶”ê°€!
        ETC,
    }

    public string itemName; // ì•„ì´í…œì˜ ì´ë¦„
    [TextArea]  // ì—¬ëŸ¬ ì¤„ ê°€ëŠ¥í•´ì§
    public string itemDesc; // ì•„ì´í…œì˜ ì„¤ëª…
    public ItemType itemType; // ì•„ì´í…œ ìœ í˜•
    public Sprite itemImage; // ì•„ì´í…œì˜ ì´ë¯¸ì§€(ì¸ë²¤ í† ë¦¬ ì•ˆì—ì„œ ë„ìš¸)
    // ImageëŠ” Canvas ìœ„ ì—ì„œë§Œ ë„ìš¸ ìˆ˜ ìˆê³ 
    // SpriteëŠ” Canvasì™€ ìƒê´€ì—†ì´ ì›”ë“œ ì–´ë””ì—ì„œë“  ì´ë¯¸ì§€ë¥¼ ë„ìš¸ ìˆ˜ ìˆë‹¤.
    public GameObject itemPrefab;  // ì•„ì´í…œì˜ í”„ë¦¬íŒ¹ (ì•„ì´í…œ ìƒì„±ì‹œ í”„ë¦¬íŒ¹ìœ¼ë¡œ ì°ì–´ëƒ„)
    public GameObject kitPrefab;  // â­ì¶”ê°€! í‚¤íŠ¸ í”„ë¦¬íŒ¹
    public GameObject kitPreviewPrefab; // â­ì¶”ê°€! í‚¤íŠ¸ í”„ë¦¬ë·° í”„ë¦¬íŒ¹
    public string weaponType;  // ë¬´ê¸° ìœ í˜•
}
```

![image](https://user-images.githubusercontent.com/42318591/101896875-fe516580-3bec-11eb-8497-2c6ddfae0ab7.png)

ì—°ê¸ˆ í…Œì´ë¸”ì˜ `Item` ScriptableObject ì—ì…‹ì˜ `kitPrefab`ê³¼ `kitPreviewPrefab`ì— ê°ê° ìœ„ì—ì„œ ë§Œë“  ì—°ê¸ˆí…Œì´ë¸” í”„ë¦¬íŒ¹ê³¼ ì—°ê¸ˆí…Œì´ë¸” í”„ë¦¬ë·° í”„ë¦¬íŒ¹ í• ë‹¹.

<br>

## ğŸš€ ë§¨ì†ìœ¼ë¡œ ì—°ê¸ˆí…Œì´ë¸” ë“¤ê³  ì´ ìƒíƒœì—ì„œ ê±´ì¶• ê°€ëŠ¥í•œ ìƒíƒœë¡œ ë§Œë“¤ê¸°

### ğŸ“œHandController

> ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” `Player`ì˜ ìì‹ `Holder`ì— ë¶™ìœ¼ë©°, ğŸ“œCloseWeaponContoller ë¥¼ ìƒì† ë°›ê³  ìˆë‹¤.

ì—°ê¸ˆ í…Œì´ë¸” ê°™ì€ `Kit` ì¢…ë¥˜ì˜ ì•„ì´í…œì„ ë§¨ ì†ìœ¼ë¡œ ë“¤ê³  ìˆì„ ë•Œ <u>í”„ë¦¬ë·°ë¥¼ ìƒì„±í•˜ê³  ê±´ì¶• í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼ í•œë‹¤.</u> ì´ë¥¼ ğŸ“œHandControllerì—ì„œ êµ¬í˜„í•œë‹¤. ì°¸ê³ ë¡œ ë§¨ ì†ì— ì•„ì´í…œì„ ë“œëŠ” ì²˜ë¦¬ëŠ” ğŸ“œQuickSlotController ì—ì„œ ì´ë£¨ì–´ì§„ë‹¤.

```c#
    public static Item currentKit; // ì„¤ì¹˜í•˜ë ¤ëŠ” í‚· (ì—°ê¸ˆ í…Œì´ë¸”)

    private bool isPreview = false; // í˜„ì¬ í”„ë¦¬ë·° í™œì„±í™” ì¤‘ì¸ì§€ (í”„ë¦¬ë·° ì¤‘ë³µ ìƒì„± ë°©ì§€ìš©)

    private GameObject go_preview;  // ì„¤ì¹˜í•  í‚¤íŠ¸ í”„ë¦¬ë·°
    private Vector3 previewPos; // ì„¤ì¹˜í•  í‚¤íŠ¸ ìœ„ì¹˜ (í¬ë¡œìŠ¤í—¤ì–´ ë”°ë¼ ì›€ì§ì´ê²Œ ê³„ì† ê°±ì‹ í•  ê²ƒ)
    [SerializeField] private float rangeAdd;  // ê±´ì¶•ì‹œ ì¶”ê°€ ì‚¬ì •ê±°ë¦¬(ì½” ì•ì— ë§ê³  ë³´í†µì˜ ê·¼ì ‘ë¬´ê¸°ì˜ ì‚¬ì • ê±°ë¦¬ rangeë³´ë‹¤ëŠ” ë” ë¨¼ ê³³ì— ê±´ì¶•í•  ìˆ˜ ìˆë„ë¡.)
    [SerializeField] private LayerMask preview_Kit_LayerMask; // í‚¤íŠ¸ ê±´ì¶•í•  ìˆ˜ ìˆëŠ” ê³³ ë ˆì´ì–´ (Building, Terrain)

    [SerializeField]
    private QuickSlotController theQuickSlotController;
```

- `currentKit`ëŠ” ğŸ“œQuickSlotController ì—ì„œ í€µìŠ¬ë¡¯ì— ìˆëŠ” ì—°ê¸ˆí…Œì´ë¸”ê°™ì€ `Kit` ì•„ì´í…œì´ í™œì„±í™” ë˜ì—ˆë‹¤ë©´ ì´ `currentKit`ì— í•´ë‹¹ Kit ì•„ì´í…œì´ í• ë‹¹ ë˜ë„ë¡ í•  ê²ƒì´ë‹¤.
  - ì—¬ëŸ¬ ê³³ì—ì„œ ê³µìœ ë  ìˆ˜ ìˆê³  ğŸ“œHandController ê°ì²´ ìƒì„± í•  í•„ìš” ì—†ì´ static ë³€ìˆ˜ë¡œ ì„ ì–¸
- `ranage`ëŠ” ğŸ“œCloseWeaponContoller ë¡œë¶€í„° ìƒì† ë°›ì€, ë§¨ ì† ê°™ì€ ê·¼ì ‘ ë¬´ê¸°ë“¤ì´ ì¶©ëŒì„ ê°ì§€ í•  ìˆ˜ ìˆëŠ” ì‚¬ì • ê±°ë¦¬ë‹¤.
  - ê±´ì¶• í•  ìˆ˜ ìˆëŠ” ìœ„ì¹˜ì™€ ë™ì‹œì— í”„ë¦¬ë·°ê°€ ë§¤í”„ë ˆì„ ê°±ì‹  ë  ìœ„ì¹˜ëŠ” ì—¬íƒ€ ê·¼ì ‘ ë¬´ê¸°ë“¤ì˜ `range`ë³´ë‹¤ ì¢€ ë” ë¨¼ ê³³ì—ì„œë„ ìƒì„±ë  ìˆ˜ ìˆë„ë¡ í•´ì•¼ í•œë‹¤. 
  - ì½” ì•ì—ì„œë§Œ ê±´ì¶•ì´ ê°€ëŠ¥í•˜ë‹¤ë©´ ë¶€ìì—°ìŠ¤ëŸ¬ìš°ë‹ˆê¹Œ!
  - ë”°ë¼ì„œ ë°‘ì— Raycast ì¶©ëŒ ì²˜ë¦¬ì—ì„œ `range + rangeAdd` ì‚¬ì • ê±°ë¦¬ê¹Œì§€ ì—¬ìœ ë¥¼ ë‘ì—ˆë‹¤.

```c#
    void Update()
    {
        if (isActivate && !Inventory.invectoryActivated)
        {
            if (currentKit == null)
            {
                if (QuickSlotController.go_HandItem == null) // ì†ì— ë“¤ë¦° ì•„ì´í…œì´ ì—†ìœ¼ë©´ ë§¨ì† ê³µê²© ê°€ëŠ¥ ìƒíƒœ
                    TryAttack();
                else  // ì†ì— ë“¤ë¦° ì•„ì´í…œì´ ìˆë‹¤ë©´ í¬ì…˜ ê°™ì€ ì†Œë¹„ì•„ì´í…œì´ë¯€ë¡œ ë¨¹ì„ ìˆ˜ ìˆëŠ” ìƒíƒœ
                    TryEating();
            }
            else 
            {
                if (!isPreview)
                    InstallPreviewKit();
                PreviewPositionUpdate();
                Build();
            }
        }         
    }

    private void InstallPreviewKit()
    {
        isPreview = true;
        go_preview = Instantiate(currentKit.kitPreviewPrefab, transform.position, Quaternion.identity);
    }

    private void PreviewPositionUpdate()
    {
        if (Physics.Raycast(transform.position, transform.forward, out hitInfo, currentCloseWeapon.range + rangeAdd, preview_Kit_LayerMask))
        {
            previewPos = hitInfo.point;
            go_preview.transform.position = previewPos;
        }
    }

    private void Build()
    {
        if(Input.GetButtonDown("Fire1"))
        {
            if (go_preview.GetComponent<PreviewObject>().isBuildable())
            {
                theQuickSlotController.DecreaseSelectedItem(); // ìŠ¬ë¡¯ ì•„ì´í…œ ê°œìˆ˜ 1 ì°¨ê°
                GameObject temp = Instantiate(currentKit.kitPrefab, previewPos, Quaternion.identity);
                temp.name = currentKit.itemName;
                Destroy(go_preview);
                currentKit = null;
                isPreview = false;
            }
        }
    }

    public void Cancel()
    {
        Destroy(go_preview);
        currentKit = null;
        isPreview = false;
    }
```

- *Update*
  - `currentKit`ê°€ null ì´ ì•„ë‹ˆë¼ë©´ í‚¤íŠ¸ ì•„ì´í…œì„ ë“¤ê²Œ ëœ ê²ƒì´ë¯€ë¡œ ì´ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ í•´ì•¼ í•œë‹¤.
    - ë§¤ í”„ë ˆì„ë§ˆë‹¤
      - í˜„ì¬ í”„ë¦¬ë·° ì—†ëŠ” ìƒíƒœë¼ë©´ í”„ë¦¬ë·° ìƒì„± ğŸ‘‰ *InstallPreviewKit*
      - í”„ë¦¬ë·° ìƒì„± í›„ í”„ë¦¬ë·°ì˜ ìœ„ì¹˜ë¥¼ í”Œë ˆì´ì–´ì—ì„œ Raycast ì´ì„œ ì¶©ëŒí•œ ìœ„ì¹˜ë¡œ ì—…ë°ì´íŠ¸ ğŸ‘‰ *PreviewPositionUpdate*
      - ì¢Œí´ ì…ë ¥ ë°›ì•„ ê±´ì¶• ì‘ì—… ğŸ‘‰ *Build*
- *InstallPreviewKit* 
  - í”„ë¦¬ë·° ì¤‘ë³µ ìƒì„± ë°©ì§€í•˜ë„ë¡ `isPreview` ê°’ì„ trueë¡œ
  - í”„ë¦¬ë·° ìƒì„±
    - ì¼ë°˜ í”Œë ˆì´ì–´ì˜ ìœ„ì¹˜ `transform.position`ì—ì„œ ìƒì„±í•œë‹¤.
- *PreviewPositionUpdate*
  - í”„ë¦¬ë·°ì˜ ìœ„ì¹˜ë¥¼ ë§¤í”„ë ˆì„ë§ˆë‹¤ ì—…ë°ì´íŠ¸í•œë‹¤.
    - í”Œë ˆì´ì–´ì—ì„œ Raycastë¥¼ ì´ì„œ `currentCloseWeapon.range + rangeAdd` ì‚¬ì • ê±°ë¦¬ ë‚´ì—ì„œ `preview_Kit_LayerMask`ì— í•´ë‹¹í•˜ëŠ” ë ˆì´ì–´ë¥¼ ê°€ì§„ ì¶©ëŒ ì˜¤ë¸Œì íŠ¸ì˜ ì •ë³´ë¥¼ `hitInfo`ì— ë‹´ëŠ”ë‹¤. ê·¸ë¦¬ê³  ê·¸ ì¶©ëŒ ìœ„ì¹˜ë¡œ í”„ë¦¬ë·°ì˜ ìœ„ì¹˜ë¥¼ ì„¤ì •í•œë‹¤. 
      - `preview_Kit_LayerMask`ì—ëŠ” Terrain, Building ë ˆì´ì–´ë¥¼ ì„¤ì •í•  ê²ƒì´ë‹¤. ì¦‰, ì¼ë°˜ ì§€í˜• ìœ„ í˜¹ì€ ê±´ì¶•ë¬¼ ìœ„ì—ì„œë§Œ ì´ í‚¤íŠ¸ë¥¼ ì§€ì„ ìˆ˜ ìˆê²Œ í•  ê²ƒì´ë‹¤.
      - ê°•ì˜ì—ì„œëŠ” ğŸ“œCloseWeaponContoller ë¡œë¶€í„° ìƒì† ë°›ì€ `layerMask`ë¥¼ ê·¸ëŒ€ë¡œ ì“°ì…¨ëŠ”ë° ì´ ë ˆì´ì–´ ë§ˆìŠ¤í¬ëŠ” ë§¨ì†ìœ¼ë¡œ ë•Œë¦´ ë•Œë‚˜ ì•„ì´í…œ ì£¼ìš¸ ë•Œë‚˜ ì´ëŸ´ ë•Œ í•˜ëŠ” ì¶©ëŒì²˜ë¦¬ì— ì‚¬ìš©í–ˆë˜ ë ˆì´ì–´ ë§ˆìŠ¤í¬ê¸° ë•Œë¬¸ì— Animal, Item, Default, Water ë“±ë“± ì´ ì—°ê¸ˆí…Œì´ë¸” ê±´ì¶•ê³¼ ìƒê´€ì—†ëŠ” ì—¬ëŸ¬ ë ˆì´ì–´ë“¤ì´ ì„ íƒë˜ì–´ ìˆëŠ” ìƒíƒœì˜€ë‹¤. ê·¸ë˜ì„œ í”„ë¦¬ë·°ì˜ ë ˆì´ì–´ê°€ ì´ `layerMask`ì— í•´ë‹¹ë˜ëŠ” ë ˆì´ì–´ë¼ë©´ `hitInfo.point`ê°€ ë°©ê¸ˆ í”„ë¦¬ë·°ê°€ ìƒì„±ëë˜ í”Œë ˆì´ì–´ ìœ„ì¹˜ê°€ ë˜ë²„ë ¤ì„œ í”Œë ˆì´ì–´ì˜ Colliderì™€ í”„ë¦¬ë·°ì˜ Collider  ê°€ ë§ˆêµ¬ ì¶©ëŒí•˜ëŠ” ë²„ê·¸ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— í”„ë¦¬ë·°ì˜ ë ˆì´ì–´ë¥¼ `layerMask`ì— ì†í•˜ì§€ ì•ŠëŠ” Ignore Raycast ì´ëŸ° ê±¸ë¡œ ë°”ê¿” ì¤¬ì–´ì•¼ í–ˆë‹¤. ë˜ Animal, Item, Water ë“±ë“± ì´ëŸ° ì˜¤ë¸Œì íŠ¸ ìœ„ì—ë„ ì—°ê¸ˆí…Œì´ë¸”ì„ ì§€ì„ ìˆ˜ ìˆë‹¤ëŠ” ë¬¸ì œê°€ ìƒê¸°ê¸° ë•Œë¬¸ì— ê°•ì˜ì™€ ë‹¬ë¦¬ `preview_Kit_LayerMask`ë¼ëŠ” ë ˆì´ì–´ ë§ˆìŠ¤í¬ ë©¤ë²„ ë³€ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì£¼ì—ˆë‹¤.
- *Build*
  - ì¢Œí´ ì…ë ¥ì´ ë“¤ì–´ì˜¤ë©´ ì—°ê¸ˆ í…Œì´ë¸” ê°™ì€ í‚¤íŠ¸ ì¢…ë¥˜ ì•„ì´í…œì„ ê±´ì¶•í•œë‹¤.
    - í€µìŠ¬ë¡¯ ì•„ì´í…œ ê°œìˆ˜ ì°¨ê°
    - ì—°ê¸ˆ í…Œì´ë¸” ìƒì„±
    - í”„ë¦¬ë·°ëŠ” ì‚­ì œ í›„ `currentKit` ì™€ `isPreview`ë„ ì´ˆê¸°í™”
- *Cancel*
  - ğŸ“œWeaponManagerë¥¼ í†µí•´ ë¬´ê¸°ë¥¼ ë°”ê¿€ ë•Œ ë§Œì•½ ë§¨ì†ìœ¼ë¡œ ì—°ê¸ˆí…Œì´ë¸” ë“¤ê³  ìˆëŠ” ìƒíƒœì—ì„œ ë‹¤ë¥¸ ë¬´ê¸°ë¡œ êµì²´í–ˆë‹¤ë©´ í”„ë¦¬ë·°ë„ ì—†ì• ê³  `currentKit` ì™€ `isPreview`ë„ ì´ˆê¸°í™” í•´ì•¼ ë¨. ì´ë•Œ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— public í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ ì¤Œ.


![image](https://user-images.githubusercontent.com/42318591/101902950-db2bb380-3bf6-11eb-900d-1661ba98ea88.png)

- `rangeAdd`
  - `range` ê°’ì´ 3 ì´ê³  `rangeAdd`ê°€ 3 ì´ë¼ë©´ 3 + 3 = 6 ì˜ ì‚¬ì • ê±°ë¦¬ë‚´ì— ì—°ê¸ˆ í…Œì´ë¸” ê±´ì¶• ê°€ëŠ¥
- `preview_Kit_LayerMask`
  - ì—°ê¸ˆí…Œì´ë¸” í”„ë¦¬ë·° ë° ì—°ê¸ˆí…Œì´ë¸”ì´ Terrain, Building ë ˆì´ì–´ë¥¼ ê°€ì§„ ì˜¤ë¸Œì íŠ¸ì—ì„œë§Œ ì§€ì–´ì§ˆ ìˆ˜ ìˆë„ë¡

<br>

### ğŸ“œQuickSlotController

```c#
    private void Execute()
    {
        CoolTimeReset();
        AppearReset();

        if (quickSlots[selectedSlot].item != null)
        {
            if (quickSlots[selectedSlot].item.itemType == Item.ItemType.Equipment)
                StartCoroutine(theWeaponManager.ChangeWeaponCoroutine(quickSlots[selectedSlot].item.weaponType, quickSlots[selectedSlot].item.itemName));
            else if (quickSlots[selectedSlot].item.itemType == Item.ItemType.Used || quickSlots[selectedSlot].item.itemType == Item.ItemType.Kit)
                ChangeHand(quickSlots[selectedSlot].item);
            else
                ChangeHand();
        }
        else
        {
            ChangeHand();
        }
    }
```

ë‘ ë²ˆì§¸ else if ë¬¸ì—ì„œ `Item.ItemType.Used` ì†Œë¹„ ì•„ì´í…œ ë¿ë§Œ ì•„ë‹ˆë¼ `Item.ItemType.Kit` ì—°ê¸ˆí…Œì´ë¸” ê°™ì€ í‚¤íŠ¸ ì•„ì´í…œë„ <u>ë§¨ì†ì— ì•„ì´í…œì„ ë“¤ê²Œ í•˜ë„ë¡ ChangeHand(quickSlots[selectedSlot].item); í˜¸ì¶œ</u>

```c#
    private void ChangeHand(Item _item = null)
    {
        StartCoroutine(theWeaponManager.ChangeWeaponCoroutine("HAND", "ë§¨ì†"));

        if (_item != null)
        {
            StartCoroutine(HandItemCoroutine(_item));
        }
    }

    IEnumerator HandItemCoroutine(Item _item)
    {
        HandController.isActivate = false;
        yield return new WaitUntil(() => HandController.isActivate);  // ë§¨ì† êµì²´ì˜ ë§ˆì§€ë§‰ ê³¼ì •

        if (_item.itemType == Item.ItemType.Kit)
            HandController.currentKit = _item;

        go_HandItem = Instantiate(quickSlots[selectedSlot].item.itemPrefab, tf_ItemPos.position, tf_ItemPos.rotation);
        go_HandItem.GetComponent<Rigidbody>().isKinematic = true;  // ì¤‘ë ¥ ì˜í–¥ X 
        go_HandItem.GetComponent<Collider>().enabled = false;  // ì½œë¼ì´ë” ë” (í”Œë ˆì´ì–´ì™€ ì¶©ëŒí•˜ì§€ ì•Šê²Œ)
        go_HandItem.tag = "Untagged";   // íšë“ ì•ˆë˜ë„ë¡ ë ˆì´ì–´ íƒœê·¸ ë°”ê¿ˆ
        go_HandItem.layer = 8;  // "Weapon" ë ˆì´ì–´ëŠ” int
        go_HandItem.transform.SetParent(tf_ItemPos);
    }
```

- í€µìŠ¬ë¡¯ì„ í†µí•´ í‚¤íŠ¸ ì•„ì´í…œì„ í™œì„±í™”í•˜ê²Œ ëœ ê²½ìš° ì²˜ë¦¬
  - *HandItemCoroutine* ì½”ë£¨í‹´ í•¨ìˆ˜ë¥¼ í†µí•´ ë§¨ ì† ìœ„ì— í‚¤íŠ¸ ì•„ì´í…œì„ ì¥ì°©í•˜ëŠ” ì²˜ë¦¬ë¥¼ í•´ì¤€ë‹¤. 
    - ë§¨ì† ìœ„ì— ì•„ì´í…œ ìƒì„±í•˜ê¸° ì „ì— í‚¤íŠ¸ ì•„ì´í…œì´ë¼ë©´ ğŸ“œHandControllerì˜ `currentKit` ê°’ì— ì´ì œ í€µìŠ¬ë¡¯ì„ í†µí•´ ë§‰ ë‚€ í‚¤íŠ¸ ì•„ì´í…œì„ í• ë‹¹í•´ì£¼ì–´ì•¼ í•œë‹¤.
      - ê·¸ë¦¬ê³  ì´ `currentKit`ì„ ê°€ì§€ê³  ğŸ“œHandController ì—ì„œ í”„ë¦¬ë·°ë¥¼ ë§Œë“¤ê³  ê±´ì¶•ì„ í•  ìˆ˜ ìˆê²Œ í•˜ê³  í•˜ëŠ” ê²ƒì´ë‹¤.


<br>

### ğŸ“œWeaponManager

```c#
    public IEnumerator ChangeWeaponCoroutine(string _type, string _name)
    {
        isChangeWeapon = true;
        currentWeaponAnim.SetTrigger("Weapon_Out");

        yield return new WaitForSeconds(changeweaponDelayTime);

        CancelPreWeaponAction();
        WeaponChange(_type, _name);

        yield return new WaitForSeconds(changeweaponEndDelayTime);

        currentWeaponType = _type;
        isChangeWeapon = false;
    }

    private void CancelPreWeaponAction()
    {
        switch(currentWeaponType)
        {
            case "GUN":
                theGunController.CancelFineSight();
                theGunController.CancelReload();
                GunController.isActivate = false;
                break;
            case "HAND":
                HandController.isActivate = false;
                if (HandController.currentKit != null)
                    theHandController.Cancel();
                if (QuickSlotController.go_HandItem != null)
                    Destroy(QuickSlotController.go_HandItem);
                break;
            case "AXE":
                AxeController.isActivate = false;
                break;
            case "PICKAXE":
                PickaxeController.isActivate = false;
                break;
        }
    }
```

í˜„ì¬ ë“¤ê³  ìˆë˜ ë¬´ê¸° `currentWeaponType`ê°€ ë§¨ì†ì¼ ë•Œ `case "HAND":` í‚¤íŠ¸ ì•„ì´í…œì„ ë“¤ê³  ìˆì—ˆë‹¤ë©´ 8if (HandController.currentKit != null)* `theHandController.Cancel()`ì„ í†µí•´ ì†ì— ë“¤ê³  ìˆë˜ í‚¤íŠ¸ ì•„ì´í…œì„ ì—†ì• ê³  `currentKit`ë„ nullë¡œ ì´ˆê¸°í™”í•´ì£¼ì–´ì•¼ í•œë‹¤.

#### ì½”ë£¨í‹´ í•¨ìˆ˜ ì‚¬ìš©ì‹œ ì£¼ì˜ ì‚¬í•­

![image](https://user-images.githubusercontent.com/42318591/101902835-a7508e00-3bf6-11eb-96c8-fb3c0010931d.png)

> ì½”ë£¨í‹´ ì‚¬ìš©ì‹œ <u>ë³‘ë ¬ ì²˜ë¦¬ëœë‹¤ëŠ” ê²ƒì— ëŠ˜ ì£¼ì˜í•˜ì.</u> ì½”ë£¨í‹´ í•¨ìˆ˜ ì‚¬ìš©ì‹œ ë­”ê°€ ì´ìƒí•˜ê²Œ ëŒì•„ê°€ë©´ ë³‘ë ¬ ì²˜ë¦¬ ë˜ëŠ” ë°”ëŒì— ë‹¤ë¥¸ê²Œ ë°”ë€ê²Œ ì•„ë‹ê¹Œ í•˜ê³  ìƒê°í•´ë³´ì.

ì†ì— ë“¤ì–´ì•¼ í•˜ëŠ” ì•„ì´í…œì´ í‚¤íŠ¸ ì•„ì´í…œì¸ ê²½ìš° `currentKit`ì— ê·¸ í‚¤íŠ¸ ì•„ì´í…œì„ ë„£ì–´ì£¼ëŠ” ì²˜ë¦¬ë¥¼ ğŸ“œQuickControllerì˜ *ChangeHand* í•¨ìˆ˜ ì•ˆì—ì„œ í•´ì¤„ ìˆ˜ë„ ìˆì—ˆë‹¤. ì˜¤ë¥¸ìª½ 2 ë²ˆ ê·¸ë¦¼ì²˜ëŸ¼! ê·¸ëŸ¬ë‚˜ ì´ë ‡ê²Œ í•´ì£¼ë©´ ìƒê¸°ëŠ” ë¬¸ì œì ì€.. 

- *StartCoroutine(theWeaponManager.ChangeWeaponCoroutine("HAND", "ë§¨ì†"));*
  - 1ï¸âƒ£ ë§¨ì†ìœ¼ë¡œ ë¬´ê¸° êµì²´ 
- *StartCoroutine(HandItemCoroutine(_item));*
  - 2ï¸âƒ£ ë§¨ì†ì— ì•„ì´í…œ ë“œëŠ” ì²˜ë¦¬

<u>ë‘ ì½”ë£¨í‹´ì´ ë³‘ë ¬ì ìœ¼ë¡œ ë™ì‹œì— ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì—</u> ì¦‰, ğŸ“œtheWeaponManagerì˜ *ChangeWeaponCoroutine* í•¨ìˆ˜ ì‹¤í–‰ì´ ì „ë¶€ ëë‚˜ì•¼ì§€ë§Œ ğŸ“œQuickControllerì˜ *HandItemCoroutine* í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤. ë‘ í•¨ìˆ˜ëŠ” ì½”ë£¨í‹´ì´ê¸° ë•Œë¬¸ì— ë³‘ë ¬ì ìœ¼ë¡œ ê°ì ë™ì‹œì— ì‹¤í–‰ì´ ëœë‹¤. ë”°ë¼ì„œ í˜„ì¬ `currentKit`ì´ nullì´ ì•„ë‹Œ ìƒíƒœì´ê¸° ë•Œë¬¸ì— ğŸ“œtheWeaponManagerì˜ *ChangeWeaponCoroutine* í•¨ìˆ˜ ì•ˆì—ì„œ ë˜ í˜¸ì¶œëœ *CancelPreWeaponAction* í•¨ìˆ˜ë¥¼ í†µí•´ **ë§¨ì†ì¸ ìƒíƒœì—ì„œ í‚¤íŠ¸ ì•„ì´í…œì„ ë“¤ê²Œ ë˜ë©´** `case "Hand"`ì˜ `if (HandController.currentKit != null)`ì— ê±¸ë¦¬ê²Œ ë˜ê¸° ë•Œë¬¸ì— `theHandController.Cancel()` ì´ë ‡ê²Œ `currentKit`ì´ ë‹¤ì‹œ nullì´ ë˜ë²„ë¦°ë‹¤. ì´ ìƒíƒœì—ì„œ ì²« ë²ˆì§¸ ì½”ë£¨í‹´ì´ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ if ì°¸ì´ ë˜ì–´ ë‘ ë²ˆì§¸ ì½”ë£¨í‹´ì´ ì‹¤í–‰ëê³  ê·¸ ì‚¬ì´ì— ì²« ë²ˆì§¸ ì½”ë£¨í‹´ì—ì„œ `currentKit`ì´ ë‹¤ì‹œ nullì´ ë˜ë²„ë ¸ë‹¤ë©´ ğŸ“œHandControllerì˜ *Update*ë¥¼ í†µí•´ ë§ˆì‹¤ ìˆ˜ ìˆê²Œ ë˜ëŠ” ë“±ë“±.. ê°–ê°€ì§€ ë²„ê·¸ê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤. <u>ë”°ë¼ì„œ ì´ë ‡ê²Œ ì½”ë£¨í‹´ì„ ì‚¬ìš©í•  ë• ë³‘ë ¬ì ìœ¼ë¡œ ì‹¤í–‰ë¨ì— ìœ ì˜í•´ì•¼ í•œë‹¤.</u>

- ê·¸ë˜ì„œ ì™¼ìª½ 1ë²ˆ ê·¸ë¦¼ì²˜ëŸ¼ `currentKit` í• ë‹¹ ê³¼ì •ì„ *HandItemCoroutine* ì—ì„œ ë§¨ì† êµì²´ ê³¼ì •ì´ ëë‚˜ê³  ë‚œ í›„ì— ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ì—¬ í•´ê²°í•œë‹¤. 
  - ë§¨ì† êµì²´ê°€ ì™„ë£Œë˜ì–´ ë§¨ì†ì˜ `isActivated`ê°€ tureê°€ ë ë•Œê¹Œì§€ ëŒ€ê¸°í•œ í›„ `currentKit` í• ë‹¹ ì§„í–‰
    ```c#
        yield return new WaitUntil(() => HandController.isActivate);  // ë§¨ì† êµì²´ì˜ ë§ˆì§€ë§‰ ê³¼ì •

        if (_item.itemType == Item.ItemType.Kit)
            HandController.currentKit = _item;
    ```

<br>

### ğŸ“œInventory

```c#
    private void PutSlot(Slot[] _slots, Item _item, int _count)
    {
        if (Item.ItemType.Equipment != _item.itemType && Item.ItemType.Kit != _item.itemType)
        {
            for (int i = 0; i < _slots.Length; i++)
            {
                if (_slots[i].item != null)
                {
                    if (_slots[i].item.itemName == _item.itemName)
                    {
                        slotNumber = i;
                        _slots[i].SetSlotCount(_count);
                        isNotPut = false;
                        return;
                    }
                }
            }
        }

        for (int i = 0; i < _slots.Length; i++)
        {
            if (_slots[i].item == null)
            {
                _slots[i].AddItem(_item, _count);
                isNotPut = false;
                return;
            }
        }

        isNotPut = true;
    }
```
```c#
        if (Item.ItemType.Equipment != _item.itemType && Item.ItemType.Kit != _item.itemType)
```

ë¬´ê¸°ì™€ ë§ˆì°¬ê°€ì§€ë¡œ í‚¤íŠ¸ ì•„ì´í…œ ë˜í•œ ì¸ë²¤í† ë¦¬ í˜¹ì€ í€µìŠ¬ë¡¯ ì•ˆì—ì„œ í•œ ìŠ¬ë¡¯ ì•ˆì—ì„œ 2 ê°œ ì´ìƒì˜ ì•„ì´í…œì„ ë‘ì§„ ì•Šì„ ê²ƒì´ë‹¤. ë”°ë¼ì„œ ì¡°ê±´ ì¶”ê°€. ì´ë¯¸ ìˆëŠ” ìŠ¬ë¡¯ì— ì¦ê°€ì‹œí‚¤ëŠ” ì²« ë²ˆì§¸ forë¬¸ì€ ëŒì§€ ì•Šê³  ë‘ ë²ˆì§¸ forë¬¸ë§Œ ëŒë„ë¡.


***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}