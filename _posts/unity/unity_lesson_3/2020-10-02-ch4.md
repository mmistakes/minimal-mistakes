---
title:  "Chapter 4. ì²´ë ¥ : Status UI" 

categories:
  -  Unity Lesson 3 
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-10-02
last_modified_at: 2020-10-02
---

ì¸í”„ëŸ°ì— ìˆëŠ” ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° 3D] ì‹¤ì „! ìƒì¡´ê²Œì„ ë§Œë“¤ê¸° - Advanced** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.inflearn.com/course/unity-2#)
{: .notice--warning}


# Chapter 4. í—ˆê¸°ì™€ ê°ˆì¦, ìŠ¤íƒœë¯¸ë‚˜ì™€ ì²´ë ¥

## ğŸš– ìƒíƒœ UI ë§Œë“¤ê¸°

### ì´ë¯¸ì§€ UI ìƒì„±

![image](https://user-images.githubusercontent.com/42318591/94885313-d639dd80-04aa-11eb-8410-b541ce8a47e6.png)

- í•˜ë‚˜ì˜ ë¶€ëª¨ ì´ë¯¸ì§€ì— 6 ê°œì˜ ìì‹ ì´ë¯¸ì§€ë¥¼ ë§Œë“ ë‹¤.
  - `Status_Base`
    - HP ë‚˜íƒ€ë‚´ëŠ” ì´ë¯¸ì§€
    - DP ë‚˜íƒ€ë‚´ëŠ” ì´ë¯¸ì§€
    - SP ë‚˜íƒ€ë‚´ëŠ” ì´ë¯¸ì§€
    - ë°°ê³ í”” ë‚˜íƒ€ë‚´ëŠ” ì´ë¯¸ì§€
    - ëª©ë§ˆë¦„ ë‚˜íƒ€ë‚´ëŠ” ì´ë¯¸ì§€
    - ë§Œì¡±ê° ë‚˜íƒ€ë‚´ëŠ” ì´ë¯¸ì§€

![image](https://user-images.githubusercontent.com/42318591/94885076-354b2280-04aa-11eb-91cb-6c37ea4e4a36.png)

`Status_Base` ë¶€ëª¨ ì´ë¯¸ì§€

![image](https://user-images.githubusercontent.com/42318591/94885246-abe82000-04aa-11eb-823f-df234b454588.png)

- `Status_Base` ìœ„ì— ë°°ì¹˜í•œ 6 ê°œì˜ ìì‹ ì´ë¯¸ì§€
  - ê°€ìš´ë° ì´ˆë¡ ë°”ëŠ” SP ë‚˜íƒ€ë‚´ëŠ” ì´ë¯¸ì§€ë‹¤.

### ì´ë¯¸ì§€ ì»´í¬ë„ŒíŠ¸ ì„¤ì •

![image](https://user-images.githubusercontent.com/42318591/94886203-506b6180-04ad-11eb-9e5b-d9625962f6de.png)

- Source Image 
  - í…ìŠ¤ì²˜ íƒ€ì…ì„ Sprite(2D and UI)ë¡œ ì ìš©ì‹œì¼œì£¼ì–´ì•¼ ì´ë¯¸ì§€ UI ì— í• ë‹¹í•  ìˆ˜ ìˆë‹¤.
  - Max Sizeë¥¼ ì´ë¯¸ì§€ í¬ê¸°ì— ë§ê²Œ ì„¤ì •
- Width, HeightëŠ” ì‹¤ì œ Source Image ì´ë¯¸ì§€ í¬ê¸°ì™€ ë™ì¼í•˜ê²Œ í•´ì¤€ë‹¤.
- ì•Œë§ëŠ” `Status_Base` ìë¦¬ì— ë°°ì¹˜ë  ìˆ˜ ìˆë„ë¡ ìœ„ì¹˜ì‹œì¼œ ì¤€ë‹¤.
- **Image Type**
  - `Filled` ğŸ‘‰ <u>ìƒíƒœ ê°’ì— ë”°ë¼ ì´ë¯¸ì§€ ê²Œì´ì§€ê°€ ì±„ì›Œì§€ë„ë¡ í•œë‹¤.</u> (ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ Fill Amountë¥¼ ì´ë¦¬ì €ë¦¬ ë“œë˜ê·¸ í•´ì„œ í™•ì¸í•´ë³´ì)
    - `dp`, `sp`, `hp`ëŠ” ìƒíƒœ ê°’ì— ë”°ë¼ ì•„ë˜ì„œë¶€í„° ì‹œì‘í•˜ì—¬ ìˆ˜ì§ ë°©í–¥ìœ¼ë¡œ ì´ë¯¸ì§€ê°€ ì±„ì›Œì ¸ ê·¸ë ¤ì§ˆ ìˆ˜ ìˆë„ë¡ `Vertical`, `Bottom` ìœ¼ë¡œ ì„¤ì • í•´ ì¤€ë‹¤.
    - `hungry`, `thirsy`ëŠ” ìƒíƒœ ê°’ì— ë”°ë¼ 90 ë„ ë°©í–¥(ì˜¤ë¥¸ìª½)ì—ì„œ ì‹œì‘í•˜ì—¬ ì‹œê³„ ë°©í–¥ìœ¼ë¡œ 360 ë„ë¡œ ì´ë¯¸ì§€ê°€ ì±„ì›Œì ¸ ê·¸ë ¤ì§ˆ ìˆ˜ ìˆë„ë¡ `Radial 360`, `Right`, `Clockwise`ì²´í¬ ë¡œ ì„¤ì •í•´ì£¼ì.
    - `satisfy`ëŠ” ìƒíƒœ ê°’ì— ë”°ë¼ 270 ë„ ë°©í–¥(ì™¼ìª½)ì—ì„œ ì‹œì‘í•˜ì—¬ ì‹œê³„ ë°©í–¥ìœ¼ë¡œ 360 ë„ë¡œ ì´ë¯¸ì§€ê°€ ì±„ì›Œì ¸ ê·¸ë ¤ì§ˆ ìˆ˜ ìˆë„ë¡ `Radial 360`, `Left`, `Clockwise`ì²´í¬ ë¡œ ì„¤ì •í•´ì£¼ì.


<br>

## ğŸš– ìƒíƒœ ì—…ë°ì´íŠ¸

### ëª¨ë“  ìƒíƒœì˜ ê³µí†µ ë¶€ë¶„

#### ğŸ“œStatusController.cs

```c#
    // í•„ìš”í•œ ì´ë¯¸ì§€
    [SerializeField]
    private Image[] images_Gauge;

    // ê° ìƒíƒœë¥¼ ëŒ€í‘œí•˜ëŠ” ì¸ë±ìŠ¤
    private const int HP = 0, DP = 1, SP = 2, HUNGRY = 3, THIRSTY = 4, SATISFY = 5;

    void Start()
    {
        currentHp = hp;
        currentDp = dp;
        currentSp = sp;
        currentHungry = hungry;
        currentThirsty = thirsty;
        currentSatisfy = satisfy;
    }

    void Update()
    {
        Hungry();
        Thirsty();
        SPRechargeTime();
        SPRecover();
        GaugeUpdate();
    }

    private void GaugeUpdate()
    {
        images_Gauge[HP].fillAmount = (float)currentHp / hp;
        images_Gauge[SP].fillAmount = (float)currentSp / sp;
        images_Gauge[DP].fillAmount = (float)currentHp / dp;
        images_Gauge[HUNGRY].fillAmount = (float)currentHungry / hungry;
        images_Gauge[THIRSTY].fillAmount = (float)currentThirsty / thirsty;
        images_Gauge[SATISFY].fillAmount = (float)currentSatisfy / satisfy;
    }
```

- `images_Gauge`
  - ê°ê°ì˜ ìƒíƒœë¥¼ ëŒ€í‘œí•˜ëŠ” ì´ë¯¸ì§€ 6 ê°œê°€ ë°°ì—´ë¡œ ê´€ë¦¬ ë  ê²ƒ
  - enum ì²˜ëŸ¼ ë°°ì—´ì˜ ì¸ë±ìŠ¤ê°€ ê°ê° ì–´ë–¤ ìƒíƒœì¸ì§€ ì•Œ ìˆ˜ ìˆë„ë¡ ì•„ë˜ì™€ ê°™ì´ ì„ ì–¸í•´ì£¼ì—ˆë‹¤.
    ```c#
    private const int HP = 0, DP = 1, SP = 2, HUNGRY = 3, THIRSTY = 4, SATISFY = 5;
    ```
- *Start()*
  - ê²Œì„ì´ ì‹œì‘ ë˜ë©´ 6 ê°œì˜ í˜„ì¬ ìƒíƒœê°’ë“¤ ì´ˆê¸°í™”
    - ìµœëŒ€ ê°’ìœ¼ë¡œ ì´ˆê¸°í™” í•œë‹¤. í˜„ì¬ ì²´ë ¥ì„ ìµœëŒ€ ì²´ë ¥ìœ¼ë¡œ ì—…ëƒ ë“±ë“± 
- *Update()*
  - > ë§¤ í”„ë ˆì„ë§ˆë‹¤ ìë™ìœ¼ë¡œ ê³„ì†í•´ì„œ ì—…ë°ì´íŠ¸ ë˜ì•¼í•  ê²ƒì€ 1ï¸âƒ£ ë°°ê³ í””, 2ï¸âƒ£ ëª©ë§ˆë¦„, 3ï¸âƒ£ SP íšŒë³µí•´ë„ ë ì§€ ì‹œê°„ ì—…ëƒ, 4ï¸âƒ£ SP íšŒë³µ(ìŠ¤íƒœë¯¸ë‚˜) ì´ë©° ë§ˆì§€ë§‰ìœ¼ë¡œ 5ï¸âƒ£ ì´ë¯¸ì§€ ê²Œì´ì§€ ì—…ë°ì´íŠ¸
  - ë°°ê³ í””, ëª©ë§ˆë¦„ì€ ì¼ì • ì‹œê°„ ì§€ë‚  ë•Œë§ˆë‹¤ ê°ì†Œë˜ê²Œ í•  ê²ƒì´ë¼ ê·¸ë ‡ë‹¤.
- *GaugeUpdate()*
  - <u>ì´ë¯¸ì§€ ê²Œì´ì§€ ì—…ë°ì´íŠ¸</u>
    - (í˜„ì¬ ìƒíƒœ ê°’ / ìµœëŒ€ ìƒíƒœ ê°’) ğŸ‘‰ ì´ ê°’ë§Œí¼ í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ì±„ìš´ë‹¤.
  - Image ì˜ `fillAmount` ì´ë¯¸ì§€ ì±„ìš¸ ê°’. ì´ë¯¸ì§€ ì»´í¬ë„ŒíŠ¸ì— Filled ìŠ¬ë¼ì´ë” ê°’


<br>

### 1ï¸âƒ£ ë°°ê³ í””

#### ğŸ“œStatusController.cs

```c#
    // ë°°ê³ í””
    [SerializeField]
    private int hungry;  // ìµœëŒ€ ë°°ê³ í””. ìœ ë‹ˆí‹° ì—ë””í„° ìŠ¬ë¡¯ì—ì„œ ì§€ì •í•  ê²ƒ.
    private int currentHungry;

    // ë°°ê³ í””ì´ ì¤„ì–´ë“œëŠ” ì†ë„
    [SerializeField]
    private int hungryDecreaseTime;
    private int currentHungryDecreaseTime;

    private void Hungry()
    {
        if (currentHungry > 0)
        {
            if (currentHungryDecreaseTime <= hungryDecreaseTime)
                currentHungryDecreaseTime++;
            else
            {
                currentHungry--;
                currentHungryDecreaseTime = 0;
            }
        }
        else
            Debug.Log("ë°°ê³ í”” ìˆ˜ì¹˜ê°€ 0 ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    public void IncreaseHungry(int _count)
    {
        if (currentHungry + _count < hungry)
            currentHungry += _count;
        else
            currentHungry = hungry;
    }

    public void DecreaseHungry(int _count)
    {
        if (currentHungry - _count < 0)
            currentHungry = 0;
        else
            currentHungry -= _count;
    }
```

- *Hungry()*
  - ì—…ë°ì´íŠ¸ ë¬¸ ì•ˆì—ì„œ ë§¤ í”„ë ˆì„ë§ˆë‹¤ ì‹¤í–‰ ëœë‹¤. 
    - ë§¤í”„ë ˆì„ë§ˆë‹¤ ì¼ì • ì‹œê°„ ì”© ì§€ë‚˜ë©´ ìì—°ìŠ¤ëŸ½ê²Œ ë°°ê³ í”” ìˆ˜ì¹˜ê°€ ë–¨ì–´ì§€ë„ë¡ í•  ê²ƒì´ë‹¤.
  - í˜„ì¬ ë°°ê³ í”” ìˆ˜ì¹˜ê°€ 0 ë³´ë‹¤ í¬ë‹¤ë©´ ğŸ‘‰ 
    - `currentHungryDecreaseTime`ê°€ `hungryDecreaseTime`ê°€ ë„ë‹¬ í–ˆë‹¤ë©´ í˜„ì¬ ë°°ê³ í”” `currentHungry` ìˆ˜ì¹˜ë¥¼ ê°ì†Œì‹œí‚¤ê³  `currentHungryDecreaseTime`ì„ ë‹¤ì‹œ 0 ìœ¼ë¡œ ë§Œë“ ë‹¤.
    - `currentHungryDecreaseTime`ê°€ `hungryDecreaseTime`ê°€ ë„ë‹¬ í•˜ì§€ ëª»í–ˆë‹¤ë©´ ê³„ì† 1 ì”© ì¦ê°€í•˜ë„ë¡ í•œë‹¤.
  - í˜„ì¬ ë°°ê³ í”” ìˆ˜ì¹˜ê°€ 0 ì´í•˜ë¼ë©´
    - í”Œë ˆì´ì–´ê°€ ì£½ì–´ì„œ ê²Œì„ì´ ì¢…ë£Œë˜ëŠ” ë“±ë“±ì˜ ì²˜ë¦¬ë¥¼ í•´ì£¼ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.
- *IncreaseHungry(int _count)*
  - ë‹¤ë¥¸ ê³³ì—ì„œ ë°°ê³ í”” ì¦ê°€ ì²˜ë¦¬ë¥¼ í•˜ê³ ì í•  ë•Œ ì‚¬ìš©í•  public í•¨ìˆ˜
    - í˜„ì¬ ë°°ê³ í””ì—ì„œ ì¸ìˆ˜ë¡œ ë“¤ì–´ì˜¨ `_count` ë§Œí¼ ì¦ê°€ì‹œí‚¨ë‹¤.
      - ë‹¨, í˜„ì¬ ë°°ê³ í””ì—ì„œ `_count`ë¥¼ ë”í•œë‹¤ê³  ê°€ì •í–ˆì„ ë•Œ ìµœëŒ€ ë°°ê³ í”” `hungry`ë¥¼ ë„˜ëŠ”ë‹¤ë©´ í˜„ì¬ ë°°ê³ í””ì„ ìµœëŒ€ ë°°ê³ í””ì¸ `hungry`ë¡œ ì„¤ì •í•´ì¤€ë‹¤. 
      - ê·¸ëŸ°ê²Œ ì•„ë‹ˆë¼ë©´ ê·¸ëƒ¥ í˜„ì¬ ë°°ê³ í””ì—ì„œ `_count`ë¥¼ ë”í•´ì¤€ë‹¤.
- *DecreaseHungry(int _count)*
  - ë‹¤ë¥¸ ê³³ì—ì„œ ë°°ê³ í”” ì¦ê°€ ì²˜ë¦¬ë¥¼ í•˜ê³ ì í•  ë•Œ ì‚¬ìš©í•  public í•¨ìˆ˜
    - í˜„ì¬ ë°°ê³ í””ì—ì„œ ì¸ìˆ˜ë¡œ ë“¤ì–´ì˜¨ `_count` ë§Œí¼ ì°¨ê°ì‹œí‚¨ë‹¤.
      - ë‹¨, í˜„ì¬ ë°°ê³ í””ì—ì„œ `_count`ë¥¼ ëº€ë‹¤ê³  ê°€ì •í–ˆì„ ë•Œ `0` ë³´ë‹¤ ì‘ì•„ì§„ë‹¤ë©´ í˜„ì¬ ë°°ê³ í””ì„ ìŒìˆ˜ê°€ ë˜ì§€ ì•Šë„ë¡ `0`ìœ¼ë¡œ ì„¤ì •í•´ì¤€ë‹¤. 
      - ê·¸ëŸ°ê²Œ ì•„ë‹ˆë¼ë©´ ê·¸ëƒ¥ í˜„ì¬ ë°°ê³ í””ì—ì„œ `_count`ë¥¼ ë¹¼ì¤€ë‹¤.

<br>

### 2ï¸âƒ£ ëª©ë§ˆë¦„

#### ğŸ“œStatusController.cs

```c#
    // ëª©ë§ˆë¦„
    [SerializeField]
    private int thirsty;  // ìµœëŒ€ ëª©ë§ˆë¦„. ìœ ë‹ˆí‹° ì—ë””í„° ìŠ¬ë¡¯ì—ì„œ ì§€ì •í•  ê²ƒ.
    private int currentThirsty;

    // ëª©ë§ˆë¦„ì´ ì¤„ì–´ë“œëŠ” ì†ë„
    [SerializeField]
    private int thirstyDecreaseTime;
    private int currentThirstyDecreaseTime;

    private void Thirsty()
    {
        if (currentThirsty > 0)
        {
            if (currentThirstyDecreaseTime <= thirstyDecreaseTime)
                currentThirstyDecreaseTime++;
            else
            {
                currentThirsty--;
                currentThirstyDecreaseTime = 0;
            }
        }
        else
            Debug.Log("ëª©ë§ˆë¦„ ìˆ˜ì¹˜ê°€ 0 ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    public void IncreaseThirsty(int _count)
    {
        if (currentThirsty + _count < thirsty)
            currentThirsty += _count;
        else
            currentThirsty = thirsty;
    }

    public void DecreaseThirsty(int _count)
    {
        if (currentThirsty - _count < 0)
            currentThirsty = 0;
        else
            currentThirsty -= _count;
    }
```

- *Thirsty()*
  - ì—…ë°ì´íŠ¸ ë¬¸ ì•ˆì—ì„œ ë§¤ í”„ë ˆì„ë§ˆë‹¤ ì‹¤í–‰ ëœë‹¤. 
    - ë§¤í”„ë ˆì„ë§ˆë‹¤ ì¼ì • ì‹œê°„ ì”© ì§€ë‚˜ë©´ ìì—°ìŠ¤ëŸ½ê²Œ ëª©ë§ˆë¦„ ìˆ˜ì¹˜ê°€ ë–¨ì–´ì§€ë„ë¡ í•  ê²ƒì´ë‹¤.
- ë‹¤ë¥¸ ê²ƒë“¤ë„ ë‹¤ ë°°ê³ í””ì´ë‘ ë˜‘ê°™ë‹¤.

<br>

### 3ï¸âƒ£ ë§Œì¡±ê°

#### ğŸ“œStatusController.cs

```c#
    // ë§Œì¡±ê°
    [SerializeField]
    private int satisfy;  // ìµœëŒ€ ë§Œì¡±ê°. ìœ ë‹ˆí‹° ì—ë””í„° ìŠ¬ë¡¯ì—ì„œ ì§€ì •í•  ê²ƒ.
    private int currentSatisfy;
```

ë‚˜ë¨¸ì§€ êµ¬í˜„ ì•„ì§ X 

<br>

### 4ï¸âƒ£ HP

#### ğŸ“œStatusController.cs

```c#
    // ì²´ë ¥
    [SerializeField]
    private int hp;  // ìµœëŒ€ ì²´ë ¥. ìœ ë‹ˆí‹° ì—ë””í„° ìŠ¬ë¡¯ì—ì„œ ì§€ì •í•  ê²ƒ.
    private int currentHp;

    public void IncreaseHP(int _count)
    {
        if (currentHp + _count < hp)
            currentHp += _count;
        else
            currentHp = hp;
    }

    public void DecreaseHP(int _count)
    {
        if(currentDp > 0)
        {
            DecreaseDP(_count);
            return;
        }
        currentHp -= _count;

        if (currentHp <= 0)
            Debug.Log("ìºë¦­í„°ì˜ ì²´ë ¥ì´ 0ì´ ë˜ì—ˆìŠµë‹ˆë‹¤!!");
    }
```

- *IncreaseHP(int _count)*
  - ë°°ê³ í”” ëª©ë§ˆë¦„ê³¼ ë¹„ìŠ·
- *DecreaseHP(int _count)*
  - <u>ë°©ì–´ë ¥ì´ ìˆì„ ë• ì²´ë ¥ì„ ê¹ì§€ ì•Šê³  ëŒ€ì‹  ë°©ì–´ë ¥ì„ ê¹ê³  ì¢…ë£Œì‹œí‚¨ë‹¤. </u>
    - *DecreaseDP(_count)* í˜¸ì¶œ
  - ë°©ì–´ë ¥ì´ ì—†ì„ ë•Œë§Œ ì²´ë ¥ì„ ê¹ëŠ”ë‹¤.

<br>

### 5ï¸âƒ£ DP

> ë°©ì–´ë ¥

#### ğŸ“œStatusController.cs

```c#
    // ë°©ì–´ë ¥
    [SerializeField]
    private int dp;  // ìµœëŒ€ ë°©ì–´ë ¥. ìœ ë‹ˆí‹° ì—ë””í„° ìŠ¬ë¡¯ì—ì„œ ì§€ì •í•  ê²ƒ.
    private int currentDp;

    public void IncreaseDP(int _count)
    {
        if (currentDp + _count < dp)
            currentDp += _count;
        else
            currentDp = dp;
    }

    public void DecreaseDP(int _count)
    {
        currentDp -= _count;

        if (currentDp <= 0)
            Debug.Log("ìºë¦­í„°ì˜ ë°©ì–´ë ¥ì´ 0ì´ ë˜ì—ˆìŠµë‹ˆë‹¤!!");
    }
```

<br>

### 6ï¸âƒ£ SP

> ìŠ¤íƒœë¯¸ë‚˜

#### ğŸ“œStatusController.cs

```c#
    // ìŠ¤íƒœë¯¸ë‚˜
    [SerializeField]
    private int sp;  // ìµœëŒ€ ìŠ¤íƒœë¯¸ë‚˜. ìœ ë‹ˆí‹° ì—ë””í„° ìŠ¬ë¡¯ì—ì„œ ì§€ì •í•  ê²ƒ.
    private int currentSp;

    // ìŠ¤íƒœë¯¸ë‚˜ ì¦ê°€ëŸ‰
    [SerializeField]
    private int spIncreaseSpeed;

    // ìŠ¤íƒœë¯¸ë‚˜ ì¬íšŒë³µ ë”œë ˆì´ ì‹œê°„
    [SerializeField]
    private int spRechargeTime;  
    private int currentSpRechargeTime;

    // ìŠ¤íƒœë¯¸ë‚˜ ê°ì†Œ ì—¬ë¶€
    private bool spUsed;


    public void DecreaseStamina(int _count)
    {
        spUsed = true;
        currentSpRechargeTime = 0;

        if (currentSp - _count > 0)
        {
            currentSp -= _count;
        }
        else
            currentSp = 0;
    }

    private void SPRechargeTime()
    {
        if (spUsed)
        {
            if (currentSpRechargeTime < spRechargeTime)
                currentSpRechargeTime++;
            else
                spUsed = false;
        }
    }

    private void SPRecover()
    {
        if (!spUsed && currentSp < sp)
        {
            currentSp += spIncreaseSpeed;
        }
    }

    public int GetCurrentSP()
    {
        return currentSp;
    }
```

1. ìŠ¤íƒœë¯¸ë‚˜ëŠ” ì í”„, ë‹¬ë¦¬ê¸°ì— ì˜í•´ ê°ì†Œëœë‹¤. 
2. ìŠ¤íƒœë¯¸ë‚˜ê°€ 0 ì´ ë˜ë©´ ì í”„, ë‹¬ë¦¬ê¸°ë¥¼ í•  ìˆ˜ ì—†ë‹¤.
3. ê°ì†Œëœ ìŠ¤íƒœë¯¸ë‚˜ëŠ” ì¼ì • ì‹œê°„ì´ ì§€ë‚˜ê³  ë‚œ í›„ì— ìµœëŒ€ ìŠ¤íƒœë¯¸ë‚˜ë¡œ íšŒë³µì„ ì‹œì‘í•œë‹¤.

- *DecreaseStamina(int _count)*
  - ìŠ¤íƒœë¯¸ë‚˜ê°€ ê°ì†Œ ë˜ì—ˆì—ˆë‹¤ëŠ” í‘œì‹œë¥¼ í•´ì£¼ê¸° ìœ„í•´ `spUsed`ì„ Trueë¡œ ì—…ë°ì´íŠ¸ í•´ì¤€ë‹¤.
  - ì¸ìˆ˜ë§Œí¼ ìŠ¤íƒœë¯¸ë‚˜ë¥¼ ì°¨ê°í•´ì¤€ë‹¤. ìŒìˆ˜ê°€ ë˜ì ì•Šë„ë¡ 0 ë³´ë‹¤ ë–¨ì–´ì§€ë©´ 0 ìœ¼ë¡œ ì„¤ì •í•œë‹¤.
- *SPRechargeTime()*
  - <u>ì—…ë°ì´íŠ¸ ë¬¸ ì•ˆì—ì„œ ë§¤í”„ë ˆì„ë§ˆë‹¤ ì‹¤í–‰ëœë‹¤.</u>
  - ìŠ¤íƒœë¯¸ë‚˜ê°€ ê°ì†Œëœ ì´í›„ ~ ìŠ¤íƒœë¯¸ë‚˜ê°€ ì¬ì¶©ì „ ë  ìˆ˜ ìˆëŠ” ì‹œì‘ ì  ê¹Œì§€ì˜ ì‹œê°„ì„ ì¬ì–´ ìŠ¤íƒœë¯¸ë‚˜ê°€ ë‹¤ì‹œ ì¬ì¶©ì „ ë  ìˆ˜ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•œë‹¤.
  - ìŠ¤íƒœë¯¸ë‚˜ê°€ ê°ì†Œëœì ì´ ìˆëŠ” ê²½ìš°ì—ë§Œ *if (spUsed)*
    - `currentSpRechargeTime`ê°€ `spRechargeTime`ì— ë„ë‹¬í•  ë•Œê¹Œì§€ 1 ì”© ì¦ê°€ì‹œí‚¨ë‹¤. ë„ë‹¬í–ˆë‹¤ë©´ `spUsed`ë¥¼ Falseë¡œ ì—…ë°ì´íŠ¸ í•œë‹¤. 
- *SPRecover()*
  - <u>ì—…ë°ì´íŠ¸ ë¬¸ ì•ˆì—ì„œ ë§¤í”„ë ˆì„ë§ˆë‹¤ ì‹¤í–‰ëœë‹¤.</u>
  - ì¬ì¶©ì „ í•  ìˆ˜ ìˆì„ íƒ€ì´ë°ì´ê³  (`!spUsed`) í˜„ì¬ ìŠ¤íƒœë¯¸ë‚˜ê°€ ìµœëŒ€ ìŠ¤íƒœë¯¸ë‚˜ë¥¼ ë„˜ì§€ ì•ŠëŠ”ë‹¤ë©´
    - `spIncreaseSpeed`ë§Œí¼ ìŠ¤í…Œë¯¸ë‚˜ë¥¼ ë§¤ í”„ë ˆì„ë§ˆë‹¤ íšŒë³µ ì‹œì¼œ ë‚˜ê°„ë‹¤.
- *GetCurrentSP()*
  - í˜„ì¬ ìŠ¤íƒœë¯¸ë‚˜ ë¦¬í„´

<br>

#### ğŸ“œPlayerController.cs

```c#

private StatusController theStatusController;

    void Start()
    {
        // ...
        theStatusController = FindObjectOfType<StatusController>();
        // ...
    }

    // ì í”„ ì‹œë„
    private void TryJump()
    {
        if (Input.GetKeyDown(KeyCode.Space) && isGround && theStatusController.GetCurrentSP() > 0)
        {
            Jump();
        }
    }

    // ì í”„
    private void Jump()
    {
        if (isCrouch)
            Crouch();

        theStatusController.DecreaseStamina(100);
        myRigid.velocity = transform.up * jumpForce;
    }

    // ë‹¬ë¦¬ê¸° ì‹œë„
    private void TryRun()
    {
        if (Input.GetKey(KeyCode.LeftShift) && theStatusController.GetCurrentSP() > 0)
        {
            Running();
        }
        if (Input.GetKeyUp(KeyCode.LeftShift) || theStatusController.GetCurrentSP() <= 0)
        {
            RunningCancel();
        }
    }

    // ë‹¬ë¦¬ê¸°
    private void Running()
    {
        if (isCrouch)
            Crouch();

        theGunController.CancelFineSight();

        isRun = true;
        theCrosshair.RunningAnimation(isRun);
        theStatusController.DecreaseStamina(10);
        applySpeed = runSpeed;
    }
```

- *Start()* ì—ì„œ `theStatusControlelr`ì— ğŸ“œStatusController.cs ê°€ì ¸ ì˜¤ê¸°
- ì í”„ë¥¼ ì‹œë„í•˜ë ¤ í•  ë•Œ
  - *theStatusController.GetCurrentSP() > 0* í˜„ì¬ ìŠ¤íƒœë¯¸ë‚˜ê°€ 0 ë³´ë‹¤ í´ ë•Œë§Œ ê°€ëŠ¥í•˜ë„ë¡ í•œë‹¤.
- ì í”„ í•  ë•Œ
  - *theStatusController.DecreaseStamina(100)* ìŠ¤íƒœë¯¸ë‚˜ ê°’ 100 ì”© ê°ì†Œì‹œí‚´
- ë‹¬ë¦¬ê¸° ì‹œë„í•˜ë ¤ í•  ë•Œ 
  - *theStatusController.GetCurrentSP() > 0* í˜„ì¬ ìŠ¤íƒœë¯¸ë‚˜ê°€ 0 ë³´ë‹¤ í´ ë•Œë§Œ ê°€ëŠ¥í•˜ë„ë¡ í•œë‹¤.
  - *theStatusController.GetCurrentSP() <= 0* í˜„ì¬ ìŠ¤íƒœë¯¸ë‚˜ê°€ 0 ì´í•˜ì¼ ë•Œë„ *RunningCancel()* ì„ ì‹¤í–‰í•˜ë„ë¡ í•˜ì. 
    - ë” ì´ìƒ ë‹¬ë¦¬ì§€ ëª»í•˜ë„ë¡
- ì í”„ í•  ë•Œ
  - *theStatusController.DecreaseStamina(100)* ìŠ¤íƒœë¯¸ë‚˜ ê°’ 10 ì”© ê°ì†Œì‹œí‚´



<br>


## ğŸš” ì „ì²´ ì½”ë“œ

### ğŸ“œStatusController.cs

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class StatusController : MonoBehaviour
{
    // ì²´ë ¥
    [SerializeField]
    private int hp;  // ìµœëŒ€ ì²´ë ¥. ìœ ë‹ˆí‹° ì—ë””í„° ìŠ¬ë¡¯ì—ì„œ ì§€ì •í•  ê²ƒ.
    private int currentHp;

    // ìŠ¤íƒœë¯¸ë‚˜
    [SerializeField]
    private int sp;  // ìµœëŒ€ ìŠ¤íƒœë¯¸ë‚˜. ìœ ë‹ˆí‹° ì—ë””í„° ìŠ¬ë¡¯ì—ì„œ ì§€ì •í•  ê²ƒ.
    private int currentSp;

    // ìŠ¤íƒœë¯¸ë‚˜ ì¦ê°€ëŸ‰
    [SerializeField]
    private int spIncreaseSpeed;

    // ìŠ¤íƒœë¯¸ë‚˜ ì¬íšŒë³µ ë”œë ˆì´ ì‹œê°„
    [SerializeField]
    private int spRechargeTime;  
    private int currentSpRechargeTime;

    // ìŠ¤íƒœë¯¸ë‚˜ ê°ì†Œ ì—¬ë¶€
    private bool spUsed;

    // ë°©ì–´ë ¥
    [SerializeField]
    private int dp;  // ìµœëŒ€ ë°©ì–´ë ¥. ìœ ë‹ˆí‹° ì—ë””í„° ìŠ¬ë¡¯ì—ì„œ ì§€ì •í•  ê²ƒ.
    private int currentDp;

    // ë°°ê³ í””
    [SerializeField]
    private int hungry;  // ìµœëŒ€ ë°°ê³ í””. ìœ ë‹ˆí‹° ì—ë””í„° ìŠ¬ë¡¯ì—ì„œ ì§€ì •í•  ê²ƒ.
    private int currentHungry;

    // ë°°ê³ í””ì´ ì¤„ì–´ë“œëŠ” ì†ë„
    [SerializeField]
    private int hungryDecreaseTime;
    private int currentHungryDecreaseTime;

    // ëª©ë§ˆë¦„
    [SerializeField]
    private int thirsty;  // ìµœëŒ€ ëª©ë§ˆë¦„. ìœ ë‹ˆí‹° ì—ë””í„° ìŠ¬ë¡¯ì—ì„œ ì§€ì •í•  ê²ƒ.
    private int currentThirsty;

    // ëª©ë§ˆë¦„ì´ ì¤„ì–´ë“œëŠ” ì†ë„
    [SerializeField]
    private int thirstyDecreaseTime;
    private int currentThirstyDecreaseTime;

    // ë§Œì¡±ê°
    [SerializeField]
    private int satisfy;  // ìµœëŒ€ ë§Œì¡±ê°. ìœ ë‹ˆí‹° ì—ë””í„° ìŠ¬ë¡¯ì—ì„œ ì§€ì •í•  ê²ƒ.
    private int currentSatisfy;

    // í•„ìš”í•œ ì´ë¯¸ì§€
    [SerializeField]
    private Image[] images_Gauge;

    // ê° ìƒíƒœë¥¼ ëŒ€í‘œí•˜ëŠ” ì¸ë±ìŠ¤
    private const int HP = 0, DP = 1, SP = 2, HUNGRY = 3, THIRSTY = 4, SATISFY = 5;

    void Start()
    {
        currentHp = hp;
        currentDp = dp;
        currentSp = sp;
        currentHungry = hungry;
        currentThirsty = thirsty;
        currentSatisfy = satisfy;
    }

    void Update()
    {
        Hungry();
        Thirsty();
        SPRechargeTime();
        SPRecover();
        GaugeUpdate();
    }

    private void GaugeUpdate()
    {
        images_Gauge[HP].fillAmount = (float)currentHp / hp;
        images_Gauge[SP].fillAmount = (float)currentSp / sp;
        images_Gauge[DP].fillAmount = (float)currentHp / dp;
        images_Gauge[HUNGRY].fillAmount = (float)currentHungry / hungry;
        images_Gauge[THIRSTY].fillAmount = (float)currentThirsty / thirsty;
        images_Gauge[SATISFY].fillAmount = (float)currentSatisfy / satisfy;
    }

    private void Hungry()
    {
        if (currentHungry > 0)
        {
            if (currentHungryDecreaseTime <= hungryDecreaseTime)
                currentHungryDecreaseTime++;
            else
            {
                currentHungry--;
                currentHungryDecreaseTime = 0;
            }
        }
        else
            Debug.Log("ë°°ê³ í”” ìˆ˜ì¹˜ê°€ 0 ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    private void Thirsty()
    {
        if (currentThirsty > 0)
        {
            if (currentThirstyDecreaseTime <= thirstyDecreaseTime)
                currentThirstyDecreaseTime++;
            else
            {
                currentThirsty--;
                currentThirstyDecreaseTime = 0;
            }
        }
        else
            Debug.Log("ëª©ë§ˆë¦„ ìˆ˜ì¹˜ê°€ 0 ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    public void IncreaseHP(int _count)
    {
        if (currentHp + _count < hp)
            currentHp += _count;
        else
            currentHp = hp;
    }

    public void DecreaseHP(int _count)
    {
        if(currentDp > 0)
        {
            DecreaseDP(_count);
            return;
        }
        currentHp -= _count;

        if (currentHp <= 0)
            Debug.Log("ìºë¦­í„°ì˜ ì²´ë ¥ì´ 0ì´ ë˜ì—ˆìŠµë‹ˆë‹¤!!");
    }

    public void IncreaseDP(int _count)
    {
        if (currentDp + _count < dp)
            currentDp += _count;
        else
            currentDp = dp;
    }

    public void DecreaseDP(int _count)
    {
        currentDp -= _count;

        if (currentDp <= 0)
            Debug.Log("ìºë¦­í„°ì˜ ë°©ì–´ë ¥ì´ 0ì´ ë˜ì—ˆìŠµë‹ˆë‹¤!!");
    }

    public void IncreaseHungry(int _count)
    {
        if (currentHungry + _count < hungry)
            currentHungry += _count;
        else
            currentHungry = hungry;
    }

    public void DecreaseHungry(int _count)
    {
        if (currentHungry - _count < 0)
            currentHungry = 0;
        else
            currentHungry -= _count;
    }

    public void IncreaseThirsty(int _count)
    {
        if (currentThirsty + _count < thirsty)
            currentThirsty += _count;
        else
            currentThirsty = thirsty;
    }

    public void DecreaseThirsty(int _count)
    {
        if (currentThirsty - _count < 0)
            currentThirsty = 0;
        else
            currentThirsty -= _count;
    }

    public void DecreaseStamina(int _count)
    {
        spUsed = true;
        currentSpRechargeTime = 0;

        if (currentSp - _count > 0)
        {
            currentSp -= _count;
        }
        else
            currentSp = 0;
    }

    private void SPRechargeTime()
    {
        if (spUsed)
        {
            if (currentSpRechargeTime < spRechargeTime)
                currentSpRechargeTime++;
            else
                spUsed = false;
        }
    }

    private void SPRecover()
    {
        if (!spUsed && currentSp < sp)
        {
            currentSp += spIncreaseSpeed;
        }
    }

    public int GetCurrentSP()
    {
        return currentSp;
    }
}

```

<br>

### ğŸ“œPlayerController.cs

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class PlayerController : MonoBehaviour
{
    // ìŠ¤í”¼ë“œ ì¡°ì • ë³€ìˆ˜
    [SerializeField]
    private float walkSpeed;
    [SerializeField]
    private float runSpeed;
    [SerializeField]
    private float crouchSpeed;
    private float applySpeed;

    [SerializeField]
    private float jumpForce;

    // ìƒíƒœ ë³€ìˆ˜
    private bool isWalk = false; 
    private bool isRun = false;
    private bool isGround = true;
    private bool isCrouch = false;

    // ì›€ì§ì„ ì²´í¬ ë³€ìˆ˜
    private Vector3 lastPos;  // ì „ í”„ë ˆì„ì˜ ìœ„ì¹˜. í˜„ì¬ í”„ë ˆì„ì˜ ìœ„ì¹˜ì™€ ë¹„êµí–ˆì„ ë•Œ ë‹¬ë¼ì§€ë©´ ì›€ì§ì„ì´ ìˆì—ˆë˜ ê²ƒì´ë‹¤.


    // ì•‰ì•˜ì„ ë•Œ ì–¼ë§ˆë‚˜ ì•‰ì„ì§€ ê²°ì •í•˜ëŠ” ë³€ìˆ˜
    [SerializeField]
    private float crouchPosY;
    private float originPosY;
    private float applyCrouchPosY;

    // ë¯¼ê°ë„
    [SerializeField]
    private float lookSensitivity;  

    // ì¹´ë©”ë¼ í•œê³„
    [SerializeField]
    private float cameraRotationLimit;  
    private float currentCameraRotationX; 

    // í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸
    [SerializeField]
    private Camera theCamera; 
    private Rigidbody myRigid;
    private CapsuleCollider capsuleCollider;
    private GunController theGunController;
    private Crosshair theCrosshair;
    private StatusController theStatusController;

    void Start()
    {
        // ì»´í¬ë„ŒíŠ¸ í• ë‹¹
        capsuleCollider = GetComponent<CapsuleCollider>();
        myRigid = GetComponent<Rigidbody>();
        theGunController = FindObjectOfType<GunController>();
        theCrosshair = FindObjectOfType<Crosshair>();
        theStatusController = FindObjectOfType<StatusController>();

        applySpeed = walkSpeed;
        originPosY = theCamera.transform.localPosition.y;
        applyCrouchPosY = originPosY;
    }

    void Update()  
    {
        IsGround();
        TryJump();
        TryRun();
        TryCrouch();
        Move();
        MoveCheck();
        CameraRotation();
        CharacterRotation();
    }

    // ì§€ë©´ ì²´í¬
    private void IsGround()
    {
        isGround = Physics.Raycast(transform.position, Vector3.down, capsuleCollider.bounds.extents.y + 0.1f);
        theCrosshair.JumpingAnimation(!isGround);
    }

    // ì í”„ ì‹œë„
    private void TryJump()
    {
        if (Input.GetKeyDown(KeyCode.Space) && isGround && theStatusController.GetCurrentSP() > 0)
        {
            Jump();
        }
    }

    // ì í”„
    private void Jump()
    {
        if (isCrouch)
            Crouch();

        theStatusController.DecreaseStamina(100);
        myRigid.velocity = transform.up * jumpForce;
    }

    // ë‹¬ë¦¬ê¸° ì‹œë„
    private void TryRun()
    {
        if (Input.GetKey(KeyCode.LeftShift) && theStatusController.GetCurrentSP() > 0)
        {
            Running();
        }
        if (Input.GetKeyUp(KeyCode.LeftShift) || theStatusController.GetCurrentSP() <= 0)
        {
            RunningCancel();
        }
    }

    // ë‹¬ë¦¬ê¸°
    private void Running()
    {
        if (isCrouch)
            Crouch();

        theGunController.CancelFineSight();

        isRun = true;
        theCrosshair.RunningAnimation(isRun);
        theStatusController.DecreaseStamina(10);
        applySpeed = runSpeed;
    }

    // ë‹¬ë¦¬ê¸° ì·¨ì†Œ
    private void RunningCancel()
    {
        isRun = false;
        theCrosshair.RunningAnimation(isRun);
        applySpeed = walkSpeed;
    }

    // ì•‰ê¸° ì‹œë„
    private void TryCrouch()
    {
        if (Input.GetKeyDown(KeyCode.LeftControl))
        {
            Crouch();
        }
    }

    // ì•‰ê¸° ë™ì‘
    private void Crouch()
    {
        isCrouch = !isCrouch;
        theCrosshair.CrouchingAnimation(isCrouch);

        if (isCrouch)
        {
            applySpeed = crouchSpeed;
            applyCrouchPosY = crouchPosY;
        }
        else
        {
            applySpeed = walkSpeed;
            applyCrouchPosY = originPosY;
        }

        StartCoroutine(CrouchCoroutine());
    }

    // ë¶€ë“œëŸ¬ìš´ ì•‰ê¸° ë™ì‘
    IEnumerator CrouchCoroutine()
    {
        float _posY = theCamera.transform.localPosition.y;
        int count = 0;

        while(_posY != applyCrouchPosY)
        {
            count++;
            _posY = Mathf.Lerp(_posY, applyCrouchPosY, 0.2f);
            theCamera.transform.localPosition = new Vector3(0, _posY, 0);
            if(count > 15)
                break;
            yield return null;
        }
        theCamera.transform.localPosition = new Vector3(0, applyCrouchPosY, 0);
    }

    private void Move()
    {
        float _moveDirX = Input.GetAxisRaw("Horizontal"); 
        float _moveDirZ = Input.GetAxisRaw("Vertical"); 

        Vector3 _moveHorizontal = transform.right * _moveDirX;
        Vector3 _moveVertical = transform.forward * _moveDirZ; 

        Vector3 _velocity = (_moveHorizontal + _moveVertical).normalized * applySpeed; 

        myRigid.MovePosition(transform.position + _velocity * Time.deltaTime);
    }

    private void MoveCheck()
    {
        if (!isRun && !isCrouch && isGround)
        {
            if (Vector3.Distance(lastPos, transform.position) >= 0.01f)
                isWalk = true;
            else
                isWalk = false;

            theCrosshair.WalkingAnimation(isWalk);
            lastPos = transform.position;
        }  
    }


    private bool pauseCameraRotation = false;

    private void CameraRotation() 
    {
        if (!pauseCameraRotation)
        {
            float _xRotation = Input.GetAxisRaw("Mouse Y");
            float _cameraRotationX = _xRotation * lookSensitivity;

            currentCameraRotationX -= _cameraRotationX;
            currentCameraRotationX = Mathf.Clamp(currentCameraRotationX, -cameraRotationLimit, cameraRotationLimit);

            theCamera.transform.localEulerAngles = new Vector3(currentCameraRotationX, 0f, 0f);
        }
    }

    public IEnumerator TreeLookCoroutine(Vector3 _target)
    {
        pauseCameraRotation = true;

        Quaternion direction = Quaternion.LookRotation(_target - theCamera.transform.position);
        Vector3 eulerValue = direction.eulerAngles;
        float destinationX = eulerValue.x;

        while(Mathf.Abs(destinationX - currentCameraRotationX) >= 0.5f)
        {
            eulerValue = Quaternion.Lerp(theCamera.transform.localRotation, direction, 0.3f).eulerAngles;
            theCamera.transform.localRotation = Quaternion.Euler(eulerValue.x, 0f, 0f);
            currentCameraRotationX = theCamera.transform.localEulerAngles.x;
            yield return null;
        }
        pauseCameraRotation = false;
    }

    private void CharacterRotation()
    {
        float _yRotation = Input.GetAxisRaw("Mouse X");
        Vector3 _characterRotationY = new Vector3(0f, _yRotation, 0f) * lookSensitivity;
        myRigid.MoveRotation(myRigid.rotation * Quaternion.Euler(_characterRotationY));
    }
}



```

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}