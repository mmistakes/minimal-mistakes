---
title:  "Chapter 3-1. íŒŒê´´ ê°€ëŠ¥í•œ í™˜ê²½ë“¤ : ê´‘ì„ ì±„êµ´" 

categories:
  -  Unity Lesson 3 
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-09-29
last_modified_at: 2020-09-29
---

ì¸í”„ëŸ°ì— ìˆëŠ” ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° 3D] ì‹¤ì „! ìƒì¡´ê²Œì„ ë§Œë“¤ê¸° - Advanced** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.inflearn.com/course/unity-2#)
{: .notice--warning}

<br>

# Chapter 3. íŒŒê´´ ê°€ëŠ¥í•œ í™˜ê²½ë“¤
# ê´‘ì„ ì±„êµ´

ë°”ìœ„ë¥¼ ê³¡ê´­ì´ë¡œ ë¶€ìˆ˜ë©´ ë°”ìœ„ê°€ ë¶€ìˆ´ì§€ëŠ” ì´í™íŠ¸ íš¨ê³¼ë¥¼ êµ¬í˜„í•´ ë³´ì.

## ğŸš– ë°”ìœ„ ì˜¤ë¸Œì íŠ¸ ì¶”ê°€

- `Rock` 
  - ğŸ‘‰ ë¹ˆ ì˜¤ë¸Œì íŠ¸ì´ë©° ë°”ìœ„ì˜ Transformì„ ëŒ€ì‹  ë‹´ë‹¹í•œë‹¤.
  - <u>Tagë¡œ "Rock"</u>ì„ ì§€ì •í•˜ì—¬ ë°”ìœ„ë¡œ êµ¬ë¶„ë˜ê²Œ í•˜ì˜€ë‹¤.
  - **Sphere Collider** ë¡œ ë°”ìœ„ì˜ ì½œë¼ì´ë”ê°€ ë˜ ì¤„ ê²ƒì´ë‹¤.
    - Sphere Collider ë¶™ì—¬ ì£¼ì—ˆìŒ. ë°˜ì§€ë¦„ 1, ì¤‘ì‹¬ì  (0, 0.1, 0)
      ![image](https://user-images.githubusercontent.com/42318591/94498981-7cc97880-0236-11eb-91e5-f36335fe1add.png){: width="50%" height="50%"}{: .align-center}
  - `Rock_Mesh`
    - ë°”ìœ„ê°€ ê¹¨ì§€ê¸° ì „ì˜ <u>í‰ì†Œ ë°”ìœ„ ì˜¤ë¸Œì íŠ¸ë¡œ ê¹¨ì§ˆ ë•Œ ë¹„í™œì„±í™”</u>
  - `Rock_Debris`
    - ğŸ‘‰ ë¹ˆ ì˜¤ë¸Œì íŠ¸ì´ë©° 26 ê°œì˜ 'ë°”ìœ„ íŒŒí¸' Mesh ì˜¤ë¸Œì íŠ¸ë“¤ë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤.
    - í‰ì†Œì—” ë¹„í™œì„±í™”, <u>ë°”ìœ„ê°€ ê¹¨ì§ˆ ë•Œ í™œì„±í™”í•  ì˜¤ë¸Œì íŠ¸</u>
      - íŒŒí¸ í•˜ë‚˜ í•˜ë‚˜ ë“¤ì€ Mesh ë¥¼ ê°€ì§€ê³  ìˆê³ 
      - Rigidbody ë¥¼ ê°€ì§„ë‹¤.
        - `Rock_Debris`ê°€ í™œì„±í™”ë˜ë©´ ìë™ìœ¼ë¡œ ì¤‘ë ¥ê³¼ ë§ˆì°°ë ¥ ë“±ë“±ì˜ ë¬¼ë¦¬ í˜„ìƒì— ì˜í•´ íŒŒí¸ ì˜¤ë¸Œì íŠ¸ë“¤ì´ í¼ì ¸ ë‚ ë¼ê°€ê²Œ ëœë‹¤.
          - Mass 0.1 ì§ˆëŸ‰ì„ ê°€ë³ê²Œ í•˜ì—¬ ì˜ ë‚ ë¼ê°€ê²Œ í•˜ì˜€ë‹¤.
          - Drag 1 (ì €í•­)
          - Augular drag 1 (ë°€ë¦¬ëŠ” ì •ë„)
      - Box Colliderë¥¼ ê°€ì§„ë‹¤.
        - íŒŒí¸ë“¤ë¼ë¦¬ ì„œë¡œ ì¶©ëŒ ì²´í¬ë¥¼ í•  ìˆ˜ ìˆë‹¤.
        - Rigidbody ì— ì˜í•´ ë¬¼ë¦¬ì ì¸ ì¶©ëŒì´ ì¼ì–´ë‚˜ë©´ Colliderë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¼ë¦¬ì  ì¶©ëŒì„ ì²´í¬í•˜ê³  ë‚ ë¼ê°.

![image](https://user-images.githubusercontent.com/42318591/94500327-06c71080-023a-11eb-9347-9d172b37e0c3.png)

![image](https://user-images.githubusercontent.com/42318591/94500338-0d558800-023a-11eb-83b8-b015fe442e9f.png)

![image](https://user-images.githubusercontent.com/42318591/94500228-bfd91b00-0239-11eb-9463-27af9c33222e.png)

`Rock_Mesh` ì™€ `Rock_Debris`ì˜ í¬ê¸°ëŠ” 150, 150, 150 ìœ¼ë¡œ í‚¤ì›Œì£¼ê³  ìœ„ì¹˜ëŠ” ì›ì ìœ¼ë¡œ ë§ì¶”ì—ˆë‹¤. (`Rock` ê¸°ì¤€ ì›ì . ì‹¤ì œ ì›”ë“œ ì¢Œí‘œ ìœ„ì¹˜ëŠ” ë¶€ëª¨ì¸ `Rock`ì´ ëŒ€ì‹  ê²°ì •í•´ì¤„ ê²ƒì´ë‹¤.) `Rock_Debris`ëŠ” ë¹„í™œì„±í™” í•´ë‘ê³  ê²Œì„ì„ ì‹œì‘í•˜ì.


<br>

## ğŸš– ë°”ìœ„ ì±„êµ´í•˜ê¸°

### ğŸ“œRock.cs

> `Rock`ì— ë¶™ì—¬ì¤€ë‹¤.

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Rock : MonoBehaviour
{
    [SerializeField]
    private int hp; // ë°”ìœ„ì˜ ì²´ë ¥. 0 ì´ ë˜ë©´ íŒŒê´´ë¨

    [SerializeField]
    private int destroyTime; // íŒŒê´´ëœ ë°”ìœ„ì˜ íŒŒí¸ë“¤ì˜ ìƒëª… (ì´ ì‹œê°„ì´ ì§€ë‚˜ë©´ Destroy)

    [SerializeField]
    private SphereCollider col; // êµ¬ì²´ ì½œë¼ì´ë”. ë°”ìœ„ íŒŒê´´ì‹œí‚¤ë©´ ë¹„í™œì„±í™”ì‹œí‚¤ ã„¹ê²ƒ.

    [SerializeField]
    private GameObject go_rock;  // ì¼ë°˜ ë°”ìœ„ ì˜¤ë¸Œì íŠ¸. í‰ì†Œì— í™œì„±í™”, ë°”ìœ„ ê¹¨ì§€ë©´ ë¹„í™œì„±í™”
    [SerializeField]
    private GameObject go_debris;  // ê¹¨ì§„ ë°”ìœ„ ì˜¤ë¸Œì íŠ¸. í‰ì†Œì— ë¹„í™œì„±í™”, ë°”ìœ„ ê¹¨ì§€ë©´ í™œì„±í™”

    public void Mining()
    {
        hp--;
        if (hp <= 0)
            Destruction();
    }

    private void Destruction()
    {
        col.enabled = false;
        Destroy(go_rock);

        go_debris.SetActive(true);
        Destroy(go_debris, destroyTime);
    }
}

```

> í‰ìƒì‹œì—” `go_rock` ì˜¤ë¸Œì íŠ¸ í™œì„±í™” ("Rock_Mesh"), ê¹¨ì§„ íŒŒí¸ë“¤ì˜ ëª¨ìŒì¸ `go_debris` ì˜¤ë¸Œì íŠ¸ ë¹„í™œì„±í™” ("Rock_Debris")

- *Mining()* ğŸ‘‰ ì±„êµ´. 
  - í•œë²ˆ ì‹¤í–‰ ë•Œë§ˆë‹¤ hp ë¥¼ 1 ì”© ê¹ëŠ”ë‹¤.
  - public. ğŸ“œPickaxeController.cs ê³¡ê´­ì´ë¡œ ë°”ìœ„ë¥¼ ìº˜ ë•Œ í˜¸ì¶œ. 
- *Destruction()* ğŸ‘‰ `hp` ë°”ìœ„ì˜ ì²´ë ¥ì´ 0ì´ ë˜ì–´ íŒŒê´´ë˜ë©´ ë°”ìœ„ íŒŒê´´
  - `Rock`ì— ë¶™ì–´ì„œ ë°”ìœ„ì˜ Collider ì—­í• ì„ í•˜ëŠ” SphereCollider ì»´í¬ë„ŒíŠ¸ ë¹„í™œì„±í™”
    - ì´ ë°”ìœ„ëŠ” íŒŒê´´ëœ ë°”ìœ„ì´ë¯€ë¡œ ë” ì´ìƒ ì¶©ëŒì²˜ë¦¬ ë˜ì§€ ì•Šê²Œ í•˜ê¸° ìœ„í•˜ì—¬
  - `go_rock` ì˜¤ë¸Œì íŠ¸ íŒŒê´´
  - `go_debris` ì˜¤ë¸Œì íŠ¸ í™œì„±í™” 
    - ğŸ‘‰ íŒŒí¸ë“¤ì€ Rigidbody, Collider ë¥¼ ê°€ì§€ê³  ìˆì–´ í™œì„±í™” ë˜ìë§ˆì ê°ì ë¶€ë”ªì³ ë‚ ë¼ê°€ê²Œ ë¨
    - `destroyTime`ë§Œí¼ì˜ ì‹œê°„ì„ ê°€ì§„ í›„ `go_debris` ì˜¤ë¸Œì íŠ¸ë„ íŒŒê´´

![image](https://user-images.githubusercontent.com/42318591/94500815-362a4d00-023b-11eb-82ec-f02554c0de5e.png)


<br>

### ğŸ“œPickaxeController.cs

> ê³¡ê´­ì´ë¡œ ë°”ìœ„ë¥¼ í•œë²ˆ ë•Œë¦´ ë•Œë§ˆë‹¤ *Mining()* ë°”ìœ„ì˜ ì²´ë ¥ì„ 1 ì”© ê¹ìŒ

```c#
    protected override IEnumerator HitCoroutine()
    {
        while (isSwing)
        {
            if (CheckObject())
            {
                if (hitInfo.transform.tag == "Rock")
                {
                    hitInfo.transform.GetComponent<Rock>().Mining();
                }
                isSwing = false;
                Debug.Log(hitInfo.transform.name);
            }
            yield return null;
        }
    }
```
```c#
                if (hitInfo.transform.tag == "Rock")
                {
                    hitInfo.transform.GetComponent<Rock>().Mining();
                }
```

í”¼ê²©í•œ ì¶©ëŒ ëŒ€ìƒì˜ íƒœê·¸ê°€ "Rock"ì´ë¼ë©´ ì¶©ëŒí•œ ê·¸ ì˜¤ë¸Œì íŠ¸(Rock)ì˜ *Mining()* í•¨ìˆ˜ í˜¸ì¶œ. ë°”ìœ„ì˜ ì²´ë ¥ 1 ì”© ê°ì†Œ.


<br>

## ğŸš– ë°”ìœ„ ë•Œë¦´ ë•Œ ë§ˆë‹¤ ì´í™íŠ¸ íš¨ê³¼ ì£¼ê¸°

> ë•Œë¦´ ë•Œë§ˆë‹¤ ë•Œë¦° ìœ„ì¹˜ì— í¬ê¸°ë¥¼ ëŒ€í­ ì¤„ì¸ `go_debris` ë¥¼ í™œì„±í™” í•´ì£¼ë©´ ëœë‹¤! 

- ì´í™íŠ¸ íš¨ê³¼ë¡œì¨ ì‚¬ìš©í•  "Rock_Debris" 3 D ëª¨ë¸ì„ ì„í¬íŠ¸ í•œ ë’¤ ì´ë¦„ì„ `Rock_Effect_Prefab`ìœ¼ë¡œ ë³€ê²½.
- íŒŒí¸ ì˜¤ë¸Œì íŠ¸ë“¤ì—ê²Œ Rigidbody ì™€ Box Colliderë¥¼ ë¶™ì—¬ì£¼ì.
  - ì´í™íŠ¸ íš¨ê³¼ë‹ˆê¹Œ ì§ˆëŸ‰ 0.0001 ë¡œ ì£¼ì–´ì„œ ì—„ì²­ ê°€ë³ê²Œ í•´ì¤¬ê³ 
  - drag ì™€ augular drag ëŠ” 1 ì”©
- í™œì„±í™” ë˜ê¸°ë§Œ í•˜ë©´ ì•Œì•„ì„œ ìì‹ íŒŒí¸ ì˜¤ë¸Œì íŠ¸ë“¤ì´ Rigidbody, Colliderì— ì˜í•´ì„œ ì„œë¡œ ë¶€ë”ªì¹˜ê³  ì¤‘ë ¥ì˜ ì˜í–¥ì„ ë°›ëŠ” ë“± ë¬¼ë¦¬ì ì¸ í˜ì— ì˜í•´ íŒíŒ ë‚ ì•„ê°€ê²Œ ëœë‹¤.
- ğŸŸ¦í”„ë¦¬íŒ¹í™” í•´ì£¼ê¸°
  - ê²Œì„ ë„ì¤‘ì— ë°”ìœ„ë¥¼ ë•Œë¦´ ë•Œë§Œ ìƒì„±í•´ì¤„ ê²ƒì´ê¸° ë•Œë¬¸ì—

<br>

### ğŸ“œRock.cs

```c#
    [SerializeField]
    private GameObject go_effect_prefabs;  // ì±„êµ´ ì´í™íŠ¸ íš¨ê³¼ë¡œ ì‚¬ìš©í•  ê¹¨ì§„ ë°”ìœ„ ì˜¤ë¸Œì íŠ¸.

    public void Mining()
    {
        GameObject clone = Instantiate(go_effect_prefabs, col.bounds.center, Quaternion.identity);
        Destroy(clone, destroyTime);

        hp--;
        if (hp <= 0)
            Destruction();
    }
```

- *Mining()*
  - ë°”ìœ„ë¥¼ ë•Œë¦´ ë•Œë§ˆë‹¤ 
    - ë°”ìœ„ ì´í™íŠ¸ íš¨ê³¼ë¡œ ì‚¬ìš©í•  ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•˜ê³  `destroyTime` ì‹œê°„ ë’¤ íŒŒê´´.
      - ìƒì„± ìœ„ì¹˜ëŠ” `Rock`ì˜ Sphere Collider ì˜ ì • ê°€ìš´ë° ìœ„ì¹˜ ë²¡í„°
      - `go_effect_prefabs`ì— ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘” í”„ë¦¬íŒ¹ í• ë‹¹
    - ë°”ìœ„ì˜ ì²´ë ¥ 1 ì”© ê°ì†Œ
    - ë°”ìœ„ì˜ ì²´ë ¥ì´ 0 ì´í•˜ë©´ íŒŒê´´

![image](https://user-images.githubusercontent.com/42318591/94501528-00866380-023d-11eb-90cf-4591773c9cbd.png)


<br>

## ğŸš– ë°”ìœ„ ë•Œë¦´ ë•Œ, íŒŒê´´ì‹œ ì‚¬ìš´ë“œ ì¬ìƒ

### ğŸ“œRock.cs

```c#
    [SerializeField]
    private AudioSource audioSource;
    [SerializeField]
    private AudioClip effect_sound_1;  // ë°”ìœ„ ë•Œë¦´ ë•Œ ì‚¬ìš´ë“œ
    [SerializeField]
    private AudioClip effect_sound_2;  // ë°”ìœ„ê°€ íŒŒê´´ë  ë•Œ ì‚¬ìš´ë“œ

    public void Mining()
    {
        // ë°”ìœ„ ë•Œë¦´ ë•Œë§ˆë‹¤ effect_sound_1 ì˜¤ë””ì˜¤ í´ë¦½ ì¬ìƒ
        audioSource.clip = effect_sound_1;
        audioSource.Play();

        GameObject clone = Instantiate(go_effect_prefabs, col.bounds.center, Quaternion.identity);
        Destroy(clone, destroyTime);

        hp--;
        if (hp <= 0)
            Destruction();
    }

    private void Destruction()
    {
        // ë°”ìœ„ê°€ íŒŒê´´ë  ë•Œ effect_sound_2 ì˜¤ë””ì˜¤ í´ë¦½ ì¬ìƒ
        audioSource.clip = effect_sound_2;
        audioSource.Play();

        col.enabled = false;
        Destroy(go_rock);

        go_debris.SetActive(true);
        Destroy(go_debris, destroyTime);
    }
```

![image](https://user-images.githubusercontent.com/42318591/94501975-06307900-023e-11eb-9bc3-d01e9d23ef71.png)

ì˜¤ë””ì˜¤ í´ë¦½ í• ë‹¹í•˜ê³  Audio Source ì»´í¬ë„ŒíŠ¸ ë¶™ì´ê¸° 

<br>

## ğŸš– Rock í”„ë¦¬íŒ¹í™”

`Rock`ë„ ê²Œì„ì„ ì‹¤í–‰í•˜ë©´ ê²Œì„ ì›”ë“œì— ëœë¤ìœ¼ë¡œ ì—¬ëŸ¬ê°œ ë°°ì¹˜ê°€ ë˜ì•¼ í•˜ë¯€ë¡œ ì¼ë‹¨ ğŸŸ¦í”„ë¦¬íŒ¹í™” ì‹œí‚¤ì. ì–¸ì œë“ ì§€ ê²Œì„ ì›”ë“œì— ì°ì–´ë‚¼ ìˆ˜ ìˆë„ë¡.

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}