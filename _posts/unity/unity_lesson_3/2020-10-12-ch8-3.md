---
title:  "Chapter 8-3. ëª¨ë‹¥ë¶ˆ : ë¶ˆ ì˜®ê²¨ ë¶™ê¸°" 

categories:
  -  Unity Lesson 3 
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-10-12
last_modified_at: 2020-10-12
---

ì¸í”„ëŸ°ì— ìˆëŠ” ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° 3D] ì‹¤ì „! ìƒì¡´ê²Œì„ ë§Œë“¤ê¸° - Advanced** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.inflearn.com/course/unity-2#)
{: .notice--warning}

# Chapter 8. ëª¨ë‹¥ ë¶ˆì— ê³ ê¸° êµ½ê¸°

# ë¶ˆì— ë‹¿ìœ¼ë©´ ì˜®ê²¨ ë¶™ê²Œ í•˜ê¸°

## ğŸš– í”Œë ˆì´ì–´ì—ê²Œ ì˜®ê²¨ ë¶™ì„ ë¶ˆ í”„ë¦¬íŒ¹

![image](https://user-images.githubusercontent.com/42318591/95708481-5fb19280-0c97-11eb-89c4-af094036e5c8.png)

- ì´ë¦„ì€ `Burn Effect Prefab`
- ëª¨ë‹¥ ë¶ˆ í”„ë¦¬íŒ¹ì¸ `Flame` íŒŒí‹°í´ ì‹œìŠ¤í…œê³¼ ê±°ì˜ ë¹„ìŠ·í•˜ë¯€ë¡œ ì¼ë‹¨ ë³µì‚¬í•´ì„œ ë§Œë“¤ì–´ ì£¼ì—ˆë‹¤.
  - ê²€ì€ ì—°ê¸° `Smog`ëŠ” ì§€ì› ë‹¤.
  - ì»´í¬ë„ŒíŠ¸ë¡œ ë¶™ì€ Collider ì™€ ğŸ“œFire.cs ëŠ” ì œê±°í–ˆë‹¤.
  - Emission ì—ì„œ ë°©ì¶œë˜ëŠ” ì…ìë¥¼ ì¢€ ì ê²Œ í•´ì£¼ì—ˆë‹¤. ëª¨ë‹¥ë¶ˆê³¼ëŠ” ë‹¤ë¥´ê²Œ ì¢€ ì•½í•œ ê·œëª¨ì˜ ë¶ˆì´ë¯€ë¡œ.

<br>

## ğŸ“œBurn.cs

> <u>í”Œë ˆì´ì–´ì—ê²Œ ì˜®ê²¨ ë¶™ëŠ” ë¶ˆ.</u> `Player`ì—ê²Œ ë¶™ì¸ë‹¤.

- í”Œë ˆì´ì–´ì—ê²Œ ì˜®ê²¨ ë¶™ì€ ë¶ˆì€ í”Œë ˆì´ì–´ì—ê²Œ ì¼ì • ì‹œê°„ë™ì•ˆ ë°ë¯¸ì§€ë¥¼ ì¤€ í›„ ì‚¬ë¼ì§„ë‹¤.
- ì˜®ê²¨ ë¶™ëŠ” ë¶ˆì€ í”Œë ˆì´ì–´ë¥¼ ë”°ë¼ë‹¤ë…€ì•¼ í•˜ë¯€ë¡œ í”Œë ˆì´ì–´ì—ê²Œ ì˜®ê²¨ ë¶™ëŠ” ë¶ˆ í”„ë¦¬íŒ¹ì„ ë”°ë¡œ ë§Œë“¤ì–´, í”Œë ˆì´ì–´ê°€ ë¶ˆì— ë‹¿ìœ¼ë©´ í”Œë ˆì´ì–´ì˜ ìì‹ìœ¼ë¡œ íƒœì–´ë‚˜ê²Œ í•´ì•¼ í•œë‹¤.

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Burn : MonoBehaviour
{
    private bool isBurning = false;

    [SerializeField] private int damage;  // ì˜®ê²¨ ë¶™ì€ ë¶ˆì˜ ë°ë¯¸ì§€

    [SerializeField] private float damageTime;
    private float currentDamageTime;

    [SerializeField] private float durationTime;
    private float currentDurationTime;

    [SerializeField]
    private GameObject flame_prefab;  // ë¶ˆ ë¶™ìœ¼ë©´ í”„ë¦¬íŒ¹ ìƒì„±
    private GameObject go_tempFlame;  // ë¶™ì€ ë¶ˆ í”„ë¦¬íŒ¹ì„ Instantiate í•´ì„œ ì´ ê³³ì— ë‹´ì„ ê²ƒ. (íŒŒê´´ì‹œí‚¬ ê±°ë¼ ë‹´ì•„ë‘ëŠ”ê²Œ í•„ìš”)

    public void StartBurning()
    {
        if(!isBurning)
        {
            go_tempFlame = Instantiate(flame_prefab, transform.position, Quaternion.Euler(new Vector3(-90f, 0f, 0f)));
            go_tempFlame.transform.SetParent(transform);
        }
        isBurning = true;
        currentDurationTime = durationTime;
    }

    void Update()
    {
        if (isBurning)
        {
            ElapseTime();
        }
    }

    private void ElapseTime()
    {
        if (isBurning)
        {
            currentDurationTime -= Time.deltaTime;

            if (currentDurationTime <= 0)
                Off();

            if (currentDamageTime > 0)
                currentDamageTime -= Time.deltaTime;

            if (currentDamageTime <= 0)
                Damage();
        }
    }

    private void Damage()
    {
        currentDamageTime = damageTime;
        GetComponent<StatusController>().DecreaseHP(damage);
    }

    private void Off()
    {
        isBurning = false;
        Destroy(go_tempFlame);
    }
}

```

- *StartBurning()* ğŸ‘‰ í”Œë ˆì´ì–´ê²Œ ë¶™ì„ ë¶ˆ ìƒì„±
  - í”Œë ˆì´ì–´ê°€ ëª¨ë‹¥ë¶ˆê³¼ ì¶©ëŒí–ˆì„ ë•Œì¸ ğŸ“œFireì˜ *OnTriggerStay(Collider other)* ì—ì„œ í˜¸ì¶œ ì‹œí‚¬ ê²ƒì´ë¯€ë¡œ public
  - ì´ë¯¸ ë¶ˆì´ ë¶™ì–´ ìˆì„ ë•Œ ë˜ ë¶™ê²Œ í•˜ë©´ ì•ˆë˜ë¯€ë¡œ `!isBurning` ìƒíƒœì¼ ë•Œë§Œ í”„ë¦¬íŒ¹ì„ ìƒì„±í•˜ë„ë¡ í•œë‹¤.
    - ë¶ˆ ì…ìë“¤ì€ í•˜ëŠ˜ ìœ„ë¡œ ë‚ ì•„ê°€ì•¼ í•˜ë¯€ë¡œ íšŒì „ê°‘ì€ X : -90 ìœ¼ë¡œ ì¤€ë‹¤.
    - íƒœì–´ë‚  ìœ„ì¹˜ëŠ” í”Œë ˆì´ì–´ì¸ `transform.position`
  - í”Œë ˆì´ì–´ë¥¼ ë”°ë¼ë‹¤ë‹ ìˆ˜ ìˆë„ë¡ í”Œë ˆì´ì–´ë¥¼ ë¶ˆì˜ ë¶€ëª¨ë¡œ ì„¤ì •í•œë‹¤.
- ì´ë¯¸ ë¶ˆì´ ë¶™ì–´ ìˆì„ë•Œ ë˜ ë¶ˆ ë¶™ê²Œ í•˜ê±°ë‚˜ ì¶”ê°€ ë°ë¯¸ì§€ë¥¼ ê°€í•˜ë©´ ì•ˆë˜ë¯€ë¡œ `isBurning` í•„ìš”
- ë‚˜ë¨¸ì§€ëŠ” ğŸ“œFire.cs ì™€ ë¹„ìŠ·.

```c#
GetComponent<StatusController>().DecreaseHP(damage);
```

ì´ ì½”ë“œ ë•Œë¬¸ì— ğŸ“œStatusController.cs ë¥¼ ğŸ“œBurn.cs ê³¼ ê°™ê²Œ `Player`ì— ë¶™ëŠ” ê²ƒìœ¼ë¡œ ì˜®ê²¨ ì£¼ì—ˆë‹¤.

![image](https://user-images.githubusercontent.com/42318591/95708747-fda55d00-0c97-11eb-8bb8-97f5df301724.png)

- ì˜®ê²¨ ë¶™ì€ ë¶ˆì€ 0.5 ì´ˆ ë§ˆë‹¤ 2 ì˜ ë°ë¯¸ì§€ë¥¼ ì£¼ë©° 3 ì´ˆ ë’¤ì— ì‚¬ë¼ì§„ë‹¤.
- ğŸ“œStatusController.cs ë¥¼ `Player`ì— ì˜®ê¹€.

<br>

## ğŸ“œFire.cs

```c#
    private void OnTriggerStay(Collider other)
    {
        if(isFire && other.transform.tag == "Player")
        {
            if (currentDamageTime <= 0)
            {
                other.GetComponent<Burn>().StartBurning();
                thePlayerStatus.DecreaseHP(damage);
                currentDamageTime = damageTime;
            }
        }
    }
```

![image](https://user-images.githubusercontent.com/42318591/95713584-bcb24600-0ca1-11eb-8301-ea75d92491a3.png)

í”Œë ˆì´ì–´ì—ê²Œ ë¶ˆì´ ë¶™ì€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.


***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}