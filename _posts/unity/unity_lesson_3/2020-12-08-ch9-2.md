---
title:  "Chapter 9-2. ê±´ì¶• : ê·¸ë¦¬ë“œ ë° íšŒì „, ê±´ì¶• ì œí•œ" 

categories:
  -  Unity Lesson 3 
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-12-08
last_modified_at: 2020-12-08
---

ì¸í”„ëŸ°ì— ìˆëŠ” ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° 3D] ì‹¤ì „! ìƒì¡´ê²Œì„ ë§Œë“¤ê¸° - Advanced** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.inflearn.com/course/unity-2#)
{: .notice--warning}


# ê±´ì¶• ì‹œìŠ¤í…œ

## ğŸš€ ê·¸ë¦¬ë“œ ë° íšŒì „

### ğŸ“œCraftManual.cs

```c#
    private void PreviewPositionUpdate()
    {
        if (Physics.Raycast(tf_Player.position, tf_Player.forward, out hitInfo, range, layerMask))
        {
            if (hitInfo.transform != null)
            {
                Vector3 _location = hitInfo.point;

                if (Input.GetKeyDown(KeyCode.Q))
                    go_Preview.transform.Rotate(0f, -90f, 0f);
                else if (Input.GetKeyDown(KeyCode.E))
                    go_Preview.transform.Rotate(0f, +90f, 0f);

                _location.Set(Mathf.Round(_location.x), Mathf.Round(_location.y / 0.1f) * 0.1f, Mathf.Round(_location.z));
                go_Preview.transform.position = _location;
            }
        }
    }

    private void Build()
    {
        if(isPreviewActivated && go_Preview.GetComponent<PreviewObject>().isBuildable())
        {
            Instantiate(go_Prefab, go_Preview.transform.position, go_Preview.transform.rotation);
            Destroy(go_Preview);
            isActivated = false;
            isPreviewActivated = false;
            go_Preview = null;
            go_Prefab = null;
        }
    }
```


### âœˆ í”„ë¦¬ë·°ë¥¼ ì •ìˆ˜ ë‹¨ìœ„ë¡œ ë”±ë”± ë§ì¶° ê·¸ë¦¬ë“œ ë°©ì‹ìœ¼ë¡œ ì›€ì§ì´ê²Œ í•˜ê¸°

![image](https://camo.githubusercontent.com/df48a5826b469e6d9302ab9e67f79d657d38e4a2ee025cebbb51c49324da2e36/68747470733a2f2f706f737466696c65732e707374617469632e6e65742f4d6a41794d4445794d4468664d6a45772f4d4441784e6a41334e444d324d4459324d4451322e4b33597630757145675f5442343132666b466b41537751576a5643417439546353596d506b5a596e562d51672e6779546b546976524d73367a59695445676c35574d3765636b5039537863483238744b784976474a613449672e4749462e736f6879756e655f616e2f4749465f323032302d31322d30385f2545432539382541342545442539422538345f31302d35382d35382e6769663f747970653d77373733)

```c#
Vector3 _location = hitInfo.point;
_location.Set(Mathf.Round(_location.x), Mathf.Round(_location.y / 0.1f) * 0.1f, Mathf.Round(_location.z));
go_Preview.transform.position = _location;
```

- `_location`ì€ ë©”ì¸ì¹´ë©”ë¼ë¡œë¶€í„° ìœ Raycastê°€ ì¶©ëŒí•œ ê·¸ ì§€ì ì´ë‹¤. (í”„ë¦¬ë·°ê°€ í¬ë¡œìŠ¤í—¤ì–´ë¥¼ ë”°ë¼ë‹¤ë…€ì•¼ í•¨)
- `_location`ì˜ `x`, `z` ê°’ì„ ë°˜ì˜¬ë¦¼í•˜ì—¬ ê°€ê¹Œìš´ ì •ìˆ˜ë¡œ ë§Œë“ ë‹¤.
- `_location`ì˜ `y` ê°’ì€ ìˆ˜ì§ì´ë‹ˆê¹Œ ì •ìˆ˜ ë‹¨ìœ„ê°€ ì•„ë‹Œ ë¯¸ì„¸í•˜ê²Œ 0.1 ë‹¨ìœ„ë¡œë§Œ ì›€ì§ì´ë„ë¡, 0.1f ë¡œ ë‚˜ëˆˆ ê°’ì„ ë°˜ì˜¬ë¦¼ í•´ì£¼ê³  ì´ì— ë‹¤ì‹œ 0.1 ì„ ê³±í•´ì£¼ì—ˆë‹¤. 
- ìœ„ì™€ ê°™ì´ ë°˜ì˜¬ë¦¼ ì¡°ì •í•œ `_location`ë¥¼ í”„ë¦¬ë·°ì˜ ìœ„ì¹˜ë¡œ ì„¤ì •í•œë‹¤.

<br>

### âœˆ Q, E ëˆ„ë¥´ë©´ í”„ë¦¬ë·° íšŒì „í•˜ê²Œ í•˜ê³  ê·¸ íšŒì „í•œëŒ€ë¡œ ê±´ì¶•

![image](https://camo.githubusercontent.com/dd52b858908abbb210f00c22129dfbd6f55126593ff36dae8885ee4d6b876183/68747470733a2f2f706f737466696c65732e707374617469632e6e65742f4d6a41794d4445794d4468664d5451772f4d4441784e6a41334e444d324d4459314e5451322e51727558455239386f326a4632794d484f4530673146425135747146564e766f766b4966785f7a71397141672e47796a46454a436b754a37644f7a5a4371415955622d4b4c52676d51396f6a6c39533670326a4441667977672e4749462e736f6879756e655f616e2f322e6769663f747970653d77373733)


ì´ë ‡ê²Œ `Q`ì™€ `E`ë¥¼ ëˆ„ë¥´ë©´ ì‹œê³„ë°©í–¥, ë°˜ì‹œê³„ë°©í–¥ìœ¼ë¡œ í”„ë¦¬ë·°ë¥¼ íšŒì „ ì‹œí‚¬ ìˆ˜ ìˆê³  ì›í•˜ëŠ” ìƒíƒœë¡œ ê±´ì¶•í•  ìˆ˜ ìˆë‹¤.

```c#
    if (Input.GetKeyDown(KeyCode.Q))
        go_Preview.transform.Rotate(0f, -90f, 0f);
    else if (Input.GetKeyDown(KeyCode.E))
        go_Preview.transform.Rotate(0f, +90f, 0f);
```

`Q`ë¥¼ ëˆ„ë¥´ë©´ í”„ë¦¬ë·°ë¥¼ Yì¶• ì¤‘ì‹¬ìœ¼ë¡œ -90ë„ë¡œ íšŒì „ì‹œí‚¤ê¸°. `E`ë¥¼ ëˆ„ë¥´ë©´ í”„ë¦¬ë·°ë¥¼ Yì¶• ì¤‘ì‹¬ìœ¼ë¡œ 90ë„ë¡œ íšŒì „ì‹œí‚¤ê¸°.

```c#
    private void Build()
    {
        if(isPreviewActivated && go_Preview.GetComponent<PreviewObject>().isBuildable())
        {
            Instantiate(go_Prefab, go_Preview.transform.position, go_Preview.transform.rotation);
            Destroy(go_Preview);
            isActivated = false;
            isPreviewActivated = false;
            go_Preview = null;
            go_Prefab = null;
        }
    }
```

ì¢Œí´ ì…ë ¥ìœ¼ë¡œ Build()ê°€ í˜¸ì¶œë˜ì–´ ê±´ì¶•ë¬¼ì„ ì§€ì„ ë•Œ, ìœ„ì—ì„œ `Q`, `E` ëˆŒë €ì„ ë•Œ íšŒì „ì‹œì¼°ë˜ ìƒíƒœë¡œ, ê·¸ë¦¬ê³  ê·¸ë¦¬ë“œ ë‹¨ìœ„ë¡œ ì›€ì§ì˜€ë˜ ê·¸ëŒ€ë¡œ ê±´ì„¤í•  ìˆ˜ ìˆì–´ì•¼ í•˜ë¯€ë¡œ Instantiate(go_Prefab, `go_Preview.transform.position`, `go_Preview.transform.rotation`) ì¸ ìƒíƒœë¡œ í”„ë¦¬ë·°ë¥¼ ì‹¤ì œ ê±´ì¶•ë¬¼ë¡œ ìƒì„±í•˜ë„ë¡ í•œë‹¤.


<br>

## ğŸš€ ê±´ì¶• ì œí•œ

### âœˆ ê±´ì¶•ë¬¼ í”„ë¦¬íŒ¹ ìƒì„±

![image](https://user-images.githubusercontent.com/42318591/101513935-17290380-39c0-11eb-8727-f26a15d99ceb.png)

**Foundation** ì´ë¼ëŠ” ì´ë¦„ì˜ ê±´ì¶•ë¬¼ë¡œ, Terrainì²˜ëŸ¼ <u>ì´ ê±´ì¶•ë¬¼ ìœ„ì— ë‹¤ë¥¸ ê±´ì¶•ë¬¼ì„ ì§€ì„ ìˆ˜ ìˆë‹¤.</u>

- Box Collider ë¥¼ ë¶™ì—¬ì£¼ì—ˆë‹¤. 
  - í”Œë ˆì´ì–´ë‚˜ ë‹¤ë¥¸ ì˜¤ë¸Œì íŠ¸ë“¤ê³¼ ì¶©ëŒ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•´ì•¼ í•˜ë¯€ë¡œ.
  - ë˜ í”Œë ˆì´ì–´ë‚˜ ë™ë¬¼ë“¤ì´ ê´€í†µí•  ìˆ˜ ì—†ë„ë¡ `Is Trigger`ëŠ” ì²´í¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
  - Foundationì˜ ì „ì²´ì ì¸ ëª¨ìŠµì„ ê°ì‹¸ëŠ” ì½œë¼ì´ë”.
- Layer ë¥¼ Building ìœ¼ë¡œ ì„¤ì •í•œë‹¤.
  - ë§ˆì°¬ê°€ì§€ë¡œ ë©”ì¸ì¹´ë©”ë¼ì˜ ì¿¨ë§ë§ˆìŠ¤í¬ì— ì¶”ê°€í•´ì£¼ì–´ì•¼ ë Œë”ë§ ëœë‹¤.
- ë¹ˆ ì˜¤ë¸Œì íŠ¸ì¸ ìì‹ ì˜¤ë¸Œì íŠ¸ `Collider`
  - Box Collider ë¥¼ ë¶™ì—¬ì£¼ì—ˆë‹¤. 
    - **Foundation ì¤‘ì•™ì— ì‘ì€ ì •ì‚¬ê°í˜• ì½œë¼ì´ë”ë¡œ ì˜¤ë¡œì§€ ë”± ì´ ë¶€ë¶„ì—ë§Œ ê±´ì¶•ë¬¼ì„ ì§€ì„ ìˆ˜ ìˆë„ë¡ í•  ê²ƒì´ë‹¤.**
    - `Is Trigger`ë¥¼ ì²´í¬í•´ì£¼ì–´ì•¼ ê±´ì¶• ì—¬ë¶€ë¥¼ íŒë³„í•  ë•Œ ğŸ“œPreviewObject.csì—ì„œ OnTriggerExit, OnTriggerEnter ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
  - "Structure" ë¼ëŠ” íƒœê·¸ë¥¼ ë¶™ì—¬ì¤€ë‹¤.
    - í° Box Collider ë§ê³  ìì‹ ì˜¤ë¸Œì íŠ¸ì— ë¶™ì¸ ì´ ë¶€ë¶„ì ì¸ Box Collider ë¥¼ ê°€ì§„ ë¹ˆ ì˜¤ë¸Œì íŠ¸ì¸ ìì‹ ì˜¤ë¸Œì íŠ¸ `Collider`ì—ê²Œë§Œ ë¶™ì–´ì•¼ í•œë‹¤.
    - ì´ íƒœê·¸ë¥¼ ê°€ì§„ ì˜¤ë¸Œì íŠ¸ì™€ Trigger ì¶©ëŒì„ í–ˆì„ ê²½ìš° ì´ ìœ„ì—ë‹¤ê°€ ê±´ì¶•í•  ìˆ˜ ìˆê²Œ í•  ê²ƒì´ë‹¤. 
  - ğŸ“œBuilding.cs ë¥¼ ë¶™ì—¬ì¤€ë‹¤. (ë°‘ì— í›„ìˆ )
   

![image](https://user-images.githubusercontent.com/42318591/101514074-3b84e000-39c0-11eb-92dd-5915178b4f7f.png)

**Phillar** ë¼ëŠ” ì´ë¦„ì˜ ê±´ì¶•ë¬¼ë¡œ, <u>ì´ ê±´ì¶•ë¬¼ì€ ì˜¤ë¡œì§€ Foundation ìœ„ì—ì„œë§Œ ì§€ì„ ìˆ˜ ìˆë‹¤</u>ëŠ” ì„¤ì •ì„ ë¶™ì˜€ë‹¤.

- Box Collider ë¥¼ ë¶™ì—¬ì£¼ì—ˆë‹¤. 
  - í”Œë ˆì´ì–´ë‚˜ ë‹¤ë¥¸ ì˜¤ë¸Œì íŠ¸ë“¤ê³¼ ì¶©ëŒ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•´ì•¼ í•˜ë¯€ë¡œ.
  - ë˜ í”Œë ˆì´ì–´ë‚˜ ë™ë¬¼ë“¤ì´ ê´€í†µí•  ìˆ˜ ì—†ë„ë¡ `Is Trigger`ëŠ” ì²´í¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
  - Phillar ì „ì²´ì ì¸ ëª¨ìŠµì„ ê°ì‹¸ëŠ” ì½œë¼ì´ë”.
- Layer ë¥¼ Building ìœ¼ë¡œ ì„¤ì •í•œë‹¤.
  - ë§ˆì°¬ê°€ì§€ë¡œ ë©”ì¸ì¹´ë©”ë¼ì˜ ì¿¨ë§ë§ˆìŠ¤í¬ì— ì¶”ê°€í•´ì£¼ì–´ì•¼ ë Œë”ë§ ëœë‹¤.
- ë¹ˆ ì˜¤ë¸Œì íŠ¸ì¸ ìì‹ ì˜¤ë¸Œì íŠ¸ `Collider`
  - Box Collider ë¥¼ ë¶™ì—¬ì£¼ì—ˆë‹¤. 
    - **Phillar ìƒë‹¨ì— ìˆëŠ” ì‘ì€ ì •ì‚¬ê°í˜• ì½œë¼ì´ë”ë¡œ ë”± ì´ ë¶€ë¶„ì—ë§Œ ê±´ì¶•ë¬¼ì„ ì§€ì„ ìˆ˜ ìˆë„ë¡ í•  ê²ƒì´ë‹¤.**
      - Pillar ìœ„ì—ë„ ê±´ì¶•ë¬¼ ì§“ê¸° ê°€ëŠ¥
    - `Is Trigger`ë¥¼ ì²´í¬í•´ì£¼ì–´ì•¼ ê±´ì¶• ì—¬ë¶€ë¥¼ íŒë³„í•  ë•Œ ğŸ“œPreviewObject.csì—ì„œ OnTriggerExit, OnTriggerEnter ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
  - "Structure" ë¼ëŠ” íƒœê·¸ë¥¼ ë¶™ì—¬ì¤€ë‹¤.
    - í° Box Collider ë§ê³  ìì‹ ì˜¤ë¸Œì íŠ¸ì— ë¶™ì¸ ì´ ë¶€ë¶„ì ì¸ Box Collider ë¥¼ ê°€ì§„ ë¹ˆ ì˜¤ë¸Œì íŠ¸ì¸ ìì‹ ì˜¤ë¸Œì íŠ¸ `Collider`ì—ê²Œë§Œ ë¶™ì–´ì•¼ í•œë‹¤.
    - ì´ íƒœê·¸ë¥¼ ê°€ì§„ ì˜¤ë¸Œì íŠ¸ì™€ Trigger ì¶©ëŒì„ í–ˆì„ ê²½ìš° ì´ ìœ„ì—ë‹¤ê°€ ê±´ì¶•í•  ìˆ˜ ìˆê²Œ í•  ê²ƒì´ë‹¤. 
  - ğŸ“œBuilding.cs ë¥¼ ë¶™ì—¬ì¤€ë‹¤. (ë°‘ì— í›„ìˆ )

![image](https://user-images.githubusercontent.com/42318591/101518042-bf40cb80-39c4-11eb-9466-0c81237c109e.png)

ìš”ëŸ°ì‹ìœ¼ë¡œ ê±´ì¶•í•  ìˆ˜ ìˆë‹¤. Foundation ì˜ ê°€ìš´ë°ì— ìˆëŠ” ë¶€ë¶„ ì½œë¼ì´ë” ìœ„ì—ë§Œ Pillar ë¥¼ ì§€ì„ ìˆ˜ ìˆê³  Pillar ì˜ ê¼­ëŒ€ê¸°ì— ìˆëŠ” ë¶€ë¶„ì—ë§Œ ë˜ Foundation ê°™ì€ ê±´ì¶•ë¬¼ì„ ì§€ì„ ìˆ˜ ìˆë‹¤. ì´ëŸ° ë¶€ë¶„ ì½œë¼ì´ë”ë“¤ì—ë§Œ "Structure" íƒœê·¸ë¥¼ ë¶™ì˜€ê³  ì´ì— ëŒ€í•´ì„œë§Œ ê±´ì¶• ê°€ëŠ¥í•˜ë„ë¡ ë°‘ì—ì„œ ì½”ë”©í•  ì˜ˆì •.

![image](https://user-images.githubusercontent.com/42318591/101515448-b39fd580-39c1-11eb-8448-79b6b28611a6.png)

íƒ­ê³¼ ìŠ¬ë¡¯ë„ ì´ëŸ°ì‹ìœ¼ë¡œ ë§Œë“¤ ê²ƒì´ë‹¤. (ìì„¸í•œê±´ ë‹¤ìŒ í¬ìŠ¤íŠ¸ì—ì„œ)



<br>

### âœˆ ê±´ì¶•ë¬¼ í”„ë¦¬ë·° í”„ë¦¬íŒ¹ ìƒì„±

![image](https://user-images.githubusercontent.com/42318591/101515834-2446f200-39c2-11eb-96d8-c5aacd2c314b.png)


- Foundation í”„ë¦¬ë·° (ë¹ˆì˜¤ë¸Œì íŠ¸) 
  - Box Collider
    - í”„ë¦¬ë·°ëŠ” ê´€í†µì´ ê°€ëŠ¥í•˜ë„ë¡(ê´€í†µ ë˜ë©´ ê±´ì¶•í•  ìˆ˜ ì—†ë„ë¡ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ë³€í•´ì•¼ë¨) `Is Trigger`ë¥¼ ì²´í¬
  - ğŸ“œPreviewObject.cs ë¶™ì´ê³  í• ë‹¹
  - Rigidbody 
    - OnTriggerEnter, Exit ì´ ì¼ì–´ë‚˜ëŠ” ì¡°ê±´ìœ¼ë¡œ ì¶©ëŒ ëŒ€ìƒ ë‘˜ ì¤‘ í•˜ë‚˜ëŠ” Rigidbodyë¥¼ ê°€ì§€ê³  ìˆì–´ì•¼ í•¨
  - Foundation ë©”ì‹œ (ìì‹) ğŸ‘‰ ê¸°ë³¸ ìƒíƒœë¡œ ì´ˆë¡ìƒ‰ ë¨¸í…Œë¦¬ì–¼ ë¶€ì—¬
- Pillar í”„ë¦¬ë·°ë„ ë§ˆì°¬ê°–ì§€.

![image](https://user-images.githubusercontent.com/42318591/101515584-d8944880-39c1-11eb-83f1-0bcdab9d3f49.png)

- Foundation ê³¼ Phillar ê±´ì¶•ì„ ìœ„í•´ ì›ì†Œë¥¼ ì¶”ê°€í•œë‹¤. ê°ê° í”„ë¦¬íŒ¹ë“¤ì„ í• ë‹¹í•´ì¤€ë‹¤.
- `Terrain`, `Building` ë ˆì´ì–´ë¥¼ ê°€ì§„ ì˜¤ë¸Œì íŠ¸ ìœ„ì—ë§Œ ê±´ì¶• ê°€ëŠ¥í•˜ë„ë¡ í•  ê²ƒì´ë¯€ë¡œ layerMask ì—ì„œ `Building`ì„ ì¶”ê°€ë¡œ ì„ íƒí–ˆë‹¤.

<br>

### ğŸ“œBuilding.cs

```c#
public class Building : MonoBehaviour
{
    public Type type;

    public enum Type  // ê±´ì¶•ë¬¼ íƒ€ì… ì§€ì •
    {
        Normal, // ê±´ì¶•ë¬¼ì´ ì•„ë‹Œ ê²ƒë“¤
        Wall,   // ë²½
        Foundation, // í† ëŒ€
        Pillar  // ê¸°ë‘¥
    }
}
```

> Terrainì„ ì œì™¸í•˜ê³ , ê·¸ ìœ„ì— ê±´ì¶•ì´ ê°€ëŠ¥í•œ Foundationì˜ ìì‹ ì˜¤ë¸Œì íŠ¸ `Collider`ì™€, Pillarì˜ ìì‹ ì˜¤ë¸Œì íŠ¸ `Collider`ì— ë¶™ì¸ë‹¤.

ê±´ì¶• íƒ€ì…ì„ ì •ì˜í•˜ê¸° ìœ„í•´ enum `Type`ì„ ì •ì˜í•œë‹¤.

- Foundationì˜ ìì‹ ì˜¤ë¸Œì íŠ¸ `Collider`ëŠ” ì—ë””í„°ì˜ ğŸ“œBuilding ì—ì„œ `type`ì„ "Foundation"ìœ¼ë¡œ í• ë‹¹í•œë‹¤.
- Foundationì˜ ìì‹ ì˜¤ë¸Œì íŠ¸ `Collider`ëŠ” ì—ë””í„°ì˜ ğŸ“œBuilding ì—ì„œ `type`ì„ "Pillar"ìœ¼ë¡œ í• ë‹¹í•œë‹¤.

<br>

### ğŸ“œPreviewObject.cs

```c#
    public Building.Type needType;
    private bool needTypeFlag;
```

- `needType`ì€ ì´ ìŠ¤í¬ë¦½íŠ¸ê°€ ë¶™ì€ í”„ë¦¬ë·° ì˜¤ë¸Œì íŠ¸ê°€ ê±´ì¶•ë  ìˆ˜ ìˆëŠ” ê³³ì˜ íƒ€ì….
- `needTypeFlag`ëŠ” OnTriggerEnter, OnTriggerExit ì—ì„œ ë‚´ê°€ ê±´ì¶•ë  ìˆ˜ ìˆëŠ” ê·¸ ê³³ì— ê±´ì¶•ì´ ê°€ëŠ¥í•œ ìƒíƒœë©´ True ë¡œ ë°”ê¿”ì¤„ ê²ƒì´ë‹¤.

![image](https://user-images.githubusercontent.com/42318591/101561792-4fa0ff80-3a09-11eb-95d3-592bc7d944f7.png)

Foundation í”„ë¦¬ë·°ì˜ `needType`ì€ `Normal`ë¡œ í• ë‹¹ í•œë‹¤. Foundation ì€ ì–´ë””ì—ë“  ì§€ì–´ì§ˆ ìˆ˜ ìˆë‹¤. 

![image](https://user-images.githubusercontent.com/42318591/101561824-5e87b200-3a09-11eb-932b-cb78a5c4e80d.png)

Pillar í”„ë¦¬ë·°ì˜ `needType`ì€ `Foundation`ë¡œ í• ë‹¹í•œë‹¤. <u>Pillar ëŠ” ì˜¤ë¡œì§€ Foundation ìœ„ì—ì„œë§Œ ì§€ì–´ì§ˆ ìˆ˜ ìˆë„ë¡ í•  ê²ƒì´ë‹¤.</u>


```c#
    private void ChangeColor()
    {
        if (needType == Building.Type.Normal)
        {
            if (colliderList.Count > 0)
                SetColor(red);
            else
                SetColor(green);
        }
        else
        {
            if (colliderList.Count > 0 || !needTypeFlag)
                SetColor(red);
            else
                SetColor(green);
        }
    }

    private void OnTriggerEnter(Collider other)
    {
        if (other.transform.tag == "Structure")
        {
            if (other.GetComponent<Building>().type == needType)
                needTypeFlag = true;
            else
                colliderList.Add(other);
        }
        else
        {
            if (other.gameObject.layer != layerGround && other.gameObject.layer != IGNORE_RAYCAST_LAYER)
                colliderList.Add(other);
        }
    }

    private void OnTriggerExit(Collider other)
    {
        if (other.transform.tag == "Structure")
        {
            if (other.GetComponent<Building>().type == needType)
                needTypeFlag = false;
            else
                colliderList.Remove(other);
        }
        else
        {
            if (other.gameObject.layer != layerGround && other.gameObject.layer != IGNORE_RAYCAST_LAYER)
                colliderList.Remove(other);
        }
    }

    public bool isBuildable()
    {
        if (needType == Building.Type.Normal)
            return colliderList.Count == 0;
        else
            return colliderList.Count == 0 && needTypeFlag;
    }
```

- *ChangeColor*
  - ë‚´ê°€ ê±´ì¶• ê°€ëŠ¥í•œ ê³³ì´ `Normal`ì´ ì•„ë‹ˆë¼ë©´ ë‚˜ëŠ” íŠ¹ì • ê±´ì¶•ë¬¼ ìœ„ì—ì„œë§Œ ì§€ì–´ì§ˆ ìˆ˜ ìˆëŠ” ê±´ì¶•ë¬¼ì´ë‹¤. Pillar ì²˜ëŸ¼.
    - ì´ ê²½ìš°ì—ëŠ” `needTypeFlag` ê°’ ë˜í•œ ì²´í¬ë¥¼ í•´ì£¼ì–´ì•¼í•œë‹¤. ë‚´ê°€ ê±´ì¶•ë  ìˆ˜ ìˆëŠ” ê·¸ ê³³ì— ì§€ê¸ˆ ê±´ì¶•ì´ ê°€ëŠ¥í•œ ìƒíƒœì¸ì§€.
- *OnTriggerEnter*
  - Trigger ì¶©ëŒí•œ ëŒ€ìƒì´ "Structure" íƒœê·¸ê°€ ë¶™ì€ ê²ƒì´ë¼ë©´, ì¦‰ ê±´ì¶•ë¬¼ì´ë¼ë©´
  - ë‚´ê°€ ì§€ì–´ì§ˆ ìˆ˜ ìˆëŠ” ê·¸ `needType`ê³¼ ì¼ì¹˜í•˜ëŠ” ê±´ì¶•ë¬¼ì¸ì§€ë¥¼ ê²€ì‚¬í•´ì•¼ í•œë‹¤.  
    - ì¼ì¹˜í•œë‹¤ë©´ ê±´ì¶•ë¬¼ì´ ì§€ì–´ì§ˆ ìˆ˜ ìˆë„ë¡ `needTypeFlag`ë¥¼ True ë¡œ ë³€ê²½
    - ì¼ì¹˜í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ë‚´ê°€ ìœ„ì— ì§€ì–´ì§ˆ ìˆ˜ ì—†ëŠ” ê±´ì¶•ë¬¼ì´ë¯€ë¡œ ì½œë¼ì´ë” ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€
- *OnTriggerExit*
  - OnTriggerEnter ì™€ ë°˜ëŒ€ë¡œ í•´ì£¼ë©´ ë¨
- *isBuildable*
  - ë‚´ê°€ ì§€ì–´ì§ˆ ìˆ˜ ìˆëŠ” ê³³ì´ íŠ¹ì • ê±´ì¶•ë¬¼ì´ë¼ë©´, ì¦‰ `Normal`ì´ ì•„ë‹Œ ê±´ì¶•ë¬¼ì´ë¼ë©´
    - ì‹¤ì œ ê±´ì¶•ë¬¼ì„ ì§€ì„ ë•Œ `needTypeFlag`ê°€ Trueì¸ì§€ë„ í•¨ê»˜ ì²´í¬í•´ì£¼ì–´ì•¼ í•œë‹¤.


***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}