---
title:  "Chapter 2-8. ë¬´ê¸° : ê·¼ì ‘ ë¬´ê¸°" 

categories:
  -  Unity Lesson 3 
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-09-28
last_modified_at: 2020-09-28
---

ì¸í”„ëŸ°ì— ìˆëŠ” ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° 3D] ì‹¤ì „! ìƒì¡´ê²Œì„ ë§Œë“¤ê¸° - Advanced** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.inflearn.com/course/unity-2#)
{: .notice--warning}

<br>

# Chapter 2. ë¬´ê¸°
# ê·¼ì ‘ ë¬´ê¸° êµ¬í˜„

## ğŸš– ê·¼ì ‘ ë¬´ê¸° í´ë˜ìŠ¤ ê³„ì¸µ êµ¬ì¡° 

> ìƒ ì† ! ! !

- *ğŸ“œCloseWeapon.cs*
  - ì—¬ëŸ¬ ì¢…ë¥˜ì˜ ê·¼ì ‘ ë¬´ê¸°(ë§¨ì†, ë„ë¼, ê³¡ê´­ì´) ì˜¤ë¸Œì íŠ¸ë“¤ì—ê²Œ ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¶™ì—¬ì„œ **CloseWeapon** íƒ€ì…ì´ë¼ëŠ” ê³µí†µì ì„ ë§Œë“¤ì–´ ì¤€ë‹¤.
    - ğŸ“œHand.cs ì—ì„œ ì´ë¦„ì„ ë°”ê¿”ì¤€ ìŠ¤í¬ë¦½íŠ¸ë‹¤. 
- *ğŸ“œCloseWeaponController.cs* ğŸ‘‰ **ì¶”ìƒí´ë˜ìŠ¤**ì´ë©° ê°ê°ì˜ <u>ê·¼ì ‘ ë¬´ê¸° ì»¨íŠ¸ë¡¤ëŸ¬ë“¤ì˜ ê³µí†µì ì¸ ê¸°ëŠ¥ ë¬¶ìŒ</u>
  - ëª¨ë“  ê·¼ì ‘ ë¬´ê¸°ë“¤ì´ ê³µí†µì ìœ¼ë¡œ ê°€ì§€ëŠ”
    - ì†ì„±
      - `currentCloseWeapon` í˜„ì¬ ì¥ì°©ëœ ê·¼ì  ë¬´ê¸°
      - `isAttack` í˜„ì¬ ê³µê²© ì¤‘ì¸ì§€
      - `isSwing` íŒ”ì„ íœ˜ë‘ë¥´ëŠ” ì¤‘ì¸ì§€
      - `hitInfo` í˜„ì¬ ê·¼ì ‘ ë¬´ê¸°ì— ë‹¿ì€ ê²ƒë“¤ì˜ ì •ë³´
    - ê¸°ëŠ¥ (ì°¨ë³„í™” ì—†ì´ ìœ„ ê¸°ëŠ¥ì„ ê·¸ëŒ€ë¡œ ê°€ì§)
      - `TryAttack()` ê³µê²© ì‹œë„ (ë§ˆìš°ìŠ¤ ì¢Œí´ && ê³µê²© ì¤‘ì´ ì•„ë‹ ë•Œ)
      - `AttackCoroutine()` ì‹¤ì œ ê³µê²©
      - `CheckObject()` ì¶©ëŒ ëœ ì˜¤ë¸Œì íŠ¸ê°€ ìˆì—ˆëŠ”ì§€ ê²€ì‚¬ (ê³µê²©ì´ ë“¤ì–´ê°”ëŠ”ì§€)
  - ìì‹ í´ë˜ìŠ¤
    - *ğŸ“œAxeController.cs* ğŸ‘‰ ë„ë¼ ì»¨íŠ¸ë¡¤ëŸ¬
      - **ë„ë¼**ë§Œì´ ì°¨ë³„í™”í•˜ì—¬ ê°€ì§€ëŠ”
        - ì†ì„±
          - `isActivate` ë„ë¼ê°€ í˜„ì¬ í™œì„±í™” ë˜ì–´ ìˆëŠ”ì§€. static.
        - ê¸°ëŠ¥ (ë„ë¼ì— ë§ê²Œ ì°¨ë³„í™”. <u>ì˜¤ë²„ë¼ì´ë”©</u>)
          - `HitCoroutine()` ë„ë¼ì˜ ê³µê²© ì²˜ë¦¬
            - *ì¶”ìƒ í•¨ìˆ˜*ì´ê¸° ë•Œë¬¸ì— ì™„ì „íˆ ì°¨ë³„í™” í•˜ì—¬ êµ¬í˜„
          - `CloseWeaponChange` ë„ë¼ë¡œ ë¬´ê¸° êµì²´
            - *ê°€ìƒ í•¨ìˆ˜*ì´ê¸° ë•Œë¬¸ì— ê³µí†µì ìœ¼ë¡œ ê·¼ì ‘ë¬´ê¸° êµì²´ë¥¼ ë™ì‘í•˜ë˜ ë„ë¼ë§Œì˜ ì†ì„±ì¸ `isActivate`ì„ True í•´ì£¼ëŠ” ê²ƒìœ¼ë¡œ ê¸°ëŠ¥ ì¶”ê°€ í¸ì§‘.
    - *ğŸ“œHandController.cs* ğŸ‘‰ ë§¨ ì† ì»¨íŠ¸ë¡¤ëŸ¬
        - **ë§¨ ì†**ë§Œì´ ì°¨ë³„í™”í•˜ì—¬ ê°€ì§€ëŠ”
        - ì†ì„±
          - `isActivate` ë§¨ì†ì´ í˜„ì¬ í™œì„±í™” ë˜ì–´ ìˆëŠ”ì§€. static.
        - ê¸°ëŠ¥ (ë§¨ì†ì— ë§ê²Œ ì°¨ë³„í™”. <u>ì˜¤ë²„ë¼ì´ë”©</u>)
          - `HitCoroutine()` ë§¨ì†ì˜ ê³µê²© ì²˜ë¦¬
            - *ì¶”ìƒ í•¨ìˆ˜*ì´ê¸° ë•Œë¬¸ì— ì™„ì „íˆ ì°¨ë³„í™” í•˜ì—¬ êµ¬í˜„
          - `CloseWeaponChange` ë§¨ì†ìœ¼ë¡œ ë¬´ê¸° êµì²´
            - *ê°€ìƒ í•¨ìˆ˜*ì´ê¸° ë•Œë¬¸ì— ê³µí†µì ìœ¼ë¡œ ê·¼ì ‘ë¬´ê¸° êµì²´ë¥¼ ë™ì‘í•˜ë˜ ë§¨ì†ë§Œì˜ ì†ì„±ì¸ `isActivate`ì„ True í•´ì£¼ëŠ” ê²ƒìœ¼ë¡œ ê¸°ëŠ¥ ì¶”ê°€ í¸ì§‘.


<br>

### ğŸ“œ CloseWeapon.cs

> ê·¼ì ‘ ë¬´ê¸° ì˜¤ë¸Œì ë“¤(ë§¨ì†, ë„ë¼, ê³¡ê´­ì´)ì´ ê³µí†µì ìœ¼ë¡œ ê°€ì§€ê³  ìˆëŠ” ìŠ¤í¬ë¦½íŠ¸. `Hand`, `Axe` ì˜¤ë¸Œì íŠ¸ì— ë¶™ì¸ë‹¤.

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class CloseWeapon : MonoBehaviour
{
    public string closeWeaponName;  // ê·¼ì ‘ ë¬´ê¸° ì´ë¦„

    // ê·¼ì ‘ ë¬´ê¸° ìœ í˜•
    public bool isHand;
    public bool isAxe;
    public bool isPickaxe;

    public float range; // ê³µê²© ë²”ìœ„. íŒ”ì„ ë»—ìœ¼ë©´ ì–´ë””ê¹Œì§€ ê³µê²©ì´ ë‹¿ì„ì§€
    public int damage; // ê³µê²©ë ¥
    public float workSpeed; // ì‘ì—… ì†ë„
    public float attackDelay;  // ê³µê²© ë”œë ˆì´. ë§ˆìš°ìŠ¤ í´ë¦­í•˜ëŠ” ìˆœê°„ ë§ˆë‹¤ ê³µê²©í•  ìˆœ ì—†ìœ¼ë¯€ë¡œ.
    public float attackDelayA;  // ê³µê²© í™œì„±í™” ì‹œì . ê³µê²© ì• ë‹ˆë©”ì´ì…˜ ì¤‘ì—ì„œ ì£¼ë¨¹ì´ ë‹¤ ë»—ì–´ì¡Œì„ ë•Œ ë¶€í„° ê³µê²© ë°ë¯¸ì§€ê°€ ë“¤ì–´ê°€ì•¼ í•œë‹¤.
    public float attackDelayB;  // ê³µê²© ë¹„í™œì„±í™” ì‹œì . ì´ì œ ë‹¤ ë•Œë¦¬ê³  ì£¼ë¨¹ì„ ë¹¼ëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ ì‹œì‘ë˜ë©´ ê³µê²© ë°ë¯¸ì§€ê°€ ë“¤ì–´ê°€ë©´ ì•ˆëœë‹¤.

    public Animator anim;  // ì• ë‹ˆë©”ì´í„° ì»´í¬ë„ŒíŠ¸
}
```

- `isHand`, `isAxe`, `isPickaxe` ì‹¤ì œ ê·¼ì ‘ ë¬´ê¸°ë“¤ì„ êµ¬ë¶„í•  ìˆ˜ ìˆëŠ” ë³€ìˆ˜ë¥¼ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.
  - ì´ëŸ¬ë©´ ë”°ë¡œ ğŸ“œHand.cs, ğŸ“œAxe.cs, ğŸ“œPickaxe.cs ì´ë ‡ê²Œ ë”°ë¡œ ë§Œë“¤ í•„ìš”ê°€ ì—†ë‹¤.

<br>

### ğŸ“œ CloseWeaponController.cs

> ê·¼ì ‘ ë¬´ê¸° ì»¨íŠ¸ë¡¤ëŸ¬ë“¤ì˜ ê³µí†µì ì¸ ê¸°ëŠ¥

> <u>ì¶”ìƒ í•¨ìˆ˜ë¥¼ ê°€ì§€ê³  ìˆëŠ” ì¶”ìƒ í´ë˜ìŠ¤ì´ë¯€ë¡œ ì˜¤ë¸Œì íŠ¸ì— ë¶™ì§€ ëª»í•œë‹¤.</u>

- ì¶”ìƒ í•¨ìˆ˜ëŠ” ë¯¸ì™„ì„±ë˜ì–´ ìì‹ í´ë˜ìŠ¤ì—ì„œ ì™„ì„±í•´ì•¼í•˜ëŠ” í•¨ìˆ˜ì´ê¸° ë•Œë¬¸ì— ì¶”ìƒí´ë˜ìŠ¤ ìì²´ ë˜í•œ ë¯¸ì™„ì„±ëœ í´ë˜ìŠ¤ë¡œ ë³¸ë‹¤. ê°ì²´ ëª»ë§Œë“œëŠ” ê²ƒì²˜ëŸ¼ ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ê°€ì§„ ìŠ¤í¬ë¦½íŠ¸ëŠ” ìœ ë‹ˆí‹° ê²Œì„ ì˜¤ë¸Œì íŠ¸ì— ë¶™ì¼ ìˆ˜ ì—†ë‹¤.
- **ì˜¤ë¸Œì íŠ¸ì— ë¶™ì–´ì„œ ìŠ¤í¬ë¦½íŠ¸ê°€ ë™ì‘í•˜ì§€ ëª»í•˜ë¯€ë¡œ Update() ê°™ì€ ì´ë²¤íŠ¸ í•¨ìˆ˜ë„ ë™ì‘í•˜ì§€ ëª»í•˜ë¯€ë¡œ ì œê±°**

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public abstract class CloseWeaponController : MonoBehaviour
{
    [SerializeField]
    protected CloseWeapon currentCloseWeapon; // í˜„ì¬ ì¥ì°©ëœ ê·¼ì ‘ ë¬´ê¸° 

    protected bool isAttack = false;  // í˜„ì¬ ê³µê²© ì¤‘ì¸ì§€ 
    protected bool isSwing = false;  // íŒ”ì„ íœ˜ë‘ë¥´ëŠ” ì¤‘ì¸ì§€. isSwing = True ì¼ ë•Œë§Œ ë°ë¯¸ì§€ë¥¼ ì ìš©í•  ê²ƒì´ë‹¤.

    protected RaycastHit hitInfo;  // í˜„ì¬ ë¬´ê¸°(Hand)ì— ë‹¿ì€ ê²ƒë“¤ì˜ ì •ë³´.

    protected void TryAttack()
    {
        if (Input.GetButton("Fire1"))
        {
            if (!isAttack)
            {
                StartCoroutine(AttackCoroutine());
            }
        }
    }

    protected IEnumerator AttackCoroutine()
    {
        isAttack = true;
        currentCloseWeapon.anim.SetTrigger("Attack");

        yield return new WaitForSeconds(currentCloseWeapon.attackDelayA);
        isSwing = true;

        StartCoroutine(HitCoroutine());

        yield return new WaitForSeconds(currentCloseWeapon.attackDelayB);
        isSwing = false;

        yield return new WaitForSeconds(currentCloseWeapon.attackDelay - currentCloseWeapon.attackDelayA - currentCloseWeapon.attackDelayB);
        isAttack = false;
    }

    protected bool CheckObject()
    {
        if (Physics.Raycast(transform.position, transform.forward, out hitInfo, currentCloseWeapon.range))
        {
            return true;
        }

        return false;
    }

    protected abstract IEnumerator HitCoroutine();

    public virtual void CloseWeaponChange(CloseWeapon _closeWeapon)
    {
        if (WeaponManager.currentWeapon != null)
            WeaponManager.currentWeapon.gameObject.SetActive(false);

        currentCloseWeapon = _closeWeapon;
        WeaponManager.currentWeapon = currentCloseWeapon.GetComponent<Transform>();
        WeaponManager.currentWeaponAnim = currentCloseWeapon.anim;

        currentCloseWeapon.transform.localPosition = Vector3.zero;
        currentCloseWeapon.gameObject.SetActive(true);
    }
}

```

- ëª¨ë“  ì¢…ë¥˜ì˜ ê·¼ì ‘ ë¬´ê¸°ë“¤ì´ ìˆ˜ì • ì—†ì´ ê·¸ëŒ€ë¡œ ìƒì† ë°›ëŠ” ê³µí†µì ì¸ ì†ì„± & ê¸°ëŠ¥ë“¤. ì¦‰, ëª¨ë“  ì¢…ë¥˜ì˜ ê·¼ì ‘ ë¬´ê¸°ë“¤ì´ ê°€ì§€ëŠ” ê³µí†µì ì¸ ì†ì„±ê³¼ ê¸°ëŠ¥.
  - ëª¨ë“  ì¢…ë¥˜ì˜ ê·¼ì ‘ ë¬´ê¸° ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ë“¤ì´ ì´ í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ì„ ê²ƒì´ë¯€ë¡œ ë³´í˜¸ ìˆ˜ì¤€ì„ `protected`ë¡œ ì˜¬ë ¸ë‹¤.
  - ì†ì„±
    - `currentCloseWeapon` í˜„ì¬ ì¥ì°©ëœ ê·¼ì  ë¬´ê¸°
    - `isAttack` í˜„ì¬ ê³µê²© ì¤‘ì¸ì§€
    - `isSwing` íŒ”ì„ íœ˜ë‘ë¥´ëŠ” ì¤‘ì¸ì§€
    - `hitInfo` í˜„ì¬ ê·¼ì ‘ ë¬´ê¸°ì— ë‹¿ì€ ê²ƒë“¤ì˜ ì •ë³´
  - ê¸°ëŠ¥ 
    - `TryAttack()` ê³µê²© ì‹œë„ (ë§ˆìš°ìŠ¤ ì¢Œí´ && ê³µê²© ì¤‘ì´ ì•„ë‹ ë•Œ)
    - `AttackCoroutine()` ì‹¤ì œ ê³µê²©
    - `CheckObject()` ì¶©ëŒ ëœ ì˜¤ë¸Œì íŠ¸ê°€ ìˆì—ˆëŠ”ì§€ ê²€ì‚¬ (ê³µê²©ì´ ë“¤ì–´ê°”ëŠ”ì§€)
- ğŸ“œ CloseWeaponController.cs ë¥¼ ìƒì† ë°›ëŠ” ìì‹ í´ë˜ìŠ¤ ë§ˆë‹¤, ì¦‰ ê°ê°ì˜ ê·¼ì ‘ ë¬´ê¸°ë§ˆë‹¤ ì°¨ë³„í™” ë˜ì•¼í•  ê¸°ëŠ¥
  - `HitCoroutine()` ğŸ‘‰ ì¶”ìƒ í•¨ìˆ˜
    - **ì¶”ìƒ í•¨ìˆ˜**ì´ë¯€ë¡œ ê°ê°ì˜ ê·¼ì ‘ ë¬´ê¸°ë§ˆë‹¤ ì™„ì „íˆ ë‹¤ë¥´ê²Œ êµ¬í˜„í•´ì•¼ í•œë‹¤.
      - í”¼ê²©í•œ ëŒ€ìƒì— ëŒ€í•œ ë°ë¯¸ì§€ ì²˜ë¦¬ëŠ” ê·¼ì ‘ ë¬´ê¸°ë§ˆë‹¤ ë‹¤ë¥´ê¸° ë•Œë¬¸ì´ë‹¤.
  - `CloseWeaponChange` ğŸ‘‰ ê°€ìƒ í•¨ìˆ˜
    - **ê°€ìƒ í•¨ìˆ˜**ì´ë¯€ë¡œ ê°ê°ì˜ ê·¼ì ‘ ë¬´ê¸°ë§ˆë‹¤ ì¬ì •ì˜ í•´ë„ ë˜ê³  ì•ˆí•´ë„ ë˜ëŠ”ë°, ì¬ì •ì˜ í•œë‹¤ë©´ ê¸°ì¡´ì˜ ì™„ì„±ëœ ë¶€ë¶„ì— ì¶”ê°€ í˜¹ì€ í¸ì§‘ì´ ê°€ëŠ¥í•˜ë‹¤. 
      - ê·¼ì ‘ ë¬´ê¸°ë¥¼ êµì²´í•˜ëŠ” ê³¼ì •ì€ ë‹¤ ë™ì¼í•˜ì§€ë§Œ ë°‘ì— í›„ìˆ í•  ê°ê°ì˜ ê·¼ì ‘ë¬´ê¸° ì»¨íŠ¸ë¡¤ëŸ¬ë§ˆë‹¤ ë³¸ì¸ë§Œì˜ isActive ë©¤ë²„ë¥¼ ê°€ì§€ëŠ”ë°, ë¬´ê¸°ë§ˆë‹¤ ë‹¤ë¥´ê²Œ ê°ê°ì˜ ë¬´ê¸°ì˜ isActivateë¥¼ Trueë¡œ í•´ì£¼ì–´ì•¼ í•˜ëŠ” ì°¨ë³„í™”ëœ ì¶”ê°€ ì‘ì—…ì´ ë¶™ê¸° ë•Œë¬¸ì— ê°€ìƒ í•¨ìˆ˜ê°€ ì í•©



<br>

### ğŸ“œ AxeController.cs

> `Holder`ì— ë¶™ëŠ”ë‹¤. `Axe` ì˜¤ë¸Œì íŠ¸ì˜ ìœ„ì¹˜ë¥¼ ì¡ê³  êµì²´í•´ì£¼ëŠ” ë“± ë„ë¼ì™€ ê´€ë ¨ëœ ì—¬ë ¤ê°€ì§€ ì¼ì„ ìˆ˜í–‰í•œë‹¤.

> ğŸ“œ CloseWeaponController.cs ì„ ìƒì† ë°›ëŠ”ë‹¤.

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class AxeController : CloseWeaponController
{
    // í™œì„±í™” ì—¬ë¶€
    public static bool isActivate = true;

    private void Start()
    {
        WeaponManager.currentWeapon = currentCloseWeapon.GetComponent<Transform>();
        WeaponManager.currentWeaponAnim = currentCloseWeapon.anim;
    }

    void Update()
    {
        if (isActivate)
            TryAttack();
    }

    protected override IEnumerator HitCoroutine()
    {
        while (isSwing)
        {
            if (CheckObject())
            {
                isSwing = false;
                Debug.Log(hitInfo.transform.name);
            }
            yield return null;
        }
    }

    public override void CloseWeaponChange(CloseWeapon _closeWeapon)
    {
        base.CloseWeaponChange(_closeWeapon);
        isActivate = true;
    }
}

```

- `isActivate`
  - ìƒì† ë°›ì€ê²Œ ì•„ë‹Œ, ë„ë¼ ì˜¤ë¸Œì íŠ¸ë§Œì˜ í™œì„±í™” ì—¬ë¶€ë¥¼ ì•Œë ¤ì£¼ëŠ” static ë©¤ë²„
  - ê²Œì„ì´ ì‹œì‘ë˜ë©´ ë„ë¼ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ë“¤ê³  ìˆë„ë¡ í• ê±°ë¼ì„œ ì´ˆê¸°ê°’ True
- ë¶€ëª¨ í´ë˜ìŠ¤ì¸ ğŸ“œ CloseWeaponController.cs ì—ì„  *Update()* ë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ğŸ“œ AxeController.cs ì—ì„œ ëŒë ¤ ì¤Œ
- *Start()*
  - ê²Œì„ì´ ì‹œì‘ë˜ë©´ ë„ë¼ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ë“¤ê³  ìˆë„ë¡ ğŸ“œWeaponManager.csë¥¼ í†µí•´ ì´ˆê¸°í™”. 
- ì˜¤ë²„ë¼ì´ë”©
  - *HitCoroutine()*
    - ë„ë¼ë§Œì˜ ë°ë¯¸ì§€ ì²˜ë¦¬
  - *CloseWeaponChange(CloseWeapon _closeWeapon)*
    - ë„ë¼ë§Œì˜ ë¬´ê¸° êµì²´ ì²˜ë¦¬
    - ğŸ“œ CloseWeaponController.cs ì—ì„œ ì •ì˜í•œ ë‚´ìš© ëŒ€ë¡œ ìˆ˜í–‰í•˜ë‹¤ê°€ (ê·¼ì ‘ ë¬´ê¸°ë“¤ì˜ ê³µí†µì ì¸ êµì²´ ê³¼ì • ìˆ˜í–‰)
    - ë³¸ì¸ë§Œì˜ `isActivate` ê°’ì„ True ë¡œ ì„¤ì •

<br>

### ğŸ“œ HandController.cs

> `Holder`ì— ë¶™ëŠ”ë‹¤. `Hand` ì˜¤ë¸Œì íŠ¸ì˜ ìœ„ì¹˜ë¥¼ ì¡ê³  êµì²´í•´ì£¼ëŠ” ë“± ë§¨ì†ê³¼ ê´€ë ¨ëœ ì—¬ë ¤ê°€ì§€ ì¼ì„ ìˆ˜í–‰í•œë‹¤.

> ğŸ“œ CloseWeaponController.cs ì„ ìƒì† ë°›ëŠ”ë‹¤.

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class HandController : CloseWeaponController
{
    // í™œì„±í™” ì—¬ë¶€
    public static bool isActivate = false;

    void Update()
    {
        if (isActivate)
            TryAttack();
    }

    protected override IEnumerator HitCoroutine()
    {
        while (isSwing)
        {
            if (CheckObject())
            {
                isSwing = false;
                Debug.Log(hitInfo.transform.name);
            }
            yield return null;
        }
    }

    public override void CloseWeaponChange(CloseWeapon _closeWeapon)
    {
        base.CloseWeaponChange(_closeWeapon);
        isActivate = true;
    }
}

```


- `isActivate`
  - ìƒì† ë°›ì€ê²Œ ì•„ë‹Œ, ë§¨ì† ì˜¤ë¸Œì íŠ¸ë§Œì˜ í™œì„±í™” ì—¬ë¶€ë¥¼ ì•Œë ¤ì£¼ëŠ” static ë©¤ë²„
- ë¶€ëª¨ í´ë˜ìŠ¤ì¸ ğŸ“œ CloseWeaponController.cs ì—ì„  *Update()* ë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ğŸ“œ AxeController.cs ì—ì„œ ëŒë ¤ ì¤Œ
- ì˜¤ë²„ë¼ì´ë”©
  - *HitCoroutine()*
    - ë§¨ì†ë§Œì˜ ë°ë¯¸ì§€ ì²˜ë¦¬
  - *CloseWeaponChange(CloseWeapon _closeWeapon)*
    - ë§¨ì†ë§Œì˜ ë¬´ê¸° êµì²´ ì²˜ë¦¬
    - ğŸ“œ CloseWeaponController.cs ì—ì„œ ì •ì˜í•œ ë‚´ìš© ëŒ€ë¡œ ìˆ˜í–‰í•˜ë‹¤ê°€ (ê·¼ì ‘ ë¬´ê¸°ë“¤ì˜ ê³µí†µì ì¸ êµì²´ ê³¼ì • ìˆ˜í–‰)
    - ë³¸ì¸ë§Œì˜ `isActivate` ê°’ì„ True ë¡œ ì„¤ì •

<br>

## ğŸš– ë„ë¼ ì˜¤ë¸Œì íŠ¸

### ë„ë¼ ì˜¤ë¸Œì íŠ¸ ì¶”ê°€ ë° ì»´í¬ë„ŒíŠ¸ ì„¤ì •

![image](https://user-images.githubusercontent.com/42318591/94402033-72f83480-01a6-11eb-9abd-261d5d92787a.png)

`Holder`ì— ë¬´ê¸° ì»¨íŠ¸ë¡¤ëŸ¬ ìŠ¤í¬ë¦½íŠ¸ë“¤ ë¶™ì´ê¸°

![image](https://user-images.githubusercontent.com/42318591/94402133-9622e400-01a6-11eb-9c16-825b598c513c.png)

- `Holder`ì— ë¹ˆ ì˜¤ë¸Œì íŠ¸ `Axe Holder` ì¶”ê°€
  - íŠ¸ëœìŠ¤í¼ ê°’ì„ ìˆ˜ì •í•´ ë„ë¼ ìœ„ì¹˜ë¥¼ ì¡°ì •í•´ì£¼ì. 
  - `Hand Holder`, `Gun Holder`ê°€ ê·¸ë¬ë˜ ê²ƒì²˜ëŸ¼ Y ì¶• ì¤‘ì‹¬ìœ¼ë¡œ 90ë„ íšŒì „
- ë„ë¼ 3D ëª¨ë¸ íŒŒì¼ì„ `Axe` ì˜¤ë¸Œì íŠ¸ë¡œ ì¶”ê°€. `Axe Holder`ì˜ ìì‹ìœ¼ë¡œ.

![image](https://user-images.githubusercontent.com/42318591/94402280-cd919080-01a6-11eb-86ee-fba26872ebe5.png)

- `Hand`ì™€ `Axe`ì— ğŸ“œ CloseWeapon.cs ë¶™ì´ê³  ì„¤ì • 
- `Axe`ì˜ Layerë¥¼ "Weapon"ìœ¼ë¡œ.

![image](https://user-images.githubusercontent.com/42318591/94402371-ec902280-01a6-11eb-8bc5-cec026b5e0fa.png)


<br>


## ğŸš– ë„ë¼ ì• ë‹ˆë©”ì´ì…˜ 

### ì• ë‹ˆë©”ì´ì…˜ í´ë¦½

![image](https://user-images.githubusercontent.com/42318591/94403059-d0d94c00-01a7-11eb-9850-5ca09dd24550.png)

ë„ë¼ 3 D ëª¨ë¸ íŒŒì¼ì— ë‚´ì¥ë˜ì–´ ìˆë˜ ì• ë‹ˆë©”ì´ì…˜ì„ êµ¬ê°„ë³„ë¡œ ì˜ë¼ì„œ 8 ê°œì˜ ì• ë‹ˆë©”ì´ì…˜ í´ë¦½ ì™„ì„±. ê±·ê¸°, ë›°ê¸°, ì •ì§€ëŠ” Loop ì²´í¬

<br>

### ì• ë‹ˆë©”ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬

"AxeController" ì´ë¦„ì˜ ì• ë‹ˆë©”ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ê³  `Axe`ì˜ Animator ì»´í¬ë„ŒíŠ¸ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ í• ë‹¹.

![image](https://user-images.githubusercontent.com/42318591/94404279-b30ce680-01a9-11eb-99a4-0d88cf0edb04.png)

ì›ë˜ í•´ì˜¤ë˜ëŒ€ë¡œ ë…¸ê°€ë‹¤ë¡œ ì „ì´ ì¡°ê±´ ì„¤ì • ì™„..

<br>

## ğŸš– ê³¡ê´­ì´ë„ ì¶”ê°€!

`Axe`ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ìœ„ì™€ ê°™ì€ ê³¼ì •ì„ ê·¸ëŒ€ë¡œ ë°˜ë³µí•œë‹¤.. ì˜¤ë¸Œì íŠ¸ ì¶”ê°€í•˜ê³  ì• ë‹ˆë©”ì´ì…˜ í´ë¦½ ë§Œë“œëŠ” ë“±ë“±..

### ğŸ“œPickaxeController.cs

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class PickaxeController : CloseWeaponController
{
    // í™œì„±í™” ì—¬ë¶€
    public static bool isActivate = false;

    void Update()
    {
        if (isActivate)
            TryAttack();
    }

    protected override IEnumerator HitCoroutine()
    {
        while (isSwing)
        {
            if (CheckObject())
            {
                isSwing = false;
                Debug.Log(hitInfo.transform.name);
            }
            yield return null;
        }
    }

    public override void CloseWeaponChange(CloseWeapon _closeWeapon)
    {
        base.CloseWeaponChange(_closeWeapon);
        isActivate = true;
    }
}
```

<br>

## ğŸš– ê³¡ê´­ì´ ì• ë‹ˆë©”ì´ì…˜ : ì• ë‹ˆë©”ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ ì˜¤ë²„ë¼ì´ë”©

> ì• ë‹ˆë©”ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ë„ ìƒì† ê°œë…ì´ ìˆë‹¤.

ê³¡ê´­ì´ ì• ë‹ˆë©”ì´ì…˜ì´ ë„ë¼ ì• ë‹ˆë©”ì´ì…˜ê³¼ ìƒíƒœë„ì™€ ëª¨ë“  ì „ì´ ì¡°ê±´ì´ ë˜‘ê°™ê³ , ë‹¨ì§€ ì• ë‹ˆë©”ì´ì…˜ í´ë¦½ë§Œ ë‹¤ë¥´ë‹¤ë©´ ì¼ì¼ì´ ë…¸ê°€ë‹¤ë¡œ ë‹¤ì‹œ ë§Œë“¤ í•„ìš” ì—†ì´ ë„ë¼ ì• ë‹ˆë©”ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ìƒì†ë°›ì•„ ê³¡ê´­ì´ ì• ë‹ˆë©”ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

<u>íŒŒë¼ë¯¸í„°ì™€ ì „ì´ ì¡°ê±´, ì „ì´ ê´€ê³„ë“¤ì€ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë˜ ì• ë‹ˆë©”ì´ì…˜ í´ë¦½ë§Œ ë°”ê¿€ ìˆ˜ ìˆë‹¤.</u> ìƒíƒœë„ì™€ íŒŒë¼ë¯¸í„°ë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë˜ í´ë¦½ë§Œ ë‹¤ë¥¸ ê²ƒìœ¼ë¡œ ì‚¬ìš©í•˜ê¸¸ ì›í•  ë• ì˜¤ë²„ë¼ì´ë“œ í•˜ì.

### ì• ë‹ˆë©”ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ ìƒì† ë°›ê¸°

![image](https://user-images.githubusercontent.com/42318591/94407816-eaca5d00-01ae-11eb-9405-72d2610d066b.png)

ìš°í´ - Create - Animator Override Controller ë¡œ ë‹¤ë¥¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ìƒì† ë°›ì•„ ë§Œë“¤ ê³¡ê´­ì´ì˜ ì• ë‹ˆë©”ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤. ì´ë¦„ì€ "PickaxeController"

![image](https://user-images.githubusercontent.com/42318591/94407979-249b6380-01af-11eb-993a-db2dc663df1e.png)

ë„ë¼ ì• ë‹ˆë©”ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ìƒì† ë°›ê¸° ìœ„í•´ "AxeController"ë¥¼ í• ë‹¹í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/42318591/94410248-1dc22000-01b2-11eb-9ba9-ab7142164ac0.png)

ë„ë¼ ì• ë‹ˆë©”ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ê·¸ëŒ€ë¡œ ë”°ë¥´ë˜ ìœ„ì™€ ê°™ì´ ì• ë‹ˆë©”ì´ì…˜ í´ë¦½ë§Œ ë°”ê¿”ì¹˜ê¸° í•´ì„œ ê³¡ê´­ì´ ì• ë‹ˆë©”ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì™„ì„±í•œë‹¤. Tree í´ë¦½ ìƒíƒœëŠ” ê³¡ê´­ì´ì—ê² ì—†ê¸° ë•Œë¬¸ì— Noneìœ¼ë¡œ ë‘”ë‹¤.

<br>


## ğŸ“œWeaponManager.cs ìˆ˜ì • (ë¬´ê¸° êµì²´ì— ë„ë¼, ê³¡ê´­ì´ë„ ì¶”ê°€)

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

[RequireComponent(typeof(GunController))]       // ìë™ìœ¼ë¡œ ì´ ìŠ¤í¬ë¦½íŠ¸ê°€ í™œì„±í™”ë˜ë©´ ğŸ“œGunController.cs ê°€ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶™ê²Œ ëœë‹¤. ì‹¤ìˆ˜ ë°©ì§€(ğŸ“œGunController.csê°€ í•„ìš”í•˜ë‹¤ê³  ê°•ì œí•¨)
public class WeaponManager : MonoBehaviour
{
    public static bool isChangeWeapon = false;  // ë¬´ê¸° êµì²´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€. (Trueë©´ ëª»í•˜ê²Œ)

    [SerializeField]
    private float changeweaponDelayTime;  // ë¬´ê¸° êµì²´ ë”œë ˆì´ ì‹œê°„. ì´ì„ êº¼ë‚´ê¸° ìœ„í•´ ì† ì§‘ì–´ ë„£ëŠ” ê·¸ ì‹œê°„. ëŒ€ëµ Weapon_Out ì• ë‹ˆë©”ì´ì…˜ ì‹œê°„.
    [SerializeField]
    private float changeweaponEndDelayTime;  // ë¬´ê¸° êµì²´ê°€ ì™„ì „íˆ ëë‚œ ì‹œì . ëŒ€ëµ Weapon_In ì• ë‹ˆë©”ì´ì…˜ ì‹œê°„.

    [SerializeField]
    private Gun[] guns;  // ëª¨ë“  ì¢…ë¥˜ì˜ ì´ì„ ì›ì†Œë¡œ ê°€ì§€ëŠ” ë°°ì—´
    [SerializeField]
    private CloseWeapon[] hands;  //  Hand í˜• ë¬´ê¸°ë¥¼ ê°€ì§€ëŠ” ë°°ì—´
    [SerializeField]
    private CloseWeapon[] axes;  // ë„ë¼ í˜• ë¬´ê¸°ë¥¼ ê°€ì§€ëŠ” ë°°ì—´
    [SerializeField]
    private CloseWeapon[] pickaxes;  // ê³¡ê´­ì´ í˜• ë¬´ê¸°ë¥¼ ê°€ì§€ëŠ” ë°°ì—´

    // ê´€ë¦¬ ì°¨ì›ì—ì„œ ì´ë¦„ìœ¼ë¡œ ì‰½ê²Œ ë¬´ê¸° ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ Dictionary ìë£Œ êµ¬ì¡° ì‚¬ìš©.
    private Dictionary<string, Gun> gunDictionary = new Dictionary<string, Gun>();
    private Dictionary<string, CloseWeapon> handDictionary = new Dictionary<string, CloseWeapon>();
    private Dictionary<string, CloseWeapon> axeDictionary = new Dictionary<string, CloseWeapon>();
    private Dictionary<string, CloseWeapon> pickaxeDictionary = new Dictionary<string, CloseWeapon>();

    [SerializeField]
    private string currentWeaponType;  // í˜„ì¬ ë¬´ê¸°ì˜ íƒ€ì… (ì´, ë„ë¼ ë“±ë“±)
    public static Transform currentWeapon;  // í˜„ì¬ ë¬´ê¸°. staticìœ¼ë¡œ ì„ ì–¸í•˜ì—¬ ì—¬ëŸ¬ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ í´ë˜ìŠ¤ ì´ë¦„ìœ¼ë¡œ ë°”ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•¨.
    public static Animator currentWeaponAnim; // í˜„ì¬ ë¬´ê¸°ì˜ ì• ë‹ˆë©”ì´ì…˜. staticìœ¼ë¡œ ì„ ì–¸í•˜ì—¬ ì—¬ëŸ¬ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ í´ë˜ìŠ¤ ì´ë¦„ìœ¼ë¡œ ë°”ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•¨.

    [SerializeField]
    private GunController theGunController;  // ì´ ì¼ë• ğŸ“œGunController.cs í™œì„±í™”, ë‹¤ë¥¸ ë¬´ê¸°ì¼ ë• ğŸ“œGunController.cs ë¹„í™œì„±í™” 
    [SerializeField]
    private HandController theHandController; // ì† ì¼ë• ğŸ“œHandController.cs í™œì„±í™”, ë‹¤ë¥¸ ë¬´ê¸°ì¼ ë• ğŸ“œHandController.cs ë¹„í™œì„±í™”
    [SerializeField]
    private AxeController theAxeController; // ë„ë¼ ì¼ë• ğŸ“œAxeController.cs í™œì„±í™”, ë‹¤ë¥¸ ë¬´ê¸°ì¼ ë• ğŸ“œAxeController.cs ë¹„í™œì„±í™”
    [SerializeField]
    private PickaxeController thePickaxeController; // ê³¡ê´­ì´ ì¼ë• ğŸ“œPickaxeController.cs í™œì„±í™”, ë‹¤ë¥¸ ë¬´ê¸°ì¼ ë• ğŸ“œPickaxeController.cs ë¹„í™œì„±í™”


    void Start()
    {
        for (int i = 0; i < guns.Length; i++)
        {
            gunDictionary.Add(guns[i].gunName, guns[i]);
        }
        for (int i = 0; i < hands.Length; i++)
        {
            handDictionary.Add(hands[i].closeWeaponName, hands[i]);
        }
        for (int i = 0; i < axes.Length; i++)
        {
            axeDictionary.Add(axes[i].closeWeaponName, axes[i]);
        }
        for (int i = 0; i < pickaxes.Length; i++)
        {
            pickaxeDictionary.Add(pickaxes[i].closeWeaponName, pickaxes[i]);
        }
    }

    void Update()
    {
        if (!isChangeWeapon)
        {
            if (Input.GetKeyDown(KeyCode.Alpha1)) // 1 ëˆ„ë¥´ë©´ 'ë§¨ì†'ìœ¼ë¡œ ë¬´ê¸° êµì²´ ì‹¤í–‰
                StartCoroutine(ChangeWeaponCoroutine("HAND", "ë§¨ì†"));
            else if (Input.GetKeyDown(KeyCode.Alpha2)) // 2 ëˆ„ë¥´ë©´ 'ì„œë¸Œ ë¨¸ì‹ ê±´'ìœ¼ë¡œ ë¬´ê¸° êµì²´ ì‹¤í–‰
                StartCoroutine(ChangeWeaponCoroutine("GUN", "SubMachineGun1"));
            else if (Input.GetKeyDown(KeyCode.Alpha3)) // 3 ëˆ„ë¥´ë©´ 'ë„ë¼'ë¡œ ë¬´ê¸° êµì²´ ì‹¤í–‰
                StartCoroutine(ChangeWeaponCoroutine("AXE", "Axe"));
            else if (Input.GetKeyDown(KeyCode.Alpha4)) // 4 ëˆ„ë¥´ë©´ 'ê³¡ê´­ì´'ë¡œ ë¬´ê¸° êµì²´ ì‹¤í–‰
                StartCoroutine(ChangeWeaponCoroutine("PICKAXE", "Pickaxe"));
        }
    }

    public IEnumerator ChangeWeaponCoroutine(string _type, string _name)
    {
        isChangeWeapon = true;
        currentWeaponAnim.SetTrigger("Weapon_Out");

        yield return new WaitForSeconds(changeweaponDelayTime);

        CancelPreWeaponAction();
        WeaponChange(_type, _name);

        yield return new WaitForSeconds(changeweaponEndDelayTime);

        currentWeaponType = _type;
        isChangeWeapon = false;
    }

    private void CancelPreWeaponAction()
    {
        switch(currentWeaponType)
        {
            case "GUN":
                theGunController.CancelFineSight();
                theGunController.CancelReload();
                GunController.isActivate = false;
                break;
            case "HAND":
                HandController.isActivate = false;
                break;
            case "AXE":
                AxeController.isActivate = false;
                break;
            case "PICKAXE":
                PickaxeController.isActivate = false;
                break;
        }
    }

    private void WeaponChange(string _type, string _name)
    {
        if(_type == "GUN")
        {
            theGunController.GunChange(gunDictionary[_name]);
        }
        else if(_type == "HAND")
        {
            theHandController.CloseWeaponChange(handDictionary[_name]);
        }
        else if (_type == "AXE")
        {
            theAxeController.CloseWeaponChange(axeDictionary[_name]);
        }
        else if (_type == "PICKAXE")
        {
            thePickaxeController.CloseWeaponChange(pickaxeDictionary[_name]);
        }
    }
}

```

![image](https://user-images.githubusercontent.com/42318591/94407047-e18cc080-01ad-11eb-9bed-a4ee8f4e71f3.png)

ì´ ë¬´ê¸°ê°€ 1,2,3 ì¢…ë¥˜ê°€ ìˆê³  ê³¡ê´­ì´í˜• ë¬´ê¸°ê°€ ì—¬ëŸ¬ê°œ ìˆê³  ì´ëŸ¬ë©´ ì´ì œ ë°°ì—´ì˜ ì›ì†Œë¡œ ì¶”ê°€í•˜ì—¬ ë„£ì–´ì£¼ë©´ ëœë‹¤.


<br>

## ğŸš” ì˜¤ëŠ˜ ì•Œê²Œ ëœ ê¿€íŒ

> Visual Studio

1. `for` ê¹Œì§€ ì¹˜ê³  `Tab`ì„ ë‘ë²ˆ ëˆ„ë¥´ë©´ forë¬¸ì´ ìë™ìœ¼ë¡œ ì™„ì„± ëœë‹¤.
2. í´ë˜ìŠ¤ ì´ë¦„ - ìš°í´ - ë¹ ë¥¸ ì‘ì—… ë° ë¦¬íŒ©í„°ë§
  - ì˜¤ë²„ë¼ì´ë”© í•´ì•¼í•  í•¨ìˆ˜ ì •ì˜ì™€ ë°”ë”” í˜•ì‹ì„ ë°”ë¡œ ë§Œë“¤ì–´ì£¼ê³ 
  - ìƒì„±ìë„ ë¹ ë¥´ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.


***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}