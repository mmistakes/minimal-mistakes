---
title:  "Chapter 8-2. ëª¨ë‹¥ë¶ˆ : ë¶ˆì˜ ë°ë¯¸ì§€" 

categories:
  -  Unity Lesson 3 
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-10-12
last_modified_at: 2020-10-12
---

ì¸í”„ëŸ°ì— ìˆëŠ” ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° 3D] ì‹¤ì „! ìƒì¡´ê²Œì„ ë§Œë“¤ê¸° - Advanced** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.inflearn.com/course/unity-2#)
{: .notice--warning}

# Chapter 8. ëª¨ë‹¥ ë¶ˆì— ê³ ê¸° êµ½ê¸°

# ë¶ˆì— ë‹¿ìœ¼ë©´ ë°ë¯¸ì§€ ì…ê¸°

## ğŸ“œFire.cs

> `Flame` ë¶ˆ íŒŒí‹°í´ ì‹œìŠ¤í…œì— ë¶™ì—¬ì¤€ë‹¤.

- ë¶ˆì€ ì¼ì • ì‹œê°„ì´ ì§€ë‚˜ë©´ êº¼ì§„ë‹¤.
- ë¶ˆ ìœ„ì— í”Œë ˆì´ì–´ê°€ ì˜¬ë¼ê°€ë©´ ë°ë¯¸ì§€ë¥¼ ì…ëŠ”ë‹¤.

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Fire : MonoBehaviour
{
    [SerializeField] private string fireName;  // ë¶ˆì˜ ì´ë¦„ (ë‚œë¡œ, ëª¨ë‹¥ë¶ˆ, í™”ë¡¯ë¶ˆ)
    [SerializeField] private int damage; // ë¶ˆì˜ ë°ë¯¸ì§€

    [SerializeField] private float damageTime; // ë°ë¯¸ì§€ê°€ ë“¤ì–´ê°ˆ ë”œë ˆì´ (ë§¤ í”„ë ˆì„ë§ˆë‹¤ê°€ ì•„ë‹Œ ì¼ì • ì‹œê°„ë§ˆë‹¤ ë°ë¯¸ì§€ë¥¼ ì£¼ê¸° ìœ„í•˜ì—¬)
    private float currentDamageTime;

    [SerializeField] private float durationTime;  // ë¶ˆì˜ ì§€ì† ì‹œê°„
    private float currentDurationTime;

    [SerializeField]
    private ParticleSystem ps_Flame;  // ë¶ˆ íŒŒí‹°í´ ì‹œìŠ¤í…œ. êº¼ì£¼ê¸° ìœ„í•˜ì—¬

    // ìƒíƒœ ë³€ìˆ˜
    private bool isFire = true;

    // í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸
    private StatusController thePlayerStatus;

    void Start()
    {
        currentDurationTime = durationTime;

        thePlayerStatus = FindObjectOfType<StatusController>();
    }

    void Update()
    {
        if (isFire)
        {
            ElapseTime();
        }
    }

    private void ElapseTime()
    {
        currentDurationTime -= Time.deltaTime;

        if (currentDurationTime <= 0)
            Off();
 

        if (currentDamageTime > 0)
            currentDamageTime -= Time.deltaTime;  // 1ì´ˆì— 1ì”©
    }

    private void Off()
    {
        ps_Flame.Stop();
        isFire = false;
    }

    private void OnTriggerStay(Collider other)
    {
        if(isFire && other.transform.tag == "Player")
        {
            if (currentDamageTime <= 0)
            {
                thePlayerStatus.DecreaseHP(damage);
                currentDamageTime = damageTime;
            }
        }
    }
}
```

- ë¶ˆ íŒŒí‹°í´ ì‹œìŠ¤í…œì€ `durationTime` ì‹œê°„ ë™ì•ˆë§Œ ì¬ìƒ ë˜ë©°, ì´ ì‹œê°„ì´ ì§€ë‚˜ë©´ ì¬ìƒì„ ë©ˆì¶˜ë‹¤.
  - ê²Œì„ ì‹œì‘ ë•Œë¶€í„° ì‹œì‘í•˜ì—¬ ë§¤ í”„ë ˆì„ë§ˆë‹¤ *ElapseTime()* ì—ì„œ íƒ€ì„ì„ ì°¨ê°í•¨
  - ë¶ˆ ë„ê¸°(ì¬ìƒ ë©ˆì¶”ê¸°)
    - *Off()*
- ë¶ˆì— í”Œë ˆì´ì–´ê°€ ë‹¿ìœ¼ë©´ í”Œë ˆì´ì–´ì˜ HP ë¥¼ ë¶ˆì˜ ë°ë¯¸ì§€ë§Œí¼ ê¹ëŠ”ë‹¤. ë‹¨, ë°ë¯¸ì§€ëŠ” ë§¤ í”„ë ˆì„ë§ˆë‹¤ ì ìš©í•˜ëŠ” ê±°ì‹œ ì•„ë‹Œ, `damageTime` ì‹œê°„ì„ ê°„ê²©ìœ¼ë¡œ ì ìš©í•œë‹¤.
  - **OnTriggerStay(Collider other)** 
    - ğŸ‘‰ `Is Trigger`ê°€ ì²´í¬ëœ Colliderì™€ <u>ë¶€ë”ªì¹˜ëŠ” ë™ì•ˆ</u> ë°œë™ë˜ëŠ” ì´ë²¤íŠ¸ í•¨ìˆ˜ 
      - ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ `Is Trigger`ê°€ ë˜ì–´ ìˆìœ¼ë©´ ëœë‹¤.
      - `Is Trigger`ê°€ ì²´í¬ë˜ë©´ ê´€í†µí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë¶ˆì„ í”Œë ˆì´ì–´ê°€ ê´€í†µí•˜ê²Œ ë˜ë©´ ìë™ìœ¼ë¡œ ë°œë™ ëœë‹¤.
        - í”Œë ˆì´ì–´ê°€ ë¶ˆì— ë‹¿ìœ¼ë©´ `other`ì—” í”Œë ˆì´ì–´ ì •ë³´ê°€ ë“¤ì–´ì˜¨ë‹¤.
  - ì´ í•¨ìˆ˜ê°€ ë°œë™ ë ë•Œ `currentDamageTime`ê°€ `damageTime`ë¡œ ì´ˆê¸°í™” ë˜ë©°, *ElapseTime()* ì—ì„œ 0 ì´ ë  ë•Œê¹Œì§€ 1ì´ˆì— 1ì”© ì°¨ê°.
    - ê·¸ë˜ë„ ë˜ ì•„ì§ë„ ë¶ˆ ì•ˆì— ìˆì–´ì„œ *OnTriggerStay(Collider other)* ê°€ ì‹¤í–‰ë˜ë©´ ë˜ `currentDamageTime`ê°€ `damageTime`ë¡œ ì´ˆê¸°í™” ë˜ë©° ë°˜ë³µ


<br>

## ì„¤ì •


- `Player`ì—ê²Œ "Player" íƒœê·¸ë¥¼ ë‹¬ì•˜ë‹¤.

![image](https://user-images.githubusercontent.com/42318591/95713341-5299a100-0ca1-11eb-8b76-15df6ff33057.png)

> `Flame` ë¶ˆ íŒŒí‹°í´ ì‹œìŠ¤í…œ

- ğŸ“œFire.cs
  - ë¶ˆì— ë‹¿ëŠ” ë™ì•ˆ, 0.1 ì´ˆë§ˆë‹¤ ë°ë¯¸ì§€ë¥¼ 1 ì”© ë°›ëŠ”ë‹¤.
  - ë¶ˆì€ 180 ì´ˆ í›„ì— êº¼ì§„ë‹¤.
- ë¶ˆì— í”¼ì–´ì˜¤ë¥´ëŠ” ë°”ë‹¥ ìª½ì— Sphere Collider ë¥¼ ë¶™ì—¬ì£¼ì—ˆë‹¤.
  - `Is Trigger`ê°€ ì²´í¬ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. í”Œë ˆì´ì–´ì™€ ë‹¿ì•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆì–´ì•¼ í•˜ë©°, í”Œë ˆì´ì–´ê°€ ê´€í†µí•  ìˆ˜ ìˆì–´ì•¼ í•˜ë¯€ë¡œ.

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}