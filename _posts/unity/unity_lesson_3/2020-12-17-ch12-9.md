---
title:  "Chapter 12-9. ê¸°íƒ€ : ë¡œë”©í™”ë©´ ë§Œë“¤ê¸° (AsyncOperation.progress)" 

categories:
  -  Unity Lesson 3 
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-12-17
last_modified_at: 2020-12-17
---

# ë¡œë”© í™”ë©´ ë§Œë“¤ê¸°

![image](https://camo.githubusercontent.com/e7d12c00fbad677e6e0401240ffa4b08dddc182d6b4f0641cdb643eaa53f3cf3/68747470733a2f2f706f737466696c65732e707374617469632e6e65742f4d6a41794d4445794d5464664d5455322f4d4441784e6a41344d546b324e6a41314d7a55312e2d7974575264706c7346373931424d65495a4b726e614a2d485947776b47616178584f4553315653383355672e4a3746386366434871534443596a3552546d2d766f5836636262556a6450634c32457355434e59724d4d63672e4749462e736f6879756e655f616e2f4749465f323032302d31322d31375f2545432539382541342545442539422538345f362d31332d30312e6769663f747970653d77373733)

ê°•ì˜ì—ì„œ ì§„í–‰í•œ ë¶€ë¶„ì€ ì•„ë‹ˆì˜€ì§€ë§Œ ë¡œë”©í™”ë©´ ë§Œë“¤ ìˆ˜ ìˆë‹¤ê³  ì–¸ê¸‰í•˜ì…”ì„œ í•œë²ˆ ë§Œë“¤ì–´ë´¤ë‹¤. 

## ğŸš€ ë¡œë”© ì”¬

![image](https://user-images.githubusercontent.com/42318591/102468494-ebc7a800-4094-11eb-9506-235cb5449495.png)

- ë¡œë”© í™”ë©´ìœ¼ë¡œ ì“°ê¸° ìœ„í•´ "GameLoad" ë¼ëŠ” ì”¬ì„ ìƒˆë¡œ ë§Œë“¤ì—ˆë‹¤. (Build Setting ì— ì¶”ê°€í•´ì£¼ì—ˆë‹¤.)
- ì´ˆë¡ íŒ¨ë„ì— ìŠ¬ë¼ì´ë”ë¥¼ ì‚¬ìš©í•œ ëª¨ìŠµ
  - ë¡œë”© ì§„í–‰ë„ë¥¼ ì´ ìŠ¬ë¼ì´ë”ë¡œ í‘œì‹œí•  ê²ƒì´ë‹¤. 

<br>

## ğŸš€ ìŠ¤í¬ë¦½íŠ¸

### ğŸ“œTitle

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.SceneManagement;

public class Title : MonoBehaviour
{
    public string startSceneName = "GameStage";
    public string loadSceneName = "GameLoad";

    public void ClickStart()
    {
        Debug.Log("ë¡œë”©");
        SceneManager.LoadScene(startSceneName);
    }

    public void ClickLoad()
    {
        Debug.Log("ë¡œë“œ");
        SceneManager.LoadScene(loadSceneName);
    }

    public void ClickExit()
    {
        Debug.Log("ê²Œì„ ì¢…ë£Œ");
        Application.Quit();
    }
}

```

ê¸°ì¡´ íƒ€ì´í‹€ ë©”ë‰´ë¥¼ ì¢€ ìˆ˜ì •í•´ì£¼ì—ˆë‹¤. ì›ëœ ì´ê²Œ ì‹±ê¸€í†¤ì´ì˜€ê³  ì—¬ê¸°ì„œ ê²Œì„ ì”¬ì„ ë¶ˆëŸ¬ë“¤ì˜€ëŠ”ë° ê·¸ëƒ¥ ë²„íŠ¼ ì´ë²¤íŠ¸ì— ë“±ë¡í•˜ëŠ” ì •ë„ì˜ í•¨ìˆ˜ë§Œ ë§Œë“¤ì–´ì£¼ì—ˆë‹¤. **ë¡œë“œ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ "GameLoad" ë¡œë”© ì”¬ì„ ë¶ˆëŸ¬ì˜¤ë„ë¡ í•œë‹¤.**

<br>

### ğŸ“œLoadManager

> "GameLoad" ì”¬ì˜ `Canvas`ì— ë¶™ì˜€ë‹¤.

ì´ ë¡œë”©ì”¬ì—ì„œ ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ ê²Œì„ ì”¬ì„ ë¶ˆëŸ¬ì˜¬ ê²ƒì´ë‹¤.

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.SceneManagement;
using UnityEngine.UI;

public class LoadManager : MonoBehaviour
{
    public string sceneName = "GameStage";
    public Slider slider; // ì—¬ê¸°ì— ìŠ¬ë¼ì´ë” ì˜¤ë¸Œì íŠ¸ í• ë‹¹
    private AsyncOperation operation;

    private SaveAndLoad theSaveAndLoad;

    public static LoadManager instance;

    void Awake()
    {
        if (instance == null)
        {
            instance = this;
            DontDestroyOnLoad(gameObject);
        }
        else
            Destroy(gameObject);
    }

    void Start()
    {
        StartCoroutine(LoadCoroutine());
    }

    IEnumerator LoadCoroutine()
    {
        operation = SceneManager.LoadSceneAsync(sceneName);
        operation.allowSceneActivation = false;

        float timer = 0f;
        while (!operation.isDone)
        {
            yield return null;

            timer += Time.deltaTime;
            if (operation.progress < 0.9f)
            {
                slider.value = Mathf.Lerp(operation.progress, 1f, timer);
                if (slider.value >= operation.progress)
                    timer = 0f;
            }
            else  
            {
                slider.value = Mathf.Lerp(slider.value, 1f, timer); 
                if (slider.value >= 0.99f)
                    operation.allowSceneActivation = true;
            }
        }

        theSaveAndLoad = FindObjectOfType<SaveAndLoad>(); // ë‹¤ìŒ ì”¬ì˜ ğŸ“œSaveAndLoad
        theSaveAndLoad.LoadData();
        gameObject.SetActive(false);
    }
}
```

ì´ë²ˆì— ì•Œê²Œëœê²Œ ìˆë‹¤. `operation.progress`ëŠ” <u>ìµœëŒ€ê°’ì´ 0.9f ì¸ ê²ƒ ê°™ë‹¤.</u> ê·¸ë¦¬ê³  ë¡œë”© ê³¼ì •ì´ ê·¸ë¦¬ ë¬´ê²ì§€ ì•Šë‹¤ë©´ ìˆœì‹ê°„ì— `operation.progress` ê°’ì€ 1 í”„ë ˆì„ë§Œì— 0.9f ê°’ì´ ë˜ì—ˆê³  ê·¸ë¦¬ê³  ê·¸ ì´í›„ë¶€í„´ 0.9 ë¥¼ ìœ ì§€í•œ ê²ƒì„ ë¡œê·¸ ì¶œë ¥ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤. 

- ì”¬ì€ ìŠ¬ë¼ì´ë” ê°’ì´ 99% ì´ìƒì¼ ë–„ ë¶ˆëŸ¬ì˜¬ ê²ƒì´ê¸° ë•Œë¬¸ì— ë¯¸ë¦¬ `operation.allowSceneActivation = false;` ë¡œ í•´ë‘”ë‹¤.
- ì”¬ ì „í™˜ì€ 1 í”„ë ˆì„ë§Œì— ì´ë£¨ì–´ì¡Œë‹¤. ê·¸ë•Œ ê·¸ë•Œ ê²½ìš°ì— ë”°ë¼ ë‹¤ë¥´ê² ì§€ë§Œ ì´ë ‡ê²Œ ì”¬ ì „í™˜ì´ ëˆˆê¹œì§í•  ìƒˆì— ì´ë£¨ì–´ì§€ëŠ” ê²½ìš°ë„ ìˆê³  ì´ëŸ´ ë• ë°”ë¡œ `operation.progress` ê°’ì´ 0.9 ê°€ ë˜ë²„ë ¸ë‹¤. 
  - ê·¸ë˜ì„œ ì”¬ ì „í™˜ì´ ë¹¨ë¦¬ ì´ë£¨ì–´ì¡Œë‹¤ë©´ while ë¬¸ ë‚´ì˜ if ëŠ” ì‹¤í–‰ ì•ˆë˜ê³  ë°”ë¡œ else ë§Œ ì‹¤í–‰ ë ì§€ë„ ëª¨ë¥¸ë‹¤.
    - `operation.progress`ëŠ” 0.9 ê°€ ìµœëŒ€ê°’ì¸ ê²ƒì„ í™•ì¸í–ˆë‹¤. ê·¸ëƒ¥ ì”¬ ì „í™˜ì´ ì™„ë£Œë˜ë©´ 0.9 ê°’ì´ ë˜ë‚˜ë³´ë‹¤.
    -  ê·¸ë˜ë„ ìŠ¬ë¼ì´ë”ë¥¼ 90%ì¸ ìƒíƒœì—ì„œ ë©ˆì¶œ ìˆ˜ëŠ” ì—†ìœ¼ë‹ˆ, `operation.progress`ê°€ 0.9 ì´ìƒì¼ ë•Œë¶€ì¸ elseë¬¸ì—ì„œëŠ” ìŠ¬ë¼ì´ë” ê°’ì´ 100%ê°€ ë ë•Œê¹Œì§€ `timer`ë¡œ ë³´ê°„í•´ê°€ë©° ë¶€ë“œëŸ½ê²Œ 100% ë¥¼ í–¥í•´ ìŠ¬ë¼ì´ë” ê°’ì„ ì˜¬ë¦°ë‹¤.
      - Lerp ë³´ê°„ì„ ì‚¬ìš©í•˜ë©´ ë”± ë–¨ì–´ì§€ê²Œ 1f ê°€ ë˜ê¸°ëŠ” í˜ë“¤ë‹¤. ê·¸ë˜ì„œ ìŠ¬ë¼ì´ë” ê°’ì´ 0.99f ë§Œ ë„˜ê²Œ ë˜ë©´ ë°”ë¡œ ë¡œë”©í•˜ëŠ” ì”¬ì„ í™œì„±í™”ì‹œí‚¤ë„ë¡ í•˜ì˜€ë”°. ì´ë•Œ ë¹„ë¡œì†Œ ì”¬ì„ í™œì„±í™”í•œë‹¤. `operation.allowSceneActivation = true;` 
- ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì”¬ ì „í™˜ì´ ì™„ë£Œë˜ë„ ê²Œì„ ì”¬ì—ì„œ ì €ì¥í–ˆë˜ ë‚´ìš© ê·¸ëŒ€ë¡œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì‘ì—…ì„ í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— (ì¦‰, ğŸ“œSaveAndLoadì˜ *LoadData* í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì—) **ì‹±ê¸€í†¤**ìœ¼ë¡œ ë§Œë“¤ì—ˆë‹¤. ì”¬ì´ ì „í™˜ë˜ë„ íŒŒê´´ë˜ì§€ ì•Šê³  ì „í™˜ëœ ê²Œì„ ì”¬ì—ì„œ `theSaveAndLoad.LoadData();`ë¥¼ ì‹¤í–‰í•´ì•¼ í•¨.




***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}