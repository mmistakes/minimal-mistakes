---
title:  "Chapter 11-5. í¬ì…˜ ì œì¡° : ì¬ë£Œ íˆ´íŒ" 

categories:
  -  Unity Lesson 3 
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-12-13
last_modified_at: 2020-12-13
---

ì¸í”„ëŸ°ì— ìˆëŠ” ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° 3D] ì‹¤ì „! ìƒì¡´ê²Œì„ ë§Œë“¤ê¸° - Advanced** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.inflearn.com/course/unity-2#)
{: .notice--warning}


# í¬ì…˜ ì œì¡° : ì¬ë£Œ íˆ´íŒ

## ğŸš€ íˆ´íŒ UI ë§Œë“¤ê¸°

![image](https://user-images.githubusercontent.com/42318591/102011585-730cd700-3d88-11eb-8cb7-6a85cbb4e6fb.png)

CREATE ë²„íŠ¼ ìœ„ì— ë§ˆìš°ìŠ¤ ì»¤ì„œë¥¼ ì˜¬ë¦¬ë©´ ì´ë ‡ê²Œ í•´ë‹¹ í¬ì…˜ ì•„ì´í…œì„ ë§Œë“¤ ë•Œ í•„ìš”í•œ ì¬ë£Œë“¤ì„ ë³´ì—¬ì£¼ëŠ” íˆ´íŒì„ ë„ìš¸ ê²ƒì´ë‹¤.

![image](https://user-images.githubusercontent.com/42318591/102011591-86b83d80-3d88-11eb-816c-b197f51245d5.png)

- Panel UI `ToolTip` (ì•µì»¤ í”„ë¦¬ì…‹ middle - center, ë°”ê¹¥ìª½ ì—°í•œ ì´ˆë¡ìƒ‰ í…Œë‘ë¦¬ê°€ ë¨)
  - Panel UI `ToolTip_Inner` (`ToolTip` íŒ¨ë„ë³´ë‹¤ ì‘ì€ ì§„í•œ ì´ˆë¡ìƒ‰)
    - í¬ì…˜ ì•„ì´í…œ ì´ë¦„ í…ìŠ¤íŠ¸
    - í¬ì…˜ ì•„ì´í…œì— í•„ìš”í•œ ì•„ì´í…œ ëª©ë¡ ë³´ì—¬ì£¼ëŠ” í…ìŠ¤íŠ¸ (`\n`ë¡œ ì¤„ êµ¬ë¶„)
    - í¬ì…˜ ì•„ì´í…œì— í•„ìš”í•œ ì•„ì´í…œ ê°œìˆ˜ ëª©ë¡ ë³´ì—¬ì£¼ëŠ” í…ìŠ¤íŠ¸ (`\n`ë¡œ ì¤„ êµ¬ë¶„)
- `ToolTip`ì€ ë¹„í™œì„±í™”ë¥¼ ë””í´íŠ¸ë¡œ í•œë‹¤. CREATE ë²„íŠ¼ ìœ„ì— ë§ˆìš°ìŠ¤ ì»¤ì„œë¥¼ ì˜¬ë¦´ ë•Œë§Œ í™œì„±í™”

<br>

## ğŸš€ íˆ´íŒ ë„ìš°ê¸° ë° í¬ì…˜ ìƒì„±ì‹œ ì¸ë²¤í† ë¦¬ì—ì„œ ì¬ë£Œ ì°¨ê°

### ğŸ“œArchemyToolTip

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class ArchemyToolTip : MonoBehaviour
{
    [SerializeField] private Text text_NeedItemName;
    [SerializeField] private Text text_NeedItemNumber;

    [SerializeField] private GameObject go_BaseToolTip;

    private void Clear()
    {
        text_NeedItemName.text = "";
        text_NeedItemNumber.text = "";
    }

    public void ShowTooltip(string[] _needItemName, int[] _needItemNumber)
    {
        Clear();
        go_BaseToolTip.SetActive(true); // íˆ´íŒ UI í™œì„±í™”

        for (int i = 0; i < _needItemNumber.Length; i++)
        {
            text_NeedItemName.text += _needItemName[i] + "\n";
            text_NeedItemNumber.text += " x " + _needItemNumber[i] + "\n";
        }
    }

    public void HideToolTip()
    {
        Clear();
        go_BaseToolTip.SetActive(false); // íˆ´íŒ UI ë¹„í™œì„±í™”
    }
}

```

> ì—°ê¸ˆ í…Œì´ë¸” í”„ë¦¬íŒ¹ì˜ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶™ì¸ë‹¤.


<br>

### ğŸ“œArchemyButton

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.EventSystems;

public class ArchemyButton : MonoBehaviour, IPointerEnterHandler, IPointerExitHandler
{
    [SerializeField] private ArchemyTable theArchemy;
    [SerializeField] private int buttonNum;
    
    public void OnPointerEnter(PointerEventData eventData)
    {
        theArchemy.ShowToolTip(buttonNum);
    }

    public void OnPointerExit(PointerEventData eventData)
    {
        theArchemy.HideToolTip();
    }
}

```

> CREATE ë²„íŠ¼ë“¤ì—ê²Œ ë¶™ì¸ë‹¤.

ì´ ìŠ¤í¬ë¦½íŠ¸ê°€ ë¶™ëŠ” CREATE ë²„íŠ¼ë“¤ì— ë§ˆìš°ìŠ¤ ì»¤ì„œê°€ ë“¤ì–´ì˜¤ê³  ë‚˜ê°€ëŠ” ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ ê°ê° ë°‘ì— í›„ìˆ í•  ğŸ“œArchemyTableì˜ *ShowToolTip*, *HideToolTip* í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤. ì´ í•¨ìˆ˜ë“¤ ë˜í•œ ğŸ“œArchemyToolTip ì˜ *ShowToolTip*, *HideToolTip* í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.


![image](https://user-images.githubusercontent.com/42318591/102011625-bcf5bd00-3d88-11eb-9172-146e2f0400ac.png)


<br>

### ğŸ“œArchemyTable

```c#
[System.Serializable]
public class ArchemyItem
{
    public string itemName;
    public string itemDescription;
    public Sprite itemImage;

    public string[] needItemName;
    public int[] needItemNumber;

    public float itemCraftingTime; // í¬ì…˜ ì œì¡°ì— ê±¸ë¦¬ëŠ” ì‹œê°„ (5ì´ˆ, 10ì´ˆ, 100ì´ˆ)

    public GameObject go_ItemPrefab; // ì‹¤ì œ ìƒì„±ë  í¬ì…˜
}

public class ArchemyTable : MonoBehaviour
{
    [SerializeField] private ArchemyToolTip theToolTip;
    private Inventory theInventory;

    private AudioSource theAudio;
    [SerializeField] private AudioClip sound_ButtonClick; // CREATE ë²„íŠ¼ í´ë¦­ì‹œ íš¨ê³¼ìŒ
    [SerializeField] private AudioClip sound_Beep; // ì•„ì´í…œ ë¶€ì¡±ìœ¼ë¡œ ìƒì„± ë¶ˆê°€í•  ë•Œ íš¨ê³¼ìŒ
    [SerializeField] private AudioClip sound_Activate; // ì•„ì´í…œì„ ë§Œë“¤ê¸° ì‹œì‘í–ˆì„ ë–„ íš¨ê³¼ìŒ
    [SerializeField] private AudioClip sound_ExitItem; // ì•„ì´í…œì´ ì™„ì„±ë˜ì–´ ë¹ ì ¸ë‚˜ì˜¬ ë•Œ íš¨ê³¼ìŒ

```

- í¬ì…˜ ì•„ì´í…œì˜ ì†ì„±ìœ¼ë¡œ `needItemName`, `needItemNumber` ë°°ì—´ì„ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.
  - í•´ë‹¹ í¬ì…˜ ì•„ì´í…œì„ ì œì‘í•  ë•Œ í•„ìš”í•œ ì•„ì´í…œ ì´ë¦„ë“¤, ì•„ì´í…œ ê°œìˆ˜ë“¤
- íš¨ê³¼ìŒë„ ì‚¬ìš©í•  ê²ƒ
  
```c#
    private void PlaySE(AudioClip _clip)
    {
        theAudio.clip = _clip;
        theAudio.Play();
    }

    void Start()
    {
        theInventory = FindObjectOfType<Inventory>();
        theAudio = GetComponent<AudioSource>();

        ClearSlot();
        PageSetting();
    }

    private void DequeueItem()
    {
        PlaySE(sound_Activate);
        isCrafting = true; // ëŒ€ê¸°ì—´ì—ì„œ ëºìœ¼ë‹ˆ ì œì‘ ì‹œì‘
        currentCraftingItem = archemyItemQueue.Dequeue();

        craftingTime = currentCraftingItem.itemCraftingTime;
        currentCraftingTime = 0;
        slider_gauge.maxValue = craftingTime;

        CraftingImageChange();
    }

    public void Buttonclick(int _buttonNum)
    {
        PlaySE(sound_ButtonClick);

        if (archemyItemQueue.Count < 3)
        {
            int archemyItemArrayNumber = _buttonNum + (page - 1) * theNumberOfSlot;

            // ì¸ë²¤í† ë¦¬ì—ì„œ ì¬ë£Œ ê²€ìƒ‰
            for (int i = 0; i < archemyItems[archemyItemArrayNumber].needItemName.Length; i++)
            {
                if (theInventory.GetItemCount(archemyItems[archemyItemArrayNumber].needItemName[i]) < archemyItems[archemyItemArrayNumber].needItemNumber[i])
                {
                    PlaySE(sound_Beep);
                    return;  // ì œì‘ ì•ˆë¨
                }
            }

            // ì¸ë²¤í† ë¦¬ì—ì„œ ì¬ë£Œ ì°¨ê°
            for (int i = 0; i < archemyItems[archemyItemArrayNumber].needItemName.Length; i++)
            {
                theInventory.SetItemCount(archemyItems[archemyItemArrayNumber].needItemName[i], archemyItems[archemyItemArrayNumber].needItemNumber[i]);
            }

            // ì œì‘ ì‹œì‘
            archemyItemQueue.Enqueue(archemyItems[archemyItemArrayNumber]);
            
            image_CraftingItems[archemyItemQueue.Count].gameObject.SetActive(true);
            image_CraftingItems[archemyItemQueue.Count].sprite = archemyItems[archemyItemArrayNumber].itemImage;
        }
        else
        {
            PlaySE(sound_Beep);
        }
    }

    public void UpButton()
    {
        PlaySE(sound_ButtonClick);

        if (page != 1)
            page--;
        else
            page = 1 + archemyItems.Length / theNumberOfSlot; // ìµœëŒ€ í˜ì´ì§€

        ClearSlot();
        PageSetting();
    }

    public void DownButton()
    {
        PlaySE(sound_ButtonClick);

        if (page < 1 + archemyItems.Length / theNumberOfSlot)
            page++;
        else
            page = 1;

        ClearSlot();
        PageSetting();
    }

    public void ShowToolTip(int _buttonNum)
    {
        int _archemyItemArrayNumber = _buttonNum + ((page - 1) * theNumberOfSlot); // í˜ì´ì§€ ê³ ë ¤
        theToolTip.ShowTooltip(archemyItems[_archemyItemArrayNumber].needItemName, archemyItems[_archemyItemArrayNumber].needItemNumber);
    }

    public void HideToolTip()
    {
        theToolTip.HideToolTip();
    }
```


ê³¼ì •ì´ [9.4 ê±´ì¶• : ê±´ì¶• ì•„ì´í…œ ì†Œëª¨](https://ansohxxn.github.io/unity%20lesson%203/ch9-4/) í¬ìŠ¤íŠ¸ì™€ ë§¤ìš° ë¹„ìŠ·í•˜ê¸° ë•Œë¬¸ì— ì„¤ëª… ìƒëµ.


![image](https://user-images.githubusercontent.com/42318591/102011654-f0d0e280-3d88-11eb-996e-e665424df579.png)

ë ˆë“œ í¬ì…˜ ì•„ì´í…œì— í•„ìš”í•œ ì¬ë£ŒëŠ” Twig, Log ë¡œ ê°ê° 1 ê°œ, 1 ê°œ í•„ìš”.

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}