---
title:  "Chapter 7-2. AI : ë™ë¬¼ ì‚¬ëƒ¥, 3 D ì…ì²´ ìŒí–¥" 

categories:
  -  Unity Lesson 3 
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-10-08
last_modified_at: 2020-10-08
---

ì¸í”„ëŸ°ì— ìˆëŠ” ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° 3D] ì‹¤ì „! ìƒì¡´ê²Œì„ ë§Œë“¤ê¸° - Advanced** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.inflearn.com/course/unity-2#)
{: .notice--warning}


# Chapter 7. ë™ë¬¼ë“¤ì˜ ê³µê²©í˜• AI, ë„ë§í˜• AI êµ¬í˜„

## ğŸš– ì‚¬ìš´ë“œ

### ë¼ì§€ì˜ ì†Œë¦¬ Audio Source : 3 D ìŒí–¥

![image](https://user-images.githubusercontent.com/42318591/95420065-ccfeb400-0975-11eb-9302-8e77e7c5204f.png)

`Pig` ë¼ì§€ ì˜¤ë¸Œì íŠ¸ì—ê²Œ Audio Source ë¥¼ ë¶™ì—¬ ì¤€ë‹¤.

- Play On Awake ì²´í¬ í•´ì œ
  - ë¼ì§€ê°€ í™œì„±í™” ë  ë•Œ ì¬ìƒë˜ê²Œ í•˜ë©´ ì•ˆë˜ê³  ì›í•  ë•Œ ì†Œë¦¬ë¥¼ ì¬ìƒì‹œí‚¬ ê²ƒì´ë¼ì„œ
- **3D Sound Settings**
  - `Min Distance`
    - ì´ ì»´í¬ë„ŒíŠ¸ê°€ ë¶™ì€ ì˜¤ë¸Œì íŠ¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ì—¬ Min Distance ë‚´ì—ì„œëŠ” ìµœê³  ìŒëŸ‰ì„ ìœ ì§€í•œë‹¤. (ì´ ê±°ë¦¬ ë‚´ì—ì„  ë¼ì§€ ì†Œë¦¬ê°€ ìµœëŒ€ë¡œ ë“¤ë¦¼)
    - ì´ ì»´í¬ë„ŒíŠ¸ê°€ ë¶™ì€ ì˜¤ë¸Œì íŠ¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ì—¬ Min Distance ì„ ë²—ì–´ë‚˜ë©´ ì„œì„œíˆ ìŒëŸ‰ì´ ê°ì†Œí•œë‹¤. (ë²—ì–´ë‚˜ë©´ ë¼ì§€ ì†Œë¦¬ê°€ ê±°ë¦¬ì— ë”°ë¼ ì„œì„œíˆ ì‘ê²Œ ë“¤ë¦¬ê¸° ì‹œì‘)
  - `Max Distance`
    - ì´ ì»´í¬ë„ŒíŠ¸ê°€ ë¶™ì€ ì˜¤ë¸Œì íŠ¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ì—¬ Max Distance ë‚´ì—ì„œëŠ” ì„œì„œíˆ ìŒëŸ‰ì´ ê°ì†Œí•œë‹¤. (ì´ ê±°ë¦¬ ë‚´ì—ì„  ê±°ë¦¬ì— ë”°ë¼ ë¼ì§€ ì†Œë¦¬ê°€ ì„œì„œíˆ ì‘ê²Œ ë“¤ë¦¬ê¸° ì‹œì‘)
    - ì´ ì»´í¬ë„ŒíŠ¸ ì˜¤ë¸Œì íŠ¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ì—¬ Max Distance ì„ ë²—ì–´ë‚˜ë©´ ì†Œë¦¬ê°€ ì™„ì „íˆ ë“¤ë¦¬ì§€ ì•ŠëŠ”ë‹¤. (ë²—ì–´ë‚˜ë©´ ë¼ì§€ ì†Œë¦¬ê°€ ì•„ì˜ˆ ë“¤ë¦¬ì§€ ì•ŠìŒ)
  - ì»¤ë¸Œ ì„¤ì •
    - `Max Distance`ë¥¼ 15ë¡œ ì„¤ì •í–ˆë‹¤ë©´ ë¼ì§€ë¡œë¶€í„° ê±°ë¦¬ê°€ 15 ì´ìƒ ë–¨ì–´ì§€ë©´ ë¼ì§€ì˜ ì†Œë¦¬ë¥¼ ë“¤ì„ ìˆ˜ ì—†ê²Œ ëœë‹¤.
    - ê±°ë¦¬ 15 `Max Distance` ì— ê°€ê¹Œìš¸ ìˆ˜ë¡ ë³¼ë¥¨ì´ ì„œì„œíˆ 0 ì— ê°€ê¹Œì›Œ ì§€ë„ë¡ ì»¤ë¸Œ ëª¨ì–‘ì„ ìœ„ì™€ ê°™ì´ ë³€ê²½ í•˜ì˜€ë‹¤.

![image](https://user-images.githubusercontent.com/42318591/95420188-09321480-0976-11eb-940e-3a3ae415ea8c.png)

ì‘ì€ ì›ì´ Min Distance ë²”ìœ„ì´ê³  í° ì›ì´ Max Distance ë²”ìœ„ë‹¤. Min Distance ê±°ë¦¬ ë‚´ì— ìˆì„ ë• ë¼ì§€ì˜ Audio Source ê°€ ì¬ìƒí•˜ëŠ” ì†Œë¦¬ë¥¼ ìµœëŒ€ ë³¼ë¥¨ìœ¼ë¡œ ë“¤ì„ ìˆ˜ ìˆìœ¼ë©° Min Distance ~ Max Distance ë²”ìœ„ ì•ˆì˜ ê±°ë¦¬ì—ì„œëŠ” ë¼ì§€ì˜ ì†Œë¦¬ê°€ ê±°ë¦¬ì— ë°˜ë¹„ë¡€í•˜ì—¬ ë“¤ë¦°ë‹¤. ë©€ ìˆ˜ë¡ ë¼ì§€ ì†Œë¦¬ê°€ ì‘ê²Œ ë“¤ë¦¼. Max Distance ê±°ë¦¬ ë°–ì—ì„œëŠ” ë¼ì§€ì˜ ì†Œë¦¬ë¥¼ ì•„ì˜ˆ ë“¤ì„ ìˆ˜ê°€ ì—†ê²Œ ëœë‹¤.

![image](https://user-images.githubusercontent.com/42318591/95420796-1a2f5580-0977-11eb-82a3-f2fabcc1d95e.png)

![image](https://user-images.githubusercontent.com/42318591/95421034-8ad67200-0977-11eb-94d5-87247688e10c.png)

> 3D Sound Settings ì—ì„œ ì»¤ë¸Œì™€ ìŒí–¥ ê±°ë¦¬ë¥¼ ì¡°ì •í–ˆëŠ” ë°ë„ ë¶ˆêµ¬í•˜ê³  ê±°ë¦¬ê°€ ë©€ì–´ì ¸ë„ ì†Œë¦¬ê°€ ë°”ë¡œ ì•ì— ìˆëŠ” ê²ƒ ë§ˆëƒ¥ í¬ê²Œ ë“¤ë¦°ë‹¤ë©´

- `Pig` ì˜¤ë¸Œì íŠ¸ - ë””ë²„ê·¸ ëª¨ë“œ
  - **Pan Level Custom Curve** ë¥¼ 1 ì— ìœ„ì¹˜í•˜ë„ë¡ ì„¤ì •í•œë‹¤.
    - 1 ì— ê°€ê¹Œìš¸ ìˆ˜ë¡ 3 D ìŒí–¥ì— ê°€ê¹Œì›Œ ì§€ê³ 
    - ë‚®ì€ ê°’ì¼ ìˆ˜ë¡ ê±°ë¦¬ì— ë”°ë¥¸ ë³¼ë¥¨ ì°¨ë³„í™”ê°€ ì—†ëŠ” 2 D ìŒí–¥ì— ê°€ê¹Œì›Œ ì§„ë‹¤.

> Sound Managerê°€ ìˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ë¼ì§€ ì˜¤ë¸Œì íŠ¸ì— ì§ì ‘ Audio Source ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ê°€í•œ ì´ìœ . 

ë¼ì§€ëŠ” ì›”ë“œë¥¼ ëŒì•„ë‹¤ë‹ˆëŠ” NPCì´ê¸° ë•Œë¬¸ì— ë¼ì§€ì™€ ë©€ë¦¬ ìˆë‹¤ë©´ ì†Œë¦¬ë„ ì‘ê²Œ ì¬ìƒí•´ì•¼ í•˜ê³  ê°€ê¹Œì´ ìˆë‹¤ë©´ ì†Œë¦¬ë„ í¬ê²Œ ì¬ìƒí•´ì•¼ í•œë‹¤. <u>ë¼ì§€ ìì²´ì— Audio Source ì†Œë¦¬ ì¬ìƒê¸°ë¥¼ ë‹¬ì•„ì£¼ë©´ ë¼ì§€ê°€ ë©€ì–´ì§ˆ ë•Œ ì†Œë¦¬ ì¬ìƒê¸°ë„ ë©€ì–´ì§€ëŠ” ê²ƒì´ë¯€ë¡œ</u> ì´ë ‡ê²Œ ë¼ì§€ ìì²´ì— Audio Source ë¥¼ ë‹¬ì•„ì£¼ì–´ì•¼ 3 D ì…ì²´ ìŒí–¥ì„ êµ¬í˜„í•  ìˆ˜ ìˆê²Œ ëœë‹¤. ìì—°ìŠ¤ë ˆ ê±°ë¦¬ì— ë”°ë¥¸ ë³¼ë¥¨ ê°ì†Œê°€ ìƒê¸°ê²Œ ëœë‹¤.


<br>

### íš¨ê³¼ìŒ Sound Manager

ë•Œë¦¬ëŠ” íš¨ê³¼ìŒì€ ì–¸ì œë‚˜ ëŒ€ìƒê³¼ ê°€ê¹Œì´ ìˆì„ ë•Œ ì¬ìƒë í…Œë‹ˆ 3 D ìŒí–¥ìœ¼ë¡œ ì¬ìƒí•  í•„ìš”ëŠ” ì—†ë‹¤. ë”°ë¼ì„œ `Sound Manager`ì—ì„œ ì¬ìƒí•˜ê²Œ í•œë‹¤.

ì‚¬ëƒ¥ íš¨ê³¼ìŒ í´ë¦½ ì¶”ê°€.

![image](https://user-images.githubusercontent.com/42318591/95421366-4f887300-0978-11eb-931f-7b5c88d100e1.png)


<br>

## ğŸš– ë¼ì§€ ê³µê²© ì²˜ë¦¬

### ğŸ“œ Pig.cs

> `Pig` ë¼ì§€ íŠ¸ëœìŠ¤í¼ì„ ë‹´ë‹¹í•˜ëŠ” ë¶€ëª¨ ì˜¤ë¸Œì íŠ¸ì— ë¶™ì¸ë‹¤.

```c#
public class Pig : MonoBehaviour
{
    [SerializeField] private float walkSpeed;  // ê±·ê¸° ì†ë ¥
    [SerializeField] private float runSpeed;  // ë‹¬ë¦¬ê¸° ì†ë ¥
    private float applySpeed;

    private bool isRunning; // ë‹¬ë¦¬ëŠ”ì§€ íŒë³„
    private bool isDead;   // ì£½ì—ˆëŠ”ì§€ íŒë³„

    [SerializeField] private float runTime;  // ë›°ê¸° ì‹œê°„

    private AudioSource theAudio;

    [SerializeField] private AudioClip[] sound_Pig_Normal; // ë¼ì§€ì˜ ì¼ìƒ ì†Œë¦¬. ì—¬ëŸ¬ê°œë¼ ë°°ì—´ë¡œ
    [SerializeField] private AudioClip sound_Pig_Hurt;  // ë¼ì§€ê°€ ë§ì„ ë•Œ ì†Œë¦¬
    [SerializeField] private AudioClip sound_Pig_Dead; // ë¼ì§€ê°€ ì£½ì„ ë•Œ ì†Œë¦¬

    void Start()
    {
        currentTime = waitTime;   // ëŒ€ê¸° ì‹œì‘
        isAction = true;   // ëŒ€ê¸°ë„ í–‰ë™
        theAudio = GetComponent<AudioSource>();  // ì˜¤ë””ì˜¤ ì»´í¬ë„ŒíŠ¸ ê°€ì ¸ì˜¤ê¸°
    }

    void Update()
    {
        if (!isDead)
        {
            Move();
            Rotation();
            ElapseTime();
        }
    }

    private void Move()
    {
        if (isWalking || isRunning)
            rigidl.MovePosition(transform.position + transform.forward * applySpeed * Time.deltaTime);
    }

    private void Rotation()
    {
        if (isWalking || isRunning)
        {
            Vector3 _rotation = Vector3.Lerp(transform.eulerAngles, new Vector3(0f, direction.y, 0f), 0.01f);
            rigidl.MoveRotation(Quaternion.Euler(_rotation));
        }
    }

    private void ReSet()  // ë‹¤ìŒ í–‰ë™ ì¤€ë¹„
    {
        // ì´ˆê¸°í™”
        isAction = true;
        isWalking = false;
        anim.SetBool("Walking", isWalking);
        isRunning = false;
        anim.SetBool("Running", isRunning);
        applySpeed = walkSpeed;

        // ëœë¤í•œ ë°©í–¥ìœ¼ë¡œ ì´ˆê¸°í™”
        direction.Set(0f, Random.Range(0f, 360f), 0f);

        // ë‹¤ìŒ í–‰ë™ ê²°ì •í•˜ê¸°
        RandomAction();
    }

    private void RandomAction()
    {
        // ë‹¤ìŒ í–‰ë™ì„ ê²°ì •í•˜ê¸°ì— ì•ì„œ ëœë¤í•˜ê²Œ ë¼ì§€ì˜ ì¼ìƒ ì†Œë¦¬ ì¬ìƒ 
        RandomSound();

        int _random = Random.Range(0, 4); // ëŒ€ê¸°, í’€ëœ¯ê¸°, ë‘ë¦¬ë²ˆ, ê±·ê¸°

        if (_random == 0)
            Wait();
        else if (_random == 1)
            Eat();
        else if (_random == 2)
            Peek();
        else if (_random == 3)
            TryWalk();
    }

    private void TryWalk()  // ê±·ê¸°
    {
        currentTime = walkTime;
        isWalking = true;
        anim.SetBool("Walking", isWalking);
        applySpeed = walkSpeed;
        Debug.Log("ê±·ê¸°");
    }

    private void Run(Vector3 _targetPos)
    {
        direction = Quaternion.LookRotation(transform.position - _targetPos).eulerAngles;

        currentTime = runTime;
        isWalking = false;
        isRunning = true;
        applySpeed = runSpeed;

        anim.SetBool("Running", isRunning);
    }

    public void Damage(int _dmg, Vector3 _targetPos)
    {
        if(!isDead)
        {
            hp -= _dmg;

            if (hp <= 0)
            {
                Dead();
                return;
            }

            PlaySE(sound_Pig_Hurt);
            anim.SetTrigger("Hurt");
            Run(_targetPos);
        }
    }

    private void Dead()
    {
        PlaySE(sound_Pig_Dead);

        isWalking = false;
        isRunning = false;
        isDead = true;

        anim.SetTrigger("Dead");
    }

    private void RandomSound()
    {
        int _random = Random.Range(0, 3);  // ë¼ì§€ì˜ ì¼ìƒ ì‚¬ìš´ë“œëŠ” 3 ê°œ
        PlaySE(sound_Pig_Normal[_random]);
    }

    private void PlaySE(AudioClip _clip)
    {
        theAudio.clip = _clip;
        theAudio.Play();
    }
}
```

- ë¼ì§€ê°€ ê³µê²© ë°›ìœ¼ë©´ *Damage(int _dmg, Vector3 _targetPos)*
  - ê·¼ë° ë¼ì§€ê°€ ì£½ì€ ìƒíƒœê°€ ì•„ë‹ˆë¼ë©´ 
    - hp ë¥¼ ê¹ëŠ”ë‹¤.
      - hp ê°€ 0 ì— ë„ë‹¬ í–ˆë‹¤ë©´ ì£½ëŠ”ë‹¤. ğŸ‘‰ *Dead()*
    - ë¼ì§€ê°€ ë‹¤ì¹˜ëŠ” ì†Œë¦¬ ì¬ìƒ 
    - ë¼ì§€ê°€ ë‹¤ì¹˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ ì¬ìƒ
    - í”Œë ˆì´ì–´(`_targetPos`)ì˜ ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ, `isRunning` ì‹œê°„ ë™ì•ˆ, "ë‹¬ë¦¬ê¸°" ìƒíƒœë¥¼ ê°€ì§„ë‹¤. ğŸ‘‰ *Run(_targetPos)* 
- ë¼ì§€ëŠ” ê³µê²©ì„ ë°›ìœ¼ë©´ í”Œë ˆì´ì–´ì˜ ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ë„ë§ê°„ë‹¤. *Run(Vector3 _targetPos)*
  - ì‹¤ì œë¡œ ë‹¬ë¦¬ê¸°ì— ì˜í•œ ì´ë™ ì²˜ë¦¬ëŠ” ê±·ê¸°ì™€ ë§ˆì°¬ê°€ì§€ë¡œ *Move()* ì—ì„œ í•œë‹¤.
    - ë”°ë¼ì„œ ì´ì œ *Move()* ì—ì„œëŠ” ì†ë ¥ ìŠ¤ì¹¼ë¼ë¡œ `walkSpeed`ë¥¼ ì“°ì§€ ì•Šê³ , `walkSpeed`ì™€ `runSpeed` ë‘ ê°’ì„ í• ë‹¹ ë°›ì•„ ê·¸ë•Œ ê·¸ë•Œì— ë§ëŠ” ì†ë ¥ìœ¼ë¡œ ì´ë™í•  ìˆ˜ ìˆëŠ” `applySpeed`ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆë‹¤. 
      ```c#
        private void Move()
        {
            if (isWalking || isRunning)
                rigidl.MovePosition(transform.position + transform.forward * applySpeed * Time.deltaTime);
        }
      ```
  - (í”Œë ˆì´ì–´ ğŸ‘‰ ë¼ì§€ì¸ ìê¸° ìì‹ ) ë°©í–¥ ìª½ìœ¼ë¡œ ë‹¬ë ¤ê°€ì•¼ í•œë‹¤.
    - ë¼ì§€ê°€ ë‹¬ë ¤ê°€ì•¼í•  ë°©í–¥
      ```c#
      direction = Quaternion.LookRotation(transform.position - _targetPos).eulerAngles;
      ```
  - ë‹¬ë¦¬ê¸°ì— ë§ê²Œ ì´ˆê¸°í™”
    ```c#
        currentTime = runTime;
        isWalking = false;
        isRunning = true;
        applySpeed = runSpeed;
    ```
  - ë‹¬ë¦¬ê¸° ì• ë‹ˆë©”ì´ì…˜ ì¬ìƒ
- ë¼ì§€ê°€ ì£½ìœ¼ë©´ 
  ```c#
    private void Dead()
    {
        PlaySE(sound_Pig_Dead);

        isWalking = false;
        isRunning = false;
        isDead = true;

        anim.SetTrigger("Dead");
    }
  ```
  - ë” ì´ìƒ ë°ë¯¸ì§€ ë°›ì§€ ì•ŠëŠ”ë‹¤.
  - ë” ì´ìƒ ì´ë™í•˜ì§€ë„, íšŒì „í•˜ì§€ë„, ì–´ë–¤ í–‰ë™ì„ ì·¨í•˜ì§€ë„ ì•ŠëŠ”ë‹¤.
    ```c#
    void Update()
    {
        if (!isDead)
        {
            Move();
            Rotation();
            ElapseTime();
        }
    }
    ```
- ë¼ì§€ëŠ” ì¼ìƒ ì†Œë¦¬ë“¤ì„ ëœë¤í•˜ê²Œ ì¬ìƒí•œë‹¤. 
  - *RandomAction()* ì—ì„œ ë‹¤ìŒ í–‰ë™ì„ ê²°ì •í•˜ê¸°ì— ì•ì„œ ëœë¤í•˜ê²Œ ë¼ì§€ì˜ ì¼ìƒ ì†Œë¦¬ ì¬ìƒ 
    - ğŸ‘‰ *RandomSound()*  ë¼ì§€ì˜ ì¼ìƒ ì‚¬ìš´ë“œëŠ” 3 ê°œ ì“¸ê±°ë¼ì„œ 0, 1, 2 ì¤‘ì— ëœë¤ìœ¼ë¡œ ë½‘ì•„ì„œ ì¬ìƒ
      ```c#
        private void RandomSound()
        {
            int _random = Random.Range(0, 3);  // ë¼ì§€ì˜ ì¼ìƒ ì‚¬ìš´ë“œëŠ” 3 ê°œ
            PlaySE(sound_Pig_Normal[_random]);
        }
      ```
- ë¼ì§€ì˜ íšŒì „
  - <u>ê±¸ì„ ë•Œ ë°©í–¥</u> âœ¨ 0 ~ 360 ë„ ì—ì„œ ëœë¤í•œ ê°ë„ë¡œ y ì¶• íšŒì „
    ```c#
    direction.Set(0f, Random.Range(0f, 360f), 0f);
    ```
  - <u>ë‹¬ë¦´ ë•Œ ë°©í–¥</u> âœ¨ í”Œë ˆì´ì–´ì˜ ë°˜ëŒ€ ë°©í–¥. ì¦‰ (í”Œë ˆì´ì–´ê°€ ğŸ‘‰ ë¼ì§€ì¸ ìê¸° ìì‹ ì„ í–¥í•˜ëŠ”) ë°©í–¥ìœ¼ë¡œ ë‹¬ë ¤ê°€ì•¼ í•œë‹¤. 
    ```c#
    direction = Quaternion.LookRotation(transform.position - _targetPos).eulerAngles;
    ```
    - ë‹¨, <u>ì´ ë•Œë„ y ì¶• íšŒì „ ë°©í–¥ë§Œ ê³ ë ¤í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•´ì£¼ì—ˆë‹¤.</u> ê·¸ëƒ¥ `direction`ìœ¼ë¡œ Lerp ì—ê²Œ ë„˜ê¸°ë©´, (í”Œë ˆì´ì–´ê°€ ğŸ‘‰ ë¼ì§€ì¸ ìê¸° ìì‹ ì„ í–¥í•˜ëŠ”) ë°©í–¥ì˜ `x`, `z` ë°©í–¥ì˜ íšŒì „ê°’ë„ í•¨ê»˜ ë“¤ì–´ê°€ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ë¼ì§€ê°€ ë•…ì„ í–¥í•´ ë‹¬ë ¤ê°€ëŠ” ë“± ë¬¸ì œê°€ ìƒê¸´ë‹¤. ë”°ë¼ì„œ `y`ê°’ë§Œ ë„˜ê²¨ì¤„ ìˆ˜ ìˆë„ë¡ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •
      ```c#
        private void Rotation()
        {
            if (isWalking || isRunning)
            {
                Vector3 _rotation = Vector3.Lerp(transform.eulerAngles, new Vector3(0f, direction.y, 0f), 0.01f);
                rigidl.MoveRotation(Quaternion.Euler(_rotation));
            }
        }
      ```



<br>

### ğŸ“œ PickaxeController.cs

```c#
public class PickaxeController : CloseWeaponController
{
    // í™œì„±í™” ì—¬ë¶€
    public static bool isActivate = false;

    void Update()
    {
        if (isActivate)
            TryAttack();
    }

    protected override IEnumerator HitCoroutine()
    {
        while (isSwing)
        {
            if (CheckObject())
            {
                if (hitInfo.transform.tag == "Rock")
                    hitInfo.transform.GetComponent<Rock>().Mining();
                else if (hitInfo.transform.tag == "Twig")
                    hitInfo.transform.GetComponent<Twig>().Damage(this.transform);
                else if (hitInfo.transform.tag == "NPC")
                {
                    SoundManager.instance.PlaySE("Animal_Hit");
                    hitInfo.transform.GetComponent<Pig>().Damage(currentCloseWeapon.damage, transform.position);
                }
                isSwing = false;
                Debug.Log(hitInfo.transform.name);
            }
            yield return null;
        }
    }

    public override void CloseWeaponChange(CloseWeapon _closeWeapon)
    {
        base.CloseWeaponChange(_closeWeapon);
        isActivate = true;
    }
}
```
```c#
                else if (hitInfo.transform.tag == "NPC")
                {
                    SoundManager.instance.PlaySE("Animal_Hit");
                    hitInfo.transform.GetComponent<Pig>().Damage(currentCloseWeapon.damage, transform.position);
                }
```

ê³¡ê´­ì´ì™€ ì¶©ëŒëœ ê²ƒì´ ìˆì„ ë•Œ ì¶©ëŒëœ ê²ƒì˜ íƒœê·¸ê°€ "NPC" ë¼ë©´, ë™ë¬¼ AI ì´ë¯€ë¡œ ì‚¬ìš´ë“œ ë§¤ë‹ˆì €ë¡œ í•˜ì—¬ê¸ˆ íš¨ê³¼ìŒì„ ì¬ìƒí•˜ê³  ğŸ“œPig.cs ì˜ *Damage* í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ í•´ë‹¹ ë¼ì§€ì—ê²Œ ë°ë¯¸ì§€ë¥¼ ì…íŒë‹¤. `Pickaxe`ì— ë¶™ì–´ ìˆëŠ” ğŸ“œCloseWeapon.cs ì˜ ê³¡ê´­ì´ì˜ ë°ë¯¸ì§€ `damage` ê°’ì„ ë„˜ê²¨ì£¼ê³  í”Œë ˆì´ì–´ì˜ ìœ„ì¹˜ë¡œëŠ” ê·¸ëƒ¥ ê³¡ê´­ì´ ìœ„ì¹˜ë¥¼ ë„˜ê¸´ë‹¤. `transform.position`


<br>

### ì„¤ì •

![image](https://user-images.githubusercontent.com/42318591/95421475-75157c80-0978-11eb-8107-a1e7ff6079b4.png)

ë¼ì§€ì—ê²Œ "NPC" íƒœê·¸ë¥¼ ë¶™ì—¬ ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/42318591/95421503-7ba3f400-0978-11eb-99d6-b6d8f8dc2d09.png)



***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}