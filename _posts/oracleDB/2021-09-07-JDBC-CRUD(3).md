---
title:  "[Oracle DB] JDBC CRUD(3)"

categories:
  - oracleDB
tags:
  - [RDBMS,OracleDB,JDBC,JAVA]

toc: true
toc_sticky: true

date: 2021-09-07
last_modified_at: 2021-09-07

---

# Oracle DB- JDBC CRUD(3)
ê°œì¸ì ìœ¼ë¡œ ê³µë¶€í•˜ë©´ì„œ ì°¸ì¡°í•˜ë ¤ê³  ë§Œë“  í¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.
ìœ íŠœë¸Œ ë‰´ë ‰ì²˜ ë‹˜ì˜ ê°•ì˜ë¥¼ ì°¸ê³ í•˜ì˜€ìŠµë‹ˆë‹¤.


**í´ë”êµ¬ì¡°**
<br>
![image](https://user-images.githubusercontent.com/69495129/132339334-b9549691-a415-45b1-bc38-c165d48dc55e.png)
<br>

## CRUD ë¥¼ ë‹´ë‹¹í•˜ëŠ” ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ ìƒì„±í•˜ê¸°
4ê°œì˜ ê¸°ëŠ¥ì„ ë‹´ê³ ìˆë‹¤. getListë¡œ List<Notice> ë¥¼ ë°˜í™˜í•œë‹¤. 
ì»¬ëŸ¼ë“¤ì„ ë‹´ì„ ìˆ˜ ìˆëŠ” ê°œë…ì ì¸ ê·¸ë¦‡ Notice ê°ì²´ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤
ê·¸ë¦‡ì€ entity ë¼ê³  í•œí›„ Notice ë¼ëŠ” ê°ì²´ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤ db ì˜ Column ì— ë“¤ì–´ê°€ëŠ” ì†ì„±ë“¤ì„ NoticeëŠ” ê°–ê³ ìˆì–´ì•¼í•œë‹¤.

``` java
package com.chanhyuk.app.entity;

import java.util.Date;

public class Notice {

    private int id;
    private String title;
    private String writerId;
    private Date regDate;
    private String content;
    private int hit;

    public int getId() {
        return id;
    }

    public String getTitle() {
        return title;
    }

    public String getWriterId() {
        return writerId;
    }

    public Date getRegDate() {
        return regDate;
    }

    public String getContent() {
        return content;
    }

    public int getHit() {
        return hit;
    }

    public void setId(int id) {
        this.id = id;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public void setWriterId(String writerId) {
        this.writerId = writerId;
    }

    public void setRegDate(Date regDate) {
        this.regDate = regDate;
    }

    public void setContent(String content) {
        this.content = content;
    }

    public void setHit(int hit) {
        this.hit = hit;
    }

    public Notice(int id, String title, String writerId, Date regDate, String content, int hit) {
        this.id = id;
        this.title = title;
        this.writerId = writerId;
        this.regDate = regDate;
        this.content = content;
        this.hit = hit;
    }

    public Notice(){

    }
}
  
```
  
ì•„ë˜ëŠ” ë„¤ê°€ì§€ CRUD ê¸°ëŠ¥ì„ ê°€ì§„ NoticeService.java ì´ë‹¤.
  
``` java
package com.chanhyuk.app.service;

import com.chanhyuk.app.entity.Notice;

import java.sql.*;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

public class NoticeService {
    private String url = "jdbc:oracle:thin:@localhost:1521/xepdb1";
    private String uid = "yourId";
    private String pwd = "yourPassword";
    private String driver = "oracle.jdbc.driver.OracleDriver";

    public List<Notice> getList(int page, String field, String query) throws ClassNotFoundException, SQLException {

        int start = 1 + (page - 1) * 10;      // 1 , 11 , 21 , 31, ìˆ˜ì—´ ë“±ì°¨ìˆ˜ì—´
        int end = 10 * page;  // 10,20,30,40


        String sql = "SELECT * FROM NOTICE_VIEW WHERE "+ field +" LIKE ? AND NUM BETWEEN ? AND ?";

        Class.forName(driver);
        Connection con = DriverManager.getConnection(url, uid, pwd);
        PreparedStatement st = con.prepareStatement(sql);
        st.setString(1,"%"+query+"%");
        st.setInt(2, start);
        st.setInt(3, end);
        ResultSet rs = st.executeQuery();
        List<Notice> list = new ArrayList<Notice>();
        while (rs.next()) {
            int id = rs.getInt("ID");
            String title = rs.getString("TITLE");
            String writerId = rs.getString("WRITER_ID");
            Date regDate = rs.getDate("REGDATE");
            String content = rs.getString("CONTENT");
            int hit = rs.getInt("hit");

            Notice notice = new Notice(
                    id,
                    title,
                    writerId,
                    regDate,
                    content,
                    hit
            );

            list.add(notice);
        }


        rs.close();
        st.close();
        con.close();

        return list;
    }

    // Scalar ê°’ì„ ì–»ì–´ì˜¤ëŠ” í•¨ìˆ˜ => ë‹¨ì¼ê°’ì„ ì–»ì–´ì˜¤ëŠ” í•¨ìˆ˜
    public int getCount() throws ClassNotFoundException, SQLException {
        int count = 0;
        String sql = "SELECT COUNT(ID) COUNT FROM NOTICE";

        Class.forName(driver);
        Connection con = DriverManager.getConnection(url, uid, pwd);
        Statement st = con.createStatement();
        ResultSet rs = st.executeQuery(sql);
        if (rs.next()) {
            count = rs.getInt("COUNT");
        }
        rs.close();
        st.close();
        con.close();

        return count;
    }

    public int insert(Notice notice) throws ClassNotFoundException, SQLException {
        String title = notice.getTitle();
        String writerId = notice.getWriterId();
        String content = notice.getContent();

        String sql = "INSERT INTO notice (" +
                "    title," +
                "    writer_id," +
                "    content" +
                ") VALUES (?,?,?)";

        Class.forName(driver);
        Connection con = DriverManager.getConnection(url, uid, pwd);
//        Statement st = con.createStatement();
        PreparedStatement st = con.prepareStatement(sql);
        st.setString(1, title);
        st.setString(2, writerId);
        st.setString(3, content);
        int result = st.executeUpdate();

        st.close();
        con.close();

        return result;
    }

    public int update(Notice notice) throws ClassNotFoundException, SQLException {

        String title = notice.getTitle();
        String content = notice.getContent();
        int id = notice.getId();

        String sql = "UPDATE NOTICE SET " +
                "TITLE=?," +
                "CONTENT=?" +
                "WHERE ID=?";

        Class.forName(driver);
        Connection con = DriverManager.getConnection(url, uid, pwd);
//        Statement st = con.createStatement();
        PreparedStatement st = con.prepareStatement(sql);
        st.setString(1, title);
        st.setString(2, content);
        st.setInt(3, id);

        int result = st.executeUpdate();

        st.close();
        con.close();

        return result;
    }

    public int delete(int id) throws SQLException, ClassNotFoundException {


        String sql = "DELETE NOTICE WHERE ID=?";

        Class.forName(driver);
        Connection con = DriverManager.getConnection(url, uid, pwd);
//        Statement st = con.createStatement();
        PreparedStatement st = con.prepareStatement(sql);
        st.setInt(1, id);

        int result = st.executeUpdate();

        st.close();
        con.close();

        return result;
    }

}

```


***
<br>

    ğŸŒœ ì£¼ê´€ì ì¸ ê²¬í•´ê°€ ë‹´ê¸´ ê¸€ì…ë‹ˆë‹¤. ë‹¤ì–‘í•œ ì˜ê²¬ì´ ìˆìœ¼ì‹¤ ê²½ìš°
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}

