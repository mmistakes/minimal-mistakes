---
layout: single
title: "ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ë¡œ ì  ì°ê¸°"
categories: OpenGL
tags: [opengl, mouseevent]
sidebar:
    nav: "counts"
---

# ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸

ì €ë²ˆ ì‹œê°„ì—ëŠ” í‚¤ë³´ë“œ ì´ë²¤íŠ¸ë¡œ ì‚¬ìš©ìê°€ ì„¤ì •í•œ í‚¤ë³´ë“œ ê°’ì„ ëˆ„ë¥´ë©´ í¬ê¸°ê°€ ëŠ˜ì–´ë‚˜ê±°ë‚˜ ë‹¤ì–‘í•œ ëª¨ì…˜ì„ ì·¨í•  ìˆ˜ ìˆì—ˆë‹¤.

ì´ë²ˆì—ëŠ” ë§ˆìš°ìŠ¤ë¥¼ ì´ìš©í•´ ë§ˆìš°ìŠ¤ë¥¼ ì›€ì§ì´ê±°ë‚˜ ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ì´ë‹¤.

ë§ˆìš°ìŠ¤ ì¢Œí‘œë¥¼ ê¸°ì–µí•´ ì ì„ ì°ì–´ë³´ëŠ” ê²ƒì´ ëª©í‘œì´ë‹¤.



## ì  ì°ê¸°

```c++
float	point[1000][2];
int		point_num = 0;

void mouse1(int button, int state, int x, int y) {
	if (button == GLUT_LEFT_BUTTON && state == GLUT_DOWN) {
		// ì™¼ìª½ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì–´ë–¤ ì¼ì„ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ”ê°€?
		//	ì  ì°ê¸°	-> ì  ìœ„ì¹˜ê°€ ë§ˆìš°ìŠ¤ë¥¼ í´ë¦­í•˜ë©´ ë°”ë€œ 
		point[point_num][0] = x;
		point[point_num][1] = y;
		point_num++; // ì ì´ ëˆ„ë¥¼ ë•Œ ë§ˆë‹¤ ëŠ˜ì–´ë‚¨ 
	}
	if (button == GLUT_RIGHT_BUTTON && state == GLUT_DOWN) {
		// ì˜¤ë¥¸ìª½ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ê·¸ë ¸ë˜ ì ì„ ëª¨ë‘ ì‚­ì œ
		point_num = 0;
	}
	glutPostRedisplay();
}
```

ì™¼ìª½ ë§ˆìš°ìŠ¤ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œ, ë§ˆìš°ìŠ¤ ì¢Œí‘œë¥¼ ì´ì°¨ì› ë°°ì—´ì¸ `point`ë¥¼ ì´ìš©í•´ ë§ˆìš°ìŠ¤ë¥¼ í´ë¦­í–ˆì„ ë•Œ `x,yì¢Œí‘œ`ë¥¼ ê¸°ì–µí•˜ê²Œ í•œë‹¤.

`point_num`ì€ ì ì˜ ê°œìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ë¯€ë¡œ ì²˜ìŒìœ¼ë¡œ ë§ˆìš°ìŠ¤ë¥¼ í´ë¦­í–ˆì„ ë• í•˜ë‚˜ì˜ x,yì¢Œí‘œê°€ ë§Œë“¤ì–´ì§„ë‹¤. 

```c++
point[point_num][0] = x; // xì¢Œí‘œ
point[point_num][1] = y; // yì¢Œí‘œ
```

ì´ë ‡ê²Œ ì™„ì„±í•œ ì½”ë“œë¥¼ ëŒë ¤ë³´ë©´ ë‚´ê°€ ì°ì€ ì¢Œí‘œì™€ ë‹¤ë¥¸ ê³³ì— ì ì´ ì°íˆëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

ê·¼ë°..ë„ëŒ€ì²´ ì™œ..? ë‹¤ë¥¸ ê³³ì— ì°íˆëŠ” ì§€ ê³ ë¯¼ì„ í•´ë´¤ë‹¤!



## ğŸ“Œ ì ì´ ë‹¤ë¥¸ ê³³ì— ì°íˆëŠ” ì´ìœ !

ì‚¬ìš©ìê°€ ë³´ëŠ” í™”ë©´ì—ì„œ yì¢Œí‘œëŠ” ìƒë‹¨ìœ¼ë¡œ ê°ˆìˆ˜ë¡ ì¦ê°€í•˜ê³  í•˜ë‹¨ìœ¼ë¡œ ê°ˆìˆ˜ë¡ ê°ì†Œí•˜ëŠ” í˜•íƒœë‹¤.

ìœˆë„ìš° ìƒì—ì„  yì¢Œí‘œëŠ” **ìƒë‹¨ìœ¼ë¡œ ê°ˆìˆ˜ë¡ ê°ì†Œí•˜ê³  í•˜ë‹¨ìœ¼ë¡œ ê°ˆìˆ˜ë¡ ì¦ê°€**í•˜ëŠ” í˜•íƒœì´ë‹¤!!

ê·¸ë ‡ê¸° ë•Œë¬¸ì— xì¢Œí‘œëŠ” ìƒê´€ì—†ì§€ë§Œ yì¢Œí‘œë¥¼ ë°˜ëŒ€ë¡œ ë‚˜íƒ€ë‚´ì•¼ í•œë‹¤.

ë†’ì´ê°€ yì¢Œí‘œë¥¼ ì˜ë¯¸í•˜ê¸° ë•Œë¬¸ì— `height - y` ë¥¼ ì‚¬ìš©í•˜ë©´ ì œëŒ€ë¡œ ì ì´ ì°íŒë‹¤.



## ğŸ“Œ ë°©í–¥ í‚¤ ì´ë™í–ˆì„ ë•Œ ìƒê¸°ëŠ” ì˜¤ë¥˜!

`keyevent`ì—ì„œ í™”ë©´ì„ ì´ë™í–ˆì„ ë•Œ ì ì„ ì°ìœ¼ë©´ ì œëŒ€ë¡œ ë°˜ì˜ì´ ë˜ì§€ ì•ŠëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì—ˆë‹¤.

`gluOrtho2D` ì—ì„œ `left`ë‘ `bottom`ì„ ê°™ì´ ì´ë™ì‹œì¼œì£¼ë¯€ë¡œ ì ì„ ì°ëŠ” ì¢Œí‘œë¥¼ ë‹¤ì‹œ ì„¤ì •í•´ì•¼ í–ˆë‹¤.

```c++
point[point_num][0] = left + x;
point[point_num][1] = bottom + height - y;
```

ì´ì²˜ëŸ¼ ë°”ê¿” ì£¼ë‹ˆ í™”ë©´ì„ ì´ë™í•´ë„ ì œëŒ€ë¡œ ì ì´ ì°íˆëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.

ì´ì— ëŒ€í•œ ì„¤ëª…ì€ ë°‘ ì‚¬ì§„ìœ¼ë¡œ ëŒ€ì²´í•˜ê² ë‹¤.

![dot]({{site.url}}/images/2023-03-31-four/dot.png)

# ì „ì²´ ì½”ë“œ

```c++
#include <windows.h>
#include <gl/gl.h>
#include <gl/glut.h> // (or others, depending on the system in use)
#include <math.h>

#define	width 			400
#define	height			600
#define	PI				3.1415
#define	polygon_num		30

int		left = 0;
int		bottom = 0;

int		mouse_motion = 0;

float	radius = 10.0;
float	point[1000][2];
int		point_num = 0;

typedef struct _Point {
	float	x;
	float	y;
} Point;

Point	circle_center;

void Modeling_Axis(void) {
		glLineWidth(2.0);
		glBegin(GL_LINES);
			glColor3f(1.0, 0.0, 0.0); // xì¶• 
			glVertex2i(0, 0);
			glVertex2i(1.0*width, 0);

			glColor3f(0.0, 0.0, 1.0); // yì¶• 
			glVertex2f(0.0, 0.0);
			glVertex2f(0.0, 1.0*height);
		glEnd();
}

void	Modeling_Circle(Point CC) {
		float	delta;

		glColor3f(1.0, 0.0, 0.0);
		glPointSize(3.0);
		delta = 2 * PI / polygon_num;
		
		glBegin(GL_POLYGON);
		for (int i = 0; i < polygon_num; i++)
			glVertex2f(CC.x + radius * cos(delta * i), CC.y + radius * sin(delta * i));
		glEnd();
}


void	Modeling_Points_from_Screen(void) {
		glPointSize(5.0);
		glColor3f(0.0, 0.0, 0.0);
	
		glBegin(GL_POINTS);
			for (int k = 0; k < point_num; k++)
				glVertex2f(point[k][0], point[k][1]);
		glEnd();
}

void RenderScene(void) {
	
	glClearColor(1.0, 1.0, 0.0, 0.0); // Set display-window color to Yellow
	glClear(GL_COLOR_BUFFER_BIT);

	glMatrixMode(GL_PROJECTION);
	glLoadIdentity();
	//ê´€ì¸¡ ê³µê°„ì„ ì–´ë–»ê²Œ ì„¤ì •í•´ì•¼ í•˜ëŠ”ê°€?
	//gluOrtho2D(0, width, 0, height); // mouse1()
	gluOrtho2D (left, left+width, bottom, bottom+height); //mouse2()
	
	Modeling_Axis();

	// ì œì¼ ë§ˆì§€ë§‰ìœ¼ë¡œ ì…ë ¥ëœ ì ì„ ì¤‘ì‹¬ìœ¼ë¡œ í•˜ëŠ” ì› ìƒì„±í•˜ê¸°
	Modeling_Circle(circle_center);

	// ë§ˆìš°ìŠ¤ ì™¼ìª½ ë²„íŠ¼ í´ë¦­ì„ í†µí•´ ì–»ì–´ì§„ ì  ìƒì„±í•˜ê¸°
	Modeling_Points_from_Screen();

	glFlush();
}


void mouse1(int button, int state, int x, int y) {
	if (button == GLUT_LEFT_BUTTON && state == GLUT_DOWN) {
		// ì™¼ìª½ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì–´ë–¤ ì¼ì„ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ”ê°€?
		//	ì  ì°ê¸°	-> ì  ìœ„ì¹˜ê°€ ë§ˆìš°ìŠ¤ë¥¼ í´ë¦­í•˜ë©´ ë°”ë€œ 
		point[point_num][0] = x;
		point[point_num][1] = height - y;	// windowìƒ(ê°€ìƒì„¸ê³„) yì¢Œí‘œì™€ ëª¨ë‹ˆí„°ì—ì„œ yì¢Œí‘œëŠ” ë°˜ëŒ€ 
		point_num++;
	}
	if (button == GLUT_RIGHT_BUTTON && state == GLUT_DOWN) {
		// ì˜¤ë¥¸ìª½ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ê·¸ë ¸ë˜ ì ì„ ì‚­ì œ
		point_num = 0;
	}
	glutPostRedisplay();
}

void mouse2(int button, int state, int x, int y) {
	if (button == GLUT_LEFT_BUTTON && state == GLUT_DOWN) {
		// ê´€ì‹¬ ì˜ì—­ ì´ë™í–ˆì„ ë•Œ, ì  ì œëŒ€ë¡œ ì•ˆì°í˜ -> ì˜ì—­ ì´ë™í•œ ê²ƒê³¼ ê°™ì´ ì´ë™
		point[point_num][0] = left + x;
		point[point_num][1] = bottom + height - y; // windowìƒ(ê°€ìƒì„¸ê³„) yì¢Œí‘œì™€ ëª¨ë‹ˆí„°ì—ì„œ yì¢Œí‘œëŠ” ë°˜ëŒ€

		// ë¹¨ê°„ ì›ì´ í˜„ì¬ ì ì„ ì°ì€ ì¢Œí‘œë¡œ ë”°ë¼ì˜´ 
		circle_center.x = point[point_num][0];
		circle_center.y = point[point_num][1];
		point_num++;
	}
	if (button == GLUT_RIGHT_BUTTON && state == GLUT_DOWN) {
		point_num = 0;
	}
	glutPostRedisplay();
}

void motion(int x, int y) {
	circle_center.x = left + x;
	circle_center.y = bottom + height - y;
	glutPostRedisplay();
}

void MySpecial(int key, int x, int y) {
	switch (key) {
	case GLUT_KEY_LEFT:		left -= 1.0; break;
	case GLUT_KEY_RIGHT:	left += 1.0; break;
	case GLUT_KEY_DOWN:		bottom -= 1.0; break;
	case GLUT_KEY_UP:		bottom += 1.0; break;
	default:	break;
	}
	glutPostRedisplay();
}

void main(int argc, char** argv) {
	glutInit(&argc, argv);
	glutInitWindowPosition(100, 100);
	glutInitWindowSize(width, height);
	glutCreateWindow("Draw Points by Mouse Input");
	glutDisplayFunc(RenderScene);
	//glutMouseFunc(mouse1);	// mouse event 
	glutMouseFunc(mouse2);
	glutMotionFunc(motion);	// ë§ˆìš°ìŠ¤ ì›€ì§ì„ì„ ë°›ì•„ë“¤ì´ëŠ” í•¨ìˆ˜ 
	glutSpecialFunc(MySpecial);
	glutMainLoop();
}
```

## ì¶œë ¥ ê²°ê³¼

![í™”ë©´ ìº¡ì²˜ 2023-04-01 144408]({{site.url}}/images/2023-03-31-four/í™”ë©´ ìº¡ì²˜ 2023-04-01 144408.png)