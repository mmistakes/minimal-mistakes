---
layout: single
title: "📘 블로킹/논블로킹 및 동기/비동기"
toc: true
toc_sticky: true
toc_label: "목차"
categories: web
excerpt: "블로킹/논블로킹 및 동기/비동기 개념"
tag: [web]
---

## Blocking / Non-blocking 차이

### Blocking
- 함수 호출 -> 결과 나올때까지 기다림 **(다음 코드 실행 불가 상태)**
- 호출한 스레드가 멈춰있음 
    - 함수를 호출한 스레드가 작업이 끝날 때까지 제어권을 돌려받지 못하는 상태

### Non-blocking
- 함수 호출 → 바로 리턴
- 호출한 쪽은 계속 실행됨
- 결과는 나중에 확인
- **작업이 끝나지 않았더라도 즉시 제어권을 호출자에게 반환하는 방식**
    - 기다리지 않는 게 아니라 멈추지 않는 것
    - 결과를 기다릴수는 있지만 다른 일을 하면서 기다림

### 정리
- Blocking과 Non-blocking의 차이는 단순히 “기다린다/기다리지 않는다”의 문제가 아니다. 핵심은 함수 호출 시 제어권이 호출자에게 즉시 반환되는지 여부이다.
Blocking 호출은 작업이 끝날 때까지 호출한 스레드를 멈추게 하지만,
Non-blocking 호출은 작업 진행 여부와 관계없이 즉시 반환되어
호출자가 다른 작업을 계속 수행할 수 있도록 한다.

## 동기(Sync) / 비동기(Async) 차이


![image](https://cdn.frontoverflow.com/document/first-met-redux/images/chapter_10/sync_and_async_in_redux.jpg)

### 동기(Sync)
- **순차적 처리 방식**
    - 요청을 보낸 후 응답이 올때까지 기다린 뒤 다음 작업 수행하는 것 (응답을 기다리는 동안 다른 요청은 대기함)
- 호출한 쪽이 직접 완료 여부를 책임지고 확인
- while(isDone()) 같은 느낌
- 예시
    ```python
    import requests
    from django.http import JsonResponse

    def sync_view(request):
        response = requests.get("https://api.example.com/data")
        data = response.json()
        return JsonResponse(data)
    ```

### 비동기(Async)
- I/O 작업 중 다른 작업을 동시에 수행 가능함
    - 높은 동시 처리량과 빠른 응답의 특징
- 작업이 끝나면 상대가 알려줌
- callback / signal / event / interrupt
- 예시
    ```python
    import httpx
    from django.http import JsonResponse

    async def async_view(request):
        async with httpx.AsyncClient() as client:
            response = await client.get("https://api.example.com/data")
        data = response.json()
        return JsonResponse(data)

    ```

## 조합
**Blocking + Sync** : 호출 → 멈춤 → 직접 끝날 때까지 기다림 

**Non-blocking + Sync** : 계속 물어보면서 확인 (busy waiting) 

**Non-blocking + Async** : 맡겨두고 딴 일 → 끝나면 통보받음 

**Blocking + Async** : 이론상 가능하지만 거의 안 씀          



## 마무리
- 많은 경우 Blocking과 동기가 함께 사용되기 때문에 같은 개념으로 오해하였다.
- 기다리면 = 동기, Blocking / 안기다리면 = 비동기, Non-blocking 이라고 생각했는데 개념적으로 완전히 다르다는 것을 알았다. 
- Blocking ≠ 동기
    - Blocking은 **호출한 스레드가 멈추는지**에 대한 개념
    - 동기는 **작업 완료를 누가 확인하는지**에 대한 개념