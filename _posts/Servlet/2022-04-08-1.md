---
layout: single
title:  "01 - Servlet ê¸°ë³¸ ì •ë¦¬"
categories: Servlet 
tag: [Servlet, ì…ì¶œë ¥, ì„¤ì •]
toc: true
toc_sticky: true
author_profile: false
sidebar:
  nav: "docs"
---


# ğŸ² 2022-04-09 

<!--Quote-->
> ğŸ’¡ ìœ íŠœë¸Œ **"ë‰´ë ‰ì²˜"** ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±.

> â— ê°œì¸ì´ ê³µë¶€í•œ ë‚´ìš©ì„ ì ì€ ê²ƒ ì´ê¸°ì— ì˜¤ë¥˜ê°€ ë§ì„ ìˆ˜ë„ ìˆìŒ 


# 2022-04-08

# 1ï¸âƒ£ Servlet ê¸°ì´ˆ

- WEB-INFO ëŠ” ì£¼ì†Œì°½ì—ì„œ ì…ë ¥ ìš”ì²­ í•  ìˆ˜ ì—†ë‹¤.
- ì„œë¸”ë¦¿ì€ HttpServeltì„ extendsí•œë‹¤
- servletì€ service ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œë‹¤

â— ê°„ë‹¨ ì„¤ì •

WebServlet(â€/helloâ€) â†’ ì–´ë…¸í…Œì´ì…˜ â†’ /helloë¡œ í•˜ë©´ ì‚¬ì´íŠ¸ ì´ë™ â†’ web.xml íŒŒì¼ì— metadata-complete="falseâ€ë¥¼ í•´ì¤˜ì•¼í•œë‹¤ trueì¸ê±¸



# 2ï¸âƒ£ ì¶œë ¥

## ê¸°ë³¸ ì¶œë ¥

```java
@WebServlet("/hi")
public class Nana extends HttpServlet{
	
protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

	// ì¸ì½”ë”©
	response.setContentType("text/html");
	response.setCharacterEncoding("uft-8");
	PrintWriter out = response.getWriter();

	for(int i = 0; i < 100; i++) {
		out.println((i+1) + " : hello servelt!");
		}
	}
}
```

- responseëŠ” í™”ë©´ì— ë³´ì—¬ì§ˆ ë•Œ ì‚¬ìš©
- PrintWriter out = response.getWriter(); ë¥¼ ì´ìš©í•´ í™”ë©´ì— ì¶œë ¥
- iê°€ 100ì´ ë˜ê¸° ì „ê¹Œì§€ â€œhello servletâ€ ì¶œë ¥

## ê°’ ë°›ì•„ì˜¤ê¸°

1. html ì½”ë“œì—ëŠ” submitì„ ì‚¬ìš©í•  ì‹œ í˜ì´ì§€ë¥¼ ì—°ê²°í•´ ì£¼ê¸° ìœ„í•´ from íƒœê·¸ì˜ actionì´ í•„ìš”í•˜ë‹¤
2. htmlì½”ë“œì˜ action ì£¼ì†Œì™€ javaì½”ë“œì˜ WebServletì˜ ì£¼ì†Œê°€ ê°™ì•„ì•¼ í•œë‹¤.
3. ê°’ ë³´ë‚´ê¸° : inputì˜ name  , ê°’ ë°›ì•„ì˜¤ê¸° : request.getParameterì˜ nameì´ ê°™ì•„ì•¼ í•œë‹¤
4. request.getParameterëŠ” Stringìœ¼ë¡œ ê°’ì„ ë°›ì•„ì˜¨ë‹¤

<u>html ì½”ë“œ (hello.html)</u>

```html
<body>	
	<div>
		<form action="hi">
			<div>
				<label>"ì•ˆë…•í•˜ì„¸ìš”"ë¥¼ ëª‡ ë²ˆ ë“£ê³  ì‹¶ìœ¼ì„¸ìš”?</label>
			</div>
			<div>
				<input type="text" name ="cnt">
				<input type="submit" value="ì¶œë ¥">
			</div>
		</form>
	</div>
</body>
```

1. submitì„ ëˆ„ë¥´ë©´ hië¡œ ì—°ê²°ë˜ê³  hiê°€ nameì˜ cntë¥¼ ìë™ì ìœ¼ë¡œ í™ˆí˜ì´ì§€ ì£¼ì†Œì— ì „ë‹¬

### ì£¼ì†Œì°½ì— ì…ë ¥

```java
@WebServlet("/hi")
public class Nana extends HttpServlet{
	
	protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

		// ì¸ì½”ë”©(ë‚´ê²Œ ë³´ì—¬ì§€ëŠ”ê±°)
		response.setContentType("text/html; charset=UTF-8");
		response.setCharacterEncoding("UTF-8");
		PrintWriter out = response.getWriter();

		// ì£¼ì†Œì°½ì— ì…ë ¥ http://localhost/hi?cnt=3 ì´ëŸ°ì‹ìœ¼ë¡œ ìš”ì²­í•˜ë©´ ê·¸ 3ì´ cntë¡œ ì…ë ¥
		int cnt = Integer.parseInt(request.getParameter("cnt"));
		
		// ì£¼ì†Œì°½ì— ì¿¼ë¦¬ê°’ì„ ì£¼ì§€ì•Šìœ¼ë©´ ì˜¤ë¥˜ê°€ ë‚œë‹¤

		for(int i = 0; i < cnt; i++) {
			out.println((i+1) + " : ì•ˆë…• hello servelt!");
		}
	}
}
```

- ì£¼ì†Œì°½ì— 3ì„ ì…ë ¥í•˜ë©´ ë°˜ë³µë¬¸ì„ í†µí•´ â€œhello servlet!â€ 3ë²ˆì„ ì¶œë ¥í•œë‹¤

### ì£¼ì†Œì°½ì— ì…ë ¥ì„ ì•ˆí•œë‹¤ë©´?

```java
@WebServlet("/hi")
public class Nana extends HttpServlet{
	
	protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

		// ì¸ì½”ë”©
		response.setContentType("text/html; charset=UTF-8");
		response.setCharacterEncoding("UTF-8");
		PrintWriter out = response.getWriter();

		// ì£¼ì†Œì°½ì— ì…ë ¥ http://localhost/hi?cnt=3 ì´ëŸ°ì‹ìœ¼ë¡œ ìš”ì²­í•˜ë©´ ê·¸ 3ì´ cntë¡œ ì…ë ¥
		// getParameterëŠ” Stringìœ¼ë¡œ ì…ë ¥ ë°›ìŒ
		String cnt_ = request.getParameter("cnt");
		
		int cnt = 100; // ì•„ë¬´ëŸ° ê°’ì´ ì—†ìœ¼ë©´ cnt
		if(cnt_ != null && !cnt_.equals("")) // ê°’ì´ nullì´ ì•„ë‹ˆê³  ë¹ˆë¬¸ìê°€ ì•„ë‹ˆë¼ë©´ cntì— ë‹´ìŒ
			cnt = Integer.parseInt(cnt_);
		
		// ì¿¼ë¦¬ë¥¼ ì…ë ¥ ì•ˆí•˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— defaultê°’ì„ ì£¼ê³  ì‹¶ë‹¤ 

		for(int i = 0; i < cnt; i++) {
			out.println((i+1) + " : ì•ˆë…• hello servelt!");
		}
	}
}
```

- ì£¼ì†Œì°½ì— ì…ë ¥ì„ í•˜ì§€ ì•Šìœ¼ë©´ defaultê°’ì¸ 100ë²ˆì´ ì¶œë ¥ ì…ë ¥ì„ í•˜ë©´ ì…ë ¥í•œ ê°’ì— ë”°ë¼ ì¶œë ¥

---

# 3ï¸âƒ£ í•œê¸€ì´ ì•ˆ ê¹¨ì§€ê²Œ ì„¤ì •

<u>reg.html</u>

```html
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<div>
		<form action="notice-reg" method="post">
			<div>
				<label>ì œëª©:</label><input name="title" type="text">
			</div>
			<div>
				<label>ë‚´ìš©:</label>
				<textarea name="content"></textarea>
			</div>
			<div>
				<input type="submit" value="ë“±ë¡">
			</div>
		</form>
	</div>
</body>
</html>
```

- ì…ë ¥ë°›ì€ title ê³¼ contentë¥¼ notice-reg ë¡œ ë„˜ê²¨ì¤€ë‹¤
- titleê³¼ contentì— í•œê¸€ì„ ì…ë ¥í•˜ë©´ ê¹¨ì§„ë‹¤

<u>notice-reg.java</u>

```java
@WebServlet("/notice-reg")
public class Notice_Reg extends HttpServlet{
	
	protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

		response.setContentType("text/html; charset=UTF-8");
		response.setCharacterEncoding("UTF-8");
		request.setCharacterEncoding("UTF-8");

		PrintWriter out = response.getWriter();

		String title = request.getParameter("title");
		String content = request.getParameter("content");
		
		out.println(title);
		out.println(content);
	}
}
```

- reg.htmlë¡œ ë°›ì€ íŒŒì¼ì„ ì›¹ì— ë³´ì—¬ì£¼ê¸°
- titleê³¼ contentì— í•œê¸€ì„ ì…ë ¥í•˜ë©´ ê¹¨ì§„ë‹¤ â†’ request.setCharacterEncoding("UTF-8"); í•„ìš”
- â— ë§¤ë²ˆ request.setCharacterEncoding("UTF-8"); ë¥¼ ì“°ê¸°ëŠ” ë¶ˆí¸í•˜ë‹ˆê¹Œ ì•„ì˜ˆ ì„¤ì •ì„ í•´ë‘”ë‹¤ â†’ **filte**r ì‚¬ìš©

### ë°©ë²•1

- web.xml ì½”ë“œ ì…ë ¥
- filterí´ë˜ìŠ¤ ìƒì„±

<u>web.xml </u>ì— ì•„ë˜ ì½”ë“œ ê¸°ì…

```java
<filter>
  <filter-name>chrarcterEncodingFilter</filter-name>
  <filter-class>com.newlecture.web.filter.CharacterEncodingFilter</filter-class>
</filter>
<filter-mapping>
  <filter-name>chrarcterEncodingFilter</filter-name>
  <url-pattern>/*</url-pattern>  <!-- ëª¨ë“  urlì— ëŒ€í•´ì„œ -->
</filter-mapping>
```

<u>CharacterEncodingFilter í´ë˜ìŠ¤</u>

```java
@WebServlet("/*") // ëª¨ë“  ì‚¬ì´íŠ¸ì— ì ìš©í•œë‹¤ ì˜ë¯¸ 
public class CharacterEncodingFilter implements Filter {

@Override
public void doFilter(ServletRequest request
	, ServletResponse response
	, FilterChain chain)
	throws IOException, ServletException {
		
	request.setCharacterEncoding("UTF-8"); // ëª¨ë“  ì‚¬ì´íŠ¸ì— ì ìš© -> web.xml íŒŒì¼
	chain.doFilter(request, response);
		}
}
```

### ë°©ë²•2

- web.xmlì— filterì½”ë“œë¥¼ ì£¼ì…í•˜ì§€ ì•Šê³  í•˜ëŠ” ë°©ë²•ì€ filterë¡œ ì„¤ì •í•œ í´ë˜ìŠ¤(ì—¬ê¸°ì„  CharacterEncodingFilter)ì— @WebServlet("/*") ì„ ë¶™ì—¬ì¤€ë‹¤ â†’ ì—¬ê¸°ì„œ @WebServlet("/*")ì€ ëª¨ë“  íŒŒì¼ì— ì„¤ì •í•œë‹¤ëŠ” ì˜ë¯¸


## ğŸ“‘ ì¶œì²˜ 

 * [ë‰´ë ‰ì²˜ ìœ íŠœë¸Œ](https://www.youtube.com/channel/UC5-ixpj8DioZqmrasj6Ihpw) 
