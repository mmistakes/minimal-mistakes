---
layout: post
title: "ìë°”11 ìƒˆë¡œ ì œì‘"
---

# 0. í”„ë¡œì íŠ¸ ì•„í‚¤í…ì³
ì•„í‚¤í…ì³ë¼ê¸°ì—ëŠ” ì˜¤ë°”ì§€ë§Œ... ëŒ€ëµì ì¸ ìŠ¤í™  
<br>

Java 11  
Spring Boot 2.6.2  
Gradle  
MySQL AWS RDS
MyBatis(JPA X ì¿¼ë¦¬ ë§ì´ ì“¸ê±°ë¼) + xml  
Intellij  
Thymeleaf(í•œ ë²ˆë„ í•œì  ì—†ì§€ë§Œ)  
+ ë°°í¬ëŠ” EC2 ì˜ˆì •

<br>

View - Controller - Service - ServiceImpl - Mapper - DB  
DTOëŠ” dbì˜ ë°ì´í„°ê°€ mapperë¥¼ í†µí•´ ê°ì²´í™” ëœê²ƒì„ ì €ì¥ ë’¤ ì—¬ê¸°ì €ê¸° ë‹¤ ë„˜ê²¨ì¤„ ì˜ˆì •

<br>

# 1. í”„ë¡œì íŠ¸ ìƒì„±
![image](https://user-images.githubusercontent.com/86642180/147879657-30f772b8-7177-4f14-a323-ddc2f1486a13.png)

<br>
ì´ˆë°˜ ì˜ì¡´ì„±  
![image](https://user-images.githubusercontent.com/86642180/147879688-52d259de-c2d7-4e72-84e9-75c6bd643a50.png)  

<br>

# 2. build.gradle
gradle í”„ë¡œì íŠ¸ë¡œ ìƒì„±í–ˆë‹¤ë©´ ì¼ì¼ì´ ì˜ì¡´ì„±, í”ŒëŸ¬ê·¸ì¸ ì„¤ì •ì´ í•„ìš”í•˜ì§€ë§Œ  
spring boot í”„ë¡œì íŠ¸ë¡œ ì´ë¯¸ ì˜ì¡´ì„± ì£¼ì…ì„ ì•„ê¹Œ ë‹¤ í–ˆìœ¼ë‹ˆ í• ê²Œ ì—†ë‹¤.  
ë‚˜ì¤‘ì— í•„ìš”í•œ ì˜ì¡´ì„±ì´ ìƒê¸¸ë•Œë§ˆë‹¤ ìˆ˜ì‹œë¡œ ì£¼ì…í•˜ë©´ ëœë‹¤.  
<br>
í›„ì— í•„ìš”í•œ ì‘ì—…ì´ì§€ë§Œ  
â­github ê³µìœ  ë’¤ plug inì— intellij ì¶”ê°€í•´ì•¼í•¨â­ ë§¤ìš° ì¤‘ìš”(ì´ê±¸ë¡œ ì˜¤ëŠ˜ ë‚ ë ¸ë‹¤)  

# 3. application.properties
```
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://EndPoint/DBëª…
spring.datasource.username=admin
spring.datasource.password=RDS Password
```
https://aws.amazon.com/console/ ì—ì„œ RDS - DBì •ë³´ì—ì„œ ì—”ë“œí¬ì¸íŠ¸ ë³µë¶™  

<br>
MyBatisë¥¼ ìœ„í•´ í•„ìš”í•œ ì„¤ì •  
(1) camelCase  
MyBatis ë³´ë‹¤ëŠ” ë­ ìë°”ì˜ ê´€í–‰ì— ë”°ë¥´ê¸° ìœ„í•´ í•„ìš”  
ì§€ë‚œë²ˆì— JPAë¡œ í…ŒìŠ¤íŠ¸ ê²¸ DBì—°ê²°, ê·¸ë ˆì´ë“¤ íŒŒì•…ì„ í–ˆì„ ë•Œ  
pascal caseë¡œ ì…ë ¥í•œ ì»¬ëŸ¼ ì´ë¦„ìœ¼ë¡œ í—›ê°ˆë ¸ë‹¤  
ìŠì§€ë§ì ìë°”ëŠ” ë¬´ì¡°ê±´ camel caseë‹¤ğŸ«  
`mybatis.configuration.map-underscore-to-camel-case=true` ì¶”ê°€  

<br>

(2) ë§¤í¼ ìœ„ì¹˜  
`com.project.smallBeginJava11.Mapper`ì— ë§¤í¼ ë„£ì–´ì¤„ ê²ƒì´ë‹¤.  
ê·¸ë ‡ì§€ë§Œ mybatis í´ë” ë‚´ì— mybatis ê´€ë ¨ xml íŒŒì¼ì´ ë‹¤ ìˆì„ ê²ƒì´ë¯€ë¡œ  
`mybatis.mapper-locations=classpath:mybatis/mapper/**/*.xml`  ë¥¼ ì¶”ê°€  
<br>
ì‘ì„±í•˜ë‹¤ë³´ë‹ˆ íŒ¨í‚¤ì§€ ì‘ì„±ë•Œ pascal case ì“´ê±¸ ë°œê²¬í–ˆë‹¤...  
í•œ ê±° ì—†ìœ¼ë‹ˆ ë‹¤ì‹œ ìƒì„± í–ˆë‹¤.  
![image](https://user-images.githubusercontent.com/86642180/147880433-efcc9aae-55cf-4cf3-8024-a15eef611431.png)

<br>

(3) ë§¤í•‘í•  ëª¨ë¸ íŒ¨í‚¤ì§€ ê²½ë¡œ  
`mybatis.type-aliases-package=com.project.smallBegin.Java11.Mapper`

<br>

í•„ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ íŒ¨í‚¤ì§€ ì„¤ì •ì´ í•„ìš”í•œ ì´ìœ   
```
    <select id="getAllCategory" resultType="Category">
        SELECT * FROM category;
    </select>
```
ê²°êµ­ mapper.xmlì€ DBì—ì„œ ë°ì´í„°ë¥¼ ê°ì²´í™” ì‹œí‚¨ ë’¤ resultTypeì— ì íŒ DTO(VO)ë¡œ ë°˜í™˜í•œë‹¤.  
ì´ë•Œ íŒ¨í‚¤ì§€ ê²½ë¡œê°€ ëª…ì‹œë˜ì§€ ì•Šìœ¼ë©´ ëª¨ë“  resultTypeì— íŒ¨í‚¤ì§€ ê²½ë¡œë¥¼  
ì „ë¶€ ëª…ì‹œí•´ì•¼ í•˜ê¸° ë•Œë¬¸  

<br>

```
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://smallbegin.chcql9nk99vx.ap-northeast-2.rds.amazonaws.com:3306/small_begin
spring.datasource.username=admin
spring.datasource.password=smallbegin2021

# path for packaged model (to short mybatis type)
mybatis.type-aliases-package=com.project.smallBegin.Java11.Mapper

# mapper.xml location
mybatis.mapper-locations=classpath:mybatis/mapper/**/*.xml

# camel case
mybatis.configuration.map-underscore-to-camel-case=true
```

<br>

# 4. íŒ¨í‚¤ì§€ ìƒì„±  
mapper, mybatis ë¨¼ì € ìƒì„±í•´ì¤€ë‹¤.  
ì•ˆê·¸ëŸ¬ë©´ application.properties ì„¤ì •ê³¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆ  
ê¹Œë¨¹ê¸° ì „ì— ì–¼ë¥¸ ë™ì¼í•˜ê²Œ ìƒì„±í•œë‹¤.  
ê±°ê¸°ì— controller, dto(domain), service, serviceImplê¹Œì§€ ìƒì„±í•œë‹¤.  
(1/4) mybatis-config.xml ì¶”ê°€í•¨
![image](https://user-images.githubusercontent.com/86642180/147881989-2838382e-5be7-4448-acf5-a417821512be.png)


<br>

# 5. DBì—°ê²° í™•ì¸
ì´í´ë¦½ìŠ¤ì—ì„œëŠ” ì½”ë“œ ì‘ì„± ë’¤ viewê¹Œì§€ ê°€ì ¸ì˜¤ëŠ” ê±¸ë¡œ í™•ì¸í–ˆìœ¼ë‚˜  
ì¸í…”ë¦¬ì œì´ëŠ” ìš°ì¸¡ Databaseì—ì„œ ì—°ê²° ì‰½ê²Œ í•  ìˆ˜ ìˆë‹¤.
![image](https://user-images.githubusercontent.com/86642180/147882099-a96c502f-d225-4d6b-84b1-3a9d1cc6b8e8.png)  
![image](https://user-images.githubusercontent.com/86642180/147882913-e389c7e9-6854-4ec0-9e41-0ad4b623a35e.png)  
MySQL ì„ íƒ
![image](https://user-images.githubusercontent.com/86642180/147882882-1b449016-3979-4aae-87da-259b28719b4e.png)  
Name ğŸ‘‰ ë§ˆìŒëŒ€ë¡œ ì…ë ¥  
Host ğŸ‘‰ ì—”ë“œí¬ì¸íŠ¸ ì…ë ¥  
User ğŸ‘‰ rds ì ‘ì† ì‹œ user  
Password ğŸ‘‰ rds ì ‘ì† ì‹œ ë¹„ë°€ë²ˆí˜¸  
Database ğŸ‘‰ ìŠ¤í‚¤ë§ˆ ëª…  

<br>

# 6. mybatis-config
mybatis ì´í•´ë¥¼ ìœ„í•œ ì°¸ê³  ë§í¬  
https://velog.io/@changyeonyoo/Mybatis%EB%9E%80-%EC%9E%A5%EC%A0%90-%ED%8A%B9%EC%A7%95-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8  
<br><br>

ê²°êµ­ mybatis-configëŠ” mybatis ì„¸íŒ…ì„ ì„¤ì •í•˜ëŠ” íŒŒì¼ì´ë‹¤.  
`<configuration>` íƒœê·¸ ì•ˆì— settings, properties, mappers, typeAliases ë“± íƒœê·¸ë¥¼ í†µí•´  
mybatis ì„¤ì •ì„ í•œë‹¤.
```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>
    <mappers>
        <mapper resource="CategoryMapper.xml"/>
    </mappers>
</configuration>
```
ì—¬ê¸°ì„œ `mapper`ëŠ” ì„¤ì •í•œ(ì•„ì§ì€ ì„¤ì •í•˜ì§€ ì•Šì•˜ì§€ë§Œ) mapperë“¤ì´ ì–´ë””ì— ìœ„ì¹˜í•˜ê³  ìˆëŠ”ì§€  
mybatis frameworkì—ê²Œ ì•Œë ¤ì£¼ëŠ” ê²ƒì´ë‹¤.  
ê°™ì€ ë””ë ‰í† ë¦¬ì— ìˆìœ¼ë‹ˆ íŒŒì¼ëª…ë§Œ ì‘ì„±í–ˆë‹¤.  
ë‚˜ì¤‘ì— ì‘ë™ì´ ì˜ ì•ˆë˜ë©´ mapper resourceë¥¼ í´ë˜ìŠ¤íŒ¨ìŠ¤ë¡œ ìˆ˜ì •í•˜ë©´ ë ê²ƒê°™ë‹¤.  

<br>
mybatis configuration ì •ë³´ëŠ”  
https://mybatis.org/mybatis-3/configuration.html#  

<br>

# 7. DTO
DTO = Data Transfer Object  
presentation layer, business layer, data access layer ê°ê° ê³„ì¸µì— ì†í•˜ì§€ ì•Šê³   
ê° ê³„ì¸µê°„ ë°ì´í„° êµí™˜ì„ ìœ„í•œ ì˜¤ë¸Œì íŠ¸ë‹¤.  
ì¦‰ ì–´ëŠ ê³„ì¸µì—ì„œë“  ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.  
ì¡°ê¸ˆ ë” ìì„¸í•œ ì„¤ëª…ì€ ë§í¬ ì°¸ì¡°  
https://velog.io/@dnwlsrla40/Spring-DTO%EC%9D%98-%EC%82%AC%EC%9A%A9-%EB%B2%94%EC%9C%84%EC%97%90-%EB%8C%80%ED%95%98%EC%97%AC-29i8iuxy  

<br>

```
package com.project.smallbeginjava11.DTO;

import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
public class Category {

    private int categoryCode;
    private String categoryColor;
    private String categoryName;

}
```
DTO í´ë˜ìŠ¤ ì•ˆì˜ ê°ê° ê°ì²´ë“¤ì„ ìº¡ìŠí™”í•´ì„œ ìŠ¤í”„ë§ë¶€íŠ¸ì˜ containerì— ë“¤ì–´ê°€ì•¼ ì˜ì¡´ì„±ì´ ì£¼ì…ëœë‹¤.  
ê·¸ëŸ¬ê¸° ìœ„í•´ì„œëŠ” getter, setterë„ í•„ìš”í•˜ê³   
DTO í´ë˜ìŠ¤ ì•ˆì˜ ë©¤ë²„ ë³€ìˆ˜ ê°’ ì„¤ì •ë„ í•´ì•¼ í•œë‹¤.  
(ì—†ìœ¼ë©´ ë‚˜ì¤‘ì— ë‹¤ë¥¸ ê³„ì¸µì—ì„œ DTO ì ‘ê·¼ í•´ë„ ë°ì´í„° ì œëŒ€ë¡œ ëª» ì–»ìœ¼ë‹ˆê¹Œ)  
`lombok`ë§Œ ìˆë‹¤ë©´ ì˜ˆì „ì— ì´í´ë¦½ìŠ¤ì—ì„œ getter, setter ìƒì„± ì²´í¬ë°•ìŠ¤ í´ë¦­ ì—†ì´  
ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì„¤ì •ì´ ê°€ëŠ¥í•˜ë‹¤.  
`@NoArgsConstructor` : íŒŒë¼ë¯¸í„° ì—†ëŠ” ê¸°ë³¸ ìƒì„±ì ìƒì„±  
`@AllArgsConstructor` : ëª¨ë“  í•„ë“œ ê°’ì„ ë°›ëŠ” ìƒì„±ì ìƒì„± (this)

<br>
<br>

ì´í›„ ì„¤ì •ì€ ë‹¤ìŒ í¬ìŠ¤íŠ¸ì— ì‘ì„±í•  ì˜ˆì •ì´ë‹¤.
