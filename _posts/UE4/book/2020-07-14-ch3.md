---
title:  "UE4 Chapter 3. ì›€ì§ì´ëŠ” ì•¡í„°ì˜ ì œì‘" 

categories:
  -  UE4 Lesson 2 
tags:
  - [Game Engine, UE4, Cpp]

toc: true
toc_sticky: true

date: 2020-07-14
last_modified_at: 2020-07-14
---

ì´ë“ìš°ë‹˜ì˜ ì±… **ì´ë“ìš°ì˜ ì–¸ë¦¬ì–¼ C++ ê²Œì„ ê°œë°œì˜ ì •ì„** ì„ ê³µë¶€í•˜ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
**ì–¸ë¦¬ì–¼ ì—”ì§„ ê³µì‹ ë¬¸ì„œ** <https://docs.unrealengine.com/ko/index.html>
{: .notice--warning}

# Chater 3. ì›€ì§ì´ëŠ” ì•¡í„°ì˜ ì œì‘

## ğŸ”” ë¡œê¹… í™˜ê²½ì˜ ì„¤ì •

- ë””ë²„ê¹…ì´ í¸í•˜ë„ë¡ ë¡œê¹… í™˜ê²½ êµ¬ì¶•

### ì¸¨ë ¥ ë¡œê·¸

- ì°½ - ê°œë°œì íˆ´ - ì¶œë ¥ë¡œê·¸ ë©”ë‰´ë¡œ ì¶œë ¥ë˜ëŠ” ë¡œê·¸ë“¤ í™•ì¸ ê°€ëŠ¥
  - log íŒŒì¼ë¡œ Saced/Logs í´ë”ì— ì €ì¥ë˜ê¸°ë„ í•œë‹¤.
- *ì¹´í…Œê³ ë¦¬*
  - ë¡œê·¸ë“¤ë„ ì¹´í…Œê³ ë¦¬ë¡œ ë¶„ë¥˜ê°€ ë˜ì–´ìˆë‹¤.
- *ë¡œê¹… ìˆ˜ì¤€*
  - ë©”ì„¸ì§€, ê²½ê³ , ì—ëŸ¬

#### ë¡œê·¸ ì¹´í…Œê³ ë¦¬ ì„ ì–¸í•˜ê¸°

ğŸ“œArenaBattle.h í”„ë¡œì íŠ¸ í—¤ë” íŒŒì¼

```cpp
DECLAUE_LOG_CATEGORY_EXTERN(ArenaBattle, Log, All);
```

ğŸ“œArenaBattle.cpp í”„ë¡œì íŠ¸ cpp íŒŒì¼

```cpp
DEFINE_LOG_CATEGORY_EXTERN(ArenaBattle);
```

#### ë¡œê·¸ ì‚¬ìš©

##### UE_LOG ì‚¬ìš©

> `UE_LOG`(ì¹´í…Œê³ ë¦¬, ë¡œê¹… ìˆ˜ì¤€, í˜•ì‹ ë¬¸ìì—´, ì¸ì...)

- `UE_LOG` ë§¤í¬ë¡œì´ë©° ë¡œê·¸ë¥¼ ì¶œë ¥í•œë‹¤.

ğŸ“œFountain.cpp

```cpp
void AFountain::BeginPlay()
{
    Super::BeginPlay();
    UE_LOG(ArenaBattle, Warning, TEXT("Actor Name : %s, ID : %d, Location X : %.3f"), *GetName(), ID, GetActorLocation().X);
}
```

- ê²Œì„ì´ ì‹œì‘ë˜ìë§ˆì ì²˜ìŒ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ì¸ `BeginPlay`ì´ë²¤íŠ¸ í•¨ìˆ˜ì— ì˜í•´ ê²Œì„ì´ ì‹œì‘ë˜ìë§ˆì ìœ„ ì¶œë ¥ ë©”ì„¸ì§€ê°€ ë¡œê·¸ì°½ì— ì°íˆê²Œ ëœë‹¤.
  - `BeginPlay`ëŠ” ìœ ë‹ˆí‹°ì—ì˜ Start() í•¨ìˆ˜ ê²©. ë°‘ì—ì„œ ë˜ ë‹¤ë£¸.
- [FString::printf ì°¸ê³ ](https://ansohxxn.github.io/gameengine/unreal-list/#fstringprintf)

##### ABLOG

> íŠ¹ì • ì¹´í…Œê³ ë¦¬ë¥¼ ê³ ì •ìœ¼ë¡œ í•˜ê³  ë¡œê·¸ë¥¼ ë‚¨ê¸¸ ë•Œ ì œì‘í•˜ëŠ” ë§¤í¬ë¡œ.

p103~104 ì°¸ê³ 


#### assertion

> C++ì˜ assertì™€ ë¹„ìŠ·. ë°˜ë“œì‹œ í™•ì¸í•˜ê³  ë„˜ê±°ì•„ì•¼ í•˜ëŠ” ì ê²€ ì½”ë“œ.

- `cheack`
- `ensure`
- ì—í”½ê²Œì„ì¦ˆ ëŸ°ì²˜ ì˜µì…˜ì—ì„œ <u>ë””ë²„ê¹…ì„ ìœ„í•œ í¸ì§‘ê¸° ê¸°í˜¸</u>ë¥¼ ì„ íƒí•œ í›„ ì„¤ì¹˜ë¥¼ ë¨¼ì € í•´ì•¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

<br>

## ğŸ”” ì•¡í„°ì˜ ì£¼ìš” ì´ë²¤íŠ¸ í•¨ìˆ˜

- [ì•¡í„°ì˜ ìƒëª… ì£¼ê¸° ì°¸ê³ ](https://docs.unrealengine.com/ko/Programming/UnrealArchitecture/Actors/ActorLifecycle/index.html)
- **BeginPlay**
  - ì•¡í„°ê°€ ê²Œì„ì— ì°¸ì—¬í•  ë•Œ ìë™ í˜¸ì¶œ
  - ìœ ë‹ˆí‹°ì˜ Start
- **Tick**
  - ë§¤ í”„ë ˆì„ë§ˆë‹¤ í˜¸ì¶œë¨
  - ìœ ë‹ˆí‹°ì˜ Update
- **EndPlay**
  - ì•¡í„°ê°€ ê²Œì„ì—ì„œ í‡´ì¥í•˜ì—¬ ë©”ëª¨ë¦¬ì—ì„œ ì†Œë©¸ë  ë•Œ ìë™ í˜¸ì¶œ

> ì•¡í„° í´ë˜ìŠ¤ì— ì´ ê°™ì€ ì´ë²¤íŠ¸ í•¨ìˆ˜ë“¤ì´ ê°€ìƒ í•¨ìˆ˜ `virtual`ë¡œ ì„ ì–¸ì´ ë˜ì–´ìˆë‹¤. ì•¡í„°ì˜ ìì‹ë“¤ì€ ì´ë¥¼ ìƒì† ë°›ì•„ ë°˜ë“œì‹œ ì˜¤ë²„ë¼ì´ë”© í•´ì•¼ í•œë‹¤.

ğŸ“œFountain.h

```cpp
virtual void BeginPlay() override;
virtual void Tick(float DeltaTime) override;
```

- í•¨ìˆ˜ ì‹¤í–‰ë§ˆë‹¤ ì•Œ ìˆ˜ ìˆë„ë¡ ë¡œê·¸ ì°ëŠ” ë°©ë²• p110

<br>

## ğŸ”” ì›€ì§ì´ëŠ” ì•¡í„° ì„¤ê³„ 

> `Tick` : ë§¤ í”„ë ˆì„ë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” ì´ë²¤íŠ¸ í•¨ìˆ˜.

### ì†ë„ ê°’ ë©¤ë²„ ë³€ìˆ˜ 

- ì†ë„ ê°’ì„ í‘œí˜„í•  ë©¤ë²„ ë³€ìˆ˜ `RotateSpeed` ì„ ì–¸í•´ì£¼ê¸°
- `Meta = (AllowPrivateAccess = true)`
  - `priavte` ì€ë‹‰ì„±ì„ ìœ ì§€í•˜ë‚˜ ì—ë””í„°ì—ì„œ í¸ì§‘í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í‚¤ì›Œë“œ

ğŸ“œFountain.h

```cpp
private:
	UPROPERTY(EditAnywhere, Category = Stat, Meta = (AllowPrivateAccess = true))
	float RotateSpeed;
```

### ì•¡í„°ë¥¼ Z ì¶•ìœ¼ë¡œ íšŒì „ì‹œí‚¤ê¸°

> ì–¸ë¦¬ì–¼ì—ì„œëŠ” ì¸ìˆ˜ë¥¼ (Yì¶•, Zì¶•, Xì¶•) ìˆœìœ¼ë¡œ ë„˜ê¸´ë‹¤. ì¦‰, ì¢Œìš° íšŒì „, ìƒí•˜ íšŒì „, ì •ë©´ íšŒì „ ì´ ìˆœì„œë¡œ.

- `AddActorLocalRotation` í•¨ìˆ˜
  - ì•¡í„°ë¥¼ ì¸ìˆ˜ë§Œí¼ ì¶”ê°€ë¡œ íšŒì „ì‹œí‚´.

ğŸ“œFountain.cpp

```cpp
AFountain::AFountain()
{
    ...
    RotateSpeed = 30.0f;
}

...

void AFountain::Tick(float DeltaTime)
{
	Super::Tick(DeltaTime);
    AddActorLocalRotation(FRotator(0.0f, RotateSpeed * DeltaTime, 0.0f));  // Z ì¶•ìœ¼ë¡œ 30ë„ * í”„ë ˆì„ë‹¹ ì‹œê°„ ë§Œí¼ íšŒì „
}
```


<br>

## ğŸ”” ìµœì¢… ì½”ë“œ

### ğŸ“œFountain.h

```cpp
// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "ArenaBattle.h"
#include "GameFramework/RotatingMovementComponent.h"
#include "GameFramework/Actor.h"
#include "Fountain.generated.h"

UCLASS()
class ARENABATTLE_API AFountain : public AActor
{
	GENERATED_BODY()
	
public:	
	// Sets default values for this actor's properties
	AFountain();

protected:
	// Called when the game starts or when spawned
	virtual void BeginPlay() override;
	virtual void EndPlay(const EEndPlayReason::Type EndPlayReason) override;
	virtual void PostInitializeComponents() override;

public:	
	// Called every frame
	virtual void Tick(float DeltaTime) override;

	UPROPERTY(VisibleAnywhere)
	UStaticMeshComponent *Body;

	UPROPERTY(VisibleAnywhere)
	UStaticMeshComponent *Water;

	UPROPERTY(VisibleAnywhere)
	UPointLightComponent *Light;

	UPROPERTY(VisibleAnywhere)
	UParticleSystemComponent *Splash;

	UPROPERTY(VisibleAnywhere)
	URotatingMovementComponent* Movement;

	UPROPERTY(EditAnywhere, Category=ID)
	int32 ID;

private:
	UPROPERTY(EditAnywhere, Category = Stat, Meta = (AllowPrivateAccess = true))
	float RotateSpeed;
};

```

### ğŸ“œFountain.cpp

```cpp
// Fill out your copyright notice in the Description page of Project Settings.

#include "Fountain.h"


// Sets default values
AFountain::AFountain()
{
 	// Set this actor to call Tick() every frame.  You can turn this off to improve performance if you don't need it.
	PrimaryActorTick.bCanEverTick = true;

	Body = CreateDefaultSubobject<UStaticMeshComponent>(TEXT("BODY"));
	Water = CreateDefaultSubobject<UStaticMeshComponent>(TEXT("WATER"));
	Light = CreateDefaultSubobject<UPointLightComponent>(TEXT("LIGHT"));
	Splash = CreateDefaultSubobject<UParticleSystemComponent>(TEXT("SPLASH"));
	Movement = CreateDefaultSubobject<URotatingMovementComponent>(TEXT("MOVEMENT"));

	RootComponent = Body;
	Water->SetupAttachment(Body);
	Light->SetupAttachment(Body);
	Splash->SetupAttachment(Body);

	Water->SetRelativeLocation(FVector(0.0f, 0.0f, 135.0f));
	Light->SetRelativeLocation(FVector(0.0f, 0.0f, 195.0f));
	Splash->SetRelativeLocation(FVector(0.0f, 0.0f, 195.0f));

	static ConstructorHelpers::FObjectFinder<UStaticMesh> SM_BODY(TEXT("/Game/InfinityBladeGrassLands/Environments/Plains/Env_Plains_Ruins/StaticMesh/SM_Plains_Castle_Fountain_01.SM_Plains_Castle_Fountain_01"));

	if (SM_BODY.Succeeded())
	{
		Body->SetStaticMesh(SM_BODY.Object);
	}

	static ConstructorHelpers::FObjectFinder<UStaticMesh> SM_WATER(TEXT("/Game/InfinityBladeGrassLands/Effects/FX_Meshes/Env/SM_Plains_Fountain_02.SM_Plains_Fountain_02"));
	
	if (SM_WATER.Succeeded())
	{
		Water->SetStaticMesh(SM_WATER.Object);
	}

	static ConstructorHelpers::FObjectFinder<UParticleSystem> PS_SPLASH(TEXT("/Game/InfinityBladeGrassLands/Effects/FX_Ambient/Water/P_Water_Fountain_Splash_Base_01.P_Water_Fountain_Splash_Base_01"));

	if (PS_SPLASH.Succeeded())
	{
		Splash->SetTemplate(PS_SPLASH.Object);
	}

	RotateSpeed = 30.0f;
	Movement->RotationRate = FRotator(0.0f, RotateSpeed, 0.0f);
}

// Called when the game starts or when spawned
void AFountain::BeginPlay()
{
	Super::BeginPlay();

	ABLOG_S(Warning);
	ABLOG(Warning, TEXT("Actor Name : %s, ID : %d, Location X : %.3f"), *GetName(), ID, GetActorLocation().X);
}

void AFountain::EndPlay(const EEndPlayReason::Type EndPlayReason)
{
	Super::EndPlay(EndPlayReason);
	ABLOG_S(Warning);
}

void AFountain::PostInitializeComponents()
{
	Super::PostInitializeComponents();
	ABLOG_S(Warning);
}

// Called every frame
void AFountain::Tick(float DeltaTime)
{
	Super::Tick(DeltaTime);
}

```

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}