---
title:  "[Python] Pandasë¥¼ í™œìš©í•´ ê²°ì¸¡ì¹˜ ë³´ê°„(interpolate) í•˜ê¸°"
layout: single

categories: "Python"
tags: 
    - Python
    - Pandas

toc: true
toc_sticky: true
toc_label : "ëª©ì°¨"
toc_icon: "bars"
---

***

>íƒìƒ‰ì  ë°ì´í„° ë¶„ì„(Exploratory Data Analysis)ë¥¼ ì§„í–‰í•˜ë‹¤ë³´ë©´, ê²°ì¸¡ì¹˜ë¥¼ í”íˆ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
ì´ë•Œ, ê²°ì¸¡ì¹˜ë¥¼ <u>ë²„ë¦´ ê²ƒì¸ì§€, ì±„ìš¸ ê²ƒì¸ì§€</u>ì— ë”°ë¼ ë¶„ì„ ê²°ê³¼ê°€ ë‹¬ë¼ì§‘ë‹ˆë‹¤.<br>
<br>ê²°ì¸¡ì¹˜ê°€ ë§¤ìš° ì ì€ ê²½ìš°ëŠ” ë²„ë ¤ë„(drop) ê²°ê³¼ì— í° ì˜í–¥ì„ ì£¼ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ê²°ì¸¡ì¹˜ ì–‘ì´ ë§ë‹¤ë©´ í•¨ë¶€ë¡œ ë²„ë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br>
<br>ì´ëŸ° ìƒí™©ì—ì„  ê²°ì¸¡ì¹˜ë¥¼ íŠ¹ì • ê°’ìœ¼ë¡œ ì±„ì›Œì£¼ì–´ì•¼ í•˜ëŠ”ë°ìš”, ê²°ì¸¡ì¹˜ë¥¼ ì±„ìš°ëŠ” ë°©ë²•ì—” Pandas ì—ì„œ ì œê³µí•˜ëŠ” <u>fillna ë©”ì„œë“œì™€ interpolate ë©”ì„œë“œ</u>ë¥¼ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

# ê²°ì¸¡ì¹˜ë¥¼ ì±„ìš°ëŠ” ë°©ë²•
- fillna : ê²°ì¸¡ì¹˜ë¥¼ íŠ¹ì •ì˜ ë™ì¼ ê°’ìœ¼ë¡œ ì±„ìš°ëŠ” ë°©ì‹
- interpolate : ì‹¤ì¸¡ê°’ê³¼ ì‹¤ì¸¡ê°’ ì‚¬ì´ì˜ ê²°ì¸¡ê°’ì„ 'ê·¸ë¼ë°ì´ì…˜' ê¸°ë²•ìœ¼ë¡œ ì¡°ê¸ˆì”© ë³€í™”ì‹œì¼œê°€ë©´ì„œ ë¶€ë“œëŸ½ê²Œ ì±„ì›Œë‚˜ê°€ëŠ” ë°©ë²•

## Fillna ë¡œ ê²°ì¸¡ì¹˜ ì±„ìš°ê¸°
- **íŠ¹ì •ì˜ ë™ì¼ ê°’**ìœ¼ë¡œ ì±„ìš°ëŠ” ë°©ì‹ 
- ì›í•˜ëŠ” ê°’ìœ¼ë¡œ ë³€ê²½í•˜ëŠ” ë§¤ì„œë“œ

## Interpolate ë¡œ ìŠ¤ë§ˆíŠ¸í•˜ê²Œ ê²°ì¸¡ì¹˜ ì±„ìš°ê¸°
- ì•, ë’¤ ê°’ì„ í†µí•˜ì—¬ ìœ ì¶”í•˜ì—¬ ì¢€ ë” ìŠ¤ë§ˆíŠ¸í•˜ê²Œ ê²°ì¸¡ì¹˜ë¥¼ ì±„ìš¸ ìˆ˜ ìˆìŒ (ì‹œê³„ì—´ ë°ì´í„°ì— ì í•©)
- ì‹¤ì¸¡ê°’ê³¼ ì‹¤ì¸¡ê°’ ì‚¬ì´ì˜ ê²°ì¸¡ê°’ì„ ë§ˆì¹˜ 'ê·¸ë¼ë°ì´ì…˜ (gradation)' ê¸°ë²•ìœ¼ë¡œ ì¡°ê¸ˆì”© ë³€í™”ì‹œì¼œê°€ë©° ì±„ì›Œë‚˜ê°€ëŠ” ë°©ë²•

<br>

# ê²°ì¸¡ì¹˜ ë³´ê°„í•˜ëŠ” ë°©ë²•
ğŸ‘‰ ê¸°ë³¸ êµ¬ì¡° : ```df.interpolate()```

## ì£¼ìš” íŒŒë¼ë¯¸í„°
- ```method``` : ë³´ê°„ ê¸°ìˆ  ì§€ì • (default: linear)
  - ```linear``` : ì¸ë±ìŠ¤ ê°’ì„ ë¬´ì‹œí•˜ê³  ê°’ì„ ë™ì¼í•œ ê°„ê²©ìœ¼ë¡œ ì²˜ë¦¬ (MultiIndexes ì§€ì›í•˜ëŠ” ìœ ì¼í•œ ë°©ë²•)
  - ```time``` : ì£¼ì–´ì§„ ê°„ê²© ê¸¸ì´ë¥¼ ë³´ê°„í•˜ê¸° ìœ„í•´ ì¼ì¼ ë° ê³ í•´ìƒë„ ë°ì´í„°ì—ì„œ ì‘ë™
  - ```index```, ```values``` : ì¸ë±ìŠ¤ì˜ ì‹¤ì œ ìˆ«ì ê°’ì„ ì‚¬ìš©
  - ```pad``` : ê¸°ì¡´ ê°’ ì‚¬ìš© 
  - ```nearest```, ```zero```, ```slinear```, ```quadratic```, ```cubic```, ```spline```, ```barycentric```, ```polynomial``` 
    - cipy.interpolate.interp1dë¡œ ì „ë‹¬ë¨
    - ì´ ë°©ë²•ì€ ìƒ‰ì¸ì˜ ìˆ«ì ê°’ì„ ì‚¬ìš©
    - ```polynomial```ê³¼ ```spline``` ëª¨ë‘ ì°¨ìˆ˜ (int)ë„ ì§€ì •í•´ì•¼ í•¨
      - (ì˜ˆ : df.interpolate (method='polynomial', order=5).
- ```axis``` : í•¨ê»˜ ë³´ê°„í•  ì¶• 
  - ì‹œë¦¬ì¦ˆì˜ ê²½ìš° ì‚¬ìš©ë˜ì§€ ì•Šìœ¼ë©°, ê¸°ë³¸ê°’ì€ 0
- ```limit``` : ì±„ìš¸ ì—°ì† NaN ì˜ ìµœëŒ€ ìˆ˜ (0ë³´ë‹¤ ì»¤ì•¼ í•¨)
- ```inplace``` : bool, default False 
  - ê°€ëŠ¥í•œ ê²½ìš° ì œìë¦¬ì—ì„œ ë°ì´í„° ì—…ë°ì´íŠ¸ ê¶Œì¥
- ```limit_direction``` : NaN ì±„ìš¸ ë°©í–¥ ì„¤ì •
  - 'forward', 'backward', 'both'
- ```limit_area``` : ì œí•œí•˜ì—¬ NaN ì±„ìš¸ ìˆ˜ ìˆìŒ
  - None, 'inside', 'outside' (default None)
  - ```inside``` : ìœ íš¨í•œ ê°’ìœ¼ë¡œ ë‘˜ëŸ¬ì‹¸ì¸ NaN ë§Œ ì±„ì›€ (ë³´ê°„)
  - ```outside``` : ìœ íš¨ ê°’ì„ ì´ˆê³¼í•˜ëŠ” NaN ë§Œ ì±„ì›€ (ì™¸ì‚½)
- ```downcast``` : 'infer' or None
  - ê°€ëŠ¥í•œ ê²½ìš° ë‹¤ìš´ìºìŠ¤íŠ¸ ê¶Œì¥

<br>

# ì‹¤ìŠµìœ¼ë¡œ ë°°ìš°ê¸°
## ë°ì´í„° ì •ë³´
- Dataset : Kaggle íƒ€ì´íƒ€ë‹‰ - train.csv
- [ğŸ‘‰ ë°ì´í„° ë³´ëŸ¬ê°€ê¸°](https://www.kaggle.com/competitions/titanic/data)

|	|Survived|	Pclass|	Name|	Sex|	Age	|SibSp|	Parch|	Ticket|	Fare|	Cabin|	Embarked|
|:--|:--|:--|:--|:--|:--|:--|:--|:--|:--|:--|:--|
|PassengerId	||||||||||||										
|1|	0|	3	|Braund, Mr. Owen Harris|	male|	22.0|	1|	0|	A/5 21171|	7.2500	|NaN|	S|
|2	|1|	1	|Cumings, Mrs. John Bradley (Florence Briggs Th...	|female	|38.0|	1	|0|	PC 17599	|71.2833|	C85|	C|
|3|	1|	3|	Heikkinen, Miss. Laina	|female|	26.0|	0	|0	|STON/O2.| 3101282	|7.9250	|NaN|	S|
|4|	1|	1|	Futrelle, Mrs. Jacques Heath (Lily May Peel)	|female|	35.0|	1	|0	|113803	|53.1000|	C123	|S|
|5	|0|	3	|Allen, Mr. William Henry|	male|	35.0|	0|	0|	373450	|8.0500	|NaN|	S|

## ë‚˜ì´(Age) ê²°ì¸¡ì¹˜ ë³´ê°„í•˜ê¸°

```python
train["Age"].isnull().sum() # 177 ê°œì˜ ê²°ì¸¡ì¹˜ í™•ì¸

# ìƒˆë¡œìš´ ì»¬ëŸ¼ "Age_fill_linear" ì— "Age" ê²°ì¸¡ì¹˜ ë³´ê°„í•˜ê¸°
train["Age_fill_linear"] = train["Age"].interpolate(method="linear")
train["Age_fill_values"] = train["Age"].interpolate(method="values")
train["Age_fill_pad"] = train["Age"].interpolate(method="pad")

train[["Age", "Age_fill_linear", "Age_fill_values", "Age_fill_pad"]].head(10)
```

|	|Age	|Age_fill_linear|	Age_fill_values|	Age_fill_pad|
|:--|:--|:--|:--|:--|
|PassengerId|||||				
|1	|22.0|	22.0|	22.0|	22.0|
|2	|38.0|	38.0|	38.0|	38.0|
|3	|26.0|	26.0|	26.0|	26.0|
|4	|35.0|	35.0|	35.0|	35.0|
|5	|35.0|	35.0|	35.0|	35.0|
|6	|NaN|	44.5|	44.5|	35.0|
|7	|54.0|	54.0|	54.0|	54.0|
|8	|2.0|	2.0|	2.0|	2.0|
|9	|27.0|	27.0|	27.0|	27.0|
|10|	14.0|	14.0|	14.0|	14.0|


```python
# 0 ì¶œë ¥ => linear, values ë™ì¼í•œ ê°’ìœ¼ë¡œ ê²°ì¸¡ì¹˜ ì±„ì›Œ ì§
((train["Age_fill_linear"] == train["Age_fill_values"]) == False).sum()
```

## ì •ë¦¬
> method ê°€ ```linear```, ```values``` ë¡œ ê²°ì¸¡ì¹˜ë¥¼ ë³´ê°„í•˜ë©´ ê°’ì´ ë™ì¼í•˜ë‹¤.<br>
```pad``` ë¡œ ê²°ì¸¡ì¹˜ë¥¼ ë³´ê°„í•˜ë©´, NaN ê°’ ì´ì „ì— ìˆë˜ 'ê¸°ì¡´ ê°’'ìœ¼ë¡œ ì±„ì›Œì§„ë‹¤. 

<br>

# Reference 
- [[í…Œë””ë…¸íŠ¸] - Pandasë¥¼ í™œìš©í•œ ê²°ì¸¡ì¹˜ ë³´ê°„(interpolation) í•˜ê¸° â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸](https://teddylee777.github.io/pandas/pandas-interpolation)
- [[Wikidocs] Pandas ì™„ì „ì •ë³µ ì‹œë¦¬ì¦ˆ 2í¸ - 06-04. ê²°ì¸¡ê°’ ë³€ê²½](https://wikidocs.net/153209)
- [[R, Python ë¶„ì„ê³¼ í”„ë¡œê·¸ë˜ë°ì˜ ì¹œêµ¬ (by R Friend) - [Python pandas] ê²°ì¸¡ê°’ ë³´ê°„í•˜ê¸° (interpolation of missing values) : interpolate(), interpolate(method='time'), interpolate(method='values')]](https://rfriend.tistory.com/264)
- [[Pandas ê³µì‹ë¬¸ì„œ] - pandas.Series.interpolate](https://pandas.pydata.org/docs/reference/api/pandas.Series.interpolate.html)
- [[Pandas ê³µì‹ë¬¸ì„œ] - pandas.Series.fillna](https://pandas.pydata.org/docs/reference/api/pandas.Series.fillna.html)

<br>

