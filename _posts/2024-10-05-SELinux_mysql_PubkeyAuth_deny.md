---
title: "[MySQL] SElinux λ΅ μΈν•΄ mysql κ³„μ •μ κ³µκ°ν‚¤ μ ‘μ†μ΄ μ°¨λ‹¨λλ” ν„μƒ"
excerpt: "SElinuxλ΅ μΈν•΄ mysql κ³„μ •μ κ³µκ°ν‚¤ μ ‘μ†μ΄ μ°¨λ‹¨λλ” ν„μƒμ΄ μμ–΄ κ³µμ ν•©λ‹λ‹¤."
#layout: archive
categories:
 - Mysql
tags:
  - [mysql, mariadb]
#permalink: mysql-architecture
toc: true
toc_sticky: true
date: 2024-10-05
last_modified_at: 2024-10-05
comments: true
---

### βοΈmysql μ„λ²„λ¥Ό ν¨μ¤μ›λ“ μΈμ¦μ—†μ΄ SSH ν‚¤λ΅ μ ‘κ·Όν•κΈ°
--- 
mysql μ„λ²„μ μ ‘κ·Όμ„ μ©μ΄ν•κ² ν•κΈ° μ„ν•΄ λ³΄ν†µ μ°λ¦¬λ” SSH ν‚¤ μΈμ¦ λ°©μ‹μ„ μ„¤μ •ν•μ—¬ μ ‘κ·Όν•©λ‹λ‹¤. λ€κ°•μ λ£¨ν‹΄μ„ κ·Έλ¦ΌμΌλ΅ λ³΄λ©΄ μ΄λ ‡μµλ‹λ‹¤.

![SSH ν‚¤ μΈμ¦ λ°©μ‹ μ„¤μ •](https://github.com/user-attachments/assets/37af50d5-1717-4781-8332-1ee42f3f8ed4)
[κ·Έλ¦Ό1] SSH ν‚¤ μΈμ¦ λ°©μ‹ μ„¤μ •

#### 1. SSH ν‚¤ μƒμ„±

λ¨Όμ €, ν΄λΌμ΄μ–ΈνΈμ—μ„ ssh-keygen λ…λ Ήμ„ ν†µν•΄ κ³µκ°ν‚¤μ™€ κ°μΈν‚¤λ¥Ό μƒμ„±ν•©λ‹λ‹¤. μ΄λ• κ³µκ°ν‚¤λ” .pub νμΌλ΅, κ°μΈν‚¤λ” id_rsaλΌλ” νμΌλ΅ μƒμ„±λ©λ‹λ‹¤.

{% include codeHeader.html name="SSH ν‚¤ μƒμ„±" %}
```bash
ssh-keygen -t rsa
```
<br>

#### 2. κ³µκ°ν‚¤λ¥Ό μ„λ²„μ— λ³µμ‚¬

ν΄λΌμ΄μ–ΈνΈμ—μ„ μƒμ„±λ κ³µκ°ν‚¤λ¥Ό μ„λ²„μ— μ „λ‹¬ν•΄μ•Ό ν•©λ‹λ‹¤. μ΄λ¥Ό μ„ν•΄ ssh-copy-id λ…λ Ήμ„ μ‚¬μ©ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ κ³µκ°ν‚¤λ¥Ό μ„λ²„μ— λ³µμ‚¬ν•©λ‹λ‹¤. κ³µκ°ν‚¤λ” μ„λ²„μ ~/.ssh/authorized_keys νμΌμ— μ €μ¥λλ©°, μ΄ νμΌμ„ ν†µν•΄ μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ μΈμ¦μ„ μ²λ¦¬ν•©λ‹λ‹¤.

{% include codeHeader.html name="ssh-copy-id λ΅ κ³µκ°ν‚¤λ¥Ό μ„λ²„μ— λ³µμ‚¬" %}
```bash
ssh-copy-id μ‚¬μ©μλ…@μ„λ²„_IP
```
<br>

κ·Έλ°λ° μ„μ λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•κΈ° μ„ν•΄μ„λ” ν¨μ¤μ›λ“κ°€ ν•„μ”ν•κΈ° λ•λ¬Έμ— λ³΄μ•μƒμ μ΄μ λ΅ ν¨μ¤μ›λ“ μ—†μ΄ κ³„μ •κ³Ό ν™λ””λ ‰ν† λ¦¬λ§ μμ–΄μ•Ό ν•λ‹¤λ©΄ ν΄λΌμ΄μ–ΈνΈμ κ³µκ°ν‚¤ νμΌ λ‚΄μ©μ„ κ·Έλ€λ΅ λ³µμ‚¬ν•΄ μ„λ²„μ authorized_keys νμΌμ— λ¶™μ—¬λ„£μ–΄λ„ λ©λ‹λ‹¤.

{% include codeHeader.html name="id_rsa.pub λ΅ κ³µκ°ν‚¤λ¥Ό μ„λ²„μ— λ³µμ‚¬" %}
```bash
#ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‘μ—…
RESULT=`cat ~/.ssh/id_rsa.pub`
echo ${RESULT}

#μ„μ κ²°κ³Όλ¥Ό λ³µμ‚¬ν•΄μ„ μ„λ²„μ—μ„ μ‘μ—…
#${RESULT} κ°’μ„ λ¶™μ—¬λ„£κ³  μ €μ¥(:wq)
vi ~/.ssh/authorized_keys

#authorized_keys κ¶ν•μ΅°μ •
chmod 600 ~/.ssh/authorized_keys
```
<br>

#### 3. μ„λ²„μ—μ„ κ³µκ°ν‚¤ μΈμ¦ μ„¤μ •

μ„λ²„μ—μ„ ν•  μ‘μ—…μΌλ΅ /etc/ssh/sshd_config νμΌμ—μ„ κ³µκ°ν‚¤ μΈμ¦μ„ ν™μ„±ν™”ν•΄μ•Ό ν•©λ‹λ‹¤. ν•΄λ‹Ή μ„¤μ •μ„ ν†µν•΄ μ„λ²„λ” κ³µκ°ν‚¤λ¥Ό κΈ°λ°μΌλ΅ μ—°κ²°ν•  μ μκ² λ©λ‹λ‹¤. μ„¤μ •μ΄ μ™„λ£λλ©΄ SSH μ„λ²„λ¥Ό μ¬μ‹μ‘ν•©λ‹λ‹¤.

{% include codeHeader.html name="μ„λ²„μ—μ„ κ³µκ°ν‚¤ μΈμ¦ μ„¤μ •" %}
```bash
#μ„λ²„μ—μ„ μ‘μ—…
sudo vi /etc/ssh/sshd_config

#μ•„λ λ‘ν•­λ©μ„ μ°Ύμ•„ μ„¤μ •
PasswordAuthentication no #ν¨μ¤μ›λ“ μ ‘κ·Όμ„ ν—μ©ν• κ±΄μ§€ μ„¤μ •(Optional)
PubkeyAuthentication yes

#SSH μ„λΉ„μ¤λ¥Ό μ¬μ‹μ‘
sudo systemctl restart sshd

```
<br>

#### 4. ν¨μ¤μ›λ“ μ—†μ΄ μ ‘μ†

μ΄μ  ν΄λΌμ΄μ–ΈνΈλ” ν¨μ¤μ›λ“ μ—†μ΄ SSH μ ‘μ†ν•  μ μμµλ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” κ°μΈν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ μ„λ²„μ— μΈμ¦ μ”μ²­μ„ λ³΄λ‚΄κ³ , μ„λ²„λ” λ―Έλ¦¬ μ €μ¥λ κ³µκ°ν‚¤λ΅ μ΄ μ”μ²­μ„ κ²€μ¦ν•μ—¬ μ ‘μ†μ„ ν—μ©ν•©λ‹λ‹¤.

{% include codeHeader.html name="ν¨μ¤μ›λ“ μ—†μ΄ μ ‘μ†" %}
```bash
#ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‘μ—…
ssh μ‚¬μ©μλ…@μ„λ²„_IP
```

<br>

### β“mysql μ μ €λ§ SSH ν‚¤ μ ‘κ·Όμ΄ μ•λλ‹¤?
---

Rocky8.8 ν™κ²½μ—μ„ mysql κ³„μ •μ— μ‰½κ² μ ‘κ·Όν•κΈ° μ„ν•΄ κ³µκ°ν‚¤λ¥Ό κ° μ„λ²„λ“¤μ authorized_keys μ— λ„£κ³  SSH ν‚¤ μΈμ¦μΌλ΅ μ—°κ²°μ„ μ‹λ„ν–μ§€λ§ κ³„μ†ν•΄μ„ ν¨μ¤μ›λ“λ¥Ό μΈμ¦ν•λΌλ” λ¬Έκµ¬κ°€ λ°μƒν•μ€μµλ‹λ‹¤. κ·Έλ¦¬κ³  μ‹ κΈ°ν• κ²ƒμ€ μ λ… mysql μ μ €λ΅ μ—°κ²°μ„ λ§ΊμΌλ ¤κ³  ν• λ•μ—λ§ SSH ν‚¤ μ ‘κ·Όμ΄ λ¶κ°€ν–μµλ‹λ‹¤. μ΅°κΈλ” μμ„Έν μ‚΄ν΄λ³΄κΈ° μ„ν•΄ ssh μ ‘μ† μ‹ -v(verbose) μµμ…μ„ μ£Όμ–΄ λ‹¤λ¥Έ κ³„μ •κ³Όμ μ°¨μ΄λ¥Ό ν™•μΈν•΄λ³΄μ•μµλ‹λ‹¤.




<br/>




### π“ μ°Έκ³ μλ£
---
- [~/.ssh/authorized_keys μ— public key λ¥Ό μ¶”κ°€ν–μΌλ‚ μλ™ λ΅κ·ΈμΈμ΄ μ• λ¨](https://www.lesstif.com/system-admin/ssh-authorized_keys-public-key-17105307.html)

<br/>
---

{% assign posts = site.categories.Mysql %}
{% for post in posts %} {% include archive-single2.html type=page.entries_layout %} {% endfor %}