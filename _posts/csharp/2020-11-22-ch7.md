---
title:  "Chapter 7. Text RPG 2" 

categories:
  -  C Sharp
tags:
  - [Programming, C Sharp]

toc: true
toc_sticky: true

date: 2020-11-22
last_modified_at: 2020-11-22
---

ì¸í”„ëŸ°ì— ìˆëŠ” Rookissë‹˜ì˜ ê°•ì˜ **Part1: C# ê¸°ì´ˆ í”„ë¡œê·¸ë˜ë° ì…ë¬¸** ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
{: .notice--warning}


## ğŸ‘©ğŸ¼ í”Œë ˆì´ì–´ ìƒì„±

### ğŸ“œPlayer.cs

```c#
using System;
using System.Collections.Generic;
using System.Text;

namespace CSharp
{
    public enum PlayerType
    {
        None = 0,
        Knight = 1,
        Archer = 2,
        Mage = 3
    }

    class Player
    {
        protected int hp = 0;
        protected int attack = 0;
        protected PlayerType type = PlayerType.None;

        protected Player(PlayerType type)
        {
            this.type = type;
        }

        public void SetInfo(int hp, int attack)
        {
            this.hp = hp;
            this.attack = attack;
        }

        public int GetHP() { return hp; }
        public int GetAttack() { return attack; }
        public PlayerType GetPlayerType() { return type; }
    }

    class Knight : Player
    {
        public Knight() : base(PlayerType.Knight)
        {
            SetInfo(100, 10);
        }
    }

    class Archer : Player
    {
        public Archer() : base(PlayerType.Archer)
        {
            SetInfo(75, 12);
        }
    }

    class Mage : Player
    {
        public Mage() : base(PlayerType.Mage)
        {
            SetInfo(50, 15);
        }
    }
}
```

- C# ì—ì„œëŠ” í—¤ë” íŒŒì¼ì„ ì¸í´ë£¨ë”©í•  í•„ìš”ê°€ ì—†ë‹¤. 
  - C++ê³¼ ë‹¬ë¦¬ C#ì—ì„œëŠ” ë™ì¼í•œ `namespace`ë¥¼ ê°€ì§„ íŒŒì¼ë“¤ì„ ì•Œì•„ì„œ ê°™ì€ í”„ë¡œì íŠ¸ ë‚´ì—ì„œ ì°¾ì•„ì¤€ë‹¤.
  - ë”°ë¼ì„œ `#include "Player.cs"` í•  í•„ìš”ê°€ ì—†ë‹¤.
- ë¶€ëª¨ì¸ `Player` í´ë˜ìŠ¤ëŠ” ë‹¨ì§€ ì—¬ëŸ¬ ì§ì—…ì˜ ê³µí†µì ì¸ ìš”ì†Œë“¤ì„ ëª¨ì•„ë‘ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•  ê²ƒì´ê¸° ë•Œë¬¸ì— `Player` íƒ€ì…ì˜ ê°ì²´ëŠ” ì™¸ë¶€ì—ì„œ ìƒì„±í•˜ì§€ ëª» í•˜ë„ë¡(ì“¸ëª¨ ì—†ìœ¼ë‹ˆê¹Œ) ìƒì„±ìëŠ” `protected`ë¡œ ì ‘ê·¼ ì œí•œí•´ë‘ì—ˆë‹¤.
- ë°˜ë©´ ìì‹ í´ë˜ìŠ¤ë“¤ì€ ì§ì ‘ ì™¸ë¶€ì—ì„œ ê°ì²´ë¡œ ìƒì„±í•  ê²ƒì´ê¸° ë•Œë¬¸ì— ìƒì„±ìë¥¼ `public`ìœ¼ë¡œ í•´ë‘”ë‹¤.

<br>

## ğŸ‘©ğŸ¼ ëª¬ìŠ¤í„° ìƒì„±

- ğŸ“œCreature
  - ğŸ“œPlayer
    - ğŸ“œKnight
    - ğŸ“œArcher
    - ğŸ“œMage
  - ğŸ“œMonster
    - ğŸ“œSlime
    - ğŸ“œOrc
    - ğŸ“œSkeleton

### ğŸ“œCreature.cs

> ğŸ“œPlayer, ğŸ“œMonster ì˜ ë¶€ëª¨ í´ë˜ìŠ¤ë¡œ, í”Œë ˆì´ì–´ì™€ ëª¬ìŠ¤í„°ê°€ ê°€ì§€ëŠ” ê³µí†µì ì¸ ì†ì„±ê³¼ ê¸°ëŠ¥ë“¤ì„ ëª¨ì•„ë‘ì—ˆë‹¤. 

```c#
using System;
using System.Collections.Generic;
using System.Text;

namespace CSharp
{
    public enum CreatureType
    {
        None,
        Player = 1,
        Monster = 2
    }

    class Creature
    {
        CreatureType type;  // private
        protected int hp = 0;
        protected int attack = 0;

        protected Creature(CreatureType type)
        {
            this.type = type;
        }

        public void SetInfo(int hp, int attack)
        {
            this.hp = hp;
            this.attack = attack;
        }

        public int GetHP() { return hp; }
        public int GetAttack() { return attack; }

        public bool IsDead() { return hp <= 0; }

        public void OnDamaged(int damage)
        {
            hp -= damage;
            if (hp < 0)
                hp = 0;
        }
    }
}
```

<br>

### ğŸ“œPlayer.cs

```c#
using System;
using System.Collections.Generic;
using System.Text;

namespace CSharp
{
    public enum PlayerType
    {
        None = 0,
        Knight = 1,
        Archer = 2,
        Mage = 3
    }

    class Player : Creature
    {
        protected PlayerType type = PlayerType.None;

        protected Player(PlayerType type) : base(CreatureType.Player)
        {
            this.type = type;
        }

        public PlayerType GetPlayerType() { return type; }
    }

    class Knight : Player
    {
        public Knight() : base(PlayerType.Knight)
        {
            SetInfo(100, 10);
        }
    }

    class Archer : Player
    {
        public Archer() : base(PlayerType.Archer)
        {
            SetInfo(75, 12);
        }
    }

    class Mage : Player
    {
        public Mage() : base(PlayerType.Mage)
        {
            SetInfo(50, 15);
        }
    }
}

```

<br>

### ğŸ“œMonster.cs

```c#
using System;
using System.Collections.Generic;
using System.Text;

namespace CSharp
{
    public enum MonsterType
    {
        None = 0,
        Slime = 1,
        Orc = 2,
        Skeleton = 3
    }

    class Monster : Creature
    {
        protected MonsterType type = MonsterType.None;

        protected Monster(MonsterType type) : base(CreatureType.Monster)
        {
            this.type = type;
        }

        public MonsterType GetMonsterType() { return type; }
    }

    class Slime : Monster
    {
        public Slime() : base(MonsterType.Slime)
        {
            SetInfo(10, 1);
        }
    }

    class Orc : Monster
    {
        public Orc() : base(MonsterType.Orc)
        {
            SetInfo(20, 2);
        }
    }

    class Skeleton : Monster
    {
        public Skeleton() : base(MonsterType.Skeleton)
        {
            SetInfo(15, 5);
        }
    }
}

```

<br>

## ğŸ‘©ğŸ¼ ê²Œì„ ì§„í–‰

- ğŸ“œGame.cs ğŸ‘‰ ê²Œì„ ë¡œì§ 
- ğŸ“œProgram.cs ğŸ‘‰ ë©”ì¸ í•¨ìˆ˜. ë¬´í•œ ë£¨í”„ë¡œ ê²Œì„ ë¡œì§ ì‹¤í–‰. 

### ğŸ“œGame.cs

```c#
using System;
using System.Collections.Generic;
using System.Text;

namespace CSharp
{
    public enum GameMode
    {
        None,
        Lobby,
        Town,
        Field
    }

    class Game
    {
        private GameMode mode = GameMode.Lobby;
        private Player player = null;
        private Monster monster = null; 
        private Random rand = new Random();

        public void Process()
        {
            switch(mode)
            {
                case GameMode.Lobby:
                    ProcessLobby();
                    break;
                case GameMode.Town:
                    ProcessTown();
                    break;
                case GameMode.Field:
                    ProcessField();
                    break;
            }
        }

        private void ProcessLobby()
        {
            Console.WriteLine("ì§ì—…ì„ ì„ íƒí•˜ì„¸ìš”");
            Console.WriteLine("[1] ê¸°ì‚¬");
            Console.WriteLine("[2] ê¶ìˆ˜");
            Console.WriteLine("[3] ë²•ì‚¬");

            string input = Console.ReadLine();

            switch (input)
            {
                case "1":
                    player = new Knight();
                    mode = GameMode.Town;
                    break;
                case "2":
                    player = new Archer();
                    mode = GameMode.Town;
                    break;
                case "3":
                    player = new Mage();
                    mode = GameMode.Town;
                    break;
            }
        }

        private void ProcessTown()
        {
            Console.WriteLine("ë§ˆì„ì— ì…ì¥ í–ˆìŠµë‹ˆë‹¤.");
            Console.WriteLine("[1] í•„ë“œë¡œ ê°„ë‹¤.");
            Console.WriteLine("[2] ë¡œë¹„ë¡œ ëŒì•„ê°€ê¸°.");

            string input = Console.ReadLine();

            switch (input)
            {
                case "1":
                    mode = GameMode.Field;
                    break;
                case "2":
                    mode = GameMode.Lobby;
                    break;
            }
        }

        private void ProcessField()
        {
            Console.WriteLine("í•„ë“œì— ì…ì¥ í–ˆìŠµë‹ˆë‹¤.");
            Console.WriteLine("[1] ì „íˆ¬ ëª¨ë“œ ëŒì…");
            Console.WriteLine("[2] ì¼ì • í™•ë¥ ë¡œ ë§ˆì„ë¡œ ë„ë§");

            CreateRandomMonster();

            string input = Console.ReadLine();

            switch (input)
            {
                case "1":
                    ProcessFight();
                    break;
                case "2":
                    TryEscape();
                    break;
            }
        }

        private void CreateRandomMonster()
        {
            int randValue = rand.Next(0, 3);

            switch (randValue)
            {
                case 0:
                    monster = new Slime();
                    Console.WriteLine("ìŠ¬ë¼ì„ì´ ìŠ¤í° ë˜ì—ˆìŠµë‹ˆë‹¤!");
                    break;
                case 1:
                    monster = new Orc();
                    Console.WriteLine("ì˜¤í¬ê°€ ìŠ¤í° ë˜ì—ˆìŠµë‹ˆë‹¤!");
                    break;
                case 2:
                    monster = new Skeleton();
                    Console.WriteLine("ìŠ¤ì¼ˆë ˆí†¤ì´ ìŠ¤í° ë˜ì—ˆìŠµë‹ˆë‹¤!");
                    break;
            }
        }

        private void ProcessFight()
        {
            while(true)
            {
                int damage = player.GetAttack();
                monster.OnDamaged(damage);
                if (monster.IsDead())
                {
                    Console.WriteLine("ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤!");
                    Console.WriteLine($"ë‚¨ì€ ì²´ë ¥ : {player.GetHP()}");
                    break;
                }
                damage = monster.GetAttack();
                player.OnDamaged(damage);
                if (player.IsDead())
                {
                    Console.WriteLine("íŒ¨ë°°í–ˆìŠµë‹ˆë‹¤!");
                    mode = GameMode.Lobby;
                    break;
                }
            }
        }

        private void TryEscape()
        {
            int randValue = rand.Next(0, 101);
            if (randValue <= 33)
                mode = GameMode.Town;
            else
                ProcessFight();
        }
    }
}
```

<br>

### ğŸ“œProgram.cs

```c#
using System;

namespace CSharp
{
    class Program
    {
        static void Main(string[] args)
        {
            Game game = new Game();

            while(true)
            {
                game.Process();
            }
        }
    }
}
```

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}