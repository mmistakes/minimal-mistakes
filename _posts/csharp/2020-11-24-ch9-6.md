---
title:  "Chapter 9-6. ê¸°íƒ€ë¬¸ë²• : Lambda(ëŒë‹¤ì‹) + Func, Action" 

categories:
  -  C Sharp
tags:
  - [Programming, C Sharp]

toc: true
toc_sticky: true

date: 2020-11-24
last_modified_at: 2020-11-24
---

ì¸í”„ëŸ°ì— ìˆëŠ” Rookissë‹˜ì˜ ê°•ì˜ **Part1: C# ê¸°ì´ˆ í”„ë¡œê·¸ë˜ë° ì…ë¬¸** ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
{: .notice--warning}


## ğŸ‘©ğŸ¼ ëŒë‹¤ì‹

> ìµëª…ì˜ ì¼íšŒìš© í•¨ìˆ˜ë¥¼ ë§Œë“œëŠ”ë° ì‚¬ìš©í•˜ëŠ” ë¬¸ë²•

### ìµëª… í•¨ìˆ˜ê°€ í•„ìš”í•œ ì´ìœ 

```c#
    enum ItemType // ì•„ì´í…œ íƒ€ì…
    {
        Weapon,
        Armor,
        Amulet,
        Ring
    }

    enum Rarity // ë ˆì–´í•œ ì •ë„
    {
        Normal,
        Uncommon,
        Rare,
    }

    class Item
    {
        public ItemType ItemType;
        public Rarity Rarity;
    }
```
```c#
        static Item FindWeapon()
        {
            foreach (Item item in _items)
            {
                if (item.ItemType == ItemType.Weapon)
                    return item;
            }
            return null;
        }

        static Item FindRareItem()
        {
            foreach (Item item in _items)
            {
                if (item.Rarity == Rarity.Rare)
                    return item;
            }
            return null;
        }

        static List<Item> _items = new List<Item>();

        static void Main(string[] args)
        {
            _items.Add(new Item() { ItemType = ItemType.Weapon, Rarity = Rarity.Normal });
            _items.Add(new Item() { ItemType = ItemType.Armor, Rarity = Rarity.Uncommon });
            _items.Add(new Item() { ItemType = ItemType.Ring, Rarity = Rarity.Rare });

            //Item item = FindItem(IsWeapon);
            Item item = FindWeapon();
            Item item2 = FindRareItem();
        }
```

- ì•„ì´í…œ ìƒì„±
  - ì•„ë˜ì™€ ê°™ì´ ìµëª… ê°ì²´ë¥¼ ë§Œë“¤ì–´ ë¦¬ìŠ¤íŠ¸ ì›ì†Œë“¤ë¡œì„œ ë„£ì–´ì¤„ ìˆ˜ ìˆë‹¤.
  - ìµëª… ê°ì²´ë¥¼ ìƒì„±í•¨ê³¼ ë™ì‹œì— `new Item()`, ì¤‘ê´„í˜¸ `{}`ë¡œ ê°ì²´ì˜ ë©¤ë²„ ë³€ìˆ˜ë“¤ì„ ì´ˆê¸°í™” ì‹œì¼œì¤„ ìˆ˜ë„ ìˆë‹¤. C#ì—ì„œ ê°€ëŠ¥í•œ ë¬¸ë²•ì¸ë“¯ í•˜ë‹¤.
    ```c#
    _items.Add(new Item() { ItemType = ItemType.Weapon, Rarity = Rarity.Normal });
    _items.Add(new Item() { ItemType = ItemType.Armor, Rarity = Rarity.Uncommon });
    _items.Add(new Item() { ItemType = ItemType.Ring, Rarity = Rarity.Rare });
    ```
- íŠ¹ì • íƒ€ì…ì˜ ì•„ì´í…œì„ ì°¾ê¸° ìœ„í•´ì„  
  - `FindWeapon()`, `FindRareItem()` ë“±ë“± ì´ëŸ° í•¨ìˆ˜ë“¤ì„ ì•„ì´í…œ ì¢…ë¥˜ë³„ë¡œ ì—¬ëŸ¬ê°œ ì •ì˜í•´ì•¼ í•œë‹¤. 
    - forë¬¸ì„ ëŒë ¤ í•´ë‹¹ íƒ€ì…ì˜ ì•„ì´í…œì„ ì°¾ìœ¼ë©´ ë¦¬í„´í•´ì£¼ëŠ” ë‚´ìš©ë„ ë‹¤ ë¹„ìŠ·í•˜ë‹¤.
  - ì•„ì´í…œ ì¢…ë¥˜ê°€ ìˆ˜ì‹­ê°€ì§€ ë°±ê°€ì§€ë¼ë©´ ì•„ì´í…œ ì¢…ë¥˜ë§ˆë‹¤ ì´ëŸ° í•¨ìˆ˜ë“¤ì„ ë‹¤ ë§Œë“¤ì–´ ì£¼ì–´ì•¼ í•˜ë¯€ë¡œ ë„ˆë¬´ ë¹„íš¨ìœ¨ì ì´ë‹¤.

```c#

        delegate bool ItemSelector(Item item);

        static bool IsWeapon(Item item)
        {
            return item.ItemType == ItemType.Weapon;
        }

        static Item FindItem(ItemSelector selector)
        {
            foreach (Item item in _items)
            {
                if (selector(item))
                    return item;
            }
            return null;
        }

        static List<Item> _items = new List<Item>();

        static void Main(string[] args)
        {
            _items.Add(new Item() { ItemType = ItemType.Weapon, Rarity = Rarity.Normal });
            _items.Add(new Item() { ItemType = ItemType.Armor, Rarity = Rarity.Uncommon });
            _items.Add(new Item() { ItemType = ItemType.Ring, Rarity = Rarity.Rare });

            Item item = FindItem(IsWeapon);
        }
``` 

- ë¦¬í„´íƒ€ì…ì€ `bool`, ë§¤ê°œ ë³€ìˆ˜ëŠ” `Item`ì¸ í•¨ìˆ˜ë“¤ì„ ë“±ë¡í•  ìˆ˜ ìˆëŠ” `ItemSelector` ë¸ë¦¬ê²Œì´íŠ¸ë¥¼ ë§Œë“ ë‹¤.
- `ItemSelector` ë¸ë¦¬ê²Œì´íŠ¸ë¥¼ ì¸ìˆ˜ë¡œ ë°›ëŠ” í•¨ìˆ˜ `FindItem`ë¥¼ ì •ì˜í•œë‹¤.
  - `ItemSelector` ë¸ë¦¬ê²Œì´íŠ¸ì— ì–´ë–¤ í•¨ìˆ˜ê°€ ë“±ë¡ë˜ëŠëƒì— ë”°ë¼ `if (selector(item))` ì´ í•œ ì¤„ì´ ë‹¤ë¥´ê²Œ ê¸°ëŠ¥í•œë‹¤.
- ì•„ì´í…œì´ ë¬´ê¸° íƒ€ì…ì´ë¼ë©´ trueë¥¼ ë¦¬í„´í•˜ëŠ” `IsWeapon` í•¨ìˆ˜ë¥¼ `FindItem` í•¨ìˆ˜ì˜ ë§¤ê°œ ë³€ìˆ˜(ë¸ë¦¬ê²Œì´íŠ¸)ì—ê²Œ ë„˜ê¸°ë©´ `FindItem` ë¬´ê¸°ì¸ ì•„ì´í…œì„ ë¦¬í„´í•˜ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ ë™ì‘í•˜ê²Œ ë˜ì„œ í¸í•˜ë‹¤.

ê·¸ëŸ¬ë‚˜ ì—¬ì „íˆ ë¶ˆí¸í•œ ì ì´ ìˆë‹¤. ë§Œì•½ `FindItem` ì•„ì´í…œ ì°¾ëŠ” í–‰ë™ì„ í•œ ë‘ë²ˆë°–ì— ì•ˆí• ê±°ë¼ë©´ ì´ í•œë‘ë²ˆì„ ìœ„í•´ì„œ `IsWeapon`, `IsArmor` ê°™ì€ ì—¬ëŸ¬ê°€ì§€ í•¨ìˆ˜ë¥¼ ë˜ ë§Œë“¤ì–´ì•¼ í•œë‹¤. `FindItem` í•¨ìˆ˜ì— í•„ìš”í•œ ë¸ë¦¬ê²Œì´íŠ¸ì— ë“±ë¡í•´ì•¼í•˜ê¸° ë•Œë¬¸ì´ë‹¤. í•œ ë‘ë²ˆ ë°–ì— ì•ˆì“¸ê±´ë° ì´ í•œë²ˆ ë•Œë¬¸ì— ì—¬ëŸ¬ê°€ì§€ í•¨ìˆ˜ë¥¼ ì •ì˜í•´ë†”ì•¼ í•˜ëŠ”ê²Œ ë¹„íš¨ìœ¨ì ì´ë‹¤. **<u>í•¨ìˆ˜ë¥¼ ì •ì˜í•´ë‘ì§€ ì•Šê³  ê·¸ëƒ¥ ìµëª… í•¨ìˆ˜ë¡œì„œ ì¸ìˆ˜ë¡œ ë„˜ê¸°ë©´, ì¦‰ ì¼íšŒìš©ìœ¼ë¡œ ì ê¹ ì“°ê³  ë²„ë¦´ í•¨ìˆ˜ë¡œì„œ ì¸ìˆ˜ì—ì„œë§Œ ì •ì˜í•´ì„œ ë„˜ê¸°ë©´ ë” í¸í•  ê²ƒì´ë‹¤. í•¨ìˆ˜ë¥¼ ì¼ì¼ì´ ì •ì˜í•  í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.</u>**

<br>

### ìµëª… í•¨ìˆ˜ì˜ ì‚¬ìš©

#### 1ï¸âƒ£ delegateë¥¼ ë³€ìˆ˜ë¡œ ì„ ì–¸í•˜ê³  ê·¸ ë³€ìˆ˜ë¡œ ìµëª… í•¨ìˆ˜ ì°¸ì¡°í•˜ê²Œ í•˜ê¸° 

```c#
        delegate bool ItemSelector(Item item);

        static Item FindItem(ItemSelector selector)
        {
            foreach (Item item in _items)
            {
                if (selector(item))
                    return item;
            }
            return null;
        }

        static void Main(string[] args)
        {
            _items.Add(new Item() { ItemType = ItemType.Weapon, Rarity = Rarity.Normal });
            _items.Add(new Item() { ItemType = ItemType.Armor, Rarity = Rarity.Uncommon });
            _items.Add(new Item() { ItemType = ItemType.Ring, Rarity = Rarity.Rare });

            Item item = FindItem(delegate (Item i) { return i.ItemType == ItemType.Weapon; });
            ItemSelector itemSelector = delegate (Item i) 
                                        { 
                                            return i.ItemType == ItemType.Weapon; 
                                        }   
        }
```
```c#
// ì¸ìˆ˜ë¡œ ì „ë‹¬
Item item = FindItem(delegate (Item i) { return i.ItemType == ItemType.Weapon; });
// ì¸ìˆ˜ë¡œ ì „ë‹¬ X
ItemSelector itemSelector = delegate (Item i) 
                            { 
                                return i.ItemType == ItemType.Weapon; 
                            }
```

ë‹¹ì—°íˆ ì „ë‹¬í•˜ë ¤ëŠ” ë¸ë¦¬ê²Œì´íŠ¸ì˜ í˜•ì‹ê³¼ ìµëª… í•¨ìˆ˜ì˜ í˜•ì‹ì€ ê°™ì•„ì•¼ í•œë‹¤. ë¸ë¦¬ê²Œì´íŠ¸ `ItemSelector` í˜•ì‹ì€ `Item`íƒ€ì…ì˜ ì¸ìˆ˜ë¥¼ ë°›ê³  `bool` íƒ€ì…ì„ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ë‹¤. ìµëª… í•¨ìˆ˜ë„ ì´ì™€ ê°™ì€ í˜•ì‹ì´ì–´ì•¼ í•œë‹¤. ìµëª… í•¨ìˆ˜ë¥¼ ë¸ë¦¬ê²Œì´íŠ¸ì— ì „ë‹¬í•  ë•ŒëŠ” `delegate (ìµëª… í•¨ìˆ˜ì˜ ë§¤ê°œ ë³€ìˆ˜ ì„ ì–¸) { ìµëª… í•¨ìˆ˜ ë‚´ìš© }` í˜•íƒœë¡œ ë„˜ê¸°ë©´ ëœë‹¤. ìœ„ ì½”ë“œì—ì„  ë¬´ê¸° íƒ€ì…ì˜ ì•„ì´í…œì´ë©´ True ë¥¼ ë¦¬í„´í•˜ëŠ” ê¸°ì¡´ `IsWeapon`ì™€ ë™ì¼í•œ ë‚´ìš©ì„ ê°€ì§€ëŠ” ìµëª… í•¨ìˆ˜ë¥¼ ë§Œë“¤ì—ˆë‹¤.

<br>

#### 2ï¸âƒ£ ëŒë‹¤ì‹ ì‚¬ìš©

```c#
        delegate bool ItemSelector(Item item);

        static Item FindItem(ItemSelector selector)
        {
            foreach (Item item in _items)
            {
                if (selector(item))
                    return item;
            }
            return null;
        }

        static void Main(string[] args)
        {
            _items.Add(new Item() { ItemType = ItemType.Weapon, Rarity = Rarity.Normal });
            _items.Add(new Item() { ItemType = ItemType.Armor, Rarity = Rarity.Uncommon });
            _items.Add(new Item() { ItemType = ItemType.Ring, Rarity = Rarity.Rare });

            Item item = FindItem((Item i) => { return i.ItemType == ItemType.Weapon; });
            ItemSelector itemSelector = (Item i) => { return i.ItemType == ItemType.Weapon; };
        }
```
```c#

Item item = FindItem((Item i) => { return i.ItemType == ItemType.Weapon; });
```
```c#
ItemSelector selector = (Item i) => { return i.ItemType == ItemType.Weapon; };
// í˜¹ì€ ItemSelector selector = new ItemSelector((Item i) => { return i.ItemType == ItemType.Weapon; });
Item item = FindItem(selector);
```

ìµëª… í•¨ìˆ˜ë¥¼ ëŒë‹¤ì‹ìœ¼ë¡œ ì •ì˜í•  ìˆ˜ë„ ìˆë‹¤. `(ìµëª… í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ ì„ ì–¸) => { ìµëª…í•¨ìˆ˜ ë‚´ìš© }` ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì´ê²Œ ëŒë‹¤ì‹ì´ë‹¤! ë§ˆì°¬ê°€ì§€ë¡œ ìµëª…í•¨ìˆ˜ëŠ” ì „ë‹¬í•˜ë ¤ëŠ” ë¸ë¦¬ê²Œì´íŠ¸ì™€ í˜•ì‹ì´ ë™ì¼í•´ì•¼ í•œë‹¤.

<br>

### ë¸ë¦¬ê²Œì´íŠ¸ ì¼ë°˜í™”

```c#
        delegate Return MyFunc<T, Return>(T item);

        static Item FindItem(MyFunc<Item, bool> selector)
        {
            foreach (Item item in _items)
            {
                if (selector(item))
                    return item;
            }
            return null;
        }

        static List<Item> _items = new List<Item>();

        static void Main(string[] args)
        {
            _items.Add(new Item() { ItemType = ItemType.Weapon, Rarity = Rarity.Normal });
            _items.Add(new Item() { ItemType = ItemType.Armor, Rarity = Rarity.Uncommon });
            _items.Add(new Item() { ItemType = ItemType.Ring, Rarity = Rarity.Rare });

            MyFunc<Item, bool> selector = new MyFunc<Item, bool>((Item i) => { return i.ItemType == ItemType.Weapon; });
            Item item = FindItem(selector);
        }
```

- `delegate`ë„ ì¼ë°˜í™”(Generic) í•  ìˆ˜ ìˆë‹¤. ë¸ë¦¬ê²Œì´íŠ¸ `MyFunc`ëŠ” ë¦¬í„´ íƒ€ì… `Return`ë„ ì¼ë°˜í™” í•˜ì˜€ê³  ë§¤ê°œ ë³€ìˆ˜ì˜ íƒ€ì… `T`ë„ ì¼ë°˜í™” í•œ ë¸ë¦¬ê²Œì´íŠ¸ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.
  - `selector` ë¸ë¦¬ê²Œì´íŠ¸ë¥¼ ìƒì„±í•¨ê³¼ ë™ì‹œì— *(Item i) => { return i.ItemType == ItemType.Weapon; }* ë¥¼ ìˆ˜í–‰í•˜ëŠ” ìµëª… í•¨ìˆ˜ë¥¼ ëŒë‹¤ì‹ìœ¼ë¡œ ë“±ë¡í•˜ì˜€ë‹¤. 
    ```c#
    delegate Return MyFunc<T, Return>(T item);  // í˜•ì‹ ì¼ë°˜í™”

    ... 

    MyFunc<Item, bool> selector = new MyFunc<Item, bool>((Item i) => { return i.ItemType == ItemType.Weapon; });
    Item item = FindItem(selector);
    ```

#### Func

> ë¯¸ë¦¬ C# ë‚´ì—ì„œ ì„ ì–¸ì´ ë˜ì–´ ìˆëŠ” ë¸ë¦¬ì¼€ì´íŠ¸ë¡œ, <u>ë¦¬í„´ íƒ€ì…ì´ ì¡´ì¬í•˜ëŠ”</u> í•¨ìˆ˜ë§Œì„ ë“±ë¡í•  ìˆ˜ ìˆëŠ” ì œë„¤ë¦­ ë¸ë¦¬ê²Œì´íŠ¸ì´ë‹¤.

C# ì—ì„œ ì§€ì›í•˜ëŠ” ë¸ë¦¬ê²Œì´íŠ¸ê¸° ë–„ë¬¸ì— ì§ì ‘ ì œë„¤ë¦­ ë¸ë¦¬ê²Œì´íŠ¸ë¥¼ ì„ ì–¸í•  í•„ìš”ê°€ ì—†ë‹¤. ë¬´ì¡°ê±´ ë¦¬í„´ íƒ€ì…ì´ ì¡´ì¬í•˜ëŠ” í•¨ìˆ˜ë§Œ ë“±ë¡í•  ìˆ˜ ìˆë‹¤. **ìµëª… í•¨ìˆ˜ ë¿ë§Œ ì•„ë‹ˆë¼ ì¼ë°˜ í•¨ìˆ˜ë„ ë“±ë¡í•  ìˆ˜ ìˆë‹¤.**

```c#
        static Item FindItem(Func<Item, bool> selector)
        {
            foreach (Item item in _items)
            {
                if (selector(item))
                    return item;
            }
            return null;
        }

        static List<Item> _items = new List<Item>();

        static void Main(string[] args)
        {
            _items.Add(new Item() { ItemType = ItemType.Weapon, Rarity = Rarity.Normal });
            _items.Add(new Item() { ItemType = ItemType.Armor, Rarity = Rarity.Uncommon });
            _items.Add(new Item() { ItemType = ItemType.Ring, Rarity = Rarity.Rare });

            Func<Item, bool> selector = (Item i) => { return i.ItemType == ItemType.Weapon; };
            Item item = FindItem(selector);
        }
```

`Func<ë§¤ê°œë³€ìˆ˜1ì˜íƒ€ì…, ë§¤ê°œë³€ìˆ˜2ì˜íƒ€ì…, ...>` ìœ¼ë¡œ êµ¬ì²´í™”í•˜ë©´ ëœë‹¤.

<br>

#### Action


> ë¯¸ë¦¬ C# ë‚´ì—ì„œ ì„ ì–¸ì´ ë˜ì–´ ìˆëŠ” ë¸ë¦¬ì¼€ì´íŠ¸ë¡œ, <u>ë¦¬í„´ íƒ€ì…ì´ ì—†ëŠ”</u> í•¨ìˆ˜ë§Œì„ ë“±ë¡í•  ìˆ˜ ìˆëŠ” ì œë„¤ë¦­ ë¸ë¦¬ê²Œì´íŠ¸ì´ë‹¤.

ë¦¬í„´ íƒ€ì…ì´ ì—†ëŠ” í•¨ìˆ˜ë§Œ ë“±ë¡í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒ ë§ê³ ëŠ” `Func`ì™€ ë™ì¼í•˜ë‹¤.

```c#
Action<Item> selector = (Item i) => { Console.WriteLine(i.ItemType == ItemType.Weapon) };
```

`Action<ë§¤ê°œë³€ìˆ˜1ì˜íƒ€ì…, ë§¤ê°œë³€ìˆ˜2ì˜íƒ€ì…, ...>` ìœ¼ë¡œ êµ¬ì²´í™”í•˜ë©´ ëœë‹¤.


```c#
	public static void BindEvent(GameObject go, Action<PointerEventData> action, Define.UIEvent type = Define.UIEvent.Click)
	{
		UI_EventHandler evt = Util.GetOrAddComponent<UI_EventHandler>(go);

		switch (type)
		{
			case Define.UIEvent.Click:
				evt.OnClickHandler -= action; // í˜¹ì‹œë‚˜ ì´ë¯¸ ìˆì„ê¹Œë´ ë¹¼ì¤Œ
				evt.OnClickHandler += action;
				break;
			case Define.UIEvent.Drag:
				evt.OnDragHandler -= action; // í˜¹ì‹œë‚˜ ì´ë¯¸ ìˆì„ê¹Œë´ ë¹¼ì¤Œ
				evt.OnDragHandler += action;
				break;
		}
	}
```

1. ì•¡ì…˜(ì´ë²¤íŠ¸)ì— ì•¡ì…˜(ì´ë²¤íŠ¸)ì„ ë”í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.
2. ë§Œì•½ ì´ë²¤íŠ¸ì— í•´ë‹¹ í•¨ìˆ˜ê°€ ì—†ëŠ”ë°ë„ ë¹¼ë ¤í•˜ëŠ”ê±´ ì—ëŸ¬ ì•ˆë‚œë‹¤. ê·¸ëƒ¥ ë¬´ì‹œë  ë¿!
  - `OnClickHandler`ì— `action`ì´ ì—†ë”ë¼ë„ ë¹¼ëŠ”ê²Œ ì—ëŸ¬ê°€ ì•ˆë‚œë‹¤. ê·¸ëƒ¥ ë¬´ì‹œëœë‹¤.
  - ë§Œì•½ `action`ì´ `OnClickHandler`ì— ì´ë¯¸ ë“±ë¡ë˜ì–´ ìˆë‹¤ë©´ ì œê±°ë  ê²ƒì´ë‹¤.


***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}