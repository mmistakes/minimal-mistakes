---
title:  "Chapter 9-5. ê¸°íƒ€ë¬¸ë²• : Event(ì´ë²¤íŠ¸)" 

categories:
  -  C Sharp
tags:
  - [Programming, C Sharp]

toc: true
toc_sticky: true

date: 2020-11-24
last_modified_at: 2020-11-24
---

ì¸í”„ëŸ°ì— ìˆëŠ” Rookissë‹˜ì˜ ê°•ì˜ **Part1: C# ê¸°ì´ˆ í”„ë¡œê·¸ë˜ë° ì…ë¬¸** ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
{: .notice--warning}


## ğŸ‘©ğŸ¼ Event

### delegateì˜ í•œê³„

```c#
        delegate int OnClicked();

        static void ButtonPressed(OnClicked clickedFunction)  
        {
            clickedFunction(); 
        }

        static void Main(string[] args)
        {
            OnClicked clicked = new OnClicked(Test);
            clicked += Test2; // chaining
            clicked();

            ButtonPressed(clicked); 

            clicked();
        }
```

ë¸ë¦¬ê²Œì´íŠ¸ í˜•ì‹ `OnClicked`ë¥¼ ì˜¤ì§ ButtonPressed í•¨ìˆ˜ ì•ˆì—ì„œë§Œ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ `clickedFunction();` ë§Œë“¤ì—ˆì„ ìˆ˜ë„ ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ìƒê´€ ì—†ëŠ”, ê·¸ë¦¬ê³  ì™¸ë¶€ì¸ ë©”ì¸ í•¨ìˆ˜ ì•ˆì—ì„œë„ `clicked();` ì´ë ‡ê²Œ ë¸ë¦¬ê²Œì´íŠ¸ë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤ëŠ” ë¬¸ì œê°€ ìˆë‹¤.

<br>

### Event 

> `event`ëŠ” `delegate`ì™€ ë‹¬ë¦¬ <u>ì´ë²¤íŠ¸ì™€ ê°™ì€ í´ë˜ìŠ¤ ì•ˆì—ì„œë§Œ ì´ë²¤íŠ¸ í˜¸ì¶œì´ ê°€ëŠ¥í•˜ë‹¤.</u>

ì™¸ë¶€ì—ì„  ì˜¤ì§ ì´ë²¤íŠ¸ì— í•¨ìˆ˜ ë“±ë¡ë§Œ í•´ë†“ì„ ìˆ˜ ìˆìœ¼ë©° ì´ë²¤íŠ¸ê°€ ì •ì˜ëœ <u>í´ë˜ìŠ¤ ì™¸ë¶€ì—ì„œëŠ” ì´ë²¤íŠ¸ë¥¼ í˜¸ì¶œí•  ìˆ˜ëŠ” ì—†ë‹¤.</u> ì´ê²ƒì´ ë¸ë¦¬ê²Œì´íŠ¸ì™€ì˜ ì°¨ì´ì ! 

#### ğŸ“œInputManager (ê°™ì€ í´ë˜ìŠ¤)

> í‚¤ë³´ë“œ ë§ˆìš°ìŠ¤ ì…ë ¥ì„ ìºì¹˜í•´ì„œ ê²Œì„ ë¡œì§ì— ì´ë¥¼ ì „ë‹¬í•˜ëŠ” ì—­í• ë¡œ ì •ì˜í•œ í´ë˜ìŠ¤ë‹¤.

```c#
using System;
using System.Collections.Generic;
using System.Text;

namespace CSharp
{
    class InputManager
    {
        public delegate void OnInputKey();
        public event OnInputKey InputKey;  // public ì ‘ê·¼ í•œì •ìê¹Œì§€ ë˜‘ê°™ì´ ë§ì¶°ì£¼ì–´ì•¼ í•¨

        public void Update()
        {
            if (Console.KeyAvailable == false)
                return;

            ConsoleKeyInfo info = Console.ReadKey();
            if (info.Key == ConsoleKey.A)  // A í‚¤ê°€ ëˆŒë¦¬ë©´ ì´ë²¤íŠ¸ í˜¸ì¶œ
            {
                InputKey();  // êµ¬ë…ìë“¤ì—ê²Œ ë©”ì„¸ì§€ ë¿Œë¦¬ê¸° ğŸ‘‰ ì˜µì €ë²„ íŒ¨í„´
            }
        }
    }
}
```
```
Console.KeyAvailable ğŸ‘‰ Keyë¥¼ ëˆ„ë¥¼ ìˆ˜ ìˆëŠ” ìƒíƒœë¼ë©´ True ë¦¬í„´, Keyë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìœ¼ë©´ False ë¦¬í„´.
Console.ReadKey() ğŸ‘‰ ì‚¬ìš©ìê°€ ì…ë ¥í•œ Keyë¥¼ ì½ì–´ë“¤ì—¬ ConsoleKeyInfo íƒ€ì…ìœ¼ë¡œ ë¦¬í„´í•œë‹¤.
```

- ì´ë²¤íŠ¸ ì •ì˜í•˜ê¸°
  - 1ï¸âƒ£ ë¨¼ì € `delegate` í˜•ì‹ë¶€í„° ì •ì˜í•œë‹¤. (ì´ë²¤íŠ¸ì— ë“±ë¡í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ í˜•ì‹ìœ¼ë¡œ ì“¸ ê²ƒì´ë‹¤.)
    ```c#
    public delegate void OnInputKey(); // ë§¤ê°œ ë³€ìˆ˜ ì—†ê³  ë¦¬í„´ íƒ€ì… ì—†ëŠ” í•¨ìˆ˜ë§Œ ë“±ë¡ ê°€ëŠ¥í•œ í˜•ì‹
    ```
  - 2ï¸âƒ£ ìœ„ì—ì„œ ë§Œë“  `delegate` í˜•ì‹ì„ ê°€ì§€ëŠ”(= íƒ€ì…ì´ í•´ë‹¹ `delegate`ì¸) ì´ë²¤íŠ¸ë¥¼ ì •ì˜í•œë‹¤. *ì ‘ê·¼ í•œì •ì + event + ë¸ë¦¬ê²Œì´íŠ¸ ì´ë¦„ + ì´ë²¤íŠ¸ ì´ë¦„*
    ```c#
    public event OnInputKey InputKey; // ì´ ì´ë²¤íŠ¸ì˜ íƒ€ì…ì€ OnInputKey ë¸ë¦¬ê²Œì´íŠ¸
    ```
  - <u>ë¸ë¦¬ê²Œì´íŠ¸ì™€ ê·¸ ë¸ë¦¬ê²Œì´íŠ¸ë¥¼ íƒ€ì…ìœ¼ë¡œ í•˜ì—¬ ì •ì˜í•œ ì´ë²¤íŠ¸ëŠ” ë‘˜ ë‹¤ ì ‘ê·¼ í•œì •ìê°€ ë™ì¼í•´ì•¼ í•œë‹¤.</u> ë‘˜ ë‹¤ `public`ìœ¼ë¡œ ë™ì¼í•˜ì—¬ ë¬¸ì œ ì—†ìŒ.
- ì‚¬ìš©ìê°€ ì…ë ¥í•œ Keyê°€ `A`ë¼ë©´ ì´ë²¤íŠ¸ë¥¼ í˜¸ì¶œ(ì‹¤í–‰)í•œë‹¤. <u>ê°™ì€ í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ ì‹¤í–‰ì‹œí‚¤ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ë¬¸ì œ ì—†ë‹¤.</u>
  - ğŸ“œInputManager í´ë˜ìŠ¤ ì™¸ë¶€ì˜ ì´ê³³ ì €ê³³ì—ì„œ ì´ ì´ë²¤íŠ¸ì— í•¨ìˆ˜ë¥¼ ë“±ë¡í•˜ê³  ì´ ì´ë²¤íŠ¸ì— ë“±ë¡ëœ í•¨ìˆ˜ê°€ ë¬´ì—‡ì¸ì§€ ì•Œ í•„ìš” ì—†ì´ ê·¸ì € ğŸ“œInputManager í´ë˜ìŠ¤ë‚´ì—ì„œ ì´ë¥¼ ì‹¤í–‰ë§Œ í•˜ë©´ ë  ë¿ì´ë‹¤.
  - ì´ì™€ ê°™ì´ êµ¬ë…ì(ë“±ë¡ëœ í•¨ìˆ˜ë“¤)ë“¤ì—ê²Œ ë©”ì„¸ì§€ë¥¼ ë¿Œë¦¬ëŠ” ë””ìì¸ íŒ¨í„´ì„ **ì˜µì €ë²„ íŒ¨í„´**ì´ë¼ê³  í•œë‹¤.
    ```c#
    if (info.Key == ConsoleKey.A) 
    {
        InputKey();  // êµ¬ë…ìë“¤ì—ê²Œ ë©”ì„¸ì§€ ë¿Œë¦¬ê¸° ğŸ‘‰ ì˜µì €ë²„ íŒ¨í„´
    }
    ```

<br>

#### ğŸ“œProgram (ì™¸ë¶€. ë©”ì¸ í•¨ìˆ˜ ìˆìŒ)

```c#
using System;
using System.Collections.Generic;

namespace CSharp
{
    class Program
    {
        static void OnInputTest()
        {
            Console.WriteLine("Input Received!");
        }

        static void Main(string[] args)
        {
            InputManager inputManager = new InputManager();
            inputManager.InputKey += OnInputTest;

            while (true)
            {
                inputManager.Update();
            }

            // inputManager.InputKey(); ì»´íŒŒì¼ ì—ëŸ¬! ì™¸ë¶€ì—ì„œ í˜¸ì¶œ ë¶ˆê°€ëŠ¥
        }
    }
}
```

- ì´ë²¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ğŸ“œInputManager íƒ€ì…ì˜ ê°ì²´ë¥¼ ë§Œë“¤ì–´ `inputManager`ì—ì„œ ì´ë¥¼ ì°¸ì¡°í•œë‹¤.
- ì´ë²¤íŠ¸ì— `OnInputTest()` í•¨ìˆ˜ë¥¼ ë“±ë¡í•œë‹¤.
  ```c#
  inputManager.InputKey += OnInputTest;
  ```
- ì—¬ê¸°ëŠ” ğŸ“œInputManager í´ë˜ìŠ¤ì˜ ì™¸ë¶€ë¼ì„œ ì´ë²¤íŠ¸ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ(`inputManager.InputKey();`ëŠ” ì»´íŒŒì¼ ì—ëŸ¬) ì´ ì´ë²¤íŠ¸ë¥¼ í˜¸ì¶œí•˜ëŠ” ğŸ“œInputManagerì˜ ë©¤ë²„ í•¨ìˆ˜ `inputManager.Update();`ë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ ëœë‹¤!
  - ì§ì ‘ ì´ ì•ˆì—ì„œ ì…ë ¥ì´ ë“¤ì–´ì˜¤ë©´ ì‹¤í–‰ì‹œí‚¬ í•¨ìˆ˜ë“¤ì„ êµ¬êµ¬ì ˆì ˆ ë‚˜ì—´í•˜ê³  ì§ì ‘ í˜¸ì¶œí•´ì¤„ í•„ìš”ê°€ ì—†ì´ `inputManager.Update();`ë§Œ ì‹¤í–‰ì‹œì¼œì£¼ë©´ ë•¡ì´ë‹¤! 

***ê²°ë¡ ! ë¸ë¦¬ê²Œì´íŠ¸ì™€ ì´ë²¤íŠ¸ëŠ” ê¸°ëŠ¥ì€ ë™ì¼í•˜ë‚˜ ì°¨ì´ì ì€ ğŸ‘‰ ë¸ë¦¬ê²Œì´íŠ¸ì™€ ë‹¬ë¦¬ ì´ë²¤íŠ¸ëŠ” í´ë˜ìŠ¤ ì™¸ë¶€ì—ì„œëŠ” ì´ë²¤íŠ¸ë¥¼ í˜¸ì¶œí•  ìˆ˜ëŠ” ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤.***

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}